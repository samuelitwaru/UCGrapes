<<<<<<< HEAD
(()=>{var t={2:(t,e,n)=>{var i=n(2199),r=n(4664),s=n(5950);t.exports=function(t){return i(t,s,r)}},79:(t,e,n)=>{var i=n(3702),r=n(80),s=n(4739),o=n(8655),a=n(1175);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,t.exports=l},80:(t,e,n)=>{var i=n(6025),r=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=i(e,t);return!(n<0||(n==e.length-1?e.pop():r.call(e,n,1),--this.size,0))}},104:(t,e,n)=>{var i=n(3661);function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(r.Cache||i),n}r.Cache=i,t.exports=r},181:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},270:(t,e,n)=>{var i=n(7068),r=n(346);t.exports=function t(e,n,s,o,a){return e===n||(null==e||null==n||!r(e)&&!r(n)?e!=e&&n!=n:i(e,n,s,o,t,a))}},289:(t,e,n)=>{var i=n(2651);t.exports=function(t){return i(this,t).get(t)}},294:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},317:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}},346:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},361:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var i=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==i||"symbol"!=i&&e.test(t))&&t>-1&&t%1==0&&t<n}},392:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},426:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t,n){return null!=t&&e.call(t,n)}},583:(t,e,n)=>{var i=n(7237),r=n(7255),s=n(8586),o=n(7797);t.exports=function(t){return s(t)?i(o(t)):r(t)}},631:(t,e,n)=>{var i=n(8077),r=n(9326);t.exports=function(t,e){return null!=t&&r(t,e,i)}},641:(t,e,n)=>{var i=n(6649),r=n(5950);t.exports=function(t,e){return t&&i(t,e,r)}},659:(t,e,n)=>{var i=n(1873),r=Object.prototype,s=r.hasOwnProperty,o=r.toString,a=i?i.toStringTag:void 0;t.exports=function(t){var e=s.call(t,a),n=t[a];try{t[a]=void 0;var i=!0}catch(t){}var r=o.call(t);return i&&(e?t[a]=n:delete t[a]),r}},689:(t,e,n)=>{var i=n(2),r=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,s,o,a){var l=1&n,c=i(t),d=c.length;if(d!=i(e).length&&!l)return!1;for(var u=d;u--;){var h=c[u];if(!(l?h in e:r.call(e,h)))return!1}var p=a.get(t),f=a.get(e);if(p&&f)return p==e&&f==t;var g=!0;a.set(t,e),a.set(e,t);for(var m=l;++u<d;){var v=t[h=c[u]],b=e[h];if(s)var y=l?s(b,v,h,e,t,a):s(v,b,h,t,e,a);if(!(void 0===y?v===b||o(v,b,n,s,a):y)){g=!1;break}m||(m="constructor"==h)}if(g&&!m){var w=t.constructor,C=e.constructor;w==C||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof C&&C instanceof C||(g=!1)}return a.delete(t),a.delete(e),g}},695:(t,e,n)=>{var i=n(8096),r=n(2428),s=n(6449),o=n(3656),a=n(361),l=n(7167),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=s(t),d=!n&&r(t),u=!n&&!d&&o(t),h=!n&&!d&&!u&&l(t),p=n||d||u||h,f=p?i(t.length,String):[],g=f.length;for(var m in t)!e&&!c.call(t,m)||p&&("length"==m||u&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,g))||f.push(m);return f}},756:(t,e,n)=>{var i=n(3805);t.exports=function(t){return t==t&&!i(t)}},776:(t,e,n)=>{var i=n(756),r=n(5950);t.exports=function(t){for(var e=r(t),n=e.length;n--;){var s=e[n],o=t[s];e[n]=[s,o,i(o)]}return e}},828:(t,e,n)=>{var i=n(4647),r=n(3222),s=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=r(t))&&t.replace(s,i).replace(o,"")}},882:t=>{t.exports=function(t,e,n,i){var r=-1,s=null==t?0:t.length;for(i&&s&&(n=t[++r]);++r<s;)n=e(n,t[r],r,t);return n}},909:(t,e,n)=>{var i=n(641),r=n(8329)(i);t.exports=r},938:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},945:(t,e,n)=>{var i=n(79),r=n(8223),s=n(3661);t.exports=function(t,e){var n=this.__data__;if(n instanceof i){var o=n.__data__;if(!r||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new s(o)}return n.set(t,e),this.size=n.size,this}},999:(t,e,n)=>{var i=n(9302),r=n(6800);t.exports=function(t){return i((function(e,n){var i=-1,s=n.length,o=s>1?n[s-1]:void 0,a=s>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(s--,o):void 0,a&&r(n[0],n[1],a)&&(o=s<3?void 0:o,s=1),e=Object(e);++i<s;){var l=n[i];l&&t(e,l,i,o)}return e}))}},1033:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},1042:(t,e,n)=>{var i=n(6110)(Object,"create");t.exports=i},1074:t=>{t.exports=function(t){return t.split("")}},1175:(t,e,n)=>{var i=n(6025);t.exports=function(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}},1234:t=>{t.exports=function(t,e,n){for(var i=-1,r=t.length,s=e.length,o={};++i<r;){var a=i<s?e[i]:void 0;n(o,t[i],a)}return o}},1331:(t,e,n)=>{var i=n(2552),r=n(8879),s=n(346),o=Function.prototype,a=Object.prototype,l=o.toString,c=a.hasOwnProperty,d=l.call(Object);t.exports=function(t){if(!s(t)||"[object Object]"!=i(t))return!1;var e=r(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==d}},1380:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},1420:(t,e,n)=>{var i=n(79);t.exports=function(){this.__data__=new i,this.size=0}},1448:(t,e,n)=>{var i=n(426),r=n(9326);t.exports=function(t,e){return null!=t&&r(t,e,i)}},1459:t=>{t.exports=function(t){return this.__data__.has(t)}},1489:(t,e,n)=>{var i=n(7400);t.exports=function(t){var e=i(t),n=e%1;return e==e?n?e-n:e:0}},1549:(t,e,n)=>{var i=n(2032),r=n(3862),s=n(6721),o=n(2749),a=n(5749);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,t.exports=l},1733:t=>{var e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(e)||[]}},1769:(t,e,n)=>{var i=n(6449),r=n(8586),s=n(1802),o=n(3222);t.exports=function(t,e){return i(t)?t:r(t,e)?[t]:s(o(t))}},1791:(t,e,n)=>{var i=n(6547),r=n(3360);t.exports=function(t,e,n,s){var o=!n;n||(n={});for(var a=-1,l=e.length;++a<l;){var c=e[a],d=s?s(n[c],t[c],c,n,t):void 0;void 0===d&&(d=t[c]),o?r(n,c,d):i(n,c,d)}return n}},1799:(t,e,n)=>{var i=n(7217),r=n(270);t.exports=function(t,e,n,s){var o=n.length,a=o,l=!s;if(null==t)return!a;for(t=Object(t);o--;){var c=n[o];if(l&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<a;){var d=(c=n[o])[0],u=t[d],h=c[1];if(l&&c[2]){if(void 0===u&&!(d in t))return!1}else{var p=new i;if(s)var f=s(u,h,d,t,e,p);if(!(void 0===f?r(h,u,3,s,p):f))return!1}}return!0}},1800:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},1802:(t,e,n)=>{var i=n(2224),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,o=i((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,(function(t,n,i,r){e.push(i?r.replace(s,"$1"):n||t)})),e}));t.exports=o},1811:t=>{var e=Date.now;t.exports=function(t){var n=0,i=0;return function(){var r=e(),s=16-(r-i);if(i=r,s>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},1873:(t,e,n)=>{var i=n(9325).Symbol;t.exports=i},1882:(t,e,n)=>{var i=n(2552),r=n(3805);t.exports=function(t){if(!r(t))return!1;var e=i(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1961:(t,e,n)=>{var i=n(9653);t.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},1986:(t,e,n)=>{var i=n(1873),r=n(7828),s=n(5288),o=n(5911),a=n(317),l=n(4247),c=i?i.prototype:void 0,d=c?c.valueOf:void 0;t.exports=function(t,e,n,i,c,u,h){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!u(new r(t),new r(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=a;case"[object Set]":var f=1&i;if(p||(p=l),t.size!=e.size&&!f)return!1;var g=h.get(t);if(g)return g==e;i|=2,h.set(t,e);var m=o(p(t),p(e),i,c,u,h);return h.delete(t),m;case"[object Symbol]":if(d)return d.call(t)==d.call(e)}return!1}},2032:(t,e,n)=>{var i=n(1042);t.exports=function(){this.__data__=i?i(null):{},this.size=0}},2054:t=>{var e="\\ud800-\\udfff",n="["+e+"]",i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",s="[^"+e+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+i+"|"+r+")?",c="[\\ufe0e\\ufe0f]?",d=c+l+"(?:\\u200d(?:"+[s,o,a].join("|")+")"+c+l+")*",u="(?:"+[s+i+"?",i,o,a,n].join("|")+")",h=RegExp(r+"(?="+r+")|"+u+d,"g");t.exports=function(t){return t.match(h)||[]}},2199:(t,e,n)=>{var i=n(4528),r=n(6449);t.exports=function(t,e,n){var s=e(t);return r(t)?s:i(s,n(t))}},2224:(t,e,n)=>{var i=n(104);t.exports=function(t){var e=i(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},2225:t=>{var e="\\ud800-\\udfff",n="\\u2700-\\u27bf",i="a-z\\xdf-\\xf6\\xf8-\\xff",r="A-Z\\xc0-\\xd6\\xd8-\\xde",s="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",o="["+s+"]",a="\\d+",l="["+n+"]",c="["+i+"]",d="[^"+e+s+a+n+i+r+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",p="["+r+"]",f="(?:"+c+"|"+d+")",g="(?:"+p+"|"+d+")",m="(?:['’](?:d|ll|m|re|s|t|ve))?",v="(?:['’](?:D|LL|M|RE|S|T|VE))?",b="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",y="[\\ufe0e\\ufe0f]?",w=y+b+"(?:\\u200d(?:"+["[^"+e+"]",u,h].join("|")+")"+y+b+")*",C="(?:"+[l,u,h].join("|")+")"+w,x=RegExp([p+"?"+c+"+"+m+"(?="+[o,p,"$"].join("|")+")",g+"+"+v+"(?="+[o,p+f,"$"].join("|")+")",p+"?"+f+"+"+m,p+"+"+v,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",a,C].join("|"),"g");t.exports=function(t){return t.match(x)||[]}},2428:(t,e,n)=>{var i=n(7534),r=n(346),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(t){return r(t)&&o.call(t,"callee")&&!a.call(t,"callee")};t.exports=l},2493:(t,e,n)=>{var i=n(4051),r=n(6800),s=n(1489),o=n(3222);t.exports=function(t,e,n){return e=(n?r(t,e,n):void 0===e)?1:s(e),i(o(t),e)}},2507:(t,e,n)=>{var i=n(8754),r=n(9698),s=n(3912),o=n(3222);t.exports=function(t){return function(e){e=o(e);var n=r(e)?s(e):void 0,a=n?n[0]:e.charAt(0),l=n?i(n,1).join(""):e.slice(1);return a[t]()+l}}},2523:t=>{t.exports=function(t,e,n,i){for(var r=t.length,s=n+(i?1:-1);i?s--:++s<r;)if(e(t[s],s,t))return s;return-1}},2552:(t,e,n)=>{var i=n(1873),r=n(659),s=n(9350),o=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?r(t):s(t)}},2651:(t,e,n)=>{var i=n(4218);t.exports=function(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}},2660:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const i=n(5606),r=n(7193),s=n(8142),o=n(9106);e.AttributeMap=o.default;const a=n(5759);e.Op=a.default;const l=n(8317);e.OpIterator=l.default;const c=String.fromCharCode(0),d=(t,e)=>{if("object"!=typeof t||null===t)throw new Error("cannot retain a "+typeof t);if("object"!=typeof e||null===e)throw new Error("cannot retain a "+typeof e);const n=Object.keys(t)[0];if(!n||n!==Object.keys(e)[0])throw new Error(`embed types not matched: ${n} != ${Object.keys(e)[0]}`);return[n,t[n],e[n]]};class u{constructor(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]}static registerEmbed(t,e){this.handlers[t]=e}static unregisterEmbed(t){delete this.handlers[t]}static getHandler(t){const e=this.handlers[t];if(!e)throw new Error(`no handlers for embed type "${t}"`);return e}insert(t,e){const n={};return"string"==typeof t&&0===t.length?this:(n.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n))}delete(t){return t<=0?this:this.push({delete:t})}retain(t,e){if("number"==typeof t&&t<=0)return this;const n={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)}push(t){let e=this.ops.length,n=this.ops[e-1];if(t=r(t),"object"==typeof n){if("number"==typeof t.delete&&"number"==typeof n.delete)return this.ops[e-1]={delete:n.delete+t.delete},this;if("number"==typeof n.delete&&null!=t.insert&&(e-=1,n=this.ops[e-1],"object"!=typeof n))return this.ops.unshift(t),this;if(s(t.attributes,n.attributes)){if("string"==typeof t.insert&&"string"==typeof n.insert)return this.ops[e-1]={insert:n.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof n.retain)return this.ops[e-1]={retain:n.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this}chop(){const t=this.ops[this.ops.length-1];return t&&"number"==typeof t.retain&&!t.attributes&&this.ops.pop(),this}filter(t){return this.ops.filter(t)}forEach(t){this.ops.forEach(t)}map(t){return this.ops.map(t)}partition(t){const e=[],n=[];return this.forEach((i=>{(t(i)?e:n).push(i)})),[e,n]}reduce(t,e){return this.ops.reduce(t,e)}changeLength(){return this.reduce(((t,e)=>e.insert?t+a.default.length(e):e.delete?t-e.delete:t),0)}length(){return this.reduce(((t,e)=>t+a.default.length(e)),0)}slice(t=0,e=1/0){const n=[],i=new l.default(this.ops);let r=0;for(;r<e&&i.hasNext();){let s;r<t?s=i.next(t-r):(s=i.next(e-r),n.push(s)),r+=a.default.length(s)}return new u(n)}compose(t){const e=new l.default(this.ops),n=new l.default(t.ops),i=[],r=n.peek();if(null!=r&&"number"==typeof r.retain&&null==r.attributes){let t=r.retain;for(;"insert"===e.peekType()&&e.peekLength()<=t;)t-=e.peekLength(),i.push(e.next());r.retain-t>0&&n.next(r.retain-t)}const a=new u(i);for(;e.hasNext()||n.hasNext();)if("insert"===n.peekType())a.push(n.next());else if("delete"===e.peekType())a.push(e.next());else{const t=Math.min(e.peekLength(),n.peekLength()),i=e.next(t),r=n.next(t);if(r.retain){const l={};if("number"==typeof i.retain)l.retain="number"==typeof r.retain?t:r.retain;else if("number"==typeof r.retain)null==i.retain?l.insert=i.insert:l.retain=i.retain;else{const t=null==i.retain?"insert":"retain",[e,n,s]=d(i[t],r.retain),o=u.getHandler(e);l[t]={[e]:o.compose(n,s,"retain"===t)}}const c=o.default.compose(i.attributes,r.attributes,"number"==typeof i.retain);if(c&&(l.attributes=c),a.push(l),!n.hasNext()&&s(a.ops[a.ops.length-1],l)){const t=new u(e.rest());return a.concat(t).chop()}}else"number"==typeof r.delete&&("number"==typeof i.retain||"object"==typeof i.retain&&null!==i.retain)&&a.push(r)}return a.chop()}concat(t){const e=new u(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e}diff(t,e){if(this.ops===t.ops)return new u;const n=[this,t].map((e=>e.map((n=>{if(null!=n.insert)return"string"==typeof n.insert?n.insert:c;throw new Error("diff() called "+(e===t?"on":"with")+" non-document")})).join(""))),r=new u,a=i(n[0],n[1],e,!0),d=new l.default(this.ops),h=new l.default(t.ops);return a.forEach((t=>{let e=t[1].length;for(;e>0;){let n=0;switch(t[0]){case i.INSERT:n=Math.min(h.peekLength(),e),r.push(h.next(n));break;case i.DELETE:n=Math.min(e,d.peekLength()),d.next(n),r.delete(n);break;case i.EQUAL:n=Math.min(d.peekLength(),h.peekLength(),e);const t=d.next(n),a=h.next(n);s(t.insert,a.insert)?r.retain(n,o.default.diff(t.attributes,a.attributes)):r.push(a).delete(n)}e-=n}})),r.chop()}eachLine(t,e="\n"){const n=new l.default(this.ops);let i=new u,r=0;for(;n.hasNext();){if("insert"!==n.peekType())return;const s=n.peek(),o=a.default.length(s)-n.peekLength(),l="string"==typeof s.insert?s.insert.indexOf(e,o)-o:-1;if(l<0)i.push(n.next());else if(l>0)i.push(n.next(l));else{if(!1===t(i,n.next(1).attributes||{},r))return;r+=1,i=new u}}i.length()>0&&t(i,{},r)}invert(t){const e=new u;return this.reduce(((n,i)=>{if(i.insert)e.delete(a.default.length(i));else{if("number"==typeof i.retain&&null==i.attributes)return e.retain(i.retain),n+i.retain;if(i.delete||"number"==typeof i.retain){const r=i.delete||i.retain;return t.slice(n,n+r).forEach((t=>{i.delete?e.push(t):i.retain&&i.attributes&&e.retain(a.default.length(t),o.default.invert(i.attributes,t.attributes))})),n+r}if("object"==typeof i.retain&&null!==i.retain){const r=t.slice(n,n+1),s=new l.default(r.ops).next(),[a,c,h]=d(i.retain,s.insert),p=u.getHandler(a);return e.retain({[a]:p.invert(c,h)},o.default.invert(i.attributes,s.attributes)),n+1}}return n}),0),e.chop()}transform(t,e=!1){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);const n=t,i=new l.default(this.ops),r=new l.default(n.ops),s=new u;for(;i.hasNext()||r.hasNext();)if("insert"!==i.peekType()||!e&&"insert"===r.peekType())if("insert"===r.peekType())s.push(r.next());else{const t=Math.min(i.peekLength(),r.peekLength()),n=i.next(t),a=r.next(t);if(n.delete)continue;if(a.delete)s.push(a);else{const i=n.retain,r=a.retain;let l="object"==typeof r&&null!==r?r:t;if("object"==typeof i&&null!==i&&"object"==typeof r&&null!==r){const t=Object.keys(i)[0];if(t===Object.keys(r)[0]){const n=u.getHandler(t);n&&(l={[t]:n.transform(i[t],r[t],e)})}}s.retain(l,o.default.transform(n.attributes,a.attributes,e))}}else s.retain(a.default.length(i.next()));return s.chop()}transformPosition(t,e=!1){e=!!e;const n=new l.default(this.ops);let i=0;for(;n.hasNext()&&i<=t;){const r=n.peekLength(),s=n.peekType();n.next(),"delete"!==s?("insert"===s&&(i<t||!e)&&(t+=r),i+=r):t-=Math.min(r,t-i)}return t}}u.Op=a.default,u.OpIterator=l.default,u.AttributeMap=o.default,u.handlers={},e.default=u,t.exports=u,t.exports.default=u},2749:(t,e,n)=>{var i=n(1042),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return i?void 0!==e[t]:r.call(e,t)}},2804:(t,e,n)=>{var i=n(6110)(n(9325),"Promise");t.exports=i},2824:(t,e,n)=>{var i=n(7805),r=n(3290),s=n(1961),o=n(3007),a=n(5529),l=n(2428),c=n(6449),d=n(3693),u=n(3656),h=n(1882),p=n(3805),f=n(1331),g=n(7167),m=n(4974),v=n(9884);t.exports=function(t,e,n,b,y,w,C){var x=m(t,n),T=m(e,n),E=C.get(T);if(E)i(t,n,E);else{var A=w?w(x,T,n+"",t,e,C):void 0,S=void 0===A;if(S){var I=c(T),N=!I&&u(T),L=!I&&!N&&g(T);A=T,I||N||L?c(x)?A=x:d(x)?A=o(x):N?(S=!1,A=r(T,!0)):L?(S=!1,A=s(T,!0)):A=[]:f(T)||l(T)?(A=x,l(x)?A=v(x):p(x)&&!h(x)||(A=a(T))):S=!1}S&&(C.set(T,A),y(A,T,b,w,C),C.delete(T)),i(t,n,A)}}},2865:(t,e,n)=>{var i=n(9570),r=n(1811)(i);t.exports=r},2903:(t,e,n)=>{var i=n(3805),r=n(5527),s=n(181),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return s(t);var e=r(t),n=[];for(var a in t)("constructor"!=a||!e&&o.call(t,a))&&n.push(a);return n}},2949:(t,e,n)=>{var i=n(2651);t.exports=function(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}},3007:t=>{t.exports=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}},3031:(t,e,n)=>{var i=n(3120),r=n(6155),s=n(9302),o=n(6800),a=s((function(t,e){if(null==t)return[];var n=e.length;return n>1&&o(t,e[0],e[1])?e=[]:n>2&&o(e[0],e[1],e[2])&&(e=[e[0]]),r(t,i(e,1),[])}));t.exports=a},3040:(t,e,n)=>{var i=n(1549),r=n(79),s=n(8223);t.exports=function(){this.size=0,this.__data__={hash:new i,map:new(s||r),string:new i}}},3120:(t,e,n)=>{var i=n(4528),r=n(5891);t.exports=function t(e,n,s,o,a){var l=-1,c=e.length;for(s||(s=r),a||(a=[]);++l<c;){var d=e[l];n>0&&s(d)?n>1?t(d,n-1,s,o,a):i(a,d):o||(a[a.length]=d)}return a}},3181:(t,e,n)=>{var i=n(5508)();t.exports=i},3221:t=>{t.exports=function(t){return function(e,n,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var l=o[t?a:++r];if(!1===n(s[l],l,s))break}return e}}},3222:(t,e,n)=>{var i=n(7556);t.exports=function(t){return null==t?"":i(t)}},3243:(t,e,n)=>{var i=n(6110),r=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=r},3290:(t,e,n)=>{t=n.nmd(t);var i=n(9325),r=e&&!e.nodeType&&e,s=r&&t&&!t.nodeType&&t,o=s&&s.exports===r?i.Buffer:void 0,a=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,i=a?a(n):new t.constructor(n);return t.copy(i),i}},3345:t=>{t.exports=function(){return[]}},3360:(t,e,n)=>{var i=n(3243);t.exports=function(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},3375:(t,e,n)=>{var i=n(5765);t.exports=function(t){return t&&t.length?i(t):[]}},3488:t=>{t.exports=function(t){return t}},3605:t=>{t.exports=function(t){return this.__data__.get(t)}},3650:(t,e,n)=>{var i=n(4335)(Object.keys,Object);t.exports=i},3656:(t,e,n)=>{t=n.nmd(t);var i=n(9325),r=n(9935),s=e&&!e.nodeType&&e,o=s&&t&&!t.nodeType&&t,a=o&&o.exports===s?i.Buffer:void 0,l=(a?a.isBuffer:void 0)||r;t.exports=l},3661:(t,e,n)=>{var i=n(3040),r=n(7670),s=n(289),o=n(4509),a=n(2949);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,t.exports=l},3663:(t,e,n)=>{var i=n(1799),r=n(776),s=n(7197);t.exports=function(t){var e=r(t);return 1==e.length&&e[0][2]?s(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}},3693:(t,e,n)=>{var i=n(4894),r=n(346);t.exports=function(t){return r(t)&&i(t)}},3697:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,i,s,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,s||t,o),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=new Array(s);r<s;r++)o[r]=i[r].fn;return o},a.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,r,s,o){var a=n?n+t:t;if(!this._events[a])return!1;var l,c,d=this._events[a],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,e),!0;case 3:return d.fn.call(d.context,e,i),!0;case 4:return d.fn.call(d.context,e,i,r),!0;case 5:return d.fn.call(d.context,e,i,r,s),!0;case 6:return d.fn.call(d.context,e,i,r,s,o),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(t,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,e);break;case 3:d[c].fn.call(d[c].context,e,i);break;case 4:d[c].fn.call(d[c].context,e,i,r);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},a.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,i,r){var s=n?n+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||r&&!a.once||i&&a.context!==i||o(this,s);else{for(var l=0,c=[],d=a.length;l<d;l++)(a[l].fn!==e||r&&!a[l].once||i&&a[l].context!==i)&&c.push(a[l]);c.length?this._events[s]=1===c.length?c[0]:c:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&o(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a},3702:t=>{t.exports=function(){this.__data__=[],this.size=0}},3714:(t,e,n)=>{var i=n(3730);t.exports=function(t,e,n){for(var r=-1,s=t.criteria,o=e.criteria,a=s.length,l=n.length;++r<a;){var c=i(s[r],o[r]);if(c)return r>=l?c:c*("desc"==n[r]?-1:1)}return t.index-e.index}},3730:(t,e,n)=>{var i=n(4394);t.exports=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,s=t==t,o=i(t),a=void 0!==e,l=null===e,c=e==e,d=i(e);if(!l&&!d&&!o&&t>e||o&&a&&c&&!l&&!d||r&&a&&c||!n&&c||!s)return 1;if(!r&&!o&&!d&&t<e||d&&n&&s&&!r&&!o||l&&n&&s||!a&&s||!c)return-1}return 0}},3805:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},3862:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},3912:(t,e,n)=>{var i=n(1074),r=n(9698),s=n(2054);t.exports=function(t){return r(t)?s(t):i(t)}},3937:t=>{t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},3950:t=>{t.exports=function(){}},4051:t=>{var e=Math.floor;t.exports=function(t,n){var i="";if(!t||n<1||n>9007199254740991)return i;do{n%2&&(i+=t),(n=e(n/2))&&(t+=t)}while(n);return i}},4058:(t,e,n)=>{var i=n(4792),r=n(5539)((function(t,e,n){return e=e.toLowerCase(),t+(n?i(e):e)}));t.exports=r},4128:(t,e,n)=>{var i=n(1800),r=/^\s+/;t.exports=function(t){return t?t.slice(0,i(t)+1).replace(r,""):t}},4218:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},4247:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},4248:t=>{t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}},4335:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},4394:(t,e,n)=>{var i=n(2552),r=n(346);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==i(t)}},4509:(t,e,n)=>{var i=n(2651);t.exports=function(t){return i(this,t).has(t)}},4517:(t,e,n)=>{var i=n(6545),r=n(3950),s=n(4247),o=i&&1/s(new i([,-0]))[1]==1/0?function(t){return new i(t)}:r;t.exports=o},4528:t=>{t.exports=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}},4552:t=>{t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},4647:(t,e,n)=>{var i=n(4552)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});t.exports=i},4664:(t,e,n)=>{var i=n(9770),r=n(3345),s=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(t){return null==t?[]:(t=Object(t),i(o(t),(function(e){return s.call(t,e)})))}:r;t.exports=a},4739:(t,e,n)=>{var i=n(6025);t.exports=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}},4792:(t,e,n)=>{var i=n(3222),r=n(5808);t.exports=function(t){return r(i(t).toLowerCase())}},4840:(t,e,n)=>{var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=i},4894:(t,e,n)=>{var i=n(1882),r=n(294);t.exports=function(t){return null!=t&&r(t.length)&&!i(t)}},4901:(t,e,n)=>{var i=n(2552),r=n(294),s=n(346),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return s(t)&&r(t.length)&&!!o[i(t)]}},4932:t=>{t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}},4974:t=>{t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},5083:(t,e,n)=>{var i=n(1882),r=n(7296),s=n(3805),o=n(7473),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,h=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!s(t)||r(t))&&(i(t)?h:a).test(o(t))}},5128:(t,e,n)=>{var i=n(909),r=n(4894);t.exports=function(t,e){var n=-1,s=r(t)?Array(t.length):[];return i(t,(function(t,i,r){s[++n]=e(t,i,r)})),s}},5160:t=>{t.exports=function(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=t[i+e];return s}},5250:(t,e,n)=>{var i=n(7217),r=n(7805),s=n(6649),o=n(2824),a=n(3805),l=n(7241),c=n(4974);t.exports=function t(e,n,d,u,h){e!==n&&s(n,(function(s,l){if(h||(h=new i),a(s))o(e,n,l,d,t,u,h);else{var p=u?u(c(e,l),s,l+"",e,n,h):void 0;void 0===p&&(p=s),r(e,l,p)}}),l)}},5288:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},5325:(t,e,n)=>{var i=n(6131);t.exports=function(t,e){return!(null==t||!t.length)&&i(t,e,0)>-1}},5364:(t,e,n)=>{var i=n(5250),r=n(999)((function(t,e,n){i(t,e,n)}));t.exports=r},5389:(t,e,n)=>{var i=n(3663),r=n(7978),s=n(3488),o=n(6449),a=n(583);t.exports=function(t){return"function"==typeof t?t:null==t?s:"object"==typeof t?o(t)?r(t[0],t[1]):i(t):a(t)}},5434:t=>{var e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return e.test(t)}},5463:t=>{t.exports=function(t){return t!=t}},5481:(t,e,n)=>{var i=n(9325)["__core-js_shared__"];t.exports=i},5508:(t,e,n)=>{var i=n(6151),r=n(6800),s=n(7400);t.exports=function(t){return function(e,n,o){return o&&"number"!=typeof o&&r(e,n,o)&&(n=o=void 0),e=s(e),void 0===n?(n=e,e=0):n=s(n),o=void 0===o?e<n?1:-1:s(o),i(e,n,o,t)}}},5527:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},5529:(t,e,n)=>{var i=n(9344),r=n(8879),s=n(5527);t.exports=function(t){return"function"!=typeof t.constructor||s(t)?{}:i(r(t))}},5539:(t,e,n)=>{var i=n(882),r=n(828),s=n(6645),o=RegExp("['’]","g");t.exports=function(t){return function(e){return i(s(r(e).replace(o,"")),t,"")}}},5580:(t,e,n)=>{var i=n(6110)(n(9325),"DataView");t.exports=i},5606:t=>{var e=-1;function n(t,p,f,g,m){if(t===p)return t?[[0,t]]:[];if(null!=f){var b=function(t,e,n){var i="number"==typeof n?{index:n,length:0}:n.oldRange,r="number"==typeof n?null:n.newRange,s=t.length,o=e.length;if(0===i.length&&(null===r||0===r.length)){var a=i.index,l=t.slice(0,a),c=t.slice(a),d=r?r.index:null,u=a+o-s;if((null===d||d===u)&&!(u<0||u>o)){var h=e.slice(0,u);if((g=e.slice(u))===c){var p=Math.min(a,u);if((b=l.slice(0,p))===(w=h.slice(0,p)))return v(b,l.slice(p),h.slice(p),c)}}if(null===d||d===a){var f=a,g=(h=e.slice(0,f),e.slice(f));if(h===l){var m=Math.min(s-f,o-f);if((y=c.slice(c.length-m))===(C=g.slice(g.length-m)))return v(l,c.slice(0,c.length-m),g.slice(0,g.length-m),y)}}}if(i.length>0&&r&&0===r.length){var b=t.slice(0,i.index),y=t.slice(i.index+i.length);if(!(o<(p=b.length)+(m=y.length))){var w=e.slice(0,p),C=e.slice(o-m);if(b===w&&y===C)return v(b,t.slice(p,s-m),e.slice(p,o-m),y)}}return null}(t,p,f);if(b)return b}var y=r(t,p),w=t.substring(0,y);y=o(t=t.substring(y),p=p.substring(y));var C=t.substring(t.length-y),x=function(t,s){var a;if(!t)return[[1,s]];if(!s)return[[e,t]];var l=t.length>s.length?t:s,c=t.length>s.length?s:t,d=l.indexOf(c);if(-1!==d)return a=[[1,l.substring(0,d)],[0,c],[1,l.substring(d+c.length)]],t.length>s.length&&(a[0][0]=a[2][0]=e),a;if(1===c.length)return[[e,t],[1,s]];var u=function(t,e){var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||2*i.length<n.length)return null;function s(t,e,n){for(var i,s,a,l,c=t.substring(n,n+Math.floor(t.length/4)),d=-1,u="";-1!==(d=e.indexOf(c,d+1));){var h=r(t.substring(n),e.substring(d)),p=o(t.substring(0,n),e.substring(0,d));u.length<p+h&&(u=e.substring(d-p,d)+e.substring(d,d+h),i=t.substring(0,n-p),s=t.substring(n+h),a=e.substring(0,d-p),l=e.substring(d+h))}return 2*u.length>=t.length?[i,s,a,l,u]:null}var a,l,c,d,u,h=s(n,i,Math.ceil(n.length/4)),p=s(n,i,Math.ceil(n.length/2));return h||p?(a=p?h&&h[4].length>p[4].length?h:p:h,t.length>e.length?(l=a[0],c=a[1],d=a[2],u=a[3]):(d=a[0],u=a[1],l=a[2],c=a[3]),[l,c,d,u,a[4]]):null}(t,s);if(u){var h=u[0],p=u[1],f=u[2],g=u[3],m=u[4],v=n(h,f),b=n(p,g);return v.concat([[0,m]],b)}return function(t,n){for(var r=t.length,s=n.length,o=Math.ceil((r+s)/2),a=o,l=2*o,c=new Array(l),d=new Array(l),u=0;u<l;u++)c[u]=-1,d[u]=-1;c[a+1]=0,d[a+1]=0;for(var h=r-s,p=h%2!=0,f=0,g=0,m=0,v=0,b=0;b<o;b++){for(var y=-b+f;y<=b-g;y+=2){for(var w=a+y,C=(S=y===-b||y!==b&&c[w-1]<c[w+1]?c[w+1]:c[w-1]+1)-y;S<r&&C<s&&t.charAt(S)===n.charAt(C);)S++,C++;if(c[w]=S,S>r)g+=2;else if(C>s)f+=2;else if(p&&(E=a+h-y)>=0&&E<l&&-1!==d[E]&&S>=(T=r-d[E]))return i(t,n,S,C)}for(var x=-b+m;x<=b-v;x+=2){for(var T,E=a+x,A=(T=x===-b||x!==b&&d[E-1]<d[E+1]?d[E+1]:d[E-1]+1)-x;T<r&&A<s&&t.charAt(r-T-1)===n.charAt(s-A-1);)T++,A++;if(d[E]=T,T>r)v+=2;else if(A>s)m+=2;else if(!p){var S;if((w=a+h-x)>=0&&w<l&&-1!==c[w])if(C=a+(S=c[w])-w,S>=(T=r-T))return i(t,n,S,C)}}}return[[e,t],[1,n]]}(t,s)}(t=t.substring(0,t.length-y),p=p.substring(0,p.length-y));return w&&x.unshift([0,w]),C&&x.push([0,C]),h(x,m),g&&function(t){for(var n=!1,i=[],r=0,p=null,f=0,g=0,m=0,v=0,b=0;f<t.length;)0==t[f][0]?(i[r++]=f,g=v,m=b,v=0,b=0,p=t[f][1]):(1==t[f][0]?v+=t[f][1].length:b+=t[f][1].length,p&&p.length<=Math.max(g,m)&&p.length<=Math.max(v,b)&&(t.splice(i[r-1],0,[e,p]),t[i[r-1]+1][0]=1,r--,f=--r>0?i[r-1]:-1,g=0,m=0,v=0,b=0,p=null,n=!0)),f++;for(n&&h(t),function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),i=e.charAt(0),r=n.match(a),s=i.match(a),o=r&&n.match(l),h=s&&i.match(l),p=o&&n.match(c),f=h&&i.match(c),g=p&&t.match(d),m=f&&e.match(u);return g||m?5:p||f?4:r&&!o&&h?3:o||h?2:r||s?1:0}for(var n=1;n<t.length-1;){if(0==t[n-1][0]&&0==t[n+1][0]){var i=t[n-1][1],r=t[n][1],s=t[n+1][1],h=o(i,r);if(h){var p=r.substring(r.length-h);i=i.substring(0,i.length-h),r=p+r.substring(0,r.length-h),s=p+s}for(var f=i,g=r,m=s,v=e(i,r)+e(r,s);r.charAt(0)===s.charAt(0);){i+=r.charAt(0),r=r.substring(1)+s.charAt(0),s=s.substring(1);var b=e(i,r)+e(r,s);b>=v&&(v=b,f=i,g=r,m=s)}t[n-1][1]!=f&&(f?t[n-1][1]=f:(t.splice(n-1,1),n--),t[n][1]=g,m?t[n+1][1]=m:(t.splice(n+1,1),n--))}n++}}(t),f=1;f<t.length;){if(t[f-1][0]==e&&1==t[f][0]){var y=t[f-1][1],w=t[f][1],C=s(y,w),x=s(w,y);C>=x?(C>=y.length/2||C>=w.length/2)&&(t.splice(f,0,[0,w.substring(0,C)]),t[f-1][1]=y.substring(0,y.length-C),t[f+1][1]=w.substring(C),f++):(x>=y.length/2||x>=w.length/2)&&(t.splice(f,0,[0,y.substring(0,x)]),t[f-1][0]=1,t[f-1][1]=w.substring(0,w.length-x),t[f+1][0]=e,t[f+1][1]=y.substring(x),f++),f++}f++}}(x),x}function i(t,e,i,r){var s=t.substring(0,i),o=e.substring(0,r),a=t.substring(i),l=e.substring(r),c=n(s,o),d=n(a,l);return c.concat(d)}function r(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,s=0;n<r;)t.substring(s,r)==e.substring(s,r)?s=n=r:i=r,r=Math.floor((i-n)/2+n);return p(t.charCodeAt(r-1))&&r--,r}function s(t,e){var n=t.length,i=e.length;if(0==n||0==i)return 0;n>i?t=t.substring(n-i):n<i&&(e=e.substring(0,n));var r=Math.min(n,i);if(t==e)return r;for(var s=0,o=1;;){var a=t.substring(r-o),l=e.indexOf(a);if(-1==l)return s;o+=l,0!=l&&t.substring(r-o)!=e.substring(0,o)||(s=o,o++)}}function o(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,s=0;n<r;)t.substring(t.length-r,t.length-s)==e.substring(e.length-r,e.length-s)?s=n=r:i=r,r=Math.floor((i-n)/2+n);return f(t.charCodeAt(t.length-r))&&r--,r}var a=/[^a-zA-Z0-9]/,l=/\s/,c=/[\r\n]/,d=/\n\r?\n$/,u=/^\r?\n\r?\n/;function h(t,n){t.push([0,""]);for(var i,s=0,a=0,l=0,c="",d="";s<t.length;)if(s<t.length-1&&!t[s][1])t.splice(s,1);else switch(t[s][0]){case 1:l++,d+=t[s][1],s++;break;case e:a++,c+=t[s][1],s++;break;case 0:var u=s-l-a-1;if(n){if(u>=0&&m(t[u][1])){var p=t[u][1].slice(-1);if(t[u][1]=t[u][1].slice(0,-1),c=p+c,d=p+d,!t[u][1]){t.splice(u,1),s--;var f=u-1;t[f]&&1===t[f][0]&&(l++,d=t[f][1]+d,f--),t[f]&&t[f][0]===e&&(a++,c=t[f][1]+c,f--),u=f}}g(t[s][1])&&(p=t[s][1].charAt(0),t[s][1]=t[s][1].slice(1),c+=p,d+=p)}if(s<t.length-1&&!t[s][1]){t.splice(s,1);break}if(c.length>0||d.length>0){c.length>0&&d.length>0&&(0!==(i=r(d,c))&&(u>=0?t[u][1]+=d.substring(0,i):(t.splice(0,0,[0,d.substring(0,i)]),s++),d=d.substring(i),c=c.substring(i)),0!==(i=o(d,c))&&(t[s][1]=d.substring(d.length-i)+t[s][1],d=d.substring(0,d.length-i),c=c.substring(0,c.length-i)));var v=l+a;0===c.length&&0===d.length?(t.splice(s-v,v),s-=v):0===c.length?(t.splice(s-v,v,[1,d]),s=s-v+1):0===d.length?(t.splice(s-v,v,[e,c]),s=s-v+1):(t.splice(s-v,v,[e,c],[1,d]),s=s-v+2)}0!==s&&0===t[s-1][0]?(t[s-1][1]+=t[s][1],t.splice(s,1)):s++,l=0,a=0,c="",d=""}""===t[t.length-1][1]&&t.pop();var b=!1;for(s=1;s<t.length-1;)0===t[s-1][0]&&0===t[s+1][0]&&(t[s][1].substring(t[s][1].length-t[s-1][1].length)===t[s-1][1]?(t[s][1]=t[s-1][1]+t[s][1].substring(0,t[s][1].length-t[s-1][1].length),t[s+1][1]=t[s-1][1]+t[s+1][1],t.splice(s-1,1),b=!0):t[s][1].substring(0,t[s+1][1].length)==t[s+1][1]&&(t[s-1][1]+=t[s+1][1],t[s][1]=t[s][1].substring(t[s+1][1].length)+t[s+1][1],t.splice(s+1,1),b=!0)),s++;b&&h(t,n)}function p(t){return t>=55296&&t<=56319}function f(t){return t>=56320&&t<=57343}function g(t){return f(t.charCodeAt(0))}function m(t){return p(t.charCodeAt(t.length-1))}function v(t,n,i,r){return m(t)||g(r)?null:function(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}([[0,t],[e,n],[1,i],[0,r]])}function b(t,e,i,r){return n(t,e,i,r,!0)}b.INSERT=1,b.DELETE=e,b.EQUAL=0,t.exports=b},5749:(t,e,n)=>{var i=n(1042);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?"__lodash_hash_undefined__":e,this}},5759:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.length=function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"object"==typeof t.retain&&null!==t.retain?1:"string"==typeof t.insert?t.insert.length:1}}(n||(n={})),e.default=n},5765:(t,e,n)=>{var i=n(8859),r=n(5325),s=n(9905),o=n(9219),a=n(4517),l=n(4247);t.exports=function(t,e,n){var c=-1,d=r,u=t.length,h=!0,p=[],f=p;if(n)h=!1,d=s;else if(u>=200){var g=e?null:a(t);if(g)return l(g);h=!1,d=o,f=new i}else f=e?[]:p;t:for(;++c<u;){var m=t[c],v=e?e(m):m;if(m=n||0!==m?m:0,h&&v==v){for(var b=f.length;b--;)if(f[b]===v)continue t;e&&f.push(v),p.push(m)}else d(f,v,n)||(f!==p&&f.push(v),p.push(m))}return p}},5808:(t,e,n)=>{var i=n(2507)("toUpperCase");t.exports=i},5861:(t,e,n)=>{var i=n(5580),r=n(8223),s=n(2804),o=n(6545),a=n(8303),l=n(2552),c=n(7473),d="[object Map]",u="[object Promise]",h="[object Set]",p="[object WeakMap]",f="[object DataView]",g=c(i),m=c(r),v=c(s),b=c(o),y=c(a),w=l;(i&&w(new i(new ArrayBuffer(1)))!=f||r&&w(new r)!=d||s&&w(s.resolve())!=u||o&&w(new o)!=h||a&&w(new a)!=p)&&(w=function(t){var e=l(t),n="[object Object]"==e?t.constructor:void 0,i=n?c(n):"";if(i)switch(i){case g:return f;case m:return d;case v:return u;case b:return h;case y:return p}return e}),t.exports=w},5891:(t,e,n)=>{var i=n(1873),r=n(2428),s=n(6449),o=i?i.isConcatSpreadable:void 0;t.exports=function(t){return s(t)||r(t)||!!(o&&t&&t[o])}},5911:(t,e,n)=>{var i=n(8859),r=n(4248),s=n(9219);t.exports=function(t,e,n,o,a,l){var c=1&n,d=t.length,u=e.length;if(d!=u&&!(c&&u>d))return!1;var h=l.get(t),p=l.get(e);if(h&&p)return h==e&&p==t;var f=-1,g=!0,m=2&n?new i:void 0;for(l.set(t,e),l.set(e,t);++f<d;){var v=t[f],b=e[f];if(o)var y=c?o(b,v,f,e,t,l):o(v,b,f,t,e,l);if(void 0!==y){if(y)continue;g=!1;break}if(m){if(!r(e,(function(t,e){if(!s(m,e)&&(v===t||a(v,t,n,o,l)))return m.push(e)}))){g=!1;break}}else if(v!==b&&!a(v,b,n,o,l)){g=!1;break}}return l.delete(t),l.delete(e),g}},5950:(t,e,n)=>{var i=n(695),r=n(8984),s=n(4894);t.exports=function(t){return s(t)?i(t):r(t)}},6009:(t,e,n)=>{t=n.nmd(t);var i=n(4840),r=e&&!e.nodeType&&e,s=r&&t&&!t.nodeType&&t,o=s&&s.exports===r&&i.process,a=function(){try{return s&&s.require&&s.require("util").types||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=a},6025:(t,e,n)=>{var i=n(5288);t.exports=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}},6110:(t,e,n)=>{var i=n(5083),r=n(392);t.exports=function(t,e){var n=r(t,e);return i(n)?n:void 0}},6131:(t,e,n)=>{var i=n(2523),r=n(5463),s=n(6959);t.exports=function(t,e,n){return e==e?s(t,e,n):i(t,r,n)}},6151:t=>{var e=Math.ceil,n=Math.max;t.exports=function(t,i,r,s){for(var o=-1,a=n(e((i-t)/(r||1)),0),l=Array(a);a--;)l[s?a:++o]=t,t+=r;return l}},6155:(t,e,n)=>{var i=n(4932),r=n(7422),s=n(5389),o=n(5128),a=n(3937),l=n(7301),c=n(3714),d=n(3488),u=n(6449);t.exports=function(t,e,n){e=e.length?i(e,(function(t){return u(t)?function(e){return r(e,1===t.length?t[0]:t)}:t})):[d];var h=-1;e=i(e,l(s));var p=o(t,(function(t,n,r){return{criteria:i(e,(function(e){return e(t)})),index:++h,value:t}}));return a(p,(function(t,e){return c(t,e,n)}))}},6449:t=>{var e=Array.isArray;t.exports=e},6545:(t,e,n)=>{var i=n(6110)(n(9325),"Set");t.exports=i},6547:(t,e,n)=>{var i=n(3360),r=n(5288),s=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var o=t[e];s.call(t,e)&&r(o,n)&&(void 0!==n||e in t)||i(t,e,n)}},6645:(t,e,n)=>{var i=n(1733),r=n(5434),s=n(3222),o=n(2225);t.exports=function(t,e,n){return t=s(t),void 0===(e=n?void 0:e)?r(t)?o(t):i(t):t.match(e)||[]}},6649:(t,e,n)=>{var i=n(3221)();t.exports=i},6721:(t,e,n)=>{var i=n(1042),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(i){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(e,t)?e[t]:void 0}},6757:(t,e,n)=>{var i=n(1033),r=Math.max;t.exports=function(t,e,n){return e=r(void 0===e?t.length-1:e,0),function(){for(var s=arguments,o=-1,a=r(s.length-e,0),l=Array(a);++o<a;)l[o]=s[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=s[o];return c[e]=n(l),i(t,this,c)}}},6800:(t,e,n)=>{var i=n(5288),r=n(4894),s=n(361),o=n(3805);t.exports=function(t,e,n){if(!o(n))return!1;var a=typeof e;return!!("number"==a?r(n)&&s(e,n.length):"string"==a&&e in n)&&i(n[e],t)}},6959:t=>{t.exports=function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}},7068:(t,e,n)=>{var i=n(7217),r=n(5911),s=n(1986),o=n(689),a=n(5861),l=n(6449),c=n(3656),d=n(7167),u="[object Arguments]",h="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,g,m,v){var b=l(t),y=l(e),w=b?h:a(t),C=y?h:a(e),x=(w=w==u?p:w)==p,T=(C=C==u?p:C)==p,E=w==C;if(E&&c(t)){if(!c(e))return!1;b=!0,x=!1}if(E&&!x)return v||(v=new i),b||d(t)?r(t,e,n,g,m,v):s(t,e,w,n,g,m,v);if(!(1&n)){var A=x&&f.call(t,"__wrapped__"),S=T&&f.call(e,"__wrapped__");if(A||S){var I=A?t.value():t,N=S?e.value():e;return v||(v=new i),m(I,N,n,g,v)}}return!!E&&(v||(v=new i),o(t,e,n,g,m,v))}},7167:(t,e,n)=>{var i=n(4901),r=n(7301),s=n(6009),o=s&&s.isTypedArray,a=o?r(o):i;t.exports=a},7193:(t,e,n)=>{t=n.nmd(t);var i="__lodash_hash_undefined__",r=9007199254740991,s="[object Arguments]",o="[object Boolean]",a="[object Date]",l="[object Function]",c="[object GeneratorFunction]",d="[object Map]",u="[object Number]",h="[object Object]",p="[object Promise]",f="[object RegExp]",g="[object Set]",m="[object String]",v="[object Symbol]",b="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",C="[object Float32Array]",x="[object Float64Array]",T="[object Int8Array]",E="[object Int16Array]",A="[object Int32Array]",S="[object Uint8Array]",I="[object Uint8ClampedArray]",N="[object Uint16Array]",L="[object Uint32Array]",_=/\w*$/,k=/^\[object .+?Constructor\]$/,O=/^(?:0|[1-9]\d*)$/,P={};P[s]=P["[object Array]"]=P[y]=P[w]=P[o]=P[a]=P[C]=P[x]=P[T]=P[E]=P[A]=P[d]=P[u]=P[h]=P[f]=P[g]=P[m]=P[v]=P[S]=P[I]=P[N]=P[L]=!0,P["[object Error]"]=P[l]=P[b]=!1;var M="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,j="object"==typeof self&&self&&self.Object===Object&&self,q=M||j||Function("return this")(),D=e&&!e.nodeType&&e,B=D&&t&&!t.nodeType&&t,$=B&&B.exports===D;function R(t,e){return t.set(e[0],e[1]),t}function U(t,e){return t.add(e),t}function V(t,e,n,i){var r=-1,s=t?t.length:0;for(i&&s&&(n=t[++r]);++r<s;)n=e(n,t[r],r,t);return n}function H(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function F(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function z(t,e){return function(n){return t(e(n))}}function G(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var Z,W=Array.prototype,J=Function.prototype,K=Object.prototype,Y=q["__core-js_shared__"],X=(Z=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"",Q=J.toString,tt=K.hasOwnProperty,et=K.toString,nt=RegExp("^"+Q.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),it=$?q.Buffer:void 0,rt=q.Symbol,st=q.Uint8Array,ot=z(Object.getPrototypeOf,Object),at=Object.create,lt=K.propertyIsEnumerable,ct=W.splice,dt=Object.getOwnPropertySymbols,ut=it?it.isBuffer:void 0,ht=z(Object.keys,Object),pt=qt(q,"DataView"),ft=qt(q,"Map"),gt=qt(q,"Promise"),mt=qt(q,"Set"),vt=qt(q,"WeakMap"),bt=qt(Object,"create"),yt=Ut(pt),wt=Ut(ft),Ct=Ut(gt),xt=Ut(mt),Tt=Ut(vt),Et=rt?rt.prototype:void 0,At=Et?Et.valueOf:void 0;function St(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function It(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Nt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Lt(t){this.__data__=new It(t)}function _t(t,e,n){var i=t[e];tt.call(t,e)&&Vt(i,n)&&(void 0!==n||e in t)||(t[e]=n)}function kt(t,e){for(var n=t.length;n--;)if(Vt(t[n][0],e))return n;return-1}function Ot(t,e,n,i,r,p,b){var k;if(i&&(k=p?i(t,r,p,b):i(t)),void 0!==k)return k;if(!Zt(t))return t;var O=Ht(t);if(O){if(k=function(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&tt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!e)return function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}(t,k)}else{var M=Bt(t),j=M==l||M==c;if(zt(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if(M==h||M==s||j&&!p){if(H(t))return p?t:{};if(k=function(t){return"function"!=typeof t.constructor||Rt(t)?{}:Zt(e=ot(t))?at(e):{};var e}(j?{}:t),!e)return function(t,e){return Mt(t,Dt(t),e)}(t,function(t,e){return t&&Mt(e,Wt(e),t)}(k,t))}else{if(!P[M])return p?t:{};k=function(t,e,n,i){var r,s=t.constructor;switch(e){case y:return Pt(t);case o:case a:return new s(+t);case w:return function(t,e){var n=e?Pt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,i);case C:case x:case T:case E:case A:case S:case I:case N:case L:return function(t,e){var n=e?Pt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,i);case d:return function(t,e,n){return V(e?n(F(t),!0):F(t),R,new t.constructor)}(t,i,n);case u:case m:return new s(t);case f:return function(t){var e=new t.constructor(t.source,_.exec(t));return e.lastIndex=t.lastIndex,e}(t);case g:return function(t,e,n){return V(e?n(G(t),!0):G(t),U,new t.constructor)}(t,i,n);case v:return r=t,At?Object(At.call(r)):{}}}(t,M,Ot,e)}}b||(b=new Lt);var q=b.get(t);if(q)return q;if(b.set(t,k),!O)var D=n?function(t){return function(t,e,n){var i=e(t);return Ht(t)?i:function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}(i,n(t))}(t,Wt,Dt)}(t):Wt(t);return function(t,e){for(var n=-1,i=t?t.length:0;++n<i&&!1!==e(t[n],n););}(D||t,(function(r,s){D&&(r=t[s=r]),_t(k,s,Ot(r,e,n,i,s,t,b))})),k}function Pt(t){var e=new t.constructor(t.byteLength);return new st(e).set(new st(t)),e}function Mt(t,e,n,i){n||(n={});for(var r=-1,s=e.length;++r<s;){var o=e[r],a=i?i(n[o],t[o],o,n,t):void 0;_t(n,o,void 0===a?t[o]:a)}return n}function jt(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function qt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Zt(t)||(e=t,X&&X in e))&&(Gt(t)||H(t)?nt:k).test(Ut(t));var e}(n)?n:void 0}St.prototype.clear=function(){this.__data__=bt?bt(null):{}},St.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},St.prototype.get=function(t){var e=this.__data__;if(bt){var n=e[t];return n===i?void 0:n}return tt.call(e,t)?e[t]:void 0},St.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:tt.call(e,t)},St.prototype.set=function(t,e){return this.__data__[t]=bt&&void 0===e?i:e,this},It.prototype.clear=function(){this.__data__=[]},It.prototype.delete=function(t){var e=this.__data__,n=kt(e,t);return!(n<0||(n==e.length-1?e.pop():ct.call(e,n,1),0))},It.prototype.get=function(t){var e=this.__data__,n=kt(e,t);return n<0?void 0:e[n][1]},It.prototype.has=function(t){return kt(this.__data__,t)>-1},It.prototype.set=function(t,e){var n=this.__data__,i=kt(n,t);return i<0?n.push([t,e]):n[i][1]=e,this},Nt.prototype.clear=function(){this.__data__={hash:new St,map:new(ft||It),string:new St}},Nt.prototype.delete=function(t){return jt(this,t).delete(t)},Nt.prototype.get=function(t){return jt(this,t).get(t)},Nt.prototype.has=function(t){return jt(this,t).has(t)},Nt.prototype.set=function(t,e){return jt(this,t).set(t,e),this},Lt.prototype.clear=function(){this.__data__=new It},Lt.prototype.delete=function(t){return this.__data__.delete(t)},Lt.prototype.get=function(t){return this.__data__.get(t)},Lt.prototype.has=function(t){return this.__data__.has(t)},Lt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof It){var i=n.__data__;if(!ft||i.length<199)return i.push([t,e]),this;n=this.__data__=new Nt(i)}return n.set(t,e),this};var Dt=dt?z(dt,Object):function(){return[]},Bt=function(t){return et.call(t)};function $t(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||O.test(t))&&t>-1&&t%1==0&&t<e}function Rt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||K)}function Ut(t){if(null!=t){try{return Q.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Vt(t,e){return t===e||t!=t&&e!=e}(pt&&Bt(new pt(new ArrayBuffer(1)))!=w||ft&&Bt(new ft)!=d||gt&&Bt(gt.resolve())!=p||mt&&Bt(new mt)!=g||vt&&Bt(new vt)!=b)&&(Bt=function(t){var e=et.call(t),n=e==h?t.constructor:void 0,i=n?Ut(n):void 0;if(i)switch(i){case yt:return w;case wt:return d;case Ct:return p;case xt:return g;case Tt:return b}return e});var Ht=Array.isArray;function Ft(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!Gt(t)}var zt=ut||function(){return!1};function Gt(t){var e=Zt(t)?et.call(t):"";return e==l||e==c}function Zt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Wt(t){return Ft(t)?function(t,e){var n=Ht(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Ft(t)}(t)&&tt.call(t,"callee")&&(!lt.call(t,"callee")||et.call(t)==s)}(t)?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],i=n.length,r=!!i;for(var o in t)!e&&!tt.call(t,o)||r&&("length"==o||$t(o,i))||n.push(o);return n}(t):function(t){if(!Rt(t))return ht(t);var e=[];for(var n in Object(t))tt.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}t.exports=function(t){return Ot(t,!0,!0)}},7197:t=>{t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},7217:(t,e,n)=>{var i=n(79),r=n(1420),s=n(938),o=n(3605),a=n(9817),l=n(945);function c(t){var e=this.__data__=new i(t);this.size=e.size}c.prototype.clear=r,c.prototype.delete=s,c.prototype.get=o,c.prototype.has=a,c.prototype.set=l,t.exports=c},7237:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},7241:(t,e,n)=>{var i=n(695),r=n(2903),s=n(4894);t.exports=function(t){return s(t)?i(t,!0):r(t)}},7248:(t,e,n)=>{var i=n(6547),r=n(1234);t.exports=function(t,e){return r(t||[],e||[],i)}},7255:(t,e,n)=>{var i=n(7422);t.exports=function(t){return function(e){return i(e,t)}}},7296:(t,e,n)=>{var i,r=n(5481),s=(i=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";t.exports=function(t){return!!s&&s in t}},7301:t=>{t.exports=function(t){return function(e){return t(e)}}},7334:t=>{t.exports=function(t){return function(){return t}}},7400:(t,e,n)=>{var i=n(9374),r=1/0;t.exports=function(t){return t?(t=i(t))===r||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},7422:(t,e,n)=>{var i=n(1769),r=n(7797);t.exports=function(t,e){for(var n=0,s=(e=i(e,t)).length;null!=t&&n<s;)t=t[r(e[n++])];return n&&n==s?t:void 0}},7473:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},7534:(t,e,n)=>{var i=n(2552),r=n(346);t.exports=function(t){return r(t)&&"[object Arguments]"==i(t)}},7556:(t,e,n)=>{var i=n(1873),r=n(4932),s=n(6449),o=n(4394),a=i?i.prototype:void 0,l=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(s(e))return r(e,t)+"";if(o(e))return l?l.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},7670:(t,e,n)=>{var i=n(2651);t.exports=function(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}},7797:(t,e,n)=>{var i=n(4394);t.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},7805:(t,e,n)=>{var i=n(3360),r=n(5288);t.exports=function(t,e,n){(void 0!==n&&!r(t[e],n)||void 0===n&&!(e in t))&&i(t,e,n)}},7828:(t,e,n)=>{var i=n(9325).Uint8Array;t.exports=i},7978:(t,e,n)=>{var i=n(270),r=n(8156),s=n(631),o=n(8586),a=n(756),l=n(7197),c=n(7797);t.exports=function(t,e){return o(t)&&a(e)?l(c(t),e):function(n){var o=r(n,t);return void 0===o&&o===e?s(n,t):i(e,o,3)}}},8077:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},8096:t=>{t.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},8142:(t,e,n)=>{t=n.nmd(t);var i="__lodash_hash_undefined__",r=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",d="[object Function]",u="[object Map]",h="[object Number]",p="[object Object]",f="[object Promise]",g="[object RegExp]",m="[object Set]",v="[object String]",b="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",C=/^\[object .+?Constructor\]$/,x=/^(?:0|[1-9]\d*)$/,T={};T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T[s]=T[o]=T[y]=T[a]=T[w]=T[l]=T[c]=T[d]=T[u]=T[h]=T[p]=T[g]=T[m]=T[v]=T[b]=!1;var E="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,A="object"==typeof self&&self&&self.Object===Object&&self,S=E||A||Function("return this")(),I=e&&!e.nodeType&&e,N=I&&t&&!t.nodeType&&t,L=N&&N.exports===I,_=L&&E.process,k=function(){try{return _&&_.binding&&_.binding("util")}catch(t){}}(),O=k&&k.isTypedArray;function P(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function M(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function j(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var q,D,B,$=Array.prototype,R=Function.prototype,U=Object.prototype,V=S["__core-js_shared__"],H=R.toString,F=U.hasOwnProperty,z=(q=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+q:"",G=U.toString,Z=RegExp("^"+H.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),W=L?S.Buffer:void 0,J=S.Symbol,K=S.Uint8Array,Y=U.propertyIsEnumerable,X=$.splice,Q=J?J.toStringTag:void 0,tt=Object.getOwnPropertySymbols,et=W?W.isBuffer:void 0,nt=(D=Object.keys,B=Object,function(t){return D(B(t))}),it=Nt(S,"DataView"),rt=Nt(S,"Map"),st=Nt(S,"Promise"),ot=Nt(S,"Set"),at=Nt(S,"WeakMap"),lt=Nt(Object,"create"),ct=Ot(it),dt=Ot(rt),ut=Ot(st),ht=Ot(ot),pt=Ot(at),ft=J?J.prototype:void 0,gt=ft?ft.valueOf:void 0;function mt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function vt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function bt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function yt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new bt;++e<n;)this.add(t[e])}function wt(t){var e=this.__data__=new vt(t);this.size=e.size}function Ct(t,e){for(var n=t.length;n--;)if(Pt(t[n][0],e))return n;return-1}function xt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Q&&Q in Object(t)?function(t){var e=F.call(t,Q),n=t[Q];try{t[Q]=void 0;var i=!0}catch(t){}var r=G.call(t);return i&&(e?t[Q]=n:delete t[Q]),r}(t):function(t){return G.call(t)}(t)}function Tt(t){return Rt(t)&&xt(t)==s}function Et(t,e,n,i,r){return t===e||(null==t||null==e||!Rt(t)&&!Rt(e)?t!=t&&e!=e:function(t,e,n,i,r,d){var f=jt(t),b=jt(e),C=f?o:_t(t),x=b?o:_t(e),T=(C=C==s?p:C)==p,E=(x=x==s?p:x)==p,A=C==x;if(A&&qt(t)){if(!qt(e))return!1;f=!0,T=!1}if(A&&!T)return d||(d=new wt),f||Ut(t)?At(t,e,n,i,r,d):function(t,e,n,i,r,s,o){switch(n){case w:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case y:return!(t.byteLength!=e.byteLength||!s(new K(t),new K(e)));case a:case l:case h:return Pt(+t,+e);case c:return t.name==e.name&&t.message==e.message;case g:case v:return t==e+"";case u:var d=M;case m:var p=1&i;if(d||(d=j),t.size!=e.size&&!p)return!1;var f=o.get(t);if(f)return f==e;i|=2,o.set(t,e);var b=At(d(t),d(e),i,r,s,o);return o.delete(t),b;case"[object Symbol]":if(gt)return gt.call(t)==gt.call(e)}return!1}(t,e,C,n,i,r,d);if(!(1&n)){var S=T&&F.call(t,"__wrapped__"),I=E&&F.call(e,"__wrapped__");if(S||I){var N=S?t.value():t,L=I?e.value():e;return d||(d=new wt),r(N,L,n,i,d)}}return!!A&&(d||(d=new wt),function(t,e,n,i,r,s){var o=1&n,a=St(t),l=a.length;if(l!=St(e).length&&!o)return!1;for(var c=l;c--;){var d=a[c];if(!(o?d in e:F.call(e,d)))return!1}var u=s.get(t);if(u&&s.get(e))return u==e;var h=!0;s.set(t,e),s.set(e,t);for(var p=o;++c<l;){var f=t[d=a[c]],g=e[d];if(i)var m=o?i(g,f,d,e,t,s):i(f,g,d,t,e,s);if(!(void 0===m?f===g||r(f,g,n,i,s):m)){h=!1;break}p||(p="constructor"==d)}if(h&&!p){var v=t.constructor,b=e.constructor;v==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(h=!1)}return s.delete(t),s.delete(e),h}(t,e,n,i,r,d))}(t,e,n,i,Et,r))}function At(t,e,n,i,r,s){var o=1&n,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t);if(c&&s.get(e))return c==e;var d=-1,u=!0,h=2&n?new yt:void 0;for(s.set(t,e),s.set(e,t);++d<a;){var p=t[d],f=e[d];if(i)var g=o?i(f,p,d,e,t,s):i(p,f,d,t,e,s);if(void 0!==g){if(g)continue;u=!1;break}if(h){if(!P(e,(function(t,e){if(o=e,!h.has(o)&&(p===t||r(p,t,n,i,s)))return h.push(e);var o}))){u=!1;break}}else if(p!==f&&!r(p,f,n,i,s)){u=!1;break}}return s.delete(t),s.delete(e),u}function St(t){return function(t,e,n){var i=e(t);return jt(t)?i:function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}(i,n(t))}(t,Vt,Lt)}function It(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function Nt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!$t(t)||function(t){return!!z&&z in t}(t))&&(Dt(t)?Z:C).test(Ot(t))}(n)?n:void 0}mt.prototype.clear=function(){this.__data__=lt?lt(null):{},this.size=0},mt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},mt.prototype.get=function(t){var e=this.__data__;if(lt){var n=e[t];return n===i?void 0:n}return F.call(e,t)?e[t]:void 0},mt.prototype.has=function(t){var e=this.__data__;return lt?void 0!==e[t]:F.call(e,t)},mt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=lt&&void 0===e?i:e,this},vt.prototype.clear=function(){this.__data__=[],this.size=0},vt.prototype.delete=function(t){var e=this.__data__,n=Ct(e,t);return!(n<0||(n==e.length-1?e.pop():X.call(e,n,1),--this.size,0))},vt.prototype.get=function(t){var e=this.__data__,n=Ct(e,t);return n<0?void 0:e[n][1]},vt.prototype.has=function(t){return Ct(this.__data__,t)>-1},vt.prototype.set=function(t,e){var n=this.__data__,i=Ct(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},bt.prototype.clear=function(){this.size=0,this.__data__={hash:new mt,map:new(rt||vt),string:new mt}},bt.prototype.delete=function(t){var e=It(this,t).delete(t);return this.size-=e?1:0,e},bt.prototype.get=function(t){return It(this,t).get(t)},bt.prototype.has=function(t){return It(this,t).has(t)},bt.prototype.set=function(t,e){var n=It(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},yt.prototype.add=yt.prototype.push=function(t){return this.__data__.set(t,i),this},yt.prototype.has=function(t){return this.__data__.has(t)},wt.prototype.clear=function(){this.__data__=new vt,this.size=0},wt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},wt.prototype.get=function(t){return this.__data__.get(t)},wt.prototype.has=function(t){return this.__data__.has(t)},wt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof vt){var i=n.__data__;if(!rt||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new bt(i)}return n.set(t,e),this.size=n.size,this};var Lt=tt?function(t){return null==t?[]:(t=Object(t),function(e){for(var n=-1,i=null==e?0:e.length,r=0,s=[];++n<i;){var o=e[n];a=o,Y.call(t,a)&&(s[r++]=o)}var a;return s}(tt(t)))}:function(){return[]},_t=xt;function kt(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||x.test(t))&&t>-1&&t%1==0&&t<e}function Ot(t){if(null!=t){try{return H.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Pt(t,e){return t===e||t!=t&&e!=e}(it&&_t(new it(new ArrayBuffer(1)))!=w||rt&&_t(new rt)!=u||st&&_t(st.resolve())!=f||ot&&_t(new ot)!=m||at&&_t(new at)!=b)&&(_t=function(t){var e=xt(t),n=e==p?t.constructor:void 0,i=n?Ot(n):"";if(i)switch(i){case ct:return w;case dt:return u;case ut:return f;case ht:return m;case pt:return b}return e});var Mt=Tt(function(){return arguments}())?Tt:function(t){return Rt(t)&&F.call(t,"callee")&&!Y.call(t,"callee")},jt=Array.isArray,qt=et||function(){return!1};function Dt(t){if(!$t(t))return!1;var e=xt(t);return e==d||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Bt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}function $t(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Rt(t){return null!=t&&"object"==typeof t}var Ut=O?function(t){return function(e){return t(e)}}(O):function(t){return Rt(t)&&Bt(t.length)&&!!T[xt(t)]};function Vt(t){return null!=(e=t)&&Bt(e.length)&&!Dt(e)?function(t,e){var n=jt(t),i=!n&&Mt(t),r=!n&&!i&&qt(t),s=!n&&!i&&!r&&Ut(t),o=n||i||r||s,a=o?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],l=a.length;for(var c in t)!e&&!F.call(t,c)||o&&("length"==c||r&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||kt(c,l))||a.push(c);return a}(t):function(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||U))return nt(t);var e,n,i=[];for(var r in Object(t))F.call(t,r)&&"constructor"!=r&&i.push(r);return i}(t);var e}t.exports=function(t,e){return Et(t,e)}},8156:(t,e,n)=>{var i=n(7422);t.exports=function(t,e,n){var r=null==t?void 0:i(t,e);return void 0===r?n:r}},8223:(t,e,n)=>{var i=n(6110)(n(9325),"Map");t.exports=i},8303:(t,e,n)=>{var i=n(6110)(n(9325),"WeakMap");t.exports=i},8317:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(5759);e.default=class{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);const e=this.ops[this.index];if(e){const n=this.offset,r=i.default.length(e);if(t>=r-n?(t=r-n,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};{const i={};return e.attributes&&(i.attributes=e.attributes),"number"==typeof e.retain?i.retain=t:"object"==typeof e.retain&&null!==e.retain?i.retain=e.retain:"string"==typeof e.insert?i.insert=e.insert.substr(n,t):i.insert=e.insert,i}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?i.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const t=this.ops[this.index];return t?"number"==typeof t.delete?"delete":"number"==typeof t.retain||"object"==typeof t.retain&&null!==t.retain?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);{const t=this.offset,e=this.index,n=this.next(),i=this.ops.slice(this.index);return this.offset=t,this.index=e,[n].concat(i)}}return[]}}},8329:(t,e,n)=>{var i=n(4894);t.exports=function(t,e){return function(n,r){if(null==n)return n;if(!i(n))return t(n,r);for(var s=n.length,o=e?s:-1,a=Object(n);(e?o--:++o<s)&&!1!==r(a[o],o,a););return n}}},8586:(t,e,n)=>{var i=n(6449),r=n(4394),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!r(t))||o.test(t)||!s.test(t)||null!=e&&t in Object(e)}},8655:(t,e,n)=>{var i=n(6025);t.exports=function(t){return i(this.__data__,t)>-1}},8754:(t,e,n)=>{var i=n(5160);t.exports=function(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:i(t,e,n)}},8859:(t,e,n)=>{var i=n(3661),r=n(1380),s=n(1459);function o(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=r,o.prototype.has=s,t.exports=o},8879:(t,e,n)=>{var i=n(4335)(Object.getPrototypeOf,Object);t.exports=i},8984:(t,e,n)=>{var i=n(5527),r=n(3650),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return r(t);var e=[];for(var n in Object(t))s.call(t,n)&&"constructor"!=n&&e.push(n);return e}},9106:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(7193),r=n(8142);var s;!function(t){t.compose=function(t={},e={},n=!1){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});let r=i(e);n||(r=Object.keys(r).reduce(((t,e)=>(null!=r[e]&&(t[e]=r[e]),t)),{}));for(const n in t)void 0!==t[n]&&void 0===e[n]&&(r[n]=t[n]);return Object.keys(r).length>0?r:void 0},t.diff=function(t={},e={}){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});const n=Object.keys(t).concat(Object.keys(e)).reduce(((n,i)=>(r(t[i],e[i])||(n[i]=void 0===e[i]?null:e[i]),n)),{});return Object.keys(n).length>0?n:void 0},t.invert=function(t={},e={}){t=t||{};const n=Object.keys(e).reduce(((n,i)=>(e[i]!==t[i]&&void 0!==t[i]&&(n[i]=e[i]),n)),{});return Object.keys(t).reduce(((n,i)=>(t[i]!==e[i]&&void 0===e[i]&&(n[i]=null),n)),n)},t.transform=function(t,e,n=!1){if("object"!=typeof t)return e;if("object"!=typeof e)return;if(!n)return e;const i=Object.keys(e).reduce(((n,i)=>(void 0===t[i]&&(n[i]=e[i]),n)),{});return Object.keys(i).length>0?i:void 0}}(s||(s={})),e.default=s},9219:t=>{t.exports=function(t,e){return t.has(e)}},9302:(t,e,n)=>{var i=n(3488),r=n(6757),s=n(2865);t.exports=function(t,e){return s(r(t,e,i),t+"")}},9325:(t,e,n)=>{var i=n(4840),r="object"==typeof self&&self&&self.Object===Object&&self,s=i||r||Function("return this")();t.exports=s},9326:(t,e,n)=>{var i=n(1769),r=n(2428),s=n(6449),o=n(361),a=n(294),l=n(7797);t.exports=function(t,e,n){for(var c=-1,d=(e=i(e,t)).length,u=!1;++c<d;){var h=l(e[c]);if(!(u=null!=t&&n(t,h)))break;t=t[h]}return u||++c!=d?u:!!(d=null==t?0:t.length)&&a(d)&&o(h,d)&&(s(t)||r(t))}},9344:(t,e,n)=>{var i=n(3805),r=Object.create,s=function(){function t(){}return function(e){if(!i(e))return{};if(r)return r(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=s},9350:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},9374:(t,e,n)=>{var i=n(4128),r=n(3805),s=n(4394),o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(s(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=i(t);var n=a.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):o.test(t)?NaN:+t}},9570:(t,e,n)=>{var i=n(7334),r=n(3243),s=n(3488),o=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:s;t.exports=o},9653:(t,e,n)=>{var i=n(7828);t.exports=function(t){var e=new t.constructor(t.byteLength);return new i(e).set(new i(t)),e}},9698:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},9770:t=>{t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}},9817:t=>{t.exports=function(t){return this.__data__.has(t)}},9884:(t,e,n)=>{var i=n(1791),r=n(7241);t.exports=function(t){return i(t,r(t))}},9905:t=>{t.exports=function(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}},9935:t=>{t.exports=function(){return!1}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={id:i,loaded:!1,exports:{}};return t[i](s,s.exports,n),s.loaded=!0,s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t={};n.r(t),n.d(t,{Attributor:()=>wr,AttributorStore:()=>Nr,BlockBlot:()=>Rr,ClassAttributor:()=>Ar,ContainerBlot:()=>Vr,EmbedBlot:()=>Hr,InlineBlot:()=>Br,LeafBlot:()=>Or,ParentBlot:()=>qr,Registry:()=>Tr,Scope:()=>yr,ScrollBlot:()=>Gr,StyleAttributor:()=>Ir,TextBlot:()=>Wr});class e{constructor(){this._themes=[],this._services=[],this._forms=[],this._media=[],this._currentThemeId=null,this._organisationLogo=null,this.currentLanguage="en",this._isInitialized=!1}static getInstance(){return e.instance||(e.instance=new e),e.instance}init(t,e,n,i,r,s,o,a,l){this._isInitialized?console.warn("AppConfig already initialized - ignoring new data"):(this.UC=t,this._themes=e,this._services=n,this._forms=i,this._media=r,this._currentThemeId=s,this._organisationLogo=o,this.addServiceButtonEvent=l,this.currentLanguage=a,this._isInitialized=!0)}get themes(){return this._themes}get services(){return this._services}get forms(){return this._forms}get media(){return this._media}set media(t){this._media=t}get currentThemeId(){return this._currentThemeId}set currentThemeId(t){this._currentThemeId=t}get organisationLogo(){return this._organisationLogo}get isInitialized(){return this._isInitialized}}e.instance=null;class i{constructor(t,e=300){this.preloaderElement=t,this.minDuration=e,this._loading=!1,this._startTime=0,this.transitionDuration=200}get loading(){return this._loading}set loading(t){this._loading=t,t?(this._startTime=performance.now(),this.showPreloader()):this.hidePreloader()}showPreloader(){this.preloaderElement.style.display="flex",requestAnimationFrame((()=>{this.preloaderElement.style.transform=`opacity ${this.transitionDuration}ms ease-in-out 0s`,this.preloaderElement.style.opacity="1"}))}hidePreloader(){const t=performance.now()-this._startTime;t>=this.minDuration?(this.preloaderElement.style.transition=`opacity ${this.transitionDuration}ms ease-in-out`,this.preloaderElement.style.opacity="0",setTimeout((()=>{this.preloaderElement.style.display="none"}),this.transitionDuration)):setTimeout((()=>{this.hidePreloader()}),this.minDuration-t)}}var r=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};const s=window.location.origin+(window.location.origin.startsWith("http://localhost")?"/Comforta_version20DevelopmentNETPostgreSQL":"");class o{constructor(){this.services=[],this.forms=[],this.preloaderEl=document.getElementById("preloader"),this.config=e.getInstance(),this.init()}init(){this.services=this.config.services,this.forms=this.config.forms,this.loadingManager=new i(this.preloaderEl)}fetchAPI(t){return r(this,arguments,void 0,(function*(t,e={},n=!1){const i={headers:{"Content-Type":"application/json"}};try{n||(this.loadingManager.loading=!0);const r=yield fetch(`${s}${t}`,Object.assign(Object.assign({},i),e));if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return yield r.json()}catch(e){throw console.error(`API Error (${t}):`,e),e}finally{n||(this.loadingManager.loading=!1)}}))}debugApp(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/debug",{method:"POST",body:JSON.stringify({PageUrlList:t})},!0)}))}getVersions(){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/appversions",{},!0)}))}getVersion(){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/appversion",{},!0)}))}createVersion(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/create-appversion",{method:"POST",body:JSON.stringify({AppVersionName:t})})}))}duplicateVersion(t,e){return r(this,void 0,void 0,(function*(){return console.log("AppVersionId:",t,"versionName: ",e),yield this.fetchAPI("/api/toolbox/v2/copy-appversion",{method:"POST",body:JSON.stringify({AppVersionId:t,AppVersionName:e})})}))}activateVersion(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/activate-appversion",{method:"POST",body:JSON.stringify({AppVersionId:t})})}))}createMenuPage(t,e){return r(this,void 0,void 0,(function*(){return console.log({appVersionId:t,pageName:e}),yield this.fetchAPI("/api/toolbox/v2/create-menu-page",{method:"POST",body:JSON.stringify({appVersionId:t,pageName:e})})}))}createServicePage(t,e){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/create-service-page",{method:"POST",body:JSON.stringify({appVersionId:t,ProductServiceId:e})})}))}createContentPage(t,e){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/create-content-page",{method:"POST",body:JSON.stringify({appVersionId:t,PageName:e})})}))}createServiceCTA(t){return r(this,void 0,void 0,(function*(){const e=yield this.fetchAPI("/api/toolbox/v2/create-service-cta",{method:"POST",body:JSON.stringify(t)});return console.log(e),e}))}autoSavePage(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/save-page",{method:"POST",body:JSON.stringify(t)},!0)}))}updatePageTitle(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/update-page-title",{method:"POST",body:JSON.stringify(t)},!0)}))}publishAppVersion(t){return r(this,arguments,void 0,(function*(t,e=!1){return yield this.fetchAPI("/api/toolbox/v2/publish-appversion",{method:"POST",body:JSON.stringify({AppVersionId:t,Notify:e})},!0)}))}getPages(){return r(this,void 0,void 0,(function*(){return(yield this.fetchAPI("/api/toolbox/pages/list",{},!0)).SDT_PageCollection}))}getServices(){return r(this,void 0,void 0,(function*(){const t=yield this.fetchAPI("/api/toolbox/services",{},!0);return this.services=t.SDT_ProductServiceCollection,this.services}))}getSinglePage(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI(`/api/toolbox/singlepage?Pageid=${t}`)}))}deletePage(t,e){return r(this,void 0,void 0,(function*(){return console.log({AppVersionId:t,PageId:e}),yield this.fetchAPI("/api/toolbox/V2/delete-page",{method:"POST",body:JSON.stringify({AppVersionId:t,PageId:e})})}))}getPagesService(){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/pages/tree")}))}createNewPage(t,e){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/create-page",{method:"POST",body:JSON.stringify({PageName:t,PageJsonContent:JSON.stringify({})})})}))}updatePage(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/update-page",{method:"POST",body:JSON.stringify(t)},!0)}))}updatePagesBatch(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/update-pages-batch",{method:"POST",body:JSON.stringify(t)})}))}addPageChild(t,e){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/add-page-children",{method:"POST",body:JSON.stringify({ParentPageId:e,ChildPageId:t})})}))}createDynamicFormPage(t,e){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/create-dynamic-form-page",{method:"POST",body:JSON.stringify({FormId:t,PageName:e})})}))}getLocationTheme(){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/location-theme")}))}updateLocationTheme(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/update-location-theme",{method:"POST",body:JSON.stringify({ThemeId:t})})}))}getMediaFiles(){return r(this,void 0,void 0,(function*(){return(yield this.fetchAPI("/api/toolbox/media",{},!0)).SDT_MediaCollection}))}deleteMedia(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI(`/api/media/delete?MediaId=${t}`)}))}uploadFile(t,e,n,i){return r(this,void 0,void 0,(function*(){if(!t)throw new Error("Please select a file!");return yield this.fetchAPI("/api/media/upload",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({MediaName:e,MediaImageData:t,MediaSize:n,MediaType:i})},!0)}))}uploadLogo(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/media/upload/logo",{method:"POST",body:JSON.stringify({LogoUrl:t})})}))}uploadProfileImage(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/media/upload/profile",{method:"POST",body:JSON.stringify({ProfileImageUrl:t})})}))}getContentPageData(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI(`/api/productservice?Productserviceid=${t}`,{},!0)}))}updateDescription(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/update-service",{method:"POST",body:JSON.stringify(t)})}))}updateContentImage(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/update-service",{method:"POST",body:JSON.stringify(t)})}))}deleteContentImage(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/delete-service-image",{method:"POST",body:JSON.stringify(t)})}))}getLocationData(){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/get-location",{},!0)}))}updateLocationInfo(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/update-location",{method:"POST",body:JSON.stringify(t)})}))}}class a{constructor(t,e,n=5e3){this.closeTimeout=null,this.alertContainer=document.createElement("div"),this.alertContainer.className="tb-alerts-container",this.alertContainer.id="tb-alerts-container",this.alertElement=document.createElement("div"),this.alertElement.className=`tb-alert ${t}`,this.alertElement.style.display="flex",this.alertElement.style.opacity="0",this.alertElement.id=Math.random().toString(36);const i=document.createElement("div");i.className="tb-alert-header";const r=document.createElement("strong");r.textContent=t.charAt(0).toUpperCase()+t.slice(1);const s=document.createElement("span");s.className="tb-alert-close-btn",s.textContent="✖",s.addEventListener("click",(()=>this.close())),i.appendChild(r),i.appendChild(s);const o=document.createElement("p");o.textContent=e,this.alertElement.appendChild(i),this.alertElement.appendChild(o),this.alertContainer.appendChild(this.alertElement),document.body.appendChild(this.alertContainer),setTimeout((()=>this.alertElement.style.opacity="1"),50),this.closeTimeout=window.setTimeout((()=>this.close()),n)}close(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null),this.alertElement.style.opacity="0",setTimeout((()=>this.alertElement.remove()),500)}}class l{constructor(t){this.modalContainer=document.createElement("div"),this.modalContainer.className="popup-modal-link",this.modalContainer.style.display="flex";const e=document.createElement("div");e.className="popup",t.width&&(e.style.width=t.width);const n=document.createElement("div");n.className="popup-header";const i=document.createElement("span");i.textContent=t.title;const r=document.createElement("hr");this.popupBody=document.createElement("div"),this.popupBody.className="popup-body",t.body&&("string"==typeof t.body?this.popupBody.innerHTML=t.body:this.popupBody.appendChild(t.body));const s=this.createCloseButton();n.appendChild(i),n.appendChild(s),e.appendChild(n),e.appendChild(r),e.appendChild(this.popupBody),this.modalContainer.appendChild(e)}createCloseButton(){const t=document.createElement("button");return t.className="close",t.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 21 21">\n                <path id="Icon_material-close" data-name="Icon material-close" d="M28.5,9.615,26.385,7.5,18,15.885,9.615,7.5,7.5,9.615,15.885,18,7.5,26.385,9.615,28.5,18,20.115,26.385,28.5,28.5,26.385,20.115,18Z" transform="translate(-7.5 -7.5)" fill="#6a747f" opacity="0.54"></path>\n            </svg>\n        ',t.addEventListener("click",(()=>this.close())),t}open(t){(t||document.body).appendChild(this.modalContainer)}close(){this.modalContainer.remove()}}var c=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class d{constructor(){this.themes=[],this.appVersion=globalThis.activeVersion,this.config=e.getInstance()}getActiveVersion(){return c(this,void 0,void 0,(function*(){const t=new o,e=yield t.getVersion();return console.log("current",e),yield t.getVersions(),globalThis.activeVersion=e.AppVersion,globalThis.activeVersion}))}getPages(){var t;return(null===(t=globalThis.activeVersion)||void 0===t?void 0:t.Pages)||null}getActiveVersionId(){return c(this,void 0,void 0,(function*(){return globalThis.activeVersion.AppVersionId}))}updatePageTitle(t){return c(this,void 0,void 0,(function*(){const e=globalThis.currentPageId,n=globalThis.tileMapper,i=globalThis.selectedComponent;if(!e)return;const r=new o;if(i&&n){const s=i.parent().getId(),o=i.find(".tile-title")[0];if(!o)return;o.setAttributes({title:t}),o.empty(),o.append(t,{at:0});const a={AppVersionId:yield this.getActiveVersionId(),PageId:e,PageName:t};yield r.updatePageTitle(a),n.updateTile(s,"Name",t),n.updateTile(s,"Text",t)}}))}}class u{constructor(t,e){this.button=null,this.pageData=t,this.toolboxService=new o,this.appVersion=new d,t&&(this.pageData=t,this.button=document.createElement("button"),this.button.innerHTML='<i class="fa fa-trash"></i>',this.button.className="delete-page-icon",this.button.title="Delete Page",this.button.setAttribute("data-id",t.PageId),this.button.addEventListener("click",(t=>this.handleDelete(t))),e.insertBefore(this.button,e.firstChild))}handleDelete(t){t.preventDefault(),t.target.dataset.id;const e=document.createElement("div"),n=document.createElement("div");n.classList.add("popup-body"),n.id="confirmation_modal_message",n.innerText="Are you sure you want to delete this page?";const i=document.createElement("div");i.classList.add("popup-footer");const r=document.createElement("button");r.id="yes_delete",r.classList.add("tb-btn","tb-btn-primary"),r.innerText="Delete";const s=document.createElement("button");s.id="close_popup",s.classList.add("tb-btn","tb-btn-outline"),s.innerText="Cancel",i.appendChild(r),i.appendChild(s),e.appendChild(n),e.appendChild(i);const o=new l({title:"Delete Page",width:"100",body:e});o.open(),s.addEventListener("click",(t=>{o.close()})),r.addEventListener("click",(t=>{this.toolboxService.deletePage(this.appVersion.appVersion.AppVersionId,this.pageData.PageId).then((t=>{console.log("fd",t),t.error.message?new a("error",t.error.message):(o.close(),localStorage.removeItem(`data-${this.pageData.PageId}`),window.app.toolboxApp.editor.init())}))}))}}class h{constructor(t){this.pageId=t}updateTime(){const t=new Date;let e=t.getHours();const n=e>=12?"PM":"AM";return e%=12,e=e||12,`${e}:${t.getMinutes().toString().padStart(2,"0")} ${n}`}}class p{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("header");const t=new h("clock"),e=document.createElement("span");e.id="clock",e.textContent=t.updateTime();const n=document.createElement("span");n.classList.add("icons");const i=document.createElement("i");i.classList.add("fas","fa-signal");const r=document.createElement("i");r.classList.add("fas","fa-wifi");const s=document.createElement("i");s.classList.add("fas","fa-battery"),n.appendChild(i),n.appendChild(r),n.appendChild(s),this.container.appendChild(e),this.container.appendChild(n)}render(t){t.appendChild(this.container)}}class f{constructor(){this.container=document.createElement("div"),this.editor=new hc,this.init()}init(){this.container.classList.add("home-app-bar");const t=document.createElement("div");t.classList.add("logo-added");const e=document.createElement("img");e.src=this.editor.organisationLogo||"/Resources/ComfortaLogo1.png",e.style.height="35px",t.appendChild(e);const n=document.createElement("div");n.classList.add("profile-section"),n.style.display="flex",n.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="18" viewBox="0 0 19.422 21.363">\n                <path id="Path_1327" data-name="Path 1327" d="M15.711,5a6.8,6.8,0,0,0-3.793,12.442A9.739,9.739,0,0,0,6,26.364H7.942a7.769,7.769,0,1,1,15.537,0h1.942A9.739,9.739,0,0,0,19.5,17.442,6.8,6.8,0,0,0,15.711,5Zm0,1.942A4.855,4.855,0,1,1,10.855,11.8,4.841,4.841,0,0,1,15.711,6.942Z" transform="translate(-6 -5)" fill="#fff"></path>\n            </svg>\n        ',this.container.appendChild(t),this.container.appendChild(n)}render(t){t.appendChild(this.container)}}const g='\n    data-gjs-draggable="false"\n    data-gjs-selectable="true"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n',m='\n    data-gjs-draggable="true"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n    data-gjs-type="tile-wrapper"\n',v='\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n',b='\n    data-gjs-type="template-wrapper"\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="true"\n    data-gjs-droppable="[data-gjs-type=\'tile-wrapper\']"\n',y='\n    data-gjs-draggable="true"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-droppable="false"\n    data-gjs-highlightable="false"\n    data-gjs-hoverable="false"\n',w='\n    data-gjs-draggable="true"\n    data-gjs-selectable="true"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n',C='\n    data-gjs-type="template-wrapper"\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="true"\n    data-gjs-droppable="[data-gjs-type=\'cta-buttons\']"\n';const x=t=>{let e="";for(let n=0;n<t;n++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(Math.floor(52*Math.random()));return e+(new Date).toISOString().replace(/[-:.TZ]/g,"")};function T(t){return e=this,n=void 0,r=function*(){const e=yield fetch(t),n=yield e.blob();return new Promise(((t,e)=>{const i=new FileReader;i.onloadend=()=>t(i.result),i.onerror=e,i.readAsDataURL(n)}))},new((i=void 0)||(i=Promise))((function(t,s){function o(t){try{l(r.next(t))}catch(t){s(t)}}function a(t){try{l(r.throw(t))}catch(t){s(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(o,a)}l((r=r.apply(e,n||[])).next())}));var e,n,i,r}function E(t,e){return t.length>e?t.slice(0,e)+"...":t}class A{constructor(t,e){this.containerId=e,this.paletteContainer=document.createElement("div"),this.paletteContainer.className="color-palette",this.paletteContainer.id=e,Object.entries(t).forEach((([t,e])=>{const n=document.createElement("div");n.className="color-item";const i=document.createElement("input");i.type="radio",i.id=`color-${t}`,i.name="theme-color",i.value=e;const r=document.createElement("label");r.htmlFor=`color-${t}`,r.className="color-box",r.setAttribute("data-tile-bgcolor",e),r.style.backgroundColor=e,n.appendChild(i),n.appendChild(r),n.addEventListener("click",(n=>{n.preventDefault();const r=globalThis.selectedComponent;if(!r)return;const s=r.parent(),o=s.parent(),a=globalThis.tileMapper.getTile(o.getId(),s.getId());if(null==a?void 0:a.BGImageUrl)return;const l=r.getStyle()["background-color"];r.addStyle({"background-color":l===e?"transparent":e}),console.log("Tile Attributes",e),r.getEl().style.backgroundColor=l===e?"transparent":e,globalThis.tileMapper.updateTile(r.parent().getId(),"BGColor",t),i.checked=l!==e})),this.paletteContainer.appendChild(n)}))}render(t){t.appendChild(this.paletteContainer)}refresh(t){const e=document.getElementById(this.containerId);e?e.replaceWith(this.paletteContainer):t.appendChild(this.paletteContainer)}}class S{constructor(t){this.pageId=t}contentRow(t){return JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),{ContentType:t.ContentType,ContentValue:t.Content}}moveContentRow(t,e){var n;const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(n=null==i?void 0:i.PageContentStructure)||void 0===n?void 0:n.Content))return;const r=i.PageContentStructure.Content,s=r.findIndex((e=>e.ContentId===t));if(-1===s||e<0||e>=r.length)return;const[o]=r.splice(s,1);r.splice(e,0,o),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i))}updateContentDescription(t,e){var n;const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(n=null==i?void 0:i.PageContentStructure)||void 0===n?void 0:n.Content))return!1;const r=i.PageContentStructure.Content.find((e=>e.ContentId===t));return!!r&&(r.ContentValue=e,localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i)),!0)}updateContentImage(t,e){var n;const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(n=null==i?void 0:i.PageContentStructure)||void 0===n?void 0:n.Content))return!1;const r=i.PageContentStructure.Content.find((e=>e.ContentId===t));return!!r&&(r.ContentValue=e,localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i)),!0)}moveCta(t,e){var n;const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(n=null==i?void 0:i.PageContentStructure)||void 0===n?void 0:n.Cta))return;const r=i.PageContentStructure.Cta,s=r.findIndex((e=>e.CtaId===t));if(-1===s||e<0||e>=r.length)return;const[o]=r.splice(s,1);r.splice(e,0,o),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i))}addContentCta(t){var e;const n=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),i={CtaId:t.CtaId,CtaType:t.CtaType,CtaLabel:t.CtaLabel,CtaAction:t.CtaAction,CtaBGColor:t.CtaBGColor,CtaButtonType:t.CtaButtonType,CtaButtonImgUrl:t.CtaButtonImgUrl||""};console.log(i),n.PageContentStructure.Cta||(n.PageContentStructure.Cta=[]),null===(e=null==n?void 0:n.PageContentStructure)||void 0===e||e.Cta.push(i),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(n))}removeContentCta(t){const e=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(e&&e.PageContentStructure&&e.PageContentStructure.Cta){const n=e.PageContentStructure.Cta.findIndex((e=>e.CtaId===t));if(-1!==n&&e.PageContentStructure.Cta[n])return e.PageContentStructure.Cta.splice(n,1),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(e)),!0}}updateContentCtaBGColor(t,e){const n=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(n&&n.PageContentStructure&&n.PageContentStructure.Cta){const i=n.PageContentStructure.Cta.findIndex((e=>e.CtaId===t));if(-1!==i&&n.PageContentStructure.Cta[i])return n.PageContentStructure.Cta[i].CtaBGColor=e,localStorage.setItem(`data-${this.pageId}`,JSON.stringify(n)),!0}}updateContentButtonType(t,e,n){const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(i&&i.PageContentStructure&&i.PageContentStructure.Cta){const r=i.PageContentStructure.Cta.findIndex((e=>e.CtaId===t));if(-1!==r&&i.PageContentStructure.Cta[r])return i.PageContentStructure.Cta[r].CtaButtonType=e,n&&(i.PageContentStructure.Cta[r].CtaButtonImgUrl=n),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i)),!0}}updateContentCtaLabel(t,e){const n=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(n&&n.PageContentStructure&&n.PageContentStructure.Cta){const i=n.PageContentStructure.Cta.findIndex((e=>e.CtaId===t));if(-1!==i&&n.PageContentStructure.Cta[i])return n.PageContentStructure.Cta[i].CtaLabel=e,localStorage.setItem(`data-${this.pageId}`,JSON.stringify(n)),!0}}getContentCta(t){const e=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(e&&e.PageContentStructure&&e.PageContentStructure.Cta)return e.PageContentStructure.Cta.find((e=>e.CtaId===t))}}class I{constructor(t,e){this.value=t,this.ctaAttributes=e,this.input=document.createElement("input"),this.init()}init(){this.input.type="text",this.input.placeholder="Action",this.input.classList.add("tb-form-control"),this.input.id="cta-action-title",this.input.style.marginTop="10px",this.input.value=this.value,this.input.addEventListener("input",(t=>{const e=globalThis.selectedComponent;if(!e)return;const n=this.ctaAttributes.CtaButtonType,i=e.find(".cta-styled-btn")[0],r=e.find(".label")[0];if(r){const t="Round"===n?this.truncate(5):this.truncate(14);r.components(t),r.addAttributes({title:this.input.value})}const s=i.parent(),o=globalThis.currentPageId;new S(o).updateContentCtaLabel(s.getId(),this.input.value.trim())}))}truncate(t){return this.input.value.length>t?this.input.value.substring(0,t)+"..":this.input.value}render(t){const e=t.querySelector("#cta-action-title");e&&e.remove(),t.appendChild(this.input)}}class N{constructor(t,e){this.selectedComponent=t,this.ctaAttributes=e,this.themeManager=new q}setctaAttributes(){this.displayButtonLayouts(),this.ctaColorAttributes(),this.ctaActionDisplay(),this.selectedButtonLayout()}displayButtonLayouts(){const t=document.querySelector(".cta-button-layout-container");this.selectedComponent.parent().getClasses().includes("cta-button-container")?t&&(t.style.display="flex"):t&&(t.style.display="none")}selectedButtonLayout(){this.ctaAttributes&&document.querySelectorAll(".cta-button-layout").forEach((t=>{"FullWidth"===this.ctaAttributes.CtaButtonType&&"plain-button-layout"===t.id||"Icon"===this.ctaAttributes.CtaButtonType&&"icon-button-layout"===t.id||"Image"===this.ctaAttributes.CtaButtonType&&"image-button-layout"===t.id?t.style.border="2px solid #5068a8":t.style.border=""}))}ctaColorAttributes(){const t=document.querySelector("#content-page-section"),e=null==t?void 0:t.querySelectorAll(".color-item > input");let n=this.themeManager.getThemeCtaColor(this.ctaAttributes.CtaBGColor);null==e||e.forEach((t=>{t.value===n&&(t.checked=!0)}))}ctaActionDisplay(){const t=document.querySelector("#content-page-section"),e=this.ctaAttributes.CtaLabel;new I(e,this.ctaAttributes).render(t)}}class L{constructor(){this.themeManager=new q}getTypeSVG(t){let e;switch(t){case"Phone":e=`\n            <svg ${v} id="ixdtl" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="32"\n                        viewBox="0 0 49.417 49.418">\n                <path ${v} id="call" data-gjs-type="svg-in"\n                    d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z"\n                    transform="translate(-4 -3)" fill="#fff"></path>\n            </svg>\n            `;break;case"Email":e=`\n            <svg ${v} id="inavf" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32"\n                height="28" viewBox="0 0 41 32.8">\n                <path ${v} id="Path_1218" data-gjs-type="svg-in" data-name="Path 1218"\n                    d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z"\n                    transform="translate(-2 -4)" fill="#fff"></path>\n            </svg>\n            `;break;case"SiteUrl":e=`\n            <svg ${v} xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16">\n                <path${v} id="Path_1213" data-name="Path 1213" d="M15.833,4a4.163,4.163,0,0,0-2.958,1.229l-.979.979a4.168,4.168,0,0,0-1.229,2.958,4.1,4.1,0,0,0,.292,1.521L12.042,9.6a2.857,2.857,0,0,1,.792-2.458l.979-.979a2.853,2.853,0,0,1,2.021-.833,2.805,2.805,0,0,1,2,.833,2.85,2.85,0,0,1,0,4.021l-.979.979A2.853,2.853,0,0,1,14.833,12a2.439,2.439,0,0,1-.437-.042l-1.083,1.083a4.1,4.1,0,0,0,1.521.292A4.163,4.163,0,0,0,17.792,12.1l.979-.979A4.168,4.168,0,0,0,20,8.167,4.2,4.2,0,0,0,15.833,4ZM14.188,8.854,8.854,14.188l.958.958,5.333-5.333ZM9.167,10.667A4.163,4.163,0,0,0,6.208,11.9l-.979.979A4.168,4.168,0,0,0,4,15.833,4.2,4.2,0,0,0,8.167,20a4.163,4.163,0,0,0,2.958-1.229l.979-.979a4.168,4.168,0,0,0,1.229-2.958,4.1,4.1,0,0,0-.292-1.521L11.958,14.4a2.857,2.857,0,0,1-.792,2.458l-.979.979a2.853,2.853,0,0,1-2.021.833,2.805,2.805,0,0,1-2-.833,2.85,2.85,0,0,1,0-4.021l.979-.979A2.853,2.853,0,0,1,9.167,12a2.44,2.44,0,0,1,.438.042l1.083-1.083A4.1,4.1,0,0,0,9.167,10.667Z" transform="translate(-4 -4)" fill="#fff"></path>\n            </svg>\n            `;break;case"Form":e=`\n            <svg ${v} id="igqdh" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="26" height="30"\n                  viewBox="0 0 13 16">\n                  <path ${v} id="Path_1209" data-gjs-type="svg-in" data-name="Path 1209"\n                      d="M9.828,4A1.823,1.823,0,0,0,8,5.8V18.2A1.823,1.823,0,0,0,9.828,20h9.344A1.823,1.823,0,0,0,21,18.2V9.8a.6.6,0,0,0-.179-.424l-.006-.006L15.54,4.176A.614.614,0,0,0,15.109,4Zm0,1.2H14.5V8.6a1.823,1.823,0,0,0,1.828,1.8h3.453v7.8a.6.6,0,0,1-.609.6H9.828a.6.6,0,0,1-.609-.6V5.8A.6.6,0,0,1,9.828,5.2Zm5.891.848L18.92,9.2H16.328a.6.6,0,0,1-.609-.6Z"\n                      transform="translate(-8 -4)" fill="#fff"></path>\n              </svg>\n            `}return e}phoneCta(t,e){return`\n        <div ${w} data-gjs-type="cta-buttons" button-type="${t.CallToActionType}" class="cta-container-child cta-child" id="${e}">\n                    <div ${v} data-gjs-type="default" class="cta-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor("CtaColorOne")}">\n                        <svg ${v} id="ixdtl" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="32"\n                            viewBox="0 0 49.417 49.418">\n                            <path ${v} id="call" data-gjs-type="svg-in"\n                                d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z"\n                                transform="translate(-4 -3)" fill="#fff"></path>\n                        </svg>\n                        <div ${v} id="it1cq" data-gjs-type="default" class="cta-badge">\n                            <i ${v} id="ityrb" data-gjs-type="default" class="fa fa-minus"></i>\n                        </div>\n                    </div>\n                    <div ${v} id="irtak" data-gjs-type="text" class="cta-label label">${t.CallToActionName}</div>\n        </div>\n        `}emailCta(t,e){return`\n        <div ${w} data-gjs-type="cta-buttons"  button-type="${t.CallToActionType}" class="cta-container-child cta-child" id="${e}">\n                    <div ${v} id="i4iaf" data-gjs-type="default" class="cta-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor("CtaColorOne")}">\n                        <svg ${v} id="inavf" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32"\n                            height="28" viewBox="0 0 41 32.8">\n                            <path ${v} id="Path_1218" data-gjs-type="svg-in" data-name="Path 1218"\n                                d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z"\n                                transform="translate(-2 -4)" fill="#fff"></path>\n                        </svg>\n                        <div ${v} id="i2knu" data-gjs-type="default" class="cta-badge">\n                            <i ${v} id="idkak" data-gjs-type="default" class="fa fa-minus"></i>\n                        </div>\n                    </div>\n                    <div ${v} id="irtak" data-gjs-type="text" class="cta-label label">${t.CallToActionName}</div>\n        </div>\n        `}formCta(t,e){return`\n        <div ${w} data-gjs-type="cta-buttons"  button-type="${t.CallToActionType}" class="cta-container-child cta-child" id="${e}">\n                    <div ${v} id="i9rww" data-gjs-type="default" class="cta-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor("CtaColorOne")}">\n                        <svg ${v} id="igqdh" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="26" height="30"\n                            viewBox="0 0 13 16">\n                            <path ${v} id="Path_1209" data-gjs-type="svg-in" data-name="Path 1209"\n                                d="M9.828,4A1.823,1.823,0,0,0,8,5.8V18.2A1.823,1.823,0,0,0,9.828,20h9.344A1.823,1.823,0,0,0,21,18.2V9.8a.6.6,0,0,0-.179-.424l-.006-.006L15.54,4.176A.614.614,0,0,0,15.109,4Zm0,1.2H14.5V8.6a1.823,1.823,0,0,0,1.828,1.8h3.453v7.8a.6.6,0,0,1-.609.6H9.828a.6.6,0,0,1-.609-.6V5.8A.6.6,0,0,1,9.828,5.2Zm5.891.848L18.92,9.2H16.328a.6.6,0,0,1-.609-.6Z"\n                                transform="translate(-8 -4)" fill="#fff"></path>\n                        </svg>\n                        <div ${v} id="iina3" data-gjs-type="default" class="cta-badge">\n                            <i ${v} id="iw1yc" data-gjs-type="default" class="fa fa-minus"></i>\n                        </div>\n                    </div>\n                    <div ${v} id="irtak" data-gjs-type="text" class="cta-label label">${t.CallToActionName}</div>\n        </div>\n        `}urlCta(t,e){return`\n        <div ${w} data-gjs-type="cta-buttons"  button-type="${t.CallToActionType}" class="cta-container-child cta-child" id="${e}">\n            <div ${v} id="i4iaf" data-gjs-type="default" class="cta-button cta-styled-btn"\n                style="background-color: ${this.themeManager.getThemeCtaColor("CtaColorOne")}">\n                <svg ${v} xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16">\n                    <path${v} id="Path_1213" data-name="Path 1213" d="M15.833,4a4.163,4.163,0,0,0-2.958,1.229l-.979.979a4.168,4.168,0,0,0-1.229,2.958,4.1,4.1,0,0,0,.292,1.521L12.042,9.6a2.857,2.857,0,0,1,.792-2.458l.979-.979a2.853,2.853,0,0,1,2.021-.833,2.805,2.805,0,0,1,2,.833,2.85,2.85,0,0,1,0,4.021l-.979.979A2.853,2.853,0,0,1,14.833,12a2.439,2.439,0,0,1-.437-.042l-1.083,1.083a4.1,4.1,0,0,0,1.521.292A4.163,4.163,0,0,0,17.792,12.1l.979-.979A4.168,4.168,0,0,0,20,8.167,4.2,4.2,0,0,0,15.833,4ZM14.188,8.854,8.854,14.188l.958.958,5.333-5.333ZM9.167,10.667A4.163,4.163,0,0,0,6.208,11.9l-.979.979A4.168,4.168,0,0,0,4,15.833,4.2,4.2,0,0,0,8.167,20a4.163,4.163,0,0,0,2.958-1.229l.979-.979a4.168,4.168,0,0,0,1.229-2.958,4.1,4.1,0,0,0-.292-1.521L11.958,14.4a2.857,2.857,0,0,1-.792,2.458l-.979.979a2.853,2.853,0,0,1-2.021.833,2.805,2.805,0,0,1-2-.833,2.85,2.85,0,0,1,0-4.021l.979-.979A2.853,2.853,0,0,1,9.167,12a2.44,2.44,0,0,1,.438.042l1.083-1.083A4.1,4.1,0,0,0,9.167,10.667Z" transform="translate(-4 -4)" fill="#fff"></path>\n                </svg>\n                <div ${v} id="i2knu" data-gjs-type="default" class="cta-badge">\n                    <i ${v} id="idkak" data-gjs-type="default" class="fa fa-minus"></i>\n                </div>\n            </div>\n            <div ${v} id="irtak" data-gjs-type="text" class="cta-label label">${t.CallToActionName}</div>\n        </div>\n        `}}class _{constructor(){this.editor=globalThis.activeEditor;const t=globalThis.currentPageId;this.contentMapper=new S(t),this.themeManager=new q,this.ctaSvgManager=new L}addCtaButton(t){const e=this.editor.Components.getWrapper().find(".cta-button-container")[0];if(e){const n=x(12),{ctaButtonEl:i,ctaAction:r}=this.getIconAndAction(t,n),s={CtaId:n,CtaLabel:t.CallToActionName,CtaType:t.CallToActionType,CtaButtonType:"Round",CtaBGColor:"CtaColorOne",CtaAction:r};if(this.checkIfExisting(i)){const t=globalThis.selectedComponent;return void(t&&t.parent().getClasses().includes("cta-button-container")&&(this.contentMapper.removeContentCta(t.getId()),t.replaceWith(i),this.contentMapper.addContentCta(s)))}e.append(i),this.contentMapper.addContentCta(s)}}checkIfExisting(t){const e=document.createElement("div");e.innerHTML=t;const n=e.querySelector("[button-type]");if(!n)return!1;const i=n.getAttribute("button-type"),r=this.editor.Components.getWrapper().getEl().querySelectorAll(".cta-button-container [button-type]");return Array.from(r).some((t=>t.getAttribute("button-type")===i))}changeCtaColor(t){const e=globalThis.selectedComponent;if(!e)return;const n=e.find(".cta-styled-btn")[0];if(n){n.addStyle({"background-color":t.CtaColorCode}),n.getEl().style.backgroundColor=t.CtaColorCode;const e=n.parent();this.contentMapper.updateContentCtaBGColor(e.getId(),t.CtaColorName)}}changeToPlainButton(){const t=globalThis.selectedComponent;if(!t)return;const e=this.contentMapper.getContentCta(t.getId());if(e&&t){const n=`\n                <div id="${e.CtaId}" \n                    button-type="${e.CtaType}"\n                    class="plain-button-container"\n                     ${w}>\n                    <button ${v} class="plain-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor(e.CtaBGColor)}">\n                        <div ${v} id="ihd0f" class="cta-badge">\n                                <i ${v} id="i7o62" data-gjs-type="default" class="fa fa-minus"></i>\n                        </div>\n                        <span ${v} class="label">${e.CtaLabel}</span> \n                    </button>\n                </div>\n            `;this.selectComponentAfterAdd(e.CtaId,t,n),this.contentMapper.updateContentButtonType(e.CtaId,"FullWidth"),this.updateProperties()}}changeToIconButton(){const t=globalThis.selectedComponent;if(!t)return;const e=this.contentMapper.getContentCta(t.getId()),n=this.ctaSvgManager.getTypeSVG(null==e?void 0:e.CtaType);if(e&&t){const i=`\n                <div id="${e.CtaId}" \n                    button-type="${e.CtaType}"\n                    ${w} \n                    data-gjs-type="cta-buttons" \n                    class="img-button-container">\n                    <div ${v} class="img-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor(e.CtaBGColor)}">\n                        <span ${v} class="img-button-icon">\n                            ${n} \n                        </span>\n                        <div${v} class="cta-badge">\n                            <i ${v} class="fa fa-minus"></i>\n                        </div>\n                        <span ${v} class="img-button-label label">${e.CtaLabel}</span>\n                        <i ${v} class="fa fa-angle-right img-button-arrow"></i>\n                    </div>\n                </div>\n            `;this.selectComponentAfterAdd(e.CtaId,t,i),this.contentMapper.updateContentButtonType(e.CtaId,"Icon"),this.updateProperties()}}changeToImgButton(){const t=globalThis.selectedComponent;if(!t)return;const e=this.contentMapper.getContentCta(t.getId());if(e&&t){const n=`\n                <div id="${e.CtaId}" \n                    button-type="${e.CtaType}"\n                    ${w} \n                    data-gjs-type="cta-buttons" \n                    class="img-button-container">\n                    <div ${v} class="img-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor(e.CtaBGColor)}">\n                        <span ${v} class="img-button-section">\n                            <img ${v} \n                                src="${e.CtaButtonImgUrl?e.CtaButtonImgUrl:"/Resources/UCGrapes1/src/images/image.png"}" \n                            />\n                            <span ${v} class="edit-cta-image">\n                                ${e.CtaButtonImgUrl?`\n                                  <svg ${v} xmlns="http://www.w3.org/2000/svg" id="Component_57_1" data-name="Component 57 – 1" width="22" height="22" viewBox="0 0 33 33">\n                                        <g ${v} id="Ellipse_532" data-name="Ellipse 532" fill="#fff" stroke="#5068a8" stroke-width="2">\n                                            <circle ${v} cx="16.5" cy="16.5" r="16.5" stroke="none"/>\n                                            <circle ${v} cx="16.5" cy="16.5" r="16" fill="none"/>\n                                        </g>\n                                        <path ${v} id="Icon_feather-edit-2" data-name="Icon feather-edit-2" d="M12.834,3.8a1.854,1.854,0,0,1,2.622,2.622L6.606,15.274,3,16.257l.983-3.606Z" transform="translate(7 6.742)" fill="#5068a8" stroke="#5068a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>\n                                    </svg>\n                                    `:`\n                                    <svg ${v} xmlns="http://www.w3.org/2000/svg" id="Component_53_4" data-name="Component 53 – 4" width="22" height="22" viewBox="0 0 22 22">\n                                        <g ${v} id="Group_2309" data-name="Group 2309">\n                                            <g ${v} id="Group_2307" data-name="Group 2307">\n                                            <g ${v} id="Ellipse_6" data-name="Ellipse 6" fill="#fdfdfd" stroke="#5068a8" stroke-width="1">\n                                                <circle ${v} cx="11" cy="11" r="11" stroke="none"/>\n                                                <circle ${v} cx="11" cy="11" r="10.5" fill="none"/>\n                                            </g>\n                                            </g>\n                                        </g>\n                                        <path ${v} id="Icon_ionic-ios-add" data-name="Icon ionic-ios-add" d="M18.342,13.342H14.587V9.587a.623.623,0,1,0-1.245,0v3.755H9.587a.623.623,0,0,0,0,1.245h3.755v3.755a.623.623,0,1,0,1.245,0V14.587h3.755a.623.623,0,1,0,0-1.245Z" transform="translate(-2.965 -2.965)" fill="#5068a8"/>\n                                    </svg>\n                                `}\n                            </span>\n                        </span>\n                        <div${v} class="cta-badge">\n                            <i ${v} class="fa fa-minus"></i>\n                        </div>\n                        <span ${v} class="img-button-label label">${e.CtaLabel}</span>\n                        <i ${v} class="fa fa-angle-right img-button-arrow"></i>\n                    </div>\n                </div>\n            `;this.selectComponentAfterAdd(e.CtaId,t,n),this.contentMapper.updateContentButtonType(e.CtaId,"Image","/Resources/UCGrapes1/src/images/image.png"),this.updateProperties()}}selectComponentAfterAdd(t,e,n){this.editor.once("component:add",(()=>{const e=this.editor.getWrapper().find(`#${t}`)[0];e&&this.editor.select(e)})),e.replaceWith(n)}removeCta(t){const e=t.parentElement,n=this.editor.Components.getWrapper().find("#"+(null==e?void 0:e.id))[0];if(n){const t=n.parent();null==t||t.remove(),this.contentMapper.removeContentCta(t.getId())}}getIconAndAction(t,e){let n,i;switch(null==t?void 0:t.CallToActionType){case"Phone":n=this.ctaSvgManager.phoneCta(t,e),i=null==t?void 0:t.CallToActionPhoneNumber;break;case"Email":n=this.ctaSvgManager.emailCta(t,e),i=null==t?void 0:t.CallToActionEmail;break;case"SiteUrl":n=this.ctaSvgManager.urlCta(t,e),i=null==t?void 0:t.CallToActionUrl;break;case"Form":n=this.ctaSvgManager.formCta(t,e),i=null==t?void 0:t.CallToActionUrl}return{ctaButtonEl:n,ctaAction:i}}updateProperties(){const t=globalThis.selectedComponent,e=this.contentMapper.getContentCta(t.getId());e&&t&&new N(t,e).setctaAttributes()}}class k{constructor(t){this.colorList=t,this.ctaManager=new _,this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("cta-style"),this.container.id="cta-style",this.container.style.display="flex";const t=document.createElement("div");t.classList.add("text-color-palette"),t.classList.add("text-colors"),t.id="cta-color-palette",this.colorList.forEach((e=>{const n=document.createElement("div");n.classList.add("color-item");const i=document.createElement("input");i.type="radio",i.name="cta-color",i.value=e.CtaColorCode,i.id=e.CtaColorCode;const r=document.createElement("label");r.setAttribute("for",e.CtaColorCode),r.classList.add("color-box"),r.style.backgroundColor=e.CtaColorCode,n.appendChild(i),n.appendChild(r),t.appendChild(n),n.addEventListener("click",(()=>{this.ctaManager.changeCtaColor(e)})),t.appendChild(n)})),this.container.appendChild(t)}render(t){t.appendChild(this.container)}refresh(t){const e=document.getElementById("cta-style");e?e.replaceWith(this.container):t.appendChild(this.container)}}class O{constructor(t,e){this.tileAttributes=e,this.selectedComponent=t,this.themeManager=new q}setTileAttributes(){this.setBgColorProperties(),this.setOpacityProperties(),this.setTitleStyleProperties(),this.setTileActionProperties(),this.setActionProperties(),this.setTileIconProperties()}setBgColorProperties(){var t;const e=document.getElementById("theme-color-palette"),n=function(t){if(!t)return"";const e=t.match(/\d+/g);return e&&3===e.length?`#${e.map((t=>Number(t).toString(16).padStart(2,"0"))).join("")}`:""}(this.selectedComponent.getEl().style.backgroundColor),i=null===(t=this.selectedComponent.getStyle())||void 0===t?void 0:t["background-image"],r=this.themeManager.getThemeColor(this.tileAttributes.BGColor),s=null==e?void 0:e.children;for(let t=0;t<s.length;t++){const e=s[t].querySelector("input");i||n!==r||n!==e.value?e.checked=!1:e.checked=!0}}setOpacityProperties(){var t;const e=this.tileAttributes.BGImageUrl,n=this.tileAttributes.Opacity,i=null===(t=this.selectedComponent.getStyle())||void 0===t?void 0:t["background-image"];let r="";if(i&&i.startsWith("url(")&&(r=i.replace(/^url\(["']?/,"").replace(/["']?\)$/,"")),r&&e){if(r===e){const t=document.querySelector(".tile-img-section");if(t){t.querySelector("#slider-wrapper").style.display="flex",t.querySelector("#bg-opacity").value=n,t.querySelector("#valueDisplay").textContent=n+"%";const i=t.querySelector("#tile-img-container");i.style.display="block";const r=i.querySelector(".tile-img-thumbnail");r&&(r.src=e),this.selectedComponent.addStyle({"background-color":`rgba(0, 0, 0, ${n/100})`})}}}else{const t=document.querySelector("#slider-wrapper"),e=document.querySelector("#tile-img-container");t.style.display="none",e.style.display="none"}}setTitleStyleProperties(){const t=document.querySelector("#tile-title"),e=this.tileAttributes.Text;t.value=e;const n=this.tileAttributes.Color,i=document.querySelector("#text-color-palette"),r=null==i?void 0:i.querySelectorAll("input");null==r||r.forEach((t=>{t.value===n?t.checked=!0:t.checked=!1}))}setTileActionProperties(){const t=this.tileAttributes.Align,e=document.querySelector(".text-alignment"),n=null==e?void 0:e.querySelectorAll("input");null==n||n.forEach((e=>{e.value===t?e.checked=!0:e.checked=!1}))}setTileIconProperties(){var t;const e=this.tileAttributes.Icon;if(!e)return;const n=this.themeManager.getIconCategory(e);this.themeManager.updateThemeIcons(n);const i=this.selectedComponent.getEl().querySelector(".tile-icon"),r=null!==(t=null==i?void 0:i.getAttribute("title"))&&void 0!==t?t:"";document.querySelector("#icons-list").querySelectorAll(".icon").forEach((t=>{var n;const i=t,s=null!==(n=i.getAttribute("title"))&&void 0!==n?n:"";if(s===e&&s===r){i.style.border="2px solid #5068A8";const t=i.querySelector("svg path");t&&t.setAttribute("fill","#5068A8")}else{i.style.border="";const t=i.querySelector("svg path");t&&t.setAttribute("fill","#7c8791")}}))}setActionProperties(){var t,e;const n=null===(t=this.tileAttributes.Action)||void 0===t?void 0:t.ObjectType,i=null===(e=this.tileAttributes)||void 0===e?void 0:e.Text,r=document.querySelector(".tb-dropdown-header").querySelector("#sidebar_select_action_label");r&&(r.innerText=n?`${i.length>10?i.substring(0,14)+"":i}, ${i.length>10?i.substring(0,14)+"...":i}`:"Select Action")}}class P{constructor(t,e){this.icons=[],this.iconsCategory="General",this.themeManager=t,this.iconsCategory=e,this.init()}init(){this.icons=[],this.themeManager.getActiveThemeIcons().filter((t=>t.IconCategory===this.iconsCategory)).forEach((t=>{const e=document.createElement("div");e.classList.add("icon"),e.title=t.IconName,e.innerHTML=`${t.IconSVG}`,e.addEventListener("click",(e=>{var n;e.preventDefault();const i=globalThis.selectedComponent;if(!i)return;const r=i.find(".tile-icon")[0];if(!r)return;const s=null===(n=i.getStyle())||void 0===n?void 0:n.color,o=t.IconSVG.replace(/fill="#[^"]*"/g,`fill="${s||"white"}"`).replace("<svg",`<svg ${v}`);r.components(o),r.addAttributes({title:t.IconName}),r.parent().addStyle({display:"block"}),globalThis.tileMapper.updateTile(i.parent().getId(),"Icon",t.IconName);const a=i.parent(),l=a.parent(),c=globalThis.tileMapper.getTile(l.getId(),a.getId());new O(i,c).setTileAttributes()})),this.icons.push(e)}))}render(t){this.icons.forEach((e=>t.appendChild(e)))}}var M,j=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class q{constructor(){this.themes=[],this.config=e.getInstance(),this.appVersionManager=new d,this.setThemes(this.config.themes)}setThemes(t){this.themes=t,this.currentTheme=this.getThemes().find((t=>t.ThemeId===this.config.currentThemeId))}getThemes(){return this.themes}getActiveThemeIcons(){return this.currentTheme?this.currentTheme.ThemeIcons:[]}getActiveThemeColors(){return this.currentTheme?this.currentTheme.ThemeColors:{}}getActiveThemeCtaColors(){return this.currentTheme?this.currentTheme.ThemeCtaColors:{}}setTheme(t){this.currentTheme=t,this.config.currentThemeId=t.ThemeId,this.updateColorPallete(t.ThemeColors),this.updateCtaColorPallete(t.ThemeCtaColors),this.updateThemeIcons(),this.applyTheme(t)}updateColorPallete(t){const e=new A(t,"theme-color-palette"),n=document.querySelector(".sidebar-section .theme-section");e&&e.refresh(n)}updateCtaColorPallete(t){const e=new k(t),n=document.getElementById("content-page-section");n&&e.refresh(n)}updateThemeIcons(t="General"){const e=document.getElementById("icons-list");e.classList.add("icons-list"),e.id="icons-list",e.innerHTML="",new P(this,t).render(e)}getThemeColor(t){return this.currentTheme&&this.currentTheme.ThemeColors?this.currentTheme.ThemeColors[t]||"transparent":(console.error("ThemeColors is undefined or invalid:",this.currentTheme),null)}getThemeCtaColor(t){var e;return t||(t="CtaColorOne"),this.currentTheme&&this.currentTheme.ThemeCtaColors?(null===(e=this.currentTheme.ThemeCtaColors.find((e=>e.CtaColorName===t)))||void 0===e?void 0:e.CtaColorCode)||"#5068a8":(console.error("ThemeColors is undefined or invalid:",this.currentTheme),null)}getThemeIcon(t){var e,n;return(null===(n=null===(e=this.getActiveThemeIcons())||void 0===e?void 0:e.find((e=>e.IconName===t)))||void 0===n?void 0:n.IconSVG)||null}getIconCategory(t){var e,n;return(null===(n=null===(e=this.getActiveThemeIcons())||void 0===e?void 0:e.find((e=>e.IconName===t)))||void 0===n?void 0:n.IconCategory)||null}applyTheme(t){return j(this,void 0,void 0,(function*(){const e=document.querySelectorAll(".mobile-frame iframe");if(!e.length)return;const n=globalThis.activeVersion;n&&n.Pages.forEach((n=>j(this,void 0,void 0,(function*(){var i,r;const s=`data-${n.PageId}`,o=JSON.parse(localStorage.getItem(s)||"{}");if(o.PageMenuStructure&&(null===(i=o.PageMenuStructure)||void 0===i?void 0:i.Rows).forEach((n=>{n.Tiles.forEach((n=>{n.BGColor&&e.forEach((e=>{var i,r;const s=e.contentDocument||(null===(i=e.contentWindow)||void 0===i?void 0:i.document);if(s){this.updateFontFamily(s,t.ThemeFontFamily);const e=s.getElementById(n.Id);if(e){const i=e.querySelector(".template-block");i&&(i.style.backgroundColor=null===(r=null==t?void 0:t.ThemeColors)||void 0===r?void 0:r[n.BGColor]),this.updateTileIcon(n,e)}this.updateFrameColor(s)}}))}))})),o.PageContentStructure){const t=null===(r=o.PageContentStructure)||void 0===r?void 0:r.Cta;null==t||t.forEach(((t,n)=>{e.forEach((e=>{var n;const i=e.contentDocument||(null===(n=e.contentWindow)||void 0===n?void 0:n.document);if(i){const e=i.querySelector(`#${t.CtaId}`);e&&(e.querySelector(".cta-styled-btn").style.backgroundColor=this.getThemeCtaColor(t.CtaBGColor)),this.updateFrameColor(i)}}))}))}}))))}))}updateTileIcon(t,e){if(t&&e){const n=e.querySelector(".tile-icon");if(n){const e=n.querySelector("svg");if(e){let i=this.getThemeIcon(t.Icon);if(i){i=i.replace('fill="#7c8791"',`fill="${t.Color}"`);const r=document.createElement("div");r.innerHTML=i.trim();const s=r.firstChild;s&&(e.remove(),n.appendChild(s))}}}}}updateFontFamily(t,e="Comic Sans MS"){try{t.documentElement.style.setProperty("--font-family",e)}catch(t){console.error("Error updating font family:",t)}}updateFrameColor(t){var e;const n=null===(e=t.querySelector(".tb-toggle-buttons"))||void 0===e?void 0:e.children[0];null==n||n.style.setProperty("background-color",this.getThemeColor("backgroundColor"));const i=t.querySelector(".tb-date-selector");null==i||i.style.setProperty("background-color",this.getThemeColor("backgroundColor"))}}!function(t){t.ADD_ROW="ADD_ROW",t.REMOVE_ROW="REMOVE_ROW",t.ADD_TILE="ADD_TILE",t.REMOVE_TILE="REMOVE_TILE",t.MODIFY_TILE="MODIFY_TILE",t.MOVE_TILE="MOVE_TILE",t.BATCH="BATCH"}(M||(M={}));class D{constructor(t){this.undoStack=[],this.redoStack=[],this.maxStackSize=100,this.isUndoing=!1,this.isRedoing=!1,this.subscribers=[],this.batchActions=null,this.pageId=t,this.setupKeyboardShortcuts()}subscribe(t){return this.subscribers.push(t),()=>{this.subscribers=this.subscribers.filter((e=>e!==t))}}startBatch(){this.batchActions||(this.batchActions=[])}endBatch(){this.batchActions&&this.batchActions.length>0&&this.addToUndoStack({type:M.BATCH,pageId:this.pageId,data:[...this.batchActions],timestamp:Date.now()}),this.batchActions=null}addRow(t){const e={type:M.ADD_ROW,pageId:this.pageId,rowId:t.Id,data:t,timestamp:Date.now()};this.batchActions?this.batchActions.push(e):this.addToUndoStack(e)}removeRow(t,e){const n={type:M.REMOVE_ROW,pageId:this.pageId,rowId:t,data:e,timestamp:Date.now()};this.batchActions?this.batchActions.push(n):this.addToUndoStack(n)}addTile(t,e){const n={type:M.ADD_TILE,pageId:this.pageId,rowId:t,tileId:e.Id,data:e,timestamp:Date.now()};this.batchActions?this.batchActions.push(n):this.addToUndoStack(n)}removeTile(t,e,n){var i,r;e&&n||null===(r=null===(i=this.getPageData().PageMenuStructure)||void 0===i?void 0:i.Rows)||void 0===r||r.forEach((i=>{const r=i.Tiles.find((e=>e.Id===t));r&&(e=i.Id,n=r)}));const s={type:M.REMOVE_TILE,pageId:this.pageId,rowId:e,tileId:t,data:n,timestamp:Date.now()};this.batchActions?this.batchActions.push(s):this.addToUndoStack(s)}modifyTile(t,e,n){const i={type:M.MODIFY_TILE,pageId:this.pageId,tileId:t,data:{oldValues:e,newValues:n},timestamp:Date.now()};this.batchActions?this.batchActions.push(i):this.addToUndoStack(i)}moveTile(t,e,n,i,r){const s={type:M.MOVE_TILE,pageId:this.pageId,tileId:t,rowId:e,data:{sourceRowId:e,targetRowId:n,targetIndex:i,originalIndex:r},timestamp:Date.now()};this.batchActions?this.batchActions.push(s):this.addToUndoStack(s)}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undo(){if(!this.canUndo())return!1;this.isUndoing=!0;const t=this.undoStack.pop();try{if(t.type===M.BATCH){const e=t.data;for(let t=e.length-1;t>=0;t--)this.applyAction(e[t],!0)}else this.applyAction(t,!0);return this.redoStack.push(t),this.notifySubscribers(t),!0}catch(e){return console.error("Undo failed:",e),this.undoStack.push(t),!1}finally{this.isUndoing=!1}}redo(){if(!this.canRedo())return!1;this.isRedoing=!0;const t=this.redoStack.pop();try{return t.type===M.BATCH?t.data.forEach((t=>this.applyAction(t,!1))):this.applyAction(t,!1),this.undoStack.push(t),this.notifySubscribers(t),!0}catch(e){return console.error("Redo failed:",e),this.redoStack.push(t),!1}finally{this.isRedoing=!1}}clearHistory(){this.undoStack=[],this.redoStack=[],this.notifySubscribers({type:M.MODIFY_TILE,pageId:this.pageId,timestamp:Date.now()})}getStackSizes(){return{undoSize:this.undoStack.length,redoSize:this.redoStack.length}}addToUndoStack(t){this.isUndoing||this.isRedoing||(this.shouldCoalesceWithLastAction(t)&&this.undoStack.pop(),this.undoStack.length>=this.maxStackSize&&this.undoStack.shift(),this.undoStack.push(t),this.redoStack=[],this.notifySubscribers(t))}applyAction(t,e){const n=this.getPageData();switch(t.type){case M.ADD_ROW:e?this.undoAddRow(n,t):this.redoAddRow(n,t);break;case M.REMOVE_ROW:e?this.undoRemoveRow(n,t):this.redoRemoveRow(n,t);break;case M.ADD_TILE:e?this.undoAddTile(n,t):this.redoAddTile(n,t);break;case M.REMOVE_TILE:e?this.undoRemoveTile(n,t):this.redoRemoveTile(n,t);break;case M.MODIFY_TILE:const i=e?t.data.oldValues:t.data.newValues;this.applyTileChanges(n,t.tileId,i);break;case M.MOVE_TILE:e?this.undoMoveTile(n,t):this.redoMoveTile(n,t)}this.savePageData(n)}setupKeyboardShortcuts(){document.addEventListener("keydown",(t=>{(t.ctrlKey||t.metaKey)&&("z"!==t.key||t.shiftKey?("y"===t.key||"z"===t.key&&t.shiftKey)&&(t.preventDefault(),this.redo()):(t.preventDefault(),this.undo()))}))}shouldCoalesceWithLastAction(t){if(0===this.undoStack.length)return!1;const e=this.undoStack[this.undoStack.length-1];return t.type===M.MODIFY_TILE&&e.type===M.MODIFY_TILE&&t.tileId===e.tileId&&Date.now()-e.timestamp<1e3}getPageData(){return JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}")}savePageData(t){localStorage.setItem(`data-${this.pageId}`,JSON.stringify(t))}notifySubscribers(t){this.subscribers.forEach((e=>e(t)))}undoAddRow(t,e){t.PageMenuStructure.Rows=t.PageMenuStructure.Rows.filter((t=>t.Id!==e.rowId))}redoAddRow(t,e){t.PageMenuStructure||(t.PageMenuStructure={Rows:[]}),t.PageMenuStructure.Rows.push(e.data)}undoRemoveRow(t,e){t.PageMenuStructure||(t.PageMenuStructure={Rows:[]}),t.PageMenuStructure.Rows.push(e.data)}redoRemoveRow(t,e){t.PageMenuStructure.Rows=t.PageMenuStructure.Rows.filter((t=>t.Id!==e.rowId))}undoAddTile(t,e){const n=t.PageMenuStructure.Rows.find((t=>t.Id===e.rowId));n&&(n.Tiles=n.Tiles.filter((t=>t.Id!==e.tileId)),0===n.Tiles.length&&(t.PageMenuStructure.Rows=t.PageMenuStructure.Rows.filter((t=>t.Id!==e.rowId))))}redoAddTile(t,e){let n=t.PageMenuStructure.Rows.find((t=>t.Id===e.rowId));n||(n={Id:e.rowId,Tiles:[]},t.PageMenuStructure.Rows.push(n)),n.Tiles.push(e.data),3===n.Tiles.length&&n.Tiles.forEach((t=>{t.Align="center"}))}undoRemoveTile(t,e){let n=t.PageMenuStructure.Rows.find((t=>t.Id===e.rowId));n||(n={Id:e.rowId,Tiles:[]},t.PageMenuStructure.Rows.push(n)),n.Tiles.push(e.data)}redoRemoveTile(t,e){const n=t.PageMenuStructure.Rows.find((t=>t.Id===e.rowId));n&&(n.Tiles=n.Tiles.filter((t=>t.Id!==e.tileId)),0===n.Tiles.length&&(t.PageMenuStructure.Rows=t.PageMenuStructure.Rows.filter((t=>t.Id!==e.rowId))))}applyTileChanges(t,e,n){var i,r;null===(r=null===(i=t.PageMenuStructure)||void 0===i?void 0:i.Rows)||void 0===r||r.forEach((t=>{t.Tiles.forEach((t=>{t.Id===e&&Object.keys(n).forEach((e=>{if(e.includes(".")){const i=e.split(".");let r=t;for(let t=0;t<i.length-1;t++)r=r[i[t]];r[i[i.length-1]]=n[e]}else t[e]=n[e]}))}))}))}undoMoveTile(t,e){const{sourceRowId:n,targetRowId:i,originalIndex:r}=e.data,s=t.PageMenuStructure.Rows.find((t=>t.Id===i));let o=t.PageMenuStructure.Rows.find((t=>t.Id===n));if(s){const i=s.Tiles.findIndex((t=>t.Id===e.tileId));if(-1!==i){const[e]=s.Tiles.splice(i,1);o||(o={Id:n,Tiles:[]},t.PageMenuStructure.Rows.push(o)),o.Tiles.splice(r,0,e),3===o.Tiles.length&&o.Tiles.forEach((t=>{t.Align="center"})),0===s.Tiles.length&&(t.PageMenuStructure.Rows=t.PageMenuStructure.Rows.filter((t=>t.Id!==s.Id)))}}}redoMoveTile(t,e){const{sourceRowId:n,targetRowId:i,targetIndex:r}=e.data,s=t.PageMenuStructure.Rows.find((t=>t.Id===n));let o=t.PageMenuStructure.Rows.find((t=>t.Id===i));if(s){const n=s.Tiles.findIndex((t=>t.Id===e.tileId));if(-1!==n){const[e]=s.Tiles.splice(n,1);o||(o={Id:i,Tiles:[]},t.PageMenuStructure.Rows.push(o)),o.Tiles.splice(r,0,e),3===o.Tiles.length&&o.Tiles.forEach((t=>{t.Align="center"})),0===s.Tiles.length&&(t.PageMenuStructure.Rows=t.PageMenuStructure.Rows.filter((t=>t.Id!==s.Id)))}}}}class B{constructor(t){this.data=t,this.themeManager=new q}generateCta(t){return"Image"===t.CtaButtonType?`<div id="${t.CtaId}" data-gjs-type="cta-buttons"\n                ${w} \n                  button-type="${t.CtaType}"\n                  class="img-button-container">\n                    <div ${v} class="img-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor(t.CtaBGColor)}">\n                        <span ${v} class="img-button-section">\n                            <img ${v} src="${t.CtaButtonImgUrl}" />\n                            <span ${v} class="edit-cta-image">\n                                ${t.CtaButtonImgUrl?`\n                                <svg ${v} xmlns="http://www.w3.org/2000/svg" id="Component_57_1" data-name="Component 57 – 1" width="22" height="22" viewBox="0 0 33 33">\n                                  <g ${v} id="Ellipse_532" data-name="Ellipse 532" fill="#fff" stroke="#5068a8" stroke-width="2">\n                                    <circle ${v} cx="16.5" cy="16.5" r="16.5" stroke="none"/>\n                                    <circle ${v} cx="16.5" cy="16.5" r="16" fill="none"/>\n                                  </g>\n                                  <path ${v} id="Icon_feather-edit-2" data-name="Icon feather-edit-2" d="M12.834,3.8a1.854,1.854,0,0,1,2.622,2.622L6.606,15.274,3,16.257l.983-3.606Z" transform="translate(7 6.742)" fill="#5068a8" stroke="#5068a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>\n                                </svg>\n                                `:`\n                                 <svg ${v} xmlns="http://www.w3.org/2000/svg" id="Component_53_4" data-name="Component 53 – 4" width="22" height="22" viewBox="0 0 22 22">\n                                    <g ${v} id="Group_2309" data-name="Group 2309">\n                                        <g ${v} id="Group_2307" data-name="Group 2307">\n                                        <g ${v} id="Ellipse_6" data-name="Ellipse 6" fill="#fdfdfd" stroke="#5068a8" stroke-width="1">\n                                            <circle ${v} cx="11" cy="11" r="11" stroke="none"/>\n                                            <circle ${v} cx="11" cy="11" r="10.5" fill="none"/>\n                                        </g>\n                                        </g>\n                                    </g>\n                                    <path ${v} id="Icon_ionic-ios-add" data-name="Icon ionic-ios-add" d="M18.342,13.342H14.587V9.587a.623.623,0,1,0-1.245,0v3.755H9.587a.623.623,0,0,0,0,1.245h3.755v3.755a.623.623,0,1,0,1.245,0V14.587h3.755a.623.623,0,1,0,0-1.245Z" transform="translate(-2.965 -2.965)" fill="#5068a8"/>\n                                </svg>\n                                `}\n                            </span>\n                        </span>\n                        <div${v} class="cta-badge">\n                            <i ${v} class="fa fa-minus"></i>\n                        </div>\n                        <span ${v} class="img-button-label">${this.getCtaLabel(t)}</span>\n                        <i ${v} class="fa fa-angle-right img-button-arrow"></i>\n                    </div>\n                </div>`:"FullWidth"===t.CtaButtonType?`\n            <div\n                id="${t.CtaId}"\n                ${w} \n                data-gjs-type="cta-buttons"\n                button-type="${t.CtaType}"\n                class="plain-button-container"\n            >\n                <button ${v} id="ibob6" data-gjs-type="default" class="plain-button cta-styled-btn"\n                  style="background-color: ${this.themeManager.getThemeCtaColor(t.CtaBGColor)}">\n                    <div ${v} id="iyocy" data-gjs-type="default" class="cta-badge">\n                        <i ${v} id="ifxn6" data-gjs-type="default" class="fa fa-minus"></i>\n                    </div>\n                    <span ${v} class"label">${this.getCtaLabel(t)}</span>\n                </button>\n            </div>\n            `:"Icon"===t.CtaButtonType?`\n          <div id="${t.CtaId}" data-gjs-type="cta-buttons"\n            ${w} \n              button-type="${t.CtaType}"\n              class="img-button-container">\n                <div ${v} class="img-button cta-styled-btn"\n                    style="background-color: ${this.themeManager.getThemeCtaColor(t.CtaBGColor)}">\n                    <span ${v} class="img-button-icon">\n                      ${this.ctaIcon(t)}\n                    </span>\n                    <div${v} class="cta-badge">\n                        <i ${v} class="fa fa-minus"></i>\n                    </div>\n                    <span ${v} class="img-button-label label">${this.getCtaLabel(t)}</span>\n                    <i ${v} class="fa fa-angle-right img-button-arrow"></i>\n                </div>\n            </div>\n      `:"Round"===t.CtaButtonType?`\n            <div ${w} \n              data-gjs-type="cta-buttons" \n              button-type="${t.CtaType}" \n              class="cta-container-child cta-child"\n              id="${t.CtaId}">              \n                <div class="cta-button cta-styled-btn" ${v}\n                  style="background-color: ${this.themeManager.getThemeCtaColor(t.CtaBGColor)}">\n                    ${this.ctaIcon(t)}\n                    <div class="cta-badge" ${v}><i ${v} data-gjs-type="default" class="fa fa-minus"></i></div>\n                </div>\n                <span class="cta-label label" ${v}>${this.getCtaLabel(t)}</span>\n            </div>\n            `:void 0}getCtaLabel(t){let e=t.CtaLabel;return e?(e="Round"===t.CtaButtonType?E(e,5):E(e,14),e):""}ctaIcon(t){let e;switch(t.CtaType){case"Phone":e=`\n        <svg ${v} id="ixdtl" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="32"\n                    viewBox="0 0 49.417 49.418">\n            <path ${v} id="call" data-gjs-type="svg-in"\n                d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z"\n                transform="translate(-4 -3)" fill="#fff"></path>\n        </svg>\n        `;break;case"Email":e=`\n        <svg ${v} id="inavf" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32"\n            height="28" viewBox="0 0 41 32.8">\n            <path ${v} id="Path_1218" data-gjs-type="svg-in" data-name="Path 1218"\n                d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z"\n                transform="translate(-2 -4)" fill="#fff"></path>\n        </svg>\n        `;break;case"SiteUrl":e=`\n        <svg ${v} xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16">\n          <path${v} id="Path_1213" data-name="Path 1213" d="M15.833,4a4.163,4.163,0,0,0-2.958,1.229l-.979.979a4.168,4.168,0,0,0-1.229,2.958,4.1,4.1,0,0,0,.292,1.521L12.042,9.6a2.857,2.857,0,0,1,.792-2.458l.979-.979a2.853,2.853,0,0,1,2.021-.833,2.805,2.805,0,0,1,2,.833,2.85,2.85,0,0,1,0,4.021l-.979.979A2.853,2.853,0,0,1,14.833,12a2.439,2.439,0,0,1-.437-.042l-1.083,1.083a4.1,4.1,0,0,0,1.521.292A4.163,4.163,0,0,0,17.792,12.1l.979-.979A4.168,4.168,0,0,0,20,8.167,4.2,4.2,0,0,0,15.833,4ZM14.188,8.854,8.854,14.188l.958.958,5.333-5.333ZM9.167,10.667A4.163,4.163,0,0,0,6.208,11.9l-.979.979A4.168,4.168,0,0,0,4,15.833,4.2,4.2,0,0,0,8.167,20a4.163,4.163,0,0,0,2.958-1.229l.979-.979a4.168,4.168,0,0,0,1.229-2.958,4.1,4.1,0,0,0-.292-1.521L11.958,14.4a2.857,2.857,0,0,1-.792,2.458l-.979.979a2.853,2.853,0,0,1-2.021.833,2.805,2.805,0,0,1-2-.833,2.85,2.85,0,0,1,0-4.021l.979-.979A2.853,2.853,0,0,1,9.167,12a2.44,2.44,0,0,1,.438.042l1.083-1.083A4.1,4.1,0,0,0,9.167,10.667Z" transform="translate(-4 -4)" fill="#fff"></path>\n        </svg>\n        `;break;case"Form":e=`\n        <svg ${v} id="igqdh" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="26" height="30"\n              viewBox="0 0 13 16">\n              <path ${v} id="Path_1209" data-gjs-type="svg-in" data-name="Path 1209"\n                  d="M9.828,4A1.823,1.823,0,0,0,8,5.8V18.2A1.823,1.823,0,0,0,9.828,20h9.344A1.823,1.823,0,0,0,21,18.2V9.8a.6.6,0,0,0-.179-.424l-.006-.006L15.54,4.176A.614.614,0,0,0,15.109,4Zm0,1.2H14.5V8.6a1.823,1.823,0,0,0,1.828,1.8h3.453v7.8a.6.6,0,0,1-.609.6H9.828a.6.6,0,0,1-.609-.6V5.8A.6.6,0,0,1,9.828,5.2Zm5.891.848L18.92,9.2H16.328a.6.6,0,0,1-.609-.6Z"\n                  transform="translate(-8 -4)" fill="#fff"></path>\n          </svg>\n        `}return e}generateContent(t){return"Image"===t.ContentType&&""!==t.ContentValue?this.contentImage(t):"Description"===t.ContentType&&""!==t.ContentValue?this.contentDescription(t):""}generateHTML(){var t,e,n,i;let r="",s="";return(null===(e=null===(t=this.data)||void 0===t?void 0:t.PageContentStructure)||void 0===e?void 0:e.Content)&&Array.isArray(this.data.PageContentStructure.Content)&&(r=this.data.PageContentStructure.Content.map((t=>this.generateContent(t))).join("")),(null===(i=null===(n=this.data)||void 0===n?void 0:n.PageContentStructure)||void 0===i?void 0:i.Cta)&&Array.isArray(this.data.PageContentStructure.Cta)&&(s=this.data.PageContentStructure.Cta.map((t=>this.generateCta(t))).join("")),`\n            <div ${v} id="frame-container" data-gjs-type="template-wrapper" class="content-frame-container">\n                <div ${v} class="container-column">\n                    <div ${v} class="container-row">\n                        <div ${v} data-gjs-type="default" class="template-wrapper">\n                            <div \n    data-gjs-type="template-wrapper"\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="true"\n    data-gjs-droppable="[data-gjs-type='product-service-description'], [data-gjs-type='product-service-image']"\n data-gjs-type="default" class="content-page-wrapper">\n                                ${r}\n                            </div>\n                        </div>\n                    </div> \n                    ${s?`\n                      <div ${C} class="cta-button-container" style="gap: 0.2rem;">\n                          ${s}\n                      </div>`:`\n                      <div ${C} class="cta-button-container" style="gap: 0.2rem;"></div>`}         \n                      <i class="fa fa-pencil></i>\n                </div>\n            </div>\n        `}addGrapesAttributes(t){const e=document.createElement("div");return"string"==typeof t&&(e.innerHTML=t),e.querySelectorAll("*").forEach((t=>{t.setAttribute("data-gjs-draggable","false"),t.setAttribute("data-gjs-selectable","false"),t.setAttribute("data-gjs-editable","false"),t.setAttribute("data-gjs-highlightable","false"),t.setAttribute("data-gjs-droppable","false"),t.setAttribute("data-gjs-resizable","false"),t.setAttribute("data-gjs-hoverable","false")})),e.innerHTML}contentImage(t){var e,n,i,r;return`\n    <div ${y} class="content-image" id="${(null==t?void 0:t.ContentId)?null==t?void 0:t.ContentId:x(15)}" data-gjs-type="product-service-image">\n        <button ${v} class="tb-edit-image-icon"\n        ${"Location"===(null===(e=this.data)||void 0===e?void 0:e.PageType)||"Reception"===(null===(n=this.data)||void 0===n?void 0:n.PageType)?'style="right: -20px"':""}>\n            <svg ${v} width="14px" height="14px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path ${v} fill-rule="evenodd" clip-rule="evenodd" d="M18.4324 4C18.2266 4 18.0227 4.04055 17.8325 4.11933C17.6423 4.19811 17.4695 4.31358 17.3239 4.45914L5.25659 16.5265L4.42524 19.5748L7.47353 18.7434L19.5409 6.67608C19.6864 6.53051 19.8019 6.3577 19.8807 6.16751C19.9595 5.97732 20 5.77348 20 5.56761C20 5.36175 19.9595 5.1579 19.8807 4.96771C19.8019 4.77752 19.6864 4.60471 19.5409 4.45914C19.3953 4.31358 19.2225 4.19811 19.0323 4.11933C18.8421 4.04055 18.6383 4 18.4324 4ZM17.0671 2.27157C17.5 2.09228 17.9639 2 18.4324 2C18.9009 2 19.3648 2.09228 19.7977 2.27157C20.2305 2.45086 20.6238 2.71365 20.9551 3.04493C21.2864 3.37621 21.5492 3.7695 21.7285 4.20235C21.9077 4.63519 22 5.09911 22 5.56761C22 6.03611 21.9077 6.50003 21.7285 6.93288C21.5492 7.36572 21.2864 7.75901 20.9551 8.09029L8.69996 20.3454C8.57691 20.4685 8.42387 20.5573 8.25597 20.6031L3.26314 21.9648C2.91693 22.0592 2.54667 21.9609 2.29292 21.7071C2.03917 21.4534 1.94084 21.0831 2.03526 20.7369L3.39694 15.7441C3.44273 15.5762 3.53154 15.4231 3.6546 15.3001L15.9097 3.04493C16.241 2.71365 16.6343 2.45086 17.0671 2.27157Z" fill="#5068a8"/>\n            </svg>\n          </button>\n          ${"Location"===(null===(i=this.data)||void 0===i?void 0:i.PageType)||"Reception"===(null===(r=this.data)||void 0===r?void 0:r.PageType)?"":`\n          <button ${v} class="tb-delete-image-icon">\n            <svg fill="#5068a8" ${v} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <title ${v}>delete</title>\n                <path fill="#5068a8" ${v} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                <rect fill="#5068a8" ${v} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                <rect fill="#5068a8" ${v} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                <path fill="#5068a8" ${v} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                <rect fill="#5068a8" ${v} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n            </svg>\n          </button>\n          `}\n        <img\n            id="product-service-image"\n            ${v}\n            src="${null==t?void 0:t.ContentValue}"\n            data-gjs-type="default"\n            alt="Full-width Image"\n        />\n      </div>\n    `}contentDescription(t){return`\n    <div\n        style="flex: 1; padding: 0; margin: 0; height: auto; white-space: normal;"\n        class="content-page-block"\n        ${y} \n        id="${(null==t?void 0:t.ContentId)?null==t?void 0:t.ContentId:x(15)}"\n        data-gjs-type="product-service-description"\n    >\n      <button ${v} class="tb-edit-content-icon">\n        <svg ${v} width="14px" height="14px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path ${v} fill-rule="evenodd" clip-rule="evenodd" d="M18.4324 4C18.2266 4 18.0227 4.04055 17.8325 4.11933C17.6423 4.19811 17.4695 4.31358 17.3239 4.45914L5.25659 16.5265L4.42524 19.5748L7.47353 18.7434L19.5409 6.67608C19.6864 6.53051 19.8019 6.3577 19.8807 6.16751C19.9595 5.97732 20 5.77348 20 5.56761C20 5.36175 19.9595 5.1579 19.8807 4.96771C19.8019 4.77752 19.6864 4.60471 19.5409 4.45914C19.3953 4.31358 19.2225 4.19811 19.0323 4.11933C18.8421 4.04055 18.6383 4 18.4324 4ZM17.0671 2.27157C17.5 2.09228 17.9639 2 18.4324 2C18.9009 2 19.3648 2.09228 19.7977 2.27157C20.2305 2.45086 20.6238 2.71365 20.9551 3.04493C21.2864 3.37621 21.5492 3.7695 21.7285 4.20235C21.9077 4.63519 22 5.09911 22 5.56761C22 6.03611 21.9077 6.50003 21.7285 6.93288C21.5492 7.36572 21.2864 7.75901 20.9551 8.09029L8.69996 20.3454C8.57691 20.4685 8.42387 20.5573 8.25597 20.6031L3.26314 21.9648C2.91693 22.0592 2.54667 21.9609 2.29292 21.7071C2.03917 21.4534 1.94084 21.0831 2.03526 20.7369L3.39694 15.7441C3.44273 15.5762 3.53154 15.4231 3.6546 15.3001L15.9097 3.04493C16.241 2.71365 16.6343 2.45086 17.0671 2.27157Z" fill="#5068a8"/>\n        </svg>\n      </button>\n      ${this.addGrapesAttributes(`<div ${v} id="contentDescription">${null==t?void 0:t.ContentValue}</div>`)}      \n    </div>\n    `}}var $=n(8156),R=n.n($),U=n(1448),V=n.n(U),H=n(5364),F=n.n(H),z=n(3375),G=n.n(z);const Z=(t,e)=>{const n=[],i=[];return n.push(e),e||n.push(t.locale),t.enableFallback&&n.push(t.defaultLocale),n.filter(Boolean).map((t=>t.toString())).forEach((function(e){if(i.includes(e)||i.push(e),!t.enableFallback)return;const n=e.split("-");3===n.length&&i.push(`${n[0]}-${n[1]}`),i.push(n[0])})),G()(i)};class W{constructor(t){this.i18n=t,this.registry={},this.register("default",Z)}register(t,e){if("function"!=typeof e){const t=e;e=()=>t}this.registry[t]=e}get(t){let e=this.registry[t]||this.registry[this.i18n.locale]||this.registry.default;return"function"==typeof e&&(e=e(this.i18n,t)),e instanceof Array||(e=[e]),e}}const J=function({pluralizer:t,includeZero:e=!0,ordinal:n=!1}){return function(i,r){return[e&&0===r?"zero":"",t(r,n)].filter(Boolean)}}({pluralizer:(t,e)=>{const n=String(t).split("."),i=!n[1],r=Number(n[0])==t,s=r&&n[0].slice(-1),o=r&&n[0].slice(-2);return e?1==s&&11!=o?"one":2==s&&12!=o?"two":3==s&&13!=o?"few":"other":1==t&&i?"one":"other"},includeZero:!0});class K{constructor(t){this.i18n=t,this.registry={},this.register("default",J)}register(t,e){this.registry[t]=e}get(t){return this.registry[t]||this.registry[this.i18n.locale]||this.registry.default}}var Y=n(4058),X=n.n(Y);function Q(t){return t?Object.keys(t).reduce(((e,n)=>(e[X()(n)]=t[n],e)),{}):{}}function tt(t){return null!=t}var et=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,nt=Math.ceil,it=Math.floor,rt="[BigNumber Error] ",st=rt+"Number primitive has more than 15 significant digits: ",ot=1e14,at=14,lt=9007199254740991,ct=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],dt=1e7,ut=1e9;function ht(t){var e=0|t;return t>0||t===e?e:e-1}function pt(t){for(var e,n,i=1,r=t.length,s=t[0]+"";i<r;){for(e=t[i++]+"",n=at-e.length;n--;e="0"+e);s+=e}for(r=s.length;48===s.charCodeAt(--r););return s.slice(0,r+1||1)}function ft(t,e){var n,i,r=t.c,s=e.c,o=t.s,a=e.s,l=t.e,c=e.e;if(!o||!a)return null;if(n=r&&!r[0],i=s&&!s[0],n||i)return n?i?0:-a:o;if(o!=a)return o;if(n=o<0,i=l==c,!r||!s)return i?0:!r^n?1:-1;if(!i)return l>c^n?1:-1;for(a=(l=r.length)<(c=s.length)?l:c,o=0;o<a;o++)if(r[o]!=s[o])return r[o]>s[o]^n?1:-1;return l==c?0:l>c^n?1:-1}function gt(t,e,n,i){if(t<e||t>n||t!==it(t))throw Error(rt+(i||"Argument")+("number"==typeof t?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function mt(t){var e=t.c.length-1;return ht(t.e/at)==e&&t.c[e]%2!=0}function vt(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function bt(t,e,n){var i,r;if(e<0){for(r=n+".";++e;r+=n);t=r+t}else if(++e>(i=t.length)){for(r=n,e-=i;--e;r+=n);t+=r}else e<i&&(t=t.slice(0,e)+"."+t.slice(e));return t}var yt,wt=function t(e){var n,i,r,s,o,a,l,c,d,u,h=S.prototype={constructor:S,toString:null,valueOf:null},p=new S(1),f=20,g=4,m=-7,v=21,b=-1e7,y=1e7,w=!1,C=1,x=0,T={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},E="0123456789abcdefghijklmnopqrstuvwxyz",A=!0;function S(t,e){var n,s,o,a,l,c,d,u,h=this;if(!(h instanceof S))return new S(t,e);if(null==e){if(t&&!0===t._isBigNumber)return h.s=t.s,void(!t.c||t.e>y?h.c=h.e=null:t.e<b?h.c=[h.e=0]:(h.e=t.e,h.c=t.c.slice()));if((c="number"==typeof t)&&0*t==0){if(h.s=1/t<0?(t=-t,-1):1,t===~~t){for(a=0,l=t;l>=10;l/=10,a++);return void(a>y?h.c=h.e=null:(h.e=a,h.c=[t]))}u=String(t)}else{if(!et.test(u=String(t)))return r(h,u,c);h.s=45==u.charCodeAt(0)?(u=u.slice(1),-1):1}(a=u.indexOf("."))>-1&&(u=u.replace(".","")),(l=u.search(/e/i))>0?(a<0&&(a=l),a+=+u.slice(l+1),u=u.substring(0,l)):a<0&&(a=u.length)}else{if(gt(e,2,E.length,"Base"),10==e&&A)return _(h=new S(t),f+h.e+1,g);if(u=String(t),c="number"==typeof t){if(0*t!=0)return r(h,u,c,e);if(h.s=1/t<0?(u=u.slice(1),-1):1,S.DEBUG&&u.replace(/^0\.0*|\./,"").length>15)throw Error(st+t)}else h.s=45===u.charCodeAt(0)?(u=u.slice(1),-1):1;for(n=E.slice(0,e),a=l=0,d=u.length;l<d;l++)if(n.indexOf(s=u.charAt(l))<0){if("."==s){if(l>a){a=d;continue}}else if(!o&&(u==u.toUpperCase()&&(u=u.toLowerCase())||u==u.toLowerCase()&&(u=u.toUpperCase()))){o=!0,l=-1,a=0;continue}return r(h,String(t),c,e)}c=!1,(a=(u=i(u,e,10,h.s)).indexOf("."))>-1?u=u.replace(".",""):a=u.length}for(l=0;48===u.charCodeAt(l);l++);for(d=u.length;48===u.charCodeAt(--d););if(u=u.slice(l,++d)){if(d-=l,c&&S.DEBUG&&d>15&&(t>lt||t!==it(t)))throw Error(st+h.s*t);if((a=a-l-1)>y)h.c=h.e=null;else if(a<b)h.c=[h.e=0];else{if(h.e=a,h.c=[],l=(a+1)%at,a<0&&(l+=at),l<d){for(l&&h.c.push(+u.slice(0,l)),d-=at;l<d;)h.c.push(+u.slice(l,l+=at));l=at-(u=u.slice(l)).length}else l-=d;for(;l--;u+="0");h.c.push(+u)}}else h.c=[h.e=0]}function I(t,e,n,i){var r,s,o,a,l;if(null==n?n=g:gt(n,0,8),!t.c)return t.toString();if(r=t.c[0],o=t.e,null==e)l=pt(t.c),l=1==i||2==i&&(o<=m||o>=v)?vt(l,o):bt(l,o,"0");else if(s=(t=_(new S(t),e,n)).e,a=(l=pt(t.c)).length,1==i||2==i&&(e<=s||s<=m)){for(;a<e;l+="0",a++);l=vt(l,s)}else if(e-=o,l=bt(l,s,"0"),s+1>a){if(--e>0)for(l+=".";e--;l+="0");}else if((e+=s-a)>0)for(s+1==a&&(l+=".");e--;l+="0");return t.s<0&&r?"-"+l:l}function N(t,e){for(var n,i,r=1,s=new S(t[0]);r<t.length;r++)(!(i=new S(t[r])).s||(n=ft(s,i))===e||0===n&&s.s===e)&&(s=i);return s}function L(t,e,n){for(var i=1,r=e.length;!e[--r];e.pop());for(r=e[0];r>=10;r/=10,i++);return(n=i+n*at-1)>y?t.c=t.e=null:n<b?t.c=[t.e=0]:(t.e=n,t.c=e),t}function _(t,e,n,i){var r,s,o,a,l,c,d,u=t.c,h=ct;if(u){t:{for(r=1,a=u[0];a>=10;a/=10,r++);if((s=e-r)<0)s+=at,o=e,l=u[c=0],d=it(l/h[r-o-1]%10);else if((c=nt((s+1)/at))>=u.length){if(!i)break t;for(;u.length<=c;u.push(0));l=d=0,r=1,o=(s%=at)-at+1}else{for(l=a=u[c],r=1;a>=10;a/=10,r++);d=(o=(s%=at)-at+r)<0?0:it(l/h[r-o-1]%10)}if(i=i||e<0||null!=u[c+1]||(o<0?l:l%h[r-o-1]),i=n<4?(d||i)&&(0==n||n==(t.s<0?3:2)):d>5||5==d&&(4==n||i||6==n&&(s>0?o>0?l/h[r-o]:0:u[c-1])%10&1||n==(t.s<0?8:7)),e<1||!u[0])return u.length=0,i?(e-=t.e+1,u[0]=h[(at-e%at)%at],t.e=-e||0):u[0]=t.e=0,t;if(0==s?(u.length=c,a=1,c--):(u.length=c+1,a=h[at-s],u[c]=o>0?it(l/h[r-o]%h[o])*a:0),i)for(;;){if(0==c){for(s=1,o=u[0];o>=10;o/=10,s++);for(o=u[0]+=a,a=1;o>=10;o/=10,a++);s!=a&&(t.e++,u[0]==ot&&(u[0]=1));break}if(u[c]+=a,u[c]!=ot)break;u[c--]=0,a=1}for(s=u.length;0===u[--s];u.pop());}t.e>y?t.c=t.e=null:t.e<b&&(t.c=[t.e=0])}return t}function k(t){var e,n=t.e;return null===n?t.toString():(e=pt(t.c),e=n<=m||n>=v?vt(e,n):bt(e,n,"0"),t.s<0?"-"+e:e)}return S.clone=t,S.ROUND_UP=0,S.ROUND_DOWN=1,S.ROUND_CEIL=2,S.ROUND_FLOOR=3,S.ROUND_HALF_UP=4,S.ROUND_HALF_DOWN=5,S.ROUND_HALF_EVEN=6,S.ROUND_HALF_CEIL=7,S.ROUND_HALF_FLOOR=8,S.EUCLID=9,S.config=S.set=function(t){var e,n;if(null!=t){if("object"!=typeof t)throw Error(rt+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(gt(n=t[e],0,ut,e),f=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(gt(n=t[e],0,8,e),g=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((n=t[e])&&n.pop?(gt(n[0],-ut,0,e),gt(n[1],0,ut,e),m=n[0],v=n[1]):(gt(n,-ut,ut,e),m=-(v=n<0?-n:n))),t.hasOwnProperty(e="RANGE"))if((n=t[e])&&n.pop)gt(n[0],-ut,-1,e),gt(n[1],1,ut,e),b=n[0],y=n[1];else{if(gt(n,-ut,ut,e),!n)throw Error(rt+e+" cannot be zero: "+n);b=-(y=n<0?-n:n)}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(rt+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw w=!n,Error(rt+"crypto unavailable");w=n}else w=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(gt(n=t[e],0,9,e),C=n),t.hasOwnProperty(e="POW_PRECISION")&&(gt(n=t[e],0,ut,e),x=n),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(n=t[e]))throw Error(rt+e+" not an object: "+n);T=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(rt+e+" invalid: "+n);A="0123456789"==n.slice(0,10),E=n}}return{DECIMAL_PLACES:f,ROUNDING_MODE:g,EXPONENTIAL_AT:[m,v],RANGE:[b,y],CRYPTO:w,MODULO_MODE:C,POW_PRECISION:x,FORMAT:T,ALPHABET:E}},S.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!S.DEBUG)return!0;var e,n,i=t.c,r=t.e,s=t.s;t:if("[object Array]"=={}.toString.call(i)){if((1===s||-1===s)&&r>=-ut&&r<=ut&&r===it(r)){if(0===i[0]){if(0===r&&1===i.length)return!0;break t}if((e=(r+1)%at)<1&&(e+=at),String(i[0]).length==e){for(e=0;e<i.length;e++)if((n=i[e])<0||n>=ot||n!==it(n))break t;if(0!==n)return!0}}}else if(null===i&&null===r&&(null===s||1===s||-1===s))return!0;throw Error(rt+"Invalid BigNumber: "+t)},S.maximum=S.max=function(){return N(arguments,-1)},S.minimum=S.min=function(){return N(arguments,1)},S.random=(s=9007199254740992,o=Math.random()*s&2097151?function(){return it(Math.random()*s)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,i,r,s,a=0,l=[],c=new S(p);if(null==t?t=f:gt(t,0,ut),r=nt(t/at),w)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(r*=2));a<r;)(s=131072*e[a]+(e[a+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),e[a]=n[0],e[a+1]=n[1]):(l.push(s%1e14),a+=2);a=r/2}else{if(!crypto.randomBytes)throw w=!1,Error(rt+"crypto unavailable");for(e=crypto.randomBytes(r*=7);a<r;)(s=281474976710656*(31&e[a])+1099511627776*e[a+1]+4294967296*e[a+2]+16777216*e[a+3]+(e[a+4]<<16)+(e[a+5]<<8)+e[a+6])>=9e15?crypto.randomBytes(7).copy(e,a):(l.push(s%1e14),a+=7);a=r/7}if(!w)for(;a<r;)(s=o())<9e15&&(l[a++]=s%1e14);for(r=l[--a],t%=at,r&&t&&(s=ct[at-t],l[a]=it(r/s)*s);0===l[a];l.pop(),a--);if(a<0)l=[i=0];else{for(i=-1;0===l[0];l.splice(0,1),i-=at);for(a=1,s=l[0];s>=10;s/=10,a++);a<at&&(i-=at-a)}return c.e=i,c.c=l,c}),S.sum=function(){for(var t=1,e=arguments,n=new S(e[0]);t<e.length;)n=n.plus(e[t++]);return n},i=function(){var t="0123456789";function e(t,e,n,i){for(var r,s,o=[0],a=0,l=t.length;a<l;){for(s=o.length;s--;o[s]*=e);for(o[0]+=i.indexOf(t.charAt(a++)),r=0;r<o.length;r++)o[r]>n-1&&(null==o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}return function(i,r,s,o,a){var l,c,d,u,h,p,m,v,b=i.indexOf("."),y=f,w=g;for(b>=0&&(u=x,x=0,i=i.replace(".",""),p=(v=new S(r)).pow(i.length-b),x=u,v.c=e(bt(pt(p.c),p.e,"0"),10,s,t),v.e=v.c.length),d=u=(m=e(i,r,s,a?(l=E,t):(l=t,E))).length;0==m[--u];m.pop());if(!m[0])return l.charAt(0);if(b<0?--d:(p.c=m,p.e=d,p.s=o,m=(p=n(p,v,y,w,s)).c,h=p.r,d=p.e),b=m[c=d+y+1],u=s/2,h=h||c<0||null!=m[c+1],h=w<4?(null!=b||h)&&(0==w||w==(p.s<0?3:2)):b>u||b==u&&(4==w||h||6==w&&1&m[c-1]||w==(p.s<0?8:7)),c<1||!m[0])i=h?bt(l.charAt(1),-y,l.charAt(0)):l.charAt(0);else{if(m.length=c,h)for(--s;++m[--c]>s;)m[c]=0,c||(++d,m=[1].concat(m));for(u=m.length;!m[--u];);for(b=0,i="";b<=u;i+=l.charAt(m[b++]));i=bt(i,d,l.charAt(0))}return i}}(),n=function(){function t(t,e,n){var i,r,s,o,a=0,l=t.length,c=e%dt,d=e/dt|0;for(t=t.slice();l--;)a=((r=c*(s=t[l]%dt)+(i=d*s+(o=t[l]/dt|0)*c)%dt*dt+a)/n|0)+(i/dt|0)+d*o,t[l]=r%n;return a&&(t=[a].concat(t)),t}function e(t,e,n,i){var r,s;if(n!=i)s=n>i?1:-1;else for(r=s=0;r<n;r++)if(t[r]!=e[r]){s=t[r]>e[r]?1:-1;break}return s}function n(t,e,n,i){for(var r=0;n--;)t[n]-=r,r=t[n]<e[n]?1:0,t[n]=r*i+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(i,r,s,o,a){var l,c,d,u,h,p,f,g,m,v,b,y,w,C,x,T,E,A=i.s==r.s?1:-1,I=i.c,N=r.c;if(!(I&&I[0]&&N&&N[0]))return new S(i.s&&r.s&&(I?!N||I[0]!=N[0]:N)?I&&0==I[0]||!N?0*A:A/0:NaN);for(m=(g=new S(A)).c=[],A=s+(c=i.e-r.e)+1,a||(a=ot,c=ht(i.e/at)-ht(r.e/at),A=A/at|0),d=0;N[d]==(I[d]||0);d++);if(N[d]>(I[d]||0)&&c--,A<0)m.push(1),u=!0;else{for(C=I.length,T=N.length,d=0,A+=2,(h=it(a/(N[0]+1)))>1&&(N=t(N,h,a),I=t(I,h,a),T=N.length,C=I.length),w=T,b=(v=I.slice(0,T)).length;b<T;v[b++]=0);E=N.slice(),E=[0].concat(E),x=N[0],N[1]>=a/2&&x++;do{if(h=0,(l=e(N,v,T,b))<0){if(y=v[0],T!=b&&(y=y*a+(v[1]||0)),(h=it(y/x))>1)for(h>=a&&(h=a-1),f=(p=t(N,h,a)).length,b=v.length;1==e(p,v,f,b);)h--,n(p,T<f?E:N,f,a),f=p.length,l=1;else 0==h&&(l=h=1),f=(p=N.slice()).length;if(f<b&&(p=[0].concat(p)),n(v,p,b,a),b=v.length,-1==l)for(;e(N,v,T,b)<1;)h++,n(v,T<b?E:N,b,a),b=v.length}else 0===l&&(h++,v=[0]);m[d++]=h,v[0]?v[b++]=I[w]||0:(v=[I[w]],b=1)}while((w++<C||null!=v[0])&&A--);u=null!=v[0],m[0]||m.splice(0,1)}if(a==ot){for(d=1,A=m[0];A>=10;A/=10,d++);_(g,s+(g.e=d+c*at-1)+1,o,u)}else g.e=c,g.r=+u;return g}}(),a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,l=/^([^.]+)\.$/,c=/^\.([^.]+)$/,d=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g,r=function(t,e,n,i){var r,s=n?e:e.replace(u,"");if(d.test(s))t.s=isNaN(s)?null:s<0?-1:1;else{if(!n&&(s=s.replace(a,(function(t,e,n){return r="x"==(n=n.toLowerCase())?16:"b"==n?2:8,i&&i!=r?t:e})),i&&(r=i,s=s.replace(l,"$1").replace(c,"0.$1")),e!=s))return new S(s,r);if(S.DEBUG)throw Error(rt+"Not a"+(i?" base "+i:"")+" number: "+e);t.s=null}t.c=t.e=null},h.absoluteValue=h.abs=function(){var t=new S(this);return t.s<0&&(t.s=1),t},h.comparedTo=function(t,e){return ft(this,new S(t,e))},h.decimalPlaces=h.dp=function(t,e){var n,i,r,s=this;if(null!=t)return gt(t,0,ut),null==e?e=g:gt(e,0,8),_(new S(s),t+s.e+1,e);if(!(n=s.c))return null;if(i=((r=n.length-1)-ht(this.e/at))*at,r=n[r])for(;r%10==0;r/=10,i--);return i<0&&(i=0),i},h.dividedBy=h.div=function(t,e){return n(this,new S(t,e),f,g)},h.dividedToIntegerBy=h.idiv=function(t,e){return n(this,new S(t,e),0,1)},h.exponentiatedBy=h.pow=function(t,e){var n,i,r,s,o,a,l,c,d=this;if((t=new S(t)).c&&!t.isInteger())throw Error(rt+"Exponent not an integer: "+k(t));if(null!=e&&(e=new S(e)),o=t.e>14,!d.c||!d.c[0]||1==d.c[0]&&!d.e&&1==d.c.length||!t.c||!t.c[0])return c=new S(Math.pow(+k(d),o?t.s*(2-mt(t)):+k(t))),e?c.mod(e):c;if(a=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new S(NaN);(i=!a&&d.isInteger()&&e.isInteger())&&(d=d.mod(e))}else{if(t.e>9&&(d.e>0||d.e<-1||(0==d.e?d.c[0]>1||o&&d.c[1]>=24e7:d.c[0]<8e13||o&&d.c[0]<=9999975e7)))return s=d.s<0&&mt(t)?-0:0,d.e>-1&&(s=1/s),new S(a?1/s:s);x&&(s=nt(x/at+2))}for(o?(n=new S(.5),a&&(t.s=1),l=mt(t)):l=(r=Math.abs(+k(t)))%2,c=new S(p);;){if(l){if(!(c=c.times(d)).c)break;s?c.c.length>s&&(c.c.length=s):i&&(c=c.mod(e))}if(r){if(0===(r=it(r/2)))break;l=r%2}else if(_(t=t.times(n),t.e+1,1),t.e>14)l=mt(t);else{if(0==(r=+k(t)))break;l=r%2}d=d.times(d),s?d.c&&d.c.length>s&&(d.c.length=s):i&&(d=d.mod(e))}return i?c:(a&&(c=p.div(c)),e?c.mod(e):s?_(c,x,g,void 0):c)},h.integerValue=function(t){var e=new S(this);return null==t?t=g:gt(t,0,8),_(e,e.e+1,t)},h.isEqualTo=h.eq=function(t,e){return 0===ft(this,new S(t,e))},h.isFinite=function(){return!!this.c},h.isGreaterThan=h.gt=function(t,e){return ft(this,new S(t,e))>0},h.isGreaterThanOrEqualTo=h.gte=function(t,e){return 1===(e=ft(this,new S(t,e)))||0===e},h.isInteger=function(){return!!this.c&&ht(this.e/at)>this.c.length-2},h.isLessThan=h.lt=function(t,e){return ft(this,new S(t,e))<0},h.isLessThanOrEqualTo=h.lte=function(t,e){return-1===(e=ft(this,new S(t,e)))||0===e},h.isNaN=function(){return!this.s},h.isNegative=function(){return this.s<0},h.isPositive=function(){return this.s>0},h.isZero=function(){return!!this.c&&0==this.c[0]},h.minus=function(t,e){var n,i,r,s,o=this,a=o.s;if(e=(t=new S(t,e)).s,!a||!e)return new S(NaN);if(a!=e)return t.s=-e,o.plus(t);var l=o.e/at,c=t.e/at,d=o.c,u=t.c;if(!l||!c){if(!d||!u)return d?(t.s=-e,t):new S(u?o:NaN);if(!d[0]||!u[0])return u[0]?(t.s=-e,t):new S(d[0]?o:3==g?-0:0)}if(l=ht(l),c=ht(c),d=d.slice(),a=l-c){for((s=a<0)?(a=-a,r=d):(c=l,r=u),r.reverse(),e=a;e--;r.push(0));r.reverse()}else for(i=(s=(a=d.length)<(e=u.length))?a:e,a=e=0;e<i;e++)if(d[e]!=u[e]){s=d[e]<u[e];break}if(s&&(r=d,d=u,u=r,t.s=-t.s),(e=(i=u.length)-(n=d.length))>0)for(;e--;d[n++]=0);for(e=ot-1;i>a;){if(d[--i]<u[i]){for(n=i;n&&!d[--n];d[n]=e);--d[n],d[i]+=ot}d[i]-=u[i]}for(;0==d[0];d.splice(0,1),--c);return d[0]?L(t,d,c):(t.s=3==g?-1:1,t.c=[t.e=0],t)},h.modulo=h.mod=function(t,e){var i,r,s=this;return t=new S(t,e),!s.c||!t.s||t.c&&!t.c[0]?new S(NaN):!t.c||s.c&&!s.c[0]?new S(s):(9==C?(r=t.s,t.s=1,i=n(s,t,0,3),t.s=r,i.s*=r):i=n(s,t,0,C),(t=s.minus(i.times(t))).c[0]||1!=C||(t.s=s.s),t)},h.multipliedBy=h.times=function(t,e){var n,i,r,s,o,a,l,c,d,u,h,p,f,g,m,v=this,b=v.c,y=(t=new S(t,e)).c;if(!(b&&y&&b[0]&&y[0]))return!v.s||!t.s||b&&!b[0]&&!y||y&&!y[0]&&!b?t.c=t.e=t.s=null:(t.s*=v.s,b&&y?(t.c=[0],t.e=0):t.c=t.e=null),t;for(i=ht(v.e/at)+ht(t.e/at),t.s*=v.s,(l=b.length)<(u=y.length)&&(f=b,b=y,y=f,r=l,l=u,u=r),r=l+u,f=[];r--;f.push(0));for(g=ot,m=dt,r=u;--r>=0;){for(n=0,h=y[r]%m,p=y[r]/m|0,s=r+(o=l);s>r;)n=((c=h*(c=b[--o]%m)+(a=p*c+(d=b[o]/m|0)*h)%m*m+f[s]+n)/g|0)+(a/m|0)+p*d,f[s--]=c%g;f[s]=n}return n?++i:f.splice(0,1),L(t,f,i)},h.negated=function(){var t=new S(this);return t.s=-t.s||null,t},h.plus=function(t,e){var n,i=this,r=i.s;if(e=(t=new S(t,e)).s,!r||!e)return new S(NaN);if(r!=e)return t.s=-e,i.minus(t);var s=i.e/at,o=t.e/at,a=i.c,l=t.c;if(!s||!o){if(!a||!l)return new S(r/0);if(!a[0]||!l[0])return l[0]?t:new S(a[0]?i:0*r)}if(s=ht(s),o=ht(o),a=a.slice(),r=s-o){for(r>0?(o=s,n=l):(r=-r,n=a),n.reverse();r--;n.push(0));n.reverse()}for((r=a.length)-(e=l.length)<0&&(n=l,l=a,a=n,e=r),r=0;e;)r=(a[--e]=a[e]+l[e]+r)/ot|0,a[e]=ot===a[e]?0:a[e]%ot;return r&&(a=[r].concat(a),++o),L(t,a,o)},h.precision=h.sd=function(t,e){var n,i,r,s=this;if(null!=t&&t!==!!t)return gt(t,1,ut),null==e?e=g:gt(e,0,8),_(new S(s),t,e);if(!(n=s.c))return null;if(i=(r=n.length-1)*at+1,r=n[r]){for(;r%10==0;r/=10,i--);for(r=n[0];r>=10;r/=10,i++);}return t&&s.e+1>i&&(i=s.e+1),i},h.shiftedBy=function(t){return gt(t,-9007199254740991,lt),this.times("1e"+t)},h.squareRoot=h.sqrt=function(){var t,e,i,r,s,o=this,a=o.c,l=o.s,c=o.e,d=f+4,u=new S("0.5");if(1!==l||!a||!a[0])return new S(!l||l<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(l=Math.sqrt(+k(o)))||l==1/0?(((e=pt(a)).length+c)%2==0&&(e+="0"),l=Math.sqrt(+e),c=ht((c+1)/2)-(c<0||c%2),i=new S(e=l==1/0?"5e"+c:(e=l.toExponential()).slice(0,e.indexOf("e")+1)+c)):i=new S(l+""),i.c[0])for((l=(c=i.e)+d)<3&&(l=0);;)if(s=i,i=u.times(s.plus(n(o,s,d,1))),pt(s.c).slice(0,l)===(e=pt(i.c)).slice(0,l)){if(i.e<c&&--l,"9999"!=(e=e.slice(l-3,l+1))&&(r||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(_(i,i.e+f+2,1),t=!i.times(i).eq(o));break}if(!r&&(_(s,s.e+f+2,0),s.times(s).eq(o))){i=s;break}d+=4,l+=4,r=1}return _(i,i.e+f+1,g,t)},h.toExponential=function(t,e){return null!=t&&(gt(t,0,ut),t++),I(this,t,e,1)},h.toFixed=function(t,e){return null!=t&&(gt(t,0,ut),t=t+this.e+1),I(this,t,e)},h.toFormat=function(t,e,n){var i,r=this;if(null==n)null!=t&&e&&"object"==typeof e?(n=e,e=null):t&&"object"==typeof t?(n=t,t=e=null):n=T;else if("object"!=typeof n)throw Error(rt+"Argument not an object: "+n);if(i=r.toFixed(t,e),r.c){var s,o=i.split("."),a=+n.groupSize,l=+n.secondaryGroupSize,c=n.groupSeparator||"",d=o[0],u=o[1],h=r.s<0,p=h?d.slice(1):d,f=p.length;if(l&&(s=a,a=l,l=s,f-=s),a>0&&f>0){for(s=f%a||a,d=p.substr(0,s);s<f;s+=a)d+=c+p.substr(s,a);l>0&&(d+=c+p.slice(s)),h&&(d="-"+d)}i=u?d+(n.decimalSeparator||"")+((l=+n.fractionGroupSize)?u.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):u):d}return(n.prefix||"")+i+(n.suffix||"")},h.toFraction=function(t){var e,i,r,s,o,a,l,c,d,u,h,f,m=this,v=m.c;if(null!=t&&(!(l=new S(t)).isInteger()&&(l.c||1!==l.s)||l.lt(p)))throw Error(rt+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+k(l));if(!v)return new S(m);for(e=new S(p),d=i=new S(p),r=c=new S(p),f=pt(v),o=e.e=f.length-m.e-1,e.c[0]=ct[(a=o%at)<0?at+a:a],t=!t||l.comparedTo(e)>0?o>0?e:d:l,a=y,y=1/0,l=new S(f),c.c[0]=0;u=n(l,e,0,1),1!=(s=i.plus(u.times(r))).comparedTo(t);)i=r,r=s,d=c.plus(u.times(s=d)),c=s,e=l.minus(u.times(s=e)),l=s;return s=n(t.minus(i),r,0,1),c=c.plus(s.times(d)),i=i.plus(s.times(r)),c.s=d.s=m.s,h=n(d,r,o*=2,g).minus(m).abs().comparedTo(n(c,i,o,g).minus(m).abs())<1?[d,r]:[c,i],y=a,h},h.toNumber=function(){return+k(this)},h.toPrecision=function(t,e){return null!=t&&gt(t,1,ut),I(this,t,e,2)},h.toString=function(t){var e,n=this,r=n.s,s=n.e;return null===s?r?(e="Infinity",r<0&&(e="-"+e)):e="NaN":(null==t?e=s<=m||s>=v?vt(pt(n.c),s):bt(pt(n.c),s,"0"):10===t&&A?e=bt(pt((n=_(new S(n),f+s+1,g)).c),n.e,"0"):(gt(t,2,E.length,"Base"),e=i(bt(pt(n.c),s,"0"),10,t,r,!0)),r<0&&n.c[0]&&(e="-"+e)),e},h.valueOf=h.toJSON=function(){return k(this)},h._isBigNumber=!0,h[Symbol.toStringTag]="BigNumber",h[Symbol.for("nodejs.util.inspect.custom")]=h.valueOf,null!=e&&S.set(e),S}();function Ct(t){var e;return null!==(e=yt[t])&&void 0!==e?e:yt.default}!function(t){t[t.up=wt.ROUND_UP]="up",t[t.down=wt.ROUND_DOWN]="down",t[t.truncate=wt.ROUND_DOWN]="truncate",t[t.halfUp=wt.ROUND_HALF_UP]="halfUp",t[t.default=wt.ROUND_HALF_UP]="default",t[t.halfDown=wt.ROUND_HALF_DOWN]="halfDown",t[t.halfEven=wt.ROUND_HALF_EVEN]="halfEven",t[t.banker=wt.ROUND_HALF_EVEN]="banker",t[t.ceiling=wt.ROUND_CEIL]="ceiling",t[t.ceil=wt.ROUND_CEIL]="ceil",t[t.floor=wt.ROUND_FLOOR]="floor"}(yt||(yt={}));var xt=n(2493),Tt=n.n(xt);function Et(t,e){const n=function(t,{precision:e,significant:n}){return n&&null!==e&&e>0?e-function(t){return t.isZero()?1:Math.floor(Math.log10(t.abs().toNumber())+1)}(t):e}(t,e);if(null===n)return t.toString();const i=Ct(e.roundMode);if(n>=0)return t.toFixed(n,i);const r=Math.pow(10,Math.abs(n));return(t=new wt(t.div(r).toFixed(0,i)).times(r)).toString()}function At(t,e){var n,i,r;const s=new wt(t);if(e.raise&&!s.isFinite())throw new Error(`"${t}" is not a valid numeric value`);const o=Et(s,e),a=new wt(o),l=a.lt(0),c=a.isZero();let[d,u]=o.split(".");const h=[];let p;const f=null!==(n=e.format)&&void 0!==n?n:"%n",g=null!==(i=e.negativeFormat)&&void 0!==i?i:`-${f}`,m=l&&!c?g:f;for(d=d.replace("-","");d.length>0;)h.unshift(d.substr(Math.max(0,d.length-3),3)),d=d.substr(0,d.length-3);return d=h.join(""),p=h.join(e.delimiter),u=e.significant?function({significand:t,whole:e,precision:n}){if("0"===e||null===n)return t;const i=Math.max(0,n-e.length);return(null!=t?t:"").substr(0,i)}({whole:d,significand:u,precision:e.precision}):null!=u?u:Tt()("0",null!==(r=e.precision)&&void 0!==r?r:0),e.stripInsignificantZeros&&u&&(u=u.replace(/0+$/,"")),s.isNaN()&&(p=t.toString()),u&&s.isFinite()&&(p+=(e.separator||".")+u),function(t,{formattedNumber:e,unit:n}){return t.replace("%n",e).replace("%u",n)}(m,{formattedNumber:p,unit:e.unit})}function St(t,e,n){let i="";return(e instanceof String||"string"==typeof e)&&(i=e),e instanceof Array&&(i=e.join(t.defaultSeparator)),n.scope&&(i=[n.scope,i].join(t.defaultSeparator)),i}function It(t){var e,n;if(null===t)return"null";const i=typeof t;return"object"!==i?i:(null===(n=null===(e=null==t?void 0:t.constructor)||void 0===e?void 0:e.name)||void 0===n?void 0:n.toLowerCase())||"object"}function Nt(t,e,n){n=Object.keys(n).reduce(((e,i)=>(e[t.transformKey(i)]=n[i],e)),{});const i=e.match(t.placeholder);if(!i)return e;for(;i.length;){let r;const s=i.shift(),o=s.replace(t.placeholder,"$1");r=tt(n[o])?n[o].toString().replace(/\$/gm,"_#$#_"):o in n?t.nullPlaceholder(t,s,e,n):t.missingPlaceholder(t,s,e,n);const a=new RegExp(s.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}"),"g");e=e.replace(a,r)}return e.replace(/_#\$#_/g,"$")}function Lt(t,e,n={}){const i="locale"in(n=Object.assign({},n))?n.locale:t.locale,r=It(i),s=t.locales.get("string"===r?i:typeof i).slice(),o=St(t,e,n).split(t.defaultSeparator).map((e=>t.transformKey(e))),a=s.map((e=>o.reduce(((t,e)=>t&&t[e]),t.translations[e])));return a.push(n.defaultValue),a.find((t=>tt(t)))}var _t=n(3031),kt=n.n(_t),Ot=n(7248);const Pt={0:"unit",1:"ten",2:"hundred",3:"thousand",6:"million",9:"billion",12:"trillion",15:"quadrillion","-1":"deci","-2":"centi","-3":"mili","-6":"micro","-9":"nano","-12":"pico","-15":"femto"},Mt=n.n(Ot)()(Object.values(Pt),Object.keys(Pt).map((t=>parseInt(t,10))));const jt=["byte","kb","mb","gb","tb","pb","eb"];function qt(t){if(t instanceof Date)return t;if("number"==typeof t){const e=new Date;return e.setTime(t),e}const e=new String(t).match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})(?:[.,](\d{1,3}))?)?(Z|\+00:?00)?/);if(e){const t=e.slice(1,8).map((t=>parseInt(t,10)||0));t[1]-=1;const[n,i,r,s,o,a,l]=t;return e[8]?new Date(Date.UTC(n,i,r,s,o,a,l)):new Date(n,i,r,s,o,a,l)}t.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)&&(new Date).setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" ")));const n=new Date;return n.setTime(Date.parse(t)),n}function Dt({i18n:t,count:e,scope:n,options:i,baseScope:r}){let s,o;if(i=Object.assign({},i),s="object"==typeof n&&n?n:Lt(t,n,i),!s)return t.missingTranslation.get(n,i);const a=t.pluralization.get(i.locale)(t,e),l=[];for(;a.length;){const t=a.shift();if(tt(s[t])){o=s[t];break}l.push(t)}return tt(o)?(i.count=e,t.interpolate(t,o,i)):t.missingTranslation.get(r.split(t.defaultSeparator).concat([l[0]]),i)}const Bt={meridian:{am:"AM",pm:"PM"},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbrDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbrMonthNames:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};var $t=n(3181),Rt=n.n($t);const Ut=(t,e,n)=>n>=t&&n<=e,Vt=function(t,e){e instanceof Array&&(e=e.join(t.defaultSeparator));const n=e.split(t.defaultSeparator).slice(-1)[0];return t.missingTranslationPrefix+n.replace("_"," ").replace(/([a-z])([A-Z])/g,((t,e,n)=>`${e} ${n.toLowerCase()}`))},Ht=(t,e,n)=>{const i=St(t,e,n),r="locale"in n?n.locale:t.locale,s=It(r);return`[missing "${["string"==s?r:s,i].join(t.defaultSeparator)}" translation]`},Ft=(t,e,n)=>{const i=St(t,e,n),r=[t.locale,i].join(t.defaultSeparator);throw new Error(`Missing translation: ${r}`)};class zt{constructor(t){this.i18n=t,this.registry={},this.register("guess",Vt),this.register("message",Ht),this.register("error",Ft)}register(t,e){this.registry[t]=e}get(t,e){var n;return this.registry[null!==(n=e.missingBehavior)&&void 0!==n?n:this.i18n.missingBehavior](this.i18n,t,e)}}const Gt={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,enableFallback:!1,missingBehavior:"message",missingTranslationPrefix:"",missingPlaceholder:(t,e)=>`[missing "${e}" value]`,nullPlaceholder:(t,e,n,i)=>t.missingPlaceholder(t,e,n,i),transformKey:t=>t},Zt=new class{constructor(t={},e={}){this._locale=Gt.locale,this._defaultLocale=Gt.defaultLocale,this._version=0,this.onChangeHandlers=[],this.translations={},this.t=this.translate,this.p=this.pluralize,this.l=this.localize,this.distanceOfTimeInWords=this.timeAgoInWords;const{locale:n,enableFallback:i,missingBehavior:r,missingTranslationPrefix:s,missingPlaceholder:o,nullPlaceholder:a,defaultLocale:l,defaultSeparator:c,placeholder:d,transformKey:u}=Object.assign(Object.assign({},Gt),e);this.locale=n,this.defaultLocale=l,this.defaultSeparator=c,this.enableFallback=i,this.locale=n,this.missingBehavior=r,this.missingTranslationPrefix=s,this.missingPlaceholder=o,this.nullPlaceholder=a,this.placeholder=d,this.pluralization=new K(this),this.locales=new W(this),this.missingTranslation=new zt(this),this.transformKey=u,this.interpolate=Nt,this.store(t)}store(t){F()(this.translations,t),this.hasChanged()}get locale(){return this._locale||this.defaultLocale||"en"}set locale(t){if("string"!=typeof t)throw new Error(`Expected newLocale to be a string; got ${It(t)}`);const e=this._locale!==t;this._locale=t,e&&this.hasChanged()}get defaultLocale(){return this._defaultLocale||"en"}set defaultLocale(t){if("string"!=typeof t)throw new Error(`Expected newLocale to be a string; got ${It(t)}`);const e=this._defaultLocale!==t;this._defaultLocale=t,e&&this.hasChanged()}translate(t,e){const n=function(t,e,n){let i=[{scope:e}];if(tt(n.defaults)&&(i=i.concat(n.defaults)),tt(n.defaultValue)){const r="function"==typeof n.defaultValue?n.defaultValue(t,e,n):n.defaultValue;i.push({message:r}),delete n.defaultValue}return i}(this,t,e=Object.assign({},e));let i;return n.some((t=>(tt(t.scope)?i=Lt(this,t.scope,e):tt(t.message)&&(i=t.message),null!=i)))?("string"==typeof i?i=this.interpolate(this,i,e):"object"==typeof i&&i&&tt(e.count)&&(i=Dt({i18n:this,count:e.count||0,scope:i,options:e,baseScope:St(this,t,e)})),e&&i instanceof Array&&(i=i.map((t=>"string"==typeof t?Nt(this,t,e):t))),i):this.missingTranslation.get(t,e)}pluralize(t,e,n){return Dt({i18n:this,count:t,scope:e,options:Object.assign({},n),baseScope:St(this,e,null!=n?n:{})})}localize(t,e,n){if(n=Object.assign({},n),null==e)return"";switch(t){case"currency":return this.numberToCurrency(e);case"number":return At(e,Object.assign({delimiter:",",precision:3,separator:".",significant:!1,stripInsignificantZeros:!1},Lt(this,"number.format")));case"percentage":return this.numberToPercentage(e);default:{let i;return i=t.match(/^(date|time)/)?this.toTime(t,e):e.toString(),Nt(this,i,n)}}}toTime(t,e){const n=qt(e),i=Lt(this,t);return n.toString().match(/invalid/i)?n.toString():i?this.strftime(n,i):n.toString()}numberToCurrency(t,e={}){return At(t,Object.assign(Object.assign(Object.assign({delimiter:",",format:"%u%n",precision:2,separator:".",significant:!1,stripInsignificantZeros:!1,unit:"$"},Q(this.get("number.format"))),Q(this.get("number.currency.format"))),e))}numberToPercentage(t,e={}){return At(t,Object.assign(Object.assign(Object.assign({delimiter:"",format:"%n%",precision:3,stripInsignificantZeros:!1,separator:".",significant:!1},Q(this.get("number.format"))),Q(this.get("number.percentage.format"))),e))}numberToHumanSize(t,e={}){return function(t,e,n){const i=Ct(n.roundMode),r=1024,s=new wt(e).abs(),o=s.lt(r);let a;const l=((t,e)=>{const n=e.length-1,i=new wt(Math.log(t.toNumber())).div(Math.log(r)).integerValue(wt.ROUND_DOWN).toNumber();return Math.min(n,i)})(s,jt);a=o?s.integerValue():new wt(Et(s.div(Math.pow(r,l)),{significant:n.significant,precision:n.precision,roundMode:n.roundMode}));const c=t.translate("number.human.storage_units.format",{defaultValue:"%n %u"}),d=t.translate(`number.human.storage_units.units.${o?"byte":jt[l]}`,{count:s.integerValue().toNumber()});let u=a.toFixed(n.precision,i);return n.stripInsignificantZeros&&(u=u.replace(/(\..*?)0+$/,"$1").replace(/\.$/,"")),c.replace("%n",u).replace("%u",d)}(this,t,Object.assign(Object.assign(Object.assign({delimiter:"",precision:3,significant:!0,stripInsignificantZeros:!0,units:{billion:"Billion",million:"Million",quadrillion:"Quadrillion",thousand:"Thousand",trillion:"Trillion",unit:""}},Q(this.get("number.human.format"))),Q(this.get("number.human.storage_units"))),e))}numberToHuman(t,e={}){return function(t,e,n){const i={roundMode:n.roundMode,precision:n.precision,significant:n.significant};let r;if("string"===It(n.units)){const e=n.units;if(r=Lt(t,e),!r)throw new Error(`The scope "${t.locale}${t.defaultSeparator}${St(t,e,{})}" couldn't be found`)}else r=n.units;let s=Et(new wt(e),i);const o=((t,e)=>{const n=t.isZero()?0:Math.floor(Math.log10(t.abs().toNumber()));return(t=>kt()(Object.keys(t).map((t=>Mt[t])),(t=>-1*t)))(e).find((t=>n>=t))||0})(new wt(s),r),a=((t,e)=>t[Pt[e.toString()]]||"")(r,o);if(s=Et(new wt(s).div(Math.pow(10,o)),i),n.stripInsignificantZeros){let[t,e]=s.split(".");e=(e||"").replace(/0+$/,""),s=t,e&&(s+=`${n.separator}${e}`)}return n.format.replace("%n",s||"0").replace("%u",a).trim()}(this,t,Object.assign(Object.assign(Object.assign({delimiter:"",separator:".",precision:3,significant:!0,stripInsignificantZeros:!0,format:"%n %u",roundMode:"default",units:{billion:"Billion",million:"Million",quadrillion:"Quadrillion",thousand:"Thousand",trillion:"Trillion",unit:""}},Q(this.get("number.human.format"))),Q(this.get("number.human.decimal_units"))),e))}numberToRounded(t,e){return At(t,Object.assign({unit:"",precision:3,significant:!1,separator:".",delimiter:"",stripInsignificantZeros:!1},e))}numberToDelimited(t,e={}){return function(t,e){const n=new wt(t);if(!n.isFinite())return t.toString();if(!e.delimiterPattern.global)throw new Error(`options.delimiterPattern must be a global regular expression; received ${e.delimiterPattern}`);let[i,r]=n.toString().split(".");return i=i.replace(e.delimiterPattern,(t=>`${t}${e.delimiter}`)),[i,r].filter(Boolean).join(e.separator)}(t,Object.assign({delimiterPattern:/(\d)(?=(\d\d\d)+(?!\d))/g,delimiter:",",separator:"."},e))}withLocale(t,e){return n=this,i=void 0,s=function*(){const n=this.locale;try{this.locale=t,yield e()}finally{this.locale=n}},new((r=void 0)||(r=Promise))((function(t,e){function o(t){try{l(s.next(t))}catch(t){e(t)}}function a(t){try{l(s.throw(t))}catch(t){e(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(o,a)}l((s=s.apply(n,i||[])).next())}));var n,i,r,s}strftime(t,e,n={}){return function(t,e,n={}){const{abbrDayNames:i,dayNames:r,abbrMonthNames:s,monthNames:o,meridian:a,utc:l}=Object.assign(Object.assign({},Bt),n);if(isNaN(t.getTime()))throw new Error("strftime() requires a valid date object, but received an invalid date.");const c=l?t.getUTCDay():t.getDay(),d=l?t.getUTCDate():t.getDate(),u=l?t.getUTCFullYear():t.getFullYear(),h=(l?t.getUTCMonth():t.getMonth())+1,p=l?t.getUTCHours():t.getHours();let f=p;const g=p>11?"pm":"am",m=l?t.getUTCSeconds():t.getSeconds(),v=l?t.getUTCMinutes():t.getMinutes(),b=l?0:t.getTimezoneOffset(),y=Math.floor(Math.abs(b/60)),w=Math.abs(b)-60*y,C=(b>0?"-":"+")+(y.toString().length<2?"0"+y:y)+(w.toString().length<2?"0"+w:w);return f>12?f-=12:0===f&&(f=12),(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("%a",i[c])).replace("%A",r[c])).replace("%b",s[h])).replace("%B",o[h])).replace("%d",d.toString().padStart(2,"0"))).replace("%e",d.toString())).replace("%-d",d.toString())).replace("%H",p.toString().padStart(2,"0"))).replace("%-H",p.toString())).replace("%k",p.toString())).replace("%I",f.toString().padStart(2,"0"))).replace("%-I",f.toString())).replace("%l",f.toString())).replace("%m",h.toString().padStart(2,"0"))).replace("%-m",h.toString())).replace("%M",v.toString().padStart(2,"0"))).replace("%-M",v.toString())).replace("%p",a[g])).replace("%P",a[g].toLowerCase())).replace("%S",m.toString().padStart(2,"0"))).replace("%-S",m.toString())).replace("%w",c.toString())).replace("%y",u.toString().padStart(2,"0").substr(-2))).replace("%-y",u.toString().padStart(2,"0").substr(-2).replace(/^0+/,""))).replace("%Y",u.toString())).replace(/%z/i,C)}(t,e,Object.assign(Object.assign(Object.assign({},Q(Lt(this,"date"))),{meridian:{am:Lt(this,"time.am")||"AM",pm:Lt(this,"time.pm")||"PM"}}),n))}update(t,e,n={strict:!1}){if(n.strict&&!V()(this.translations,t))throw new Error(`The path "${t}" is not currently defined`);const i=R()(this.translations,t),r=It(i),s=It(e);if(n.strict&&r!==s)throw new Error(`The current type for "${t}" is "${r}", but you're trying to override it with "${s}"`);let o;o="object"===s?Object.assign(Object.assign({},i),e):e;const a=t.split(this.defaultSeparator),l=a.pop();let c=this.translations;for(const t of a)c[t]||(c[t]={}),c=c[t];c[l]=o,this.hasChanged()}toSentence(t,e={}){const{wordsConnector:n,twoWordsConnector:i,lastWordConnector:r}=Object.assign(Object.assign({wordsConnector:", ",twoWordsConnector:" and ",lastWordConnector:", and "},Q(Lt(this,"support.array"))),e),s=t.length;switch(s){case 0:return"";case 1:return`${t[0]}`;case 2:return t.join(i);default:return[t.slice(0,s-1).join(n),r,t[s-1]].join("")}}timeAgoInWords(t,e,n={}){return function(t,e,n,i={}){const r=i.scope||"datetime.distance_in_words",s=(e,n=0)=>t.t(e,{count:n,scope:r});e=qt(e),n=qt(n);let o=e.getTime()/1e3,a=n.getTime()/1e3;o>a&&([e,n,o,a]=[n,e,a,o]);const l=Math.round(a-o),c=Math.round((a-o)/60),d=c/60/24,u=Math.round(c/60),h=Math.round(d),p=Math.round(h/30);if(Ut(0,1,c))return i.includeSeconds?Ut(0,4,l)?s("less_than_x_seconds",5):Ut(5,9,l)?s("less_than_x_seconds",10):Ut(10,19,l)?s("less_than_x_seconds",20):Ut(20,39,l)?s("half_a_minute"):Ut(40,59,l)?s("less_than_x_minutes",1):s("x_minutes",1):0===c?s("less_than_x_minutes",1):s("x_minutes",c);if(Ut(2,44,c))return s("x_minutes",c);if(Ut(45,89,c))return s("about_x_hours",1);if(Ut(90,1439,c))return s("about_x_hours",u);if(Ut(1440,2519,c))return s("x_days",1);if(Ut(2520,43199,c))return s("x_days",h);if(Ut(43200,86399,c))return s("about_x_months",Math.round(c/43200));if(Ut(86400,525599,c))return s("x_months",p);let f=e.getFullYear();e.getMonth()+1>=3&&(f+=1);let g=n.getFullYear();n.getMonth()+1<3&&(g-=1);const m=525600,v=c-1440*(f>g?0:Rt()(f,g).filter((t=>1==new Date(t,1,29).getMonth())).length),b=Math.trunc(v/m),y=parseFloat((v/m-b).toPrecision(3));return y<.25?s("about_x_years",b):y<.75?s("over_x_years",b):s("almost_x_years",b+1)}(this,t,e,n)}onChange(t){return this.onChangeHandlers.push(t),()=>{this.onChangeHandlers.splice(this.onChangeHandlers.indexOf(t),1)}}get version(){return this._version}formatNumber(t,e={}){return At(t,e=Object.assign(Object.assign({delimiter:",",precision:3,separator:".",unit:"",format:"%u%n",significant:!1,stripInsignificantZeros:!1},Q(this.get("number.format"))),e))}get(t){return Lt(this,t)}runCallbacks(){this.onChangeHandlers.forEach((t=>t(this)))}hasChanged(){this._version+=1,this.runCallbacks()}}({en:{navbar:{tree:"Tree",publish:{label:"Publish",modal_title:"Publish",modal_description:"Are you sure you want to publish? Once published, all currently visible pages will be finalized and visible to residents. This action cannot be undone.",notify_residents:"Notify residents about the updates made",modal_confirm:"Publish",modal_cancel:"Cancel"},debug:{label:"Debug",modal_title:"App Debugging",total_urls:"Total URLs",total_successful:"Successful",total_failed:"Failed",full_url:"Full URL",status_code:"Status Code",status_message:"Status Message",affected_tile:"Affected Tile",affected_content:"Affected Content",affected_cta:"Affected CTA"},share:{label:"Share",modal_title:"Share link for a preview",modal_description:"A shareable link has been generated for you. Copy it and share for previews!",copy:"Copy",close:"Close",copied:"Linked copied to clipboard"},appversion:{create_new:"Create new version",duplicate:"Duplicate version",duplicate_button:"Duplicate",save:"Save",cancel:"Cancel"}},undo:"Undo",redo:"Redo",sidebar:{pages:"Pages",templates:{label:"Templates",click_to_add_template:"Click to add template",confirmation_title:"Confirmation",confirmation_message:"When you continue, all the changes you have made will be cleared."},confirmation_accept:"Confirm",confirmation_cancel:"Cancel",image_upload:{modal_title:"Upload",cancel:"Cancel",save:"Save",upload_message:"<p>Drag and drop or <a href='#' id='browseLink'>browse</a></p>"},icon_category:{general:"General",services:"Services",health:"Health",living:"Living"},action_list:{page:"Pages",services:"Services",forms:"Forms",weblink:"Web link",module:"Modules",content:"Content"}},default:{reception:"Reception",mycare:"My Care",myliving:"My Living",myservice:"My Service",location:"Location",map:"Map",myactivity:"My Activity",calendar:"Calendar"},tile:{add_template_right:"Add tile right",add_template_bottom:"Add tile below",delete_tile:"Delete tile",title:"Title"},messages:{success:{published:"App published successfully",page_created:"Page created successfully"},error:{page_linking:"Page cannot be linked to itself",select_tile:"Select a tile to continue",empty_page_name:"Enter page name",templates_on_menu_pages:"Templates can only be added to menu pages",no_active_page:"No active page"}},Messages:"Messages",Requests:"Requests",NoMessagesYet:"No Messages Yet"},nl:{navbar:{tree:"Boom",publish:{label:"Publiceren",modal_title:"Publiceren",modal_description:"Weet je zeker dat je wilt publiceren? Zodra gepubliceerd, worden alle momenteel zichtbare pagina's afgerond en zichtbaar voor bewoners. Deze actie kan niet ongedaan worden gemaakt.",notify_residents:"Bewoners op de hoogte stellen van de gemaakte updates",modal_confirm:"Publiceren",modal_cancel:"Annuleren"},debug:{label:"Debug",modal_title:"App Debugging",total_urls:"Totaal aantal URL's",total_successful:"Succesvol",total_failed:"Mislukt",full_url:"Volledige URL",status_code:"Statuscode",status_message:"Statusbericht",affected_tile:"Beïnvloede tegel",affected_content:"Beïnvloede inhoud",affected_cta:"Beïnvloede CTA"},share:{label:"Delen",modal_title:"Deel link voor een voorbeeldweergave",modal_description:"Er is een deelbare link gegenereerd voor jou. Kopieer deze en deel hem voor previews!",copy:"Kopiëren",close:"Sluiten",copied:"Link gekopieerd naar klembord"},appversion:{create_new:"Nieuwe versie maken",duplicate:"Versie dupliceren"}},undo:"Ongedaan maken",redo:"Opnieuw",sidebar:{pages:"Pagina's",templates:{label:"Sjablonen",click_to_add_template:"Klik om een sjabloon toe te voegen",confirmation_title:"Bevestiging",confirmation_message:"Als je doorgaat, worden alle wijzigingen die je hebt gemaakt gewist."},confirmation_accept:"Bevestigen",confirmation_cancel:"Annuleren",image_upload:{modal_title:"Uploaden",cancel:"Annuleren",save:"Opslaan",upload_message:"<p>Sleep en plaats of <a href='#' id='browseLink'>blader</a></p>"},icon_category:{general:"Algemeen",services:"Diensten",health:"Gezondheid",living:"Wonen"},action_list:{page:"Pagina's",services:"Diensten",forms:"Formulieren",weblink:"Weblink",module:"Modules",content:"Inhoud"}},default:{reception:"Receptie",mycare:"Mijn Zorg",myliving:"Mijn Wonen",myservice:"Mijn Dienst",location:"Locatie",map:"Kaart",myactivity:"Mijn Activiteit",calendar:"Kalender"},tile:{add_template_right:"Tegel rechts toevoegen",add_template_bottom:"Tegel hieronder toevoegen",delete_tile:"Tegel verwijderen",title:"Titel"},messages:{success:{published:"App succesvol gepubliceerd",page_created:"Pagina succesvol aangemaakt"},error:{page_linking:"Pagina kan niet aan zichzelf worden gekoppeld",select_tile:"Selecteer een tegel om door te gaan",empty_page_name:"Voer een paginanaam in",templates_on_menu_pages:"Sjablonen kunnen alleen aan menupagina's worden toegevoegd",no_active_page:"Geen actieve pagina"}},Messages:"Berichten",Requests:"Verzoeken",NoMessagesYet:"Nog geen berichten"}});class Wt{constructor(t){this.data=t,this.themeManager=new q}generateTile(t,e,n){return`\n      <div ${e?'\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n    data-gjs-type="tile-wrapper"\n':m} class="template-wrapper" id="${t.Id}">\n        <div ${g} class="template-block${e?" first-tile high-priority-template":""}" \n          style="color: ${t.Color}; text-align: ${t.Align};\n        ${n?"align-items: center; justify-content: center;":`align-items: ${"left"===t.Align?"start":t.Align}; justify-content: ${"left"===t.Align?"start":t.Align};`}; \n        ${t.BGImageUrl?`background-color: rgba(0,0,0, ${t.Opacity/100});\n               background-image: url('${t.BGImageUrl}');\n               background-size: cover;\n               background-position: center;\n               background-blend-mode: overlay;`:`\n            background-color: ${this.themeManager.getThemeColor(t.BGColor)}; \n            `}">\n        \n        <div ${v} class="tile-icon-section" ${t.Icon?'style="display: block;"':""}>\n          <span ${v} class="tile-close-icon top-right">×</span>\n          <span ${v} title="${t.Icon}" class="tile-icon">\n            ${this.getTileIcon(t)}\n          </span>\n        </div>\n                \n                <div ${v} class="tile-title-section" style="${n?"text-align: center;":"text-align: left"}">\n                  <span ${v} class="tile-close-title top-right">×</span>\n                  <span ${v} class="tile-title" title="${t.Text}" style="${n?"text-align: center;":`text-align: ${t.Align}`}">${this.truncateText(t,t.Text,n)}</span>\n        </div>\n      </div>\n      ${e?"":`\n        <button ${v} title="${Zt.t("tile.delete_tile")}" class="action-button delete-button">−</button>`}\n      <button ${v} title="${Zt.t("tile.add_template_right")}" class="action-button add-button-right">+</button>\n      <button ${v} title="${Zt.t("tile.add_template_bottom")}" class="action-button add-button-bottom">+</button>\n      <svg ${v} class="tile-open-menu" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 27 27">\n        <g ${v} id="Group_2383" data-name="Group 2383" transform="translate(-921 -417.999)">\n          <g ${v} id="Group_2382" data-name="Group 2382" transform="translate(921 418)">\n            <circle ${v} id="Ellipse_534" data-name="Ellipse 534" cx="13.5" cy="13.5" r="13.5" transform="translate(0 -0.001)" fill="#6a747f"/>\n          </g>\n          <path ${v} id="Path_2320" data-name="Path 2320" d="M1.7,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,1.7,0ZM7.346,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,7.346,0ZM13,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,13,0Z" transform="translate(927 430)" fill="#fff"/>\n        </g>\n      </svg>\n    </div>\n  `}translateTileLabel(t,e){console.log("tile",t),console.log("tile",t.Action.ObjectType);const n=t.Action.ObjectType;return"Map"===n?Zt.t("default.map"):"location"===n?Zt.t("default.location"):"calendar"===n?Zt.t("default.calendar"):"reception"===n?Zt.t("default.reception"):"mycare"===n?Zt.t("default.mycare"):"myliving"===n||"myliving"===n?Zt.t("default.calendar"):"myservice"===n?Zt.t("default.myservice"):"myactivity"===n?Zt.t("default.myactivity"):e}truncateText(t,e,n){const i=window.innerWidth,r=3===length?11:2===length?15:20;return e.length>(i<=280?20:r+4)?e.substring(0,i<=280?r:r+4).trim()+"..":n?this.wrapTileTitle(e):e}wrapTileTitle(t){const e=t.split(" ");return e.length>1?e[0]+"<br>"+e[1]:t.replace("<br>","")}getTileIcon(t){const e=this.themeManager.getThemeIcon(t.Icon);let n;return e&&(n=e.replace('fill="#7c8791"',`fill="${t.Color}"`)),n}generateRow(t,e){const n=0===e&&1===t.Tiles.length,i=3===t.Tiles.length,r=t.Tiles.map(((t,e)=>this.generateTile(t,n&&0===e,i))).join("");return`<div id="${t.Id}" ${b} class="container-row">${r}</div>`}generateHTML(){const t=`\n    <div ${v} id="frame-container" data-gjs-type="template-wrapper" class="frame-container">\n      <div ${v} class="container-column">\n        ${this.data.PageMenuStructure.Rows.map(((t,e)=>this.generateRow(t,e))).join("")}\n      </div>\n    </div>\n  `;return this.filterHTML(t)}filterHTML(t){const e=document.createElement("div");return e.innerHTML=t,e.querySelectorAll(".container-row").forEach((t=>{3===t.querySelectorAll(".template-block").length&&t.querySelectorAll(".add-button-right").forEach((t=>{t.style.display="none"}))})),e.innerHTML}}class Jt{constructor(t){this.editor=t,this.themeManager=new q}load(){this.editor.setComponents(this.htmlData())}htmlData(){let t=`\n        <div class="tb-date-selector" \n          ${v}\n          style="background-color: ${this.themeManager.getThemeColor("backgroundColor")};">\n          <span class="tb-arrow" ${v}>❮</span>\n          <span class="tb-date-text" id="current-date" ${v}> ${this.formatDate()}</span>\n          <span class="tb-arrow" ${v}>❯</span>\n        </div>\n        <div class="tb-schedule" id="schedule-container" ${v}>\n      `;for(let e=0;e<24;e++){const n=e.toString().padStart(2,"0")+":00";t+=`\n            <div class="tb-time-slot" ${v}>\n              <div class="tb-time" ${v}>${n}</div>\n              <div class="tb-events" ${v}></div>\n              ${e===(new Date).getHours()?`\n                <div class="tb-current-time-indicator" ${v}></div>\n                <div class="tb-current-time-dot" ${v}></div>`:""}\n            </div>\n          `}return t+="</div>",t}formatDate(){return(new Date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/(\d{2} \w{3}) (\d{4})/,"$1, $2")}}class Kt{constructor(t,e){this.toolboxService=new o,this.editor=t,this.pageData=e}setupEditor(){return t=this,e=void 0,i=function*(){try{if(this.locationData=yield this.toolboxService.getLocationData(),!this.locationData)return void console.warn("Location data could not be retrieved.");const t=this.updatePageData(),e=new B(t).generateHTML();this.editor.setComponents(e),localStorage.setItem(`data-${this.pageData.PageId}`,JSON.stringify(t))}catch(t){console.error("Error fetching location data:",t)}},new((n=void 0)||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i}updatePageData(){var t,e,n;if(!(null===(e=null===(t=this.pageData)||void 0===t?void 0:t.PageContentStructure)||void 0===e?void 0:e.Content))return this.pageData;const i=(null===(n=this.locationData)||void 0===n?void 0:n.BC_Trn_Location)||{};return this.pageData.PageContentStructure.Content=this.pageData.PageContentStructure.Content.map((t=>"Image"===(null==t?void 0:t.ContentType)?Object.assign(Object.assign({},t),{ContentValue:i.LocationImage||t.ContentValue}):"Description"===(null==t?void 0:t.ContentType)?Object.assign(Object.assign({},t),{ContentValue:i.LocationDescription||t.ContentValue}):t)),this.pageData}}class Yt{constructor(t){this.editor=t,this.themeManager=new q}load(){this.editor.setComponents(this.htmlData())}htmlData(){return`\n         <div class="tb-chat-container" ${v}>\n            <div class="tb-toggle-buttons"  ${v}>\n                <button style="background-color: ${this.themeManager.getThemeColor("backgroundColor")};border-radius: 6px;"  ${v}>${Zt.t("Messages")}</button>\n                <button style="background-color: #e1e1e1;border-radius: 6px;color: #262626;"  ${v}>${Zt.t("Requests")}</button>\n            </div>\n            <div class="tb-chat-body" ${v}>${Zt.t("NoMessagesYet")}</div>\n         </div>\n         `}}class Xt{constructor(t,e){this.toolboxService=new o,this.editor=t,this.pageData=e}setupEditor(){return t=this,e=void 0,i=function*(){try{if(this.locationData=yield this.toolboxService.getLocationData(),!this.locationData)return void console.warn("Location data could not be retrieved.");console.log("Location data retrieved:",this.locationData);const t=this.updatePageData(),e=new B(t).generateHTML();this.editor.setComponents(e),localStorage.setItem(`data-${this.pageData.PageId}`,JSON.stringify(t))}catch(t){console.error("Error fetching location data:",t)}},new((n=void 0)||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i}updatePageData(){var t,e,n;if(!(null===(e=null===(t=this.pageData)||void 0===t?void 0:t.PageContentStructure)||void 0===e?void 0:e.Content))return this.pageData;const i=(null===(n=this.locationData)||void 0===n?void 0:n.BC_Trn_Location)||{};return this.pageData.PageContentStructure.Content=this.pageData.PageContentStructure.Content.map((t=>"Image"===(null==t?void 0:t.ContentType)?Object.assign(Object.assign({},t),{ContentValue:i.ReceptionImage?i.ReceptionImage:"https://staging.comforta.yukon.software/media/receptie-197@3x.png"}):"Description"===(null==t?void 0:t.ContentType)?Object.assign(Object.assign({},t),{ContentValue:i.ReceptionDescription?i.ReceptionDescription:"Welkom bij de receptie van onze app. Hier kunt u al uw vragen stellen en krijgt u direct hulp van ons team. Of het nu gaat om technische ondersteuning, informatie over diensten, of algemene vragen, wij zijn er om u te helpen."}):t)),this.pageData}}class Qt{constructor(t){this.editor=t}initialise(t){return e=this,n=void 0,r=function*(){try{this.editor.DomComponents.clear(),navigator.geolocation.getCurrentPosition((t=>{var e;const n=`https://www.google.com/maps/embed/v1/view?key=AIzaSyBBaQo7_sF2xk3uNIyKp_Z-4BbaTebGGa4&center=${t.coords.latitude},${t.coords.longitude}&zoom=18`,i=this.editor.addComponents(`\n            <div ${v} id="frame-container" style="position: relative; width: 100%; height: 100vh; overflow: hidden;">\n              <div ${v} id="map-preloader" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1000;">\n                <img ${v} src="/Resources/UCGrapes1/src/images/spinner.gif" width="32" height="32" alt="Loading...">\n              </div>\n              <iframe \n                id="map-frame"\n                src="${n}"\n                width="100%"\n                height="100%"\n                frameborder="0"\n                allowfullscreen="true"\n                loading="lazy"\n                ${v}\n                style="display: block; border: none; height: 100vh;">\n              </iframe>\n            </div>\n          `)[0],r=null===(e=i.find("#map-frame")[0])||void 0===e?void 0:e.getEl();r&&(r.onload=()=>{const t=i.find("#map-preloader")[0];t&&(t.getEl().style.display="none")}),setTimeout((()=>{const t=i.find("#map-preloader")[0];t&&(t.getEl().style.display="none")}),5e3)}),(t=>{console.error("Geolocation error:",t.message)}))}catch(t){console.error("Error setting up iframe component:",t.message)}},new((i=void 0)||(i=Promise))((function(t,s){function o(t){try{l(r.next(t))}catch(t){s(t)}}function a(t){try{l(r.throw(t))}catch(t){s(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(o,a)}l((r=r.apply(e,n||[])).next())}));var e,n,i,r}}class te{constructor(t){this.editor=t}initialise(t){return e=this,n=void 0,r=function*(){const e=null==t?void 0:t.ObjectUrl;try{this.editor.DomComponents.clear(),this.editor.DomComponents.addType("object",{isComponent:t=>"OBJECT"===t.tagName,model:{defaults:{tagName:"object",draggable:!0,droppable:!1,attributes:{width:"100%",height:"300vh"},styles:"\n                  .form-frame-container {\n                    overflow-x: hidden;\n                    overflow-y: auto;\n                    position: relative;\n                    min-height: 300px;\n                  }\n      \n                  /* Preloader styles */\n                  .preloader-wrapper {\n                    position: absolute;\n                    top: 50%;\n                    left: 50%;\n                    transform: translate(-50%, -50%);\n                    z-index: 1000;\n                  }\n      \n                  .preloader {\n                    width: 32px;\n                    height: 32px;\n                    background-image: url('/Resources/UCGrapes1/src/images/spinner.gif');\n                    background-size: contain;\n                    background-repeat: no-repeat;\n                  }\n      \n                  /* Custom scrollbar styles */\n                  .form-frame-container::-webkit-scrollbar {\n                    width: 6px;\n                    height: 0;\n                  }\n      \n                  .form-frame-container::-webkit-scrollbar-track {\n                    background: #f1f1f1;\n                    border-radius: 3px;\n                  }\n      \n                  .form-frame-container::-webkit-scrollbar-thumb {\n                    background: #888;\n                    border-radius: 3px;\n                  }\n      \n                  .form-frame-container::-webkit-scrollbar-thumb:hover {\n                    background: #555;\n                  }\n      \n                  /* Firefox scrollbar styles */\n                  .form-frame-container {\n                    scrollbar-width: thin;\n                    scrollbar-color: #888 #f1f1f1;\n                  }\n                  .fallback-message {\n                    margin-bottom: 10px;\n                    color: #666;\n                  }\n                "}},view:{onRender({el:t,model:e}){const n=`\n                  <div class="fallback-content">\n                    <p class="fallback-message">${e.get("attributes").fallbackMessage||"Content cannot be displayed"}</p>\n                    <a href="${e.get("attributes").data}" \n                       target="_blank" \n                       class="fallback-link">\n                      Open in New Window\n                    </a>\n                  </div>\n                `;t.insertAdjacentHTML("beforeend",n),t.addEventListener("load",(()=>{const e=t.closest(".form-frame-container").querySelector(".preloader-wrapper");e&&(e.style.display="none"),t.querySelector(".fallback-content").style.display="none"})),t.addEventListener("error",(e=>{const n=t.closest(".form-frame-container").querySelector(".preloader-wrapper");n&&(n.style.display="none");const i=t.querySelector(".fallback-content");i&&(i.style.display="flex",i.style.flexDirection="column",i.style.justifyContent="start")}))}}}),this.editor.setComponents(`\n            <div class="form-frame-container" id="frame-container">\n              <div class="preloader-wrapper">\n                <div class="preloader"></div>\n              </div>\n              <object \n                data="${e}"\n                type="text/html"\n                width="100%"\n                height="800px"\n                fallbackMessage="Unable to load the content. Please try opening it in a new window.">\n              </object>\n            </div>\n          `)}catch(t){console.error("Error setting up object component:",t.message)}},new((i=void 0)||(i=Promise))((function(t,s){function o(t){try{l(r.next(t))}catch(t){s(t)}}function a(t){try{l(r.throw(t))}catch(t){s(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(o,a)}l((r=r.apply(e,n||[])).next())}));var e,n,i,r}}class ee{constructor(t,e){this.pageId=t,this.pageData=e,this.themeManager=new q,this.editorManager=new hc,this.editorEvents=new sc}init(t){var e,n,i,r,s,o,a,l,c,d,u,h;let p=`gjs-${this.getEditorId()}`;this.pageTitle=t.Text,this.createNewEditor(p);const f=this.editorManager.initializeGrapesEditor(p),g=t=>{if(t){const e=t.generateHTML();f.setComponents(e),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(this.pageData))}else console.error("Invalid PageType or pageData is undefined:",this.pageData)};let m;"Menu"===(null===(e=this.pageData)||void 0===e?void 0:e.PageType)||"MyLiving"===(null===(n=this.pageData)||void 0===n?void 0:n.PageType)||"MyCare"===(null===(i=this.pageData)||void 0===i?void 0:i.PageType)||"MyService"===(null===(r=this.pageData)||void 0===r?void 0:r.PageType)?(m=new Wt(this.pageData),g(m)):"Location"===(null===(s=this.pageData)||void 0===s?void 0:s.PageType)?new Kt(f,this.pageData).setupEditor():"Reception"===(null===(o=this.pageData)||void 0===o?void 0:o.PageType)?new Xt(f,this.pageData).setupEditor():"Content"===(null===(a=this.pageData)||void 0===a?void 0:a.PageType)?(m=new B(this.pageData),g(m)):"WebLink"===(null===(l=this.pageData)||void 0===l?void 0:l.PageType)||"DynamicForm"===(null===(c=this.pageData)||void 0===c?void 0:c.PageType)?new te(f).initialise(t.Action):"Map"===(null===(d=this.pageData)||void 0===d?void 0:d.PageType)?new Qt(f).initialise(t.Action):"MyActivity"===(null===(u=this.pageData)||void 0===u?void 0:u.PageType)?new Yt(f).load():"Calendar"===(null===(h=this.pageData)||void 0===h?void 0:h.PageType)&&new Jt(f).load(),this.editorEvents.init(f,this.pageData,p),this.editorManager.finalizeEditorSetup(f),new D(this.pageData.PageId),this.themeManager.applyTheme(this.themeManager.currentTheme)}createNewEditor(t){const e=document.getElementById("child-container");new ac(t,!1,this.pageData,this.pageTitle).render(e)}getEditorId(){let t=0;return document.querySelectorAll(".mobile-frame").forEach((e=>{t++})),t}addImageContent(t){const e=t.DomComponents.getWrapper().find(".content-page-wrapper");e.length>0&&e[0].append(`\n      <img ${y} id="${x(5)}" data-gjs-type="product-service-image" draggable="true" src="https://plus.unsplash.com/premium_photo-1686949554005-78d1370ab4f3?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxmZWF0dXJlZC1waG90b3MtZmVlZHw2fHx8ZW58MHx8fHx8" alt="Product Service Image" class="content-page-block">\n      `)}addDescriptionContent(t){const e=t.DomComponents.getWrapper().find(".content-page-wrapper");e.length>0&&e[0].append(`\n      <div ${y} id="${x(5)}" data-gjs-type="product-service-description" draggable="true" class="content-page-block">\n          lorem ipsum dolor sit amet consectetur adipiscing elit sed do eiusmod tempor incididunt ut labore et dolore magna aliqua\n      </div>\n      `)}}var ne=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class ie{constructor(){this.appVersionManager=new d,this.toolboxService=new o}attachNewServiceToTile(t){return ne(this,void 0,void 0,(function*(){const e=(yield this.toolboxService.getServices()).find((e=>e.ProductServiceId==t));if(e){const n={PageId:t,PageName:e.ProductServiceName,TileName:e.ProductServiceTileName,PageType:"Content"};this.attachToTile(n,"Content",Zt.t("sidebar.action_list.services"));const i=document.getElementById("menu-page-section"),r=document.getElementById("content-page-section");i&&(i.style.display="block"),r&&r.remove(),(new he).render(i)}}))}attachToTile(t,e,n){return ne(this,void 0,void 0,(function*(){const n=globalThis.selectedComponent;if(!n)return;const i=n.find(".tile-title")[0];i&&i.components(t.PageName);const r=n.parent().getId(),s=n.parent().parent().getId();if(globalThis.currentPageId===t.PageId)return void new a("error",Zt.t("messages.error.page_linking"));const o=[["Text",t.PageName],["Name",t.PageName],["Action.ObjectType",`${e}`],["Action.ObjectId",t.PageId]];for(const[t,e]of o)globalThis.tileMapper.updateTile(r,t,e);const l=globalThis.tileMapper.getTile(s,r),c=yield this.appVersionManager.getActiveVersion();this.attachPage(t,c,l),n&&l&&new O(n,l).setTileAttributes()}))}attachPage(t,e,n){const i=t.PageId,r=(null==e?void 0:e.Pages.find((t=>t.PageId===i)))||null;this.removeOtherEditors(),r?new ee(t.PageId,r).init(n):this.toolboxService.createServicePage(e.AppVersionId,i).then((t=>{new ee(t.ContentPage.PageId,t.ContentPage).init(n)}))}removeOtherEditors(){const t=globalThis.frameId;document.querySelectorAll(".mobile-frame").forEach((e=>{if(e.id.includes(t)){let t=e.nextElementSibling;for(;t;){const e=t;t=t.nextElementSibling,e&&(e.remove(),(new sc).activateNavigators())}}}))}updateActionProperty(t,e){const n=document.querySelector("#sidebar_select_action_label");n&&(n.innerText=`${t}, ${e.length>10?e.substring(0,10)+"...":e}`)}}class re{constructor(t){this.validateFn=t.validate,this.formField=document.createElement("div"),this.formField.className="form-field",this.formField.style.marginBottom="10px";const e=document.createElement("label");t.label&&(e.htmlFor=t.id,e.textContent=t.label);const n=document.createElement("input");n.type=t.type,n.id=t.id,n.className="tb-form-control",n.value=t.value||"",t.placeholder&&(n.placeholder=t.placeholder),t.required&&(n.required=!0);const i=document.createElement("span");i.className="error-message",i.style.cssText="\n            color: red;\n            font-size: 12px;\n            display: none;\n            margin-top: 5px;\n            font-weight: 300;\n        ",i.textContent=t.errorMessage||"Error message",t.label&&this.formField.appendChild(e),this.formField.appendChild(n),this.formField.appendChild(i)}getElement(){return this.formField}showError(t){const e=this.formField.querySelector(".error-message");e.style.display="block",t&&(e.textContent=t)}hideError(){this.formField.querySelector(".error-message").style.display="none"}validate(){const t=this.formField.querySelector("input"),e=!this.validateFn||this.validateFn(t.value);return e?this.hideError():this.showError(t.validationMessage||"Invalid input"),e}}class se{constructor(t){this.form=document.createElement("form"),this.form.id=t,this.fields=[]}addField(t){const e=new re(t);return this.fields.push(e),this.form.appendChild(e.getElement()),e}render(t){t.appendChild(this.form)}getData(){const t={};return this.fields.forEach((e=>{const n=e.getElement().querySelector("input");t[n.id]=n.value})),t}}class oe{createForm(t,e){const n=new se(t);return e.forEach((t=>n.addField(t))),n}createModal({title:t,form:e,onSave:n}){const i=document.createElement("div");e.render(i);const r=document.createElement("div");r.classList.add("popup-footer"),r.style.marginBottom="-12px";const s=this.createButton("submit_form","tb-btn-primary","Save"),o=this.createButton("cancel_form","tb-btn-secondary","Cancel");r.appendChild(s),r.appendChild(o);const a=document.createElement("div");a.appendChild(i),a.appendChild(r);const c=new l({title:t,width:"500px",body:a});c.open(),s.addEventListener("click",(t=>{t.preventDefault(),this.validateFields(e)&&(n(),c.close())})),o.addEventListener("click",(t=>{t.preventDefault(),c.close()}))}createButton(t,e,n){const i=document.createElement("button");return i.id=t,i.classList.add("tb-btn",e),i.innerText=n,i}validateFields(t){let e=!0;const n=t.fields;return n.forEach((t=>t.hideError())),n.forEach((t=>{const n=t.getElement().querySelector("input"),i=n.value.trim();n.required&&""===i?(t.showError(t.errorMessage),e=!1):t.minLength&&i.length<t.minLength?(t.showError(`Must be at least ${t.minLength} characters`),e=!1):t.maxLength&&i.length>t.maxLength?(t.showError(`Cannot exceed ${t.maxLength} characters`),e=!1):t.validate&&!t.validate(i)?(t.showError(t.errorMessage),e=!1):"home"!==i.toLowerCase()&&"my care"!==i.toLowerCase()&&"my living"!==i.toLowerCase()&&"my services"!==i.toLowerCase()&&"web link"!==i.toLowerCase()&&"dynamic form"!==i.toLowerCase()||(t.showError("Field name already exists"),e=!1)})),e}isValidUrl(t){console.log(t);try{const e=new URL(t);return"http:"===e.protocol||"https:"===e.protocol}catch(t){return!1}}isValidPhone(t){const e=t.replace(/(?!^\+)\D/g,"");return/^\+?[0-9]{10,15}$/.test(e)}isValidEmail(t){return/^[a-zA-Z0-9.!#$%&'*+/=?^_{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?$/.test(t)&&t.length<=254}}class ae{constructor(){this.appVersionManager=new d,this.toolBoxService=new o,this.formModalService=new oe}handlePhone(){const t=this.formModalService,e=this.formModalService.createForm("phone-form",[{label:"Phone Number",type:"tel",id:"field_value",placeholder:"123-456-7890",required:!0,errorMessage:"Please enter a valid phone number",validate:e=>t.isValidPhone(e)},{label:"Tile Label",type:"",id:"field_label",placeholder:"Call us now",required:!0,errorMessage:"Please enter a label for your phone tile",minLength:2}]);this.formModalService.createModal({title:"Add Phone Number",form:e,onSave:()=>this.processFormData(e.getData(),"Phone")})}handleEmail(){const t=this.formModalService,e=this.formModalService.createForm("email-form",[{label:"Email Address",type:"email",id:"field_value",placeholder:"example@example.com",required:!0,errorMessage:"Please enter a valid email address",validate:e=>t.isValidEmail(e)},{label:"Tile Label",type:"text",id:"field_label",placeholder:"Get in touch",required:!0,errorMessage:"Please enter a label for email tile",minLength:2}]);this.formModalService.createModal({title:"Add Email Address",form:e,onSave:()=>this.processFormData(e.getData(),"Email")})}handleWebLinks(){const t=this.formModalService,e=this.formModalService.createForm("web-link-form",[{label:"Link Url",type:"url",id:"field_value",placeholder:"https://example.com",required:!0,errorMessage:"Please enter a valid URL",validate:e=>t.isValidUrl(e)},{label:"Link Label",type:"text",id:"field_label",placeholder:"Example Link",required:!0,errorMessage:"Please enter a label for your link",minLength:5}]);this.formModalService.createModal({title:"Add Web Link",form:e,onSave:()=>this.processFormData(e.getData(),"WebLink")})}attachPage(t,e,n){(new ie).removeOtherEditors(),new ee(t.PageId,t).init(n)}processFormData(t,e){return n=this,i=void 0,s=function*(){const n=globalThis.selectedComponent;if(!n)return;const i=n.find(".tile-title")[0];i&&i.components(t.field_label);const r=n.parent().getId(),s=n.parent().parent().getId(),o=globalThis.activeVersion;let a,l="";"WebLink"===e&&(a=null==o?void 0:o.Pages.find((t=>"Web Link"===t.PageName&&"WebLink"===t.PageType)),l=null==a?void 0:a.PageId),console.log("childPage",a);const c=[["Text",t.field_label],["Name",t.field_label],["Action.ObjectType",e],["Action.ObjectId",l],["Action.ObjectUrl",t.field_value]];for(const[t,e]of c)globalThis.tileMapper.updateTile(r,t,e);const d=globalThis.tileMapper.getTile(s,r);(new ie).removeOtherEditors(),a&&new ee(null==a?void 0:a.PageId,a).init(d)},new((r=void 0)||(r=Promise))((function(t,e){function o(t){try{l(s.next(t))}catch(t){e(t)}}function a(t){try{l(s.throw(t))}catch(t){e(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(o,a)}l((s=s.apply(n,i||[])).next())}));var n,i,r,s}}class le{constructor(t){this.categoryData=t,this.pageAttacher=new ie,this.pageCreationService=new ae,this.details=document.createElement("details"),this.init()}init(){this.details.className="category",this.details.setAttribute("data-category",this.categoryData.name),this.createCategoryElement()}createCategoryElement(){var t,n;const i=document.createElement("summary");i.innerText=`${this.categoryData.displayName}`;const r=document.createElement("i");r.className="fa fa-angle-right","Web Link"!==this.categoryData.name&&i.appendChild(r);const s=document.createElement("div");s.className="search-container",s.innerHTML='\n            <i class="fas fa-search search-icon"></i>\n            <input type="text" placeholder="Search" class="search-input" />\n        ',this.categoryData.canCreatePage&&setTimeout((()=>{const t=s.querySelector("#add-new-service");t&&t.addEventListener("click",(t=>{if(t.preventDefault(),globalThis.selectedComponent){if(this.categoryData.name,"Service/Product Page"==this.categoryData.name){const t=e.getInstance();console.log(t.addServiceButtonEvent)}}else new a("error",Zt.t("messages.error.select_tile"))}))}),0);const o=document.createElement("ul");o.className="category-content",null===(n=null===(t=this.categoryData)||void 0===t?void 0:t.options)||void 0===n||n.forEach((t=>{const e=document.createElement("li");e.innerText=t.PageName,e.setAttribute("data-page-name",t.PageName),e.setAttribute("data-page-id",t.PageId),e.addEventListener("click",(e=>{e.preventDefault(),globalThis.selectedComponent?"Dynamic Forms"===this.categoryData.name||("Modules"==this.categoryData.name?this.pageAttacher.attachToTile(t,t.PageType,this.categoryData.label):this.pageAttacher.attachToTile(t,this.categoryData.name,this.categoryData.label)):new a("error",Zt.t("messages.error.select_tile"))})),o.appendChild(e)}));const l=document.createElement("li");l.className="no-records-message",l.style.display="none",l.innerText="No records found",o.appendChild(l),this.details.addEventListener("toggle",(t=>{if("Web Link"!==this.categoryData.name){const t=i.querySelector("i");t&&(t.classList.toggle("fa-angle-right"),t.classList.toggle("fa-angle-down"))}else{if(!globalThis.selectedComponent)return void new a("error",Zt.t("messages.error.select_tile"));this.pageCreationService.handleWebLinks()}})),"Web Link"===this.categoryData.name?this.details.appendChild(i):(this.details.appendChild(i),this.details.appendChild(s),this.details.appendChild(o)),this.searchItemsEvent(s)}searchItemsEvent(t){const e=t.querySelector("input"),n=this.details.querySelector("ul");e.addEventListener("input",(t=>{const e=n.querySelector(".no-records-message");let i=!1;const r=t.target.value.toLowerCase().trim();Array.from(n.querySelectorAll("li:not(.no-records-message)")).forEach((t=>{var e,n;const s=(null!==(n=null===(e=t.textContent)||void 0===e?void 0:e.toLowerCase())&&void 0!==n?n:"").includes(r);t.style.display=s?"block":"none",s&&(i=!0)})),e&&(e.style.display=i?"none":"block")}))}render(t){t.appendChild(this.details)}}class ce{constructor(t){this.categoryView=new le(t)}render(t){this.categoryView.render(t)}}var de=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class ue{constructor(){this.container=document.createElement("div"),this.toolBoxService=new o,this.appVersion=new d,this.init()}init(){return de(this,void 0,void 0,(function*(){this.container.className="tb-dropdown-menu",this.container.id="dropdownMenu",(yield this.getCategoryData()).forEach((t=>{new ce(t).render(this.container)}))}))}getCategoryData(){return de(this,void 0,void 0,(function*(){const t=globalThis.pageData;return[{name:"Page",displayName:Zt.t("sidebar.action_list.page"),label:Zt.t("sidebar.action_list.page"),options:yield this.getPages(),canCreatePage:!0},!t||"MyCare"!==t.PageType&&"MyService"!==t.PageType&&"MyLiving"!==t.PageType?null:{name:"Services",displayName:Zt.t("sidebar.action_list.services"),label:Zt.t("sidebar.action_list.services"),options:this.getServices(t),canCreatePage:!0},{name:"Forms",displayName:Zt.t("sidebar.action_list.forms"),label:Zt.t("sidebar.action_list.forms"),options:this.getDynamicForms(),canCreatePage:!1},{name:"Modules",displayName:Zt.t("sidebar.action_list.module"),label:Zt.t("sidebar.action_list.module"),options:yield this.getPredefinedPages(),canCreatePage:!1},{name:"Web Link",displayName:Zt.t("sidebar.action_list.weblink"),label:Zt.t("sidebar.action_list.weblink"),options:[],canCreatePage:!1}].filter((t=>null!==t))}))}getDynamicForms(){return(this.toolBoxService.forms||[]).map((t=>({PageId:t.FormId,PageName:t.ReferenceName,TileName:t.ReferenceName})))}getServices(t){let e=this.toolBoxService.services||[];return e=e.filter((e=>e.ProductServiceClass.replace(/\s+/g,"")==t.PageType)).map((t=>({PageId:t.ProductServiceId,PageName:t.ProductServiceName,TileName:t.ProductServiceTileName||t.ProductServiceName,TileCategory:t.ProductServiceClass}))),e}getContentPages(){return de(this,void 0,void 0,(function*(){try{const t=yield this.appVersion.getActiveVersion();return((null==t?void 0:t.Pages)||[]).filter((t=>"Content"==t.PageType)).map((t=>({PageId:t.PageId,PageName:t.PageName,TileName:t.PageName})))}catch(t){throw console.error("Error fetching pages:",t),t}}))}getPages(){return de(this,void 0,void 0,(function*(){try{const t=yield this.appVersion.getActiveVersion();return((null==t?void 0:t.Pages)||[]).filter((t=>"Menu"==t.PageType&&"Home"!==t.PageName&&"My Care"!==t.PageName&&"My Living"!==t.PageName&&"My Services"!==t.PageName)).map((t=>({PageId:t.PageId,PageName:t.PageName,TileName:t.PageName})))}catch(t){throw console.error("Error fetching pages:",t),t}}))}getPredefinedPages(){return de(this,void 0,void 0,(function*(){try{const t=yield this.appVersion.getActiveVersion();return((null==t?void 0:t.Pages)||[]).filter((t=>"Map"==t.PageType||"MyActivity"==t.PageType||"Calendar"==t.PageType&&"Home"!==t.PageName)).map((t=>({PageId:t.PageId,PageName:t.PageName,TileName:t.PageName,PageType:t.PageType})))}catch(t){throw console.error("Error fetching pages:",t),t}}))}render(t){t.appendChild(this.container)}}class he{constructor(){this.container=document.createElement("div"),this.init(),document.addEventListener("click",this.handleOutsideClick.bind(this))}init(){this.container.className="sidebar-section custom-select-container",this.container.id="select-container";const t=document.createElement("div");t.className="tb-dropdown",this.dropDownHeader=document.createElement("div"),this.dropDownHeader.className="tb-dropdown-header",this.dropDownHeader.innerHTML='\n            <span id="sidebar_select_action_label">Select Action</span>\n            <i class="fa fa-angle-down"></i>\n        ',this.actionListDropDown=new ue,this.dropDownHeader.addEventListener("click",(t=>{t.stopPropagation(),t.preventDefault(),this.toggleDropdown()})),t.appendChild(this.dropDownHeader),this.actionListDropDown.render(t),this.container.appendChild(t)}toggleDropdown(){const t=this.dropDownHeader.querySelector("i");t&&(t.classList.toggle("fa-angle-up"),t.classList.toggle("fa-angle-down"));const e=this.actionListDropDown.container;e.style.display="block"===e.style.display?"none":"block"}closeDropdown(){const t=this.dropDownHeader.querySelector("i");t&&(t.classList.remove("fa-angle-up"),t.classList.add("fa-angle-down")),this.actionListDropDown.container.style.display="none"}handleOutsideClick(t){"block"!==this.actionListDropDown.container.style.display||this.container.contains(t.target)||this.closeDropdown()}destroy(){document.removeEventListener("click",this.handleOutsideClick.bind(this))}render(t){const e=t.querySelector("#select-container");e?t.replaceChild(this.container,e):t.insertBefore(this.container,t.children[3])}}class pe{constructor(){this.ctaManager=new _,this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("cta-button-layout-container"),this.container.style.display="none";const t=document.createElement("button");t.classList.add("cta-button-layout"),t.id="plain-button-layout",t.innerText="Button";const e=document.createElement("button");e.classList.add("cta-button-layout"),e.id="image-button-layout",e.innerHTML='\n            <span class="img-button-icon">\n                <img src="Resources/UCGrapes1/toolbox/public/images/food.png" alt="img-button-icon" width="35px" height="auto">  \n            </span>\n            <label>Button</label>\n            <i class="fa fa-angle-right img-button-arrow"></i>\n        ';const n=document.createElement("button");n.classList.add("cta-button-layout"),n.id="icon-button-layout",n.innerHTML='\n            <span>\n                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 35.401 42.251">\n                    <path id="calendar" d="M31.713,3.7H28.858V.849a1.713,1.713,0,0,0-3.425,0h0V3.7H15.157V.849a1.713,1.713,0,1,0-3.425,0h0V3.7H8.877A6.281,6.281,0,0,0,2.6,9.984h0V35.106a6.281,6.281,0,0,0,6.281,6.281H31.716A6.281,6.281,0,0,0,38,35.106h0V9.984A6.281,6.281,0,0,0,31.716,3.7h0ZM8.876,7.13H11.73V9.984a1.713,1.713,0,1,0,3.425,0h0V7.13H25.432V9.984a1.713,1.713,0,0,0,3.425,0h0V7.13h2.855a2.855,2.855,0,0,1,2.855,2.855h0v6.281H6.018V9.984A2.855,2.855,0,0,1,8.873,7.13h0ZM31.713,37.96H8.874A2.855,2.855,0,0,1,6.02,35.106h0V19.69H34.568V35.106a2.855,2.855,0,0,1-2.855,2.855Z" transform="translate(-2.596 0.864)" fill="#747474"/>\n                </svg>\n            </span>\n            <label>Button</label>\n            <i class="fa fa-angle-right img-button-arrow"></i>\n        ',t.addEventListener("click",(t=>{t.preventDefault(),this.ctaManager.changeToPlainButton()})),n.addEventListener("click",(t=>{t.preventDefault(),this.ctaManager.changeToIconButton()})),e.addEventListener("click",(t=>{t.preventDefault(),this.ctaManager.changeToImgButton()})),this.container.appendChild(t),this.container.appendChild(n),this.container.appendChild(e)}render(t){t.appendChild(this.container)}}class fe{constructor(t){this.iconsList=t,this.ctaManager=new _,this.container=document.createElement("div"),this.init()}init(){var t;this.container.id="call-to-actions",null===(t=this.iconsList)||void 0===t||t.forEach((t=>{const e=document.createElement("div");e.className="call-to-action-item",e.title=t.CallToActionName,"Phone"===t.CallToActionType?e.innerHTML=ge.phone:"Email"===t.CallToActionType?e.innerHTML=ge.email:"SiteUrl"===t.CallToActionType?e.innerHTML=ge.website_url:"Map"===t.CallToActionType||"Form"===t.CallToActionType&&(e.innerHTML=ge.form),e.addEventListener("click",(()=>{this.ctaManager.addCtaButton(t)})),this.container.appendChild(e)}))}render(t){const e=t.querySelector("#call-to-actions");e&&e.remove(),t.appendChild(this.container)}}const ge={phone:'<svg data-gjs-draggable="false" data-gjs-selectable="false" data-gjs-editable="false" data-gjs-highlightable="false" data-gjs-droppable="false" data-gjs-resizable="false" data-gjs-hoverable="false" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 49.417 49.418">\n                <path data-gjs-draggable="false" data-gjs-selectable="false" data-gjs-editable="false" data-gjs-highlightable="false" data-gjs-droppable="false" data-gjs-resizable="false" data-gjs-hoverable="false" id="call" d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z" transform="translate(-4 -3)" fill="#fff"></path>\n            </svg>',email:'<svg data-gjs-draggable="false" data-gjs-selectable="false" data-gjs-editable="false" data-gjs-highlightable="false" data-gjs-droppable="false" data-gjs-resizable="false" data-gjs-hoverable="false" xmlns="http://www.w3.org/2000/svg" width="32" height="28" viewBox="0 0 41 32.8">\n                <path data-gjs-draggable="false" data-gjs-selectable="false" data-gjs-editable="false" data-gjs-highlightable="false" data-gjs-droppable="false" data-gjs-resizable="false" data-gjs-hoverable="false" id="Path_1218" data-name="Path 1218" d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z" transform="translate(-2 -4)" fill="#fff"></path>\n            </svg>',form:'<svg xmlns="http://www.w3.org/2000/svg" width="13" height="16" viewBox="0 0 13 16">\n            <path id="Path_1209" data-name="Path 1209" d="M9.828,4A1.823,1.823,0,0,0,8,5.8V18.2A1.823,1.823,0,0,0,9.828,20h9.344A1.823,1.823,0,0,0,21,18.2V9.8a.6.6,0,0,0-.179-.424l-.006-.006L15.54,4.176A.614.614,0,0,0,15.109,4Zm0,1.2H14.5V8.6a1.823,1.823,0,0,0,1.828,1.8h3.453v7.8a.6.6,0,0,1-.609.6H9.828a.6.6,0,0,1-.609-.6V5.8A.6.6,0,0,1,9.828,5.2Zm5.891.848L18.92,9.2H16.328a.6.6,0,0,1-.609-.6Z" transform="translate(-8 -4)" fill="#747474"/>\n          </svg>',website_url:'\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n                <path id="Path_1213" data-name="Path 1213" d="M15.833,4a4.163,4.163,0,0,0-2.958,1.229l-.979.979a4.168,4.168,0,0,0-1.229,2.958,4.1,4.1,0,0,0,.292,1.521L12.042,9.6a2.857,2.857,0,0,1,.792-2.458l.979-.979a2.853,2.853,0,0,1,2.021-.833,2.805,2.805,0,0,1,2,.833,2.85,2.85,0,0,1,0,4.021l-.979.979A2.853,2.853,0,0,1,14.833,12a2.439,2.439,0,0,1-.437-.042l-1.083,1.083a4.1,4.1,0,0,0,1.521.292A4.163,4.163,0,0,0,17.792,12.1l.979-.979A4.168,4.168,0,0,0,20,8.167,4.2,4.2,0,0,0,15.833,4ZM14.188,8.854,8.854,14.188l.958.958,5.333-5.333ZM9.167,10.667A4.163,4.163,0,0,0,6.208,11.9l-.979.979A4.168,4.168,0,0,0,4,15.833,4.2,4.2,0,0,0,8.167,20a4.163,4.163,0,0,0,2.958-1.229l.979-.979a4.168,4.168,0,0,0,1.229-2.958,4.1,4.1,0,0,0-.292-1.521L11.958,14.4a2.857,2.857,0,0,1-.792,2.458l-.979.979a2.853,2.853,0,0,1-2.021.833,2.805,2.805,0,0,1-2-.833,2.85,2.85,0,0,1,0-4.021l.979-.979A2.853,2.853,0,0,1,9.167,12a2.44,2.44,0,0,1,.438.042l1.083-1.083A4.1,4.1,0,0,0,9.167,10.667Z" transform="translate(-4 -4)" fill="#747474"/>\n            </svg>'};var me=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class ve{constructor(t){this.page=t,this.themeManager=new q,this.container=document.createElement("div"),this.initializeContentSection()}initializeContentSection(){return me(this,void 0,void 0,(function*(){try{if(this.checkIfRendered())return;this.toggleSideBar(),yield this.prepareContentData(),this.setupContainerStyles(),this.renderComponents()}catch(t){console.error("Error initializing Content Section:",t)}}))}checkIfRendered(){const t=document.getElementById("pages-content");return!(!t||!t.querySelector("#content-page-section"))}prepareContentData(){return me(this,void 0,void 0,(function*(){var t;const e=new o;if("Location"===this.page.PageName||"Reception"===this.page.PageName){const t=yield e.getLocationData();if(!t)return;const n=null==t?void 0:t.BC_Trn_Location;this.iconsList=[{CallToActionName:"Phone",CallToActionPhone:null==n?void 0:n.LocationPhone,CallToActionType:"Phone"},{CallToActionName:"Email",CallToActionEmail:null==n?void 0:n.LocationEmail,CallToActionType:"Email"}]}else{const n=yield e.getContentPageData(null===(t=this.page)||void 0===t?void 0:t.PageId);n&&(this.iconsList=n.SDT_ProductService.CallToActions)}}))}setupContainerStyles(){this.container.classList.add("sidebar-section","content-page-section"),this.container.id="content-page-section",this.container.style.display="block"}renderComponents(){const t=new pe,e=new fe(this.iconsList),n=this.themeManager.currentTheme.ThemeCtaColors,i=new k(n);this.container.innerHTML="",t.render(this.container),e.render(this.container),i.render(this.container),this.render()}toggleSideBar(){const t=document.getElementById("menu-page-section");t&&(t.style.display="none")}render(){const t=document.getElementById("pages-content");if(t){const e=t.querySelector("#content-page-section");e&&t.removeChild(e),t.appendChild(this.container)}}}var be=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class ye{constructor(){this.toolboxService=new o,this.appVersionManager=new d,this.pageAttacher=new ie,this.actionList=new ue,this.pageCreationService=new ae,this.selectedComponent=globalThis.selectedComponent}getMenuCategories(){return be(this,void 0,void 0,(function*(){const t=yield this.actionList.getCategoryData(),n=globalThis.pageData,i=[];return!n||"MyCare"!==n.PageType&&"MyService"!==n.PageType&&"MyLiving"!==n.PageType||i.push({id:"list-services",name:"Services",label:"Services",expandable:!0,action:()=>this.getSubMenuItems(t,"Services")}),i.push({id:"list-form",name:"Forms",label:"Forms",expandable:!0,action:()=>this.getSubMenuItems(t,"Forms")}),i.push({id:"list-module",name:"Modules",label:"Modules",expandable:!0,action:()=>this.getSubMenuItems(t,"Modules")}),[[{id:"add-menu-page",label:"Add menu page",name:"",action:()=>be(this,void 0,void 0,(function*(){this.createNewPage("Untitled")}))},{id:"add-content-page",label:"Add content page",name:"",action:()=>{e.getInstance().addServiceButtonEvent()}}],i,[{id:"add-email",label:"Email",name:"",action:()=>{this.pageCreationService.handleEmail()}},{id:"add-phone",label:"Phone",name:"",action:()=>{this.pageCreationService.handlePhone()}},{id:"add-web-link",label:"Web link",name:"",action:()=>{this.pageCreationService.handleWebLinks()}}]]}))}handleSubMenuAction(t){throw new Error("Submenu action handler not implemented in UI layer")}getSubMenuItems(t,e){return be(this,void 0,void 0,(function*(){const n=t.find((t=>t.name===e));return((null==n?void 0:n.options)||[]).map((t=>({id:t.PageId,label:t.PageName,action:()=>this.handleSubMenuItemSelection(t,e)})))}))}createNewPage(t){return be(this,void 0,void 0,(function*(){const e=yield this.appVersionManager.getActiveVersion(),n=yield this.toolboxService.createMenuPage(e.AppVersionId,t);if(n.error.message)console.error("error",n.error.message);else{const t={PageId:n.MenuPage.PageId,PageName:n.MenuPage.PageName,TileName:n.MenuPage.PageName,PageType:n.MenuPage.PageType};this.pageAttacher.attachToTile(t,"Menu","Menu")}}))}handleSubMenuItemSelection(t,e){console.log(`Selected ${e} item:`,t),"Forms"===e?this.handleDynamicForms(t):"Modules"===e?this.pageAttacher.attachToTile(t,t.PageType,t.PageName):this.pageAttacher.attachToTile(t,e,t.PageName)}handleDynamicForms(t){return be(this,void 0,void 0,(function*(){const e=globalThis.selectedComponent;if(!e)return;const n=e.find(".tile-title")[0];n&&n.components(t.PageName);const i=e.parent().getId(),r=e.parent().parent().getId(),o=globalThis.activeVersion,a=null==o?void 0:o.Pages.find((t=>"Dynamic Form"===t.PageName&&"DynamicForm"===t.PageType)),l=`${s}/utoolboxdynamicform.aspx?WWPFormId=${t.PageId}&WWPDynamicFormMode=DSP&DefaultFormType=&WWPFormType=0`,c=[["Text",t.PageName],["Name",t.PageName],["Action.ObjectType","WebLink"],["Action.ObjectId",null==a?void 0:a.PageId],["Action.ObjectUrl",l]];for(const[t,e]of c)globalThis.tileMapper.updateTile(i,t,e);const d=globalThis.tileMapper.getTile(r,i);this.pageAttacher.removeOtherEditors(),new ee(null==a?void 0:a.PageId,a).init(d)}))}filterMenuItems(t,e){return t.filter((t=>{var n;return((null===(n=t.textContent)||void 0===n?void 0:n.toLowerCase())||"").includes(e.toLowerCase())}))}}class we{constructor(t,e){this.activeSubmenu=null,this.hoverTimeout=null,this.menuContainer=t,this.controller=e}createMenuItem(t,e){const n=document.createElement("li");if(n.classList.add("menu-item"),n.innerHTML=t.label.length>20?t.label.substring(0,20)+"...":t.label,n.setAttribute("data-name",t.name||""),t.expandable){const e=document.createElement("i");e.classList.add("fa","fa-chevron-right","expandable-icon"),n.appendChild(e),n.addEventListener("mouseenter",(e=>{e.stopPropagation(),null!==this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=null),this.menuContainer.querySelectorAll(".menu-item.expandable").forEach((t=>t.classList.remove("expandable"))),n.classList.add("expandable"),setTimeout((()=>{this.showSubMenu(t.name,n)}),50)}))}else n.addEventListener("click",(n=>{n.stopPropagation(),t.action&&(t.action(),e&&e())})),n.addEventListener("mouseenter",(t=>{t.stopPropagation(),n.classList.contains("sub-menu-item")||(this.hideSubMenu(),this.menuContainer.querySelectorAll(".menu-item.expandable").forEach((t=>t.classList.remove("expandable"))),n.classList.add("expandable"))}));return n.id=t.id,n}hideSubMenu(){this.menuContainer.querySelectorAll(".sub-menu-container").forEach((t=>t.remove())),this.activeSubmenu=null}showSubMenu(t,e){return n=this,i=void 0,s=function*(){this.hideSubMenu();const n=document.querySelector(".frame-list"),i=null==n?void 0:n.getBoundingClientRect();console.log("Parent Rect:",i),console.log("Parent parentDoc:",null==n?void 0:n.clientWidth);const r=document.createElement("div");r.classList.add("sub-menu-container"),this.activeSubmenu=r;const s=e.getBoundingClientRect(),o=this.menuContainer.getBoundingClientRect(),a=s.top-o.top;r.style.top=`${a}px`,i&&s.right+180>i.right?r.style.left="-178px":r.style.left="100%";const l=document.createElement("div");l.classList.add("sub-menu-header");const c=document.createElement("div");c.className="search-container",c.innerHTML='\n      <i class="fas fa-search search-icon"></i>\n      <input type="text" placeholder="Search" class="search-input" />\n    ',l.appendChild(c),r.appendChild(l);const d=document.createElement("ul");d.classList.add("menu-list");const u=yield this.controller.actionList.getCategoryData(),h=yield this.controller.getSubMenuItems(u,t);if(h&&h.length>0)h.forEach((t=>{const e=this.createMenuItem(t);e.classList.add("sub-menu-item"),d.appendChild(e)}));else{const e=document.createElement("li");e.classList.add("menu-item","no-items"),e.innerHTML=`No ${t.toLowerCase()} available`,d.appendChild(e)}r.appendChild(d),r.addEventListener("mouseenter",(()=>{null!==this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=null)})),this.menuContainer.appendChild(r);const p=c.querySelector(".search-input");null==p||p.addEventListener("input",(e=>{const n=e.target.value,i=Array.from(d.querySelectorAll(".menu-item")),r=this.controller.filterMenuItems(i,n);if(0===r.length){const e=document.createElement("li");e.classList.add("menu-item","no-items"),e.innerHTML=`No ${t.toLowerCase()} available`,d.appendChild(e)}i.forEach((t=>{t.style.display=r.includes(t)?"flex":"none"}))}))},new((r=void 0)||(r=Promise))((function(t,e){function o(t){try{l(s.next(t))}catch(t){e(t)}}function a(t){try{l(s.throw(t))}catch(t){e(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(o,a)}l((s=s.apply(n,i||[])).next())}));var n,i,r,s}}var Ce=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class xe{constructor(t,e){this.controller=new ye,this.templateContainer=t,this.parentContainer=e,this.menuContainer=document.createElement("div"),this.menuList=document.createElement("ul"),this.menuItemManager=new we(this.menuContainer,this.controller),this.controller.handleSubMenuAction=t=>{this.showSubMenu(t)},this.init()}init(){return Ce(this,void 0,void 0,(function*(){this.menuContainer.classList.add("menu-container"),this.menuList.innerHTML="";const t=yield this.controller.getMenuCategories();null==t||t.forEach((t=>{const e=document.createElement("div");e.classList.add("menu-category"),t.forEach((t=>{const n=this.menuItemManager.createMenuItem(t,(()=>{this.menuContainer.remove()}));e.appendChild(n)})),this.menuContainer.appendChild(e)}))}))}render(t,e){if(!t){const e=this.templateContainer.querySelector(".tile-open-menu");if(!e)return;t=e.getBoundingClientRect()}this.displayMenu(t,e)}displayMenu(t,e){const n=this.parentContainer.getBoundingClientRect();if(!e)return;this.menuContainer.style.position="absolute",this.menuContainer.style.left="-9999px",this.menuContainer.style.top="-9999px",this.menuContainer.style.opacity="0",this.menuContainer.style.visibility="visible",this.parentContainer.appendChild(this.menuContainer),this.menuContainer.offsetHeight;const i=this.menuContainer.getBoundingClientRect(),r=e.left-n.left+t.left,s=e.top-n.top+t.top,o=(t.width,s+t.height),a=n.width,l=n.height;this.menuContainer.style.left="",this.menuContainer.style.top="",this.menuContainer.style.right="",this.menuContainer.style.bottom="";const c=l-o,d=s,u=i.height>0?i.height:200;if(c>=u+10?this.menuContainer.style.top=o-10+"px":d>=u+10?this.menuContainer.style.top=s-u-0+"px":(this.menuContainer.style.top="10px",u>l-20&&(this.menuContainer.style.maxHeight=l-20+"px",this.menuContainer.style.overflowY="auto")),r+i.width<=a-10)this.menuContainer.style.left=`${r+16}px`;else{const t=a-i.width-10;this.menuContainer.style.left=`${Math.max(10,t+16)}px`}this.menuContainer.style.visibility="visible",this.menuContainer.style.opacity="1"}hideMenu(){this.menuContainer.parentNode&&this.menuContainer.parentNode.removeChild(this.menuContainer)}hideSubMenu(){this.menuItemManager.hideSubMenu()}showSubMenu(t){return Ce(this,void 0,void 0,(function*(){}))}filterMenuItems(t){const e=Array.from(this.menuList.querySelectorAll(".menu-item")),n=this.controller.filterMenuItems(e,t);e.forEach((t=>{t.style.display=n.includes(t)?"flex":"none"}))}}class Te{constructor(){this.toolboxService=new o,this.toolBoxManager=new fn,this.appVersions=new d}openModal(){const t=document.createElement("div"),e=document.createElement("p");e.innerText=Zt.t("navbar.publish.modal_description");const n=document.createElement("label");n.className="notify_residents";const i=document.createElement("input");i.type="checkbox",i.id="notify_residents",i.name="notify_residents";const r=document.createElement("span");r.innerText=Zt.t("navbar.publish.notify_residents"),n.appendChild(i),n.appendChild(r);const s=document.createElement("div");s.classList.add("popup-footer"),s.style.marginBottom="-12px";const o=this.createButton("submit_publish","tb-btn-primary",Zt.t("navbar.publish.modal_confirm")),c=this.createButton("cancel_publish","tb-btn-outline",Zt.t("navbar.publish.modal_cancel"));s.appendChild(o),s.appendChild(c),t.appendChild(e),t.appendChild(n),t.appendChild(s);const d=new l({title:Zt.t("navbar.publish.modal_title"),width:"500px",body:t});d.open(),o.addEventListener("click",(t=>{t.preventDefault(),console.log("Publishing...",i.checked),this.toolBoxManager.savePages(!1).then((t=>{this.appVersions.getActiveVersion().then((t=>{this.toolboxService.publishAppVersion(t.AppVersionId,i.checked).then((t=>{t.message||(d.close(),new a("success",Zt.t("messages.success.published")))}))}))}))})),c.addEventListener("click",(t=>{t.preventDefault(),d.close()}))}processData(){}publishAppVersion(){}createButton(t,e,n){const i=document.createElement("button");return i.id=t,i.classList.add("tb-btn",e),i.innerText=n,i}}class Ee{constructor(t,e,n={}){if(this.button=document.createElement("button"),this.button.id=t,this.button.className=`tb-btn tb-btn-${n.variant||"primary"}`,n.svg){const t=(new DOMParser).parseFromString(n.svg,"image/svg+xml").documentElement;this.button.appendChild(t)}const i=document.createElement("span");n.labelId&&(i.id=n.labelId),i.textContent=e,this.button.appendChild(i)}render(t){t.appendChild(this.button)}}class Ae{constructor(){this.container=document.createElement("div"),this.undoButton=document.createElement("button"),this.redoButton=document.createElement("button"),this.init()}init(){this.container.classList.add("edit-actions"),this.undoButton.id="undo",this.undoButton.disabled=!0,this.undoButton.className="btn-transparent",this.undoButton.title=`${Zt.t("undo")} (ctrl+z)`,this.undoButton.innerHTML="<span class='fa fa-undo'></span>",this.undoButton.addEventListener("click",this.handleUndo),this.redoButton.id="redo",this.redoButton.disabled=!0,this.redoButton.className="btn-transparent",this.redoButton.title=`${Zt.t("undo")} (ctrl+shift+z)`,this.redoButton.innerHTML="<span class='fa fa-redo'></span>",this.redoButton.addEventListener("click",this.handleRedo),this.container.appendChild(this.undoButton),this.container.appendChild(this.redoButton)}handleUndo(){console.log("Undo action triggered")}handleRedo(){console.log("Redo action triggered")}render(t){t.appendChild(this.container)}}class Se extends q{constructor(){super(),this.container=document.createElement("div"),this.selectionDiv=document.createElement("div"),this.themeOptions=document.createElement("div"),this.selectedTheme=document.createElement("span"),this.init(),document.addEventListener("click",this.handleOutsideClick.bind(this))}init(){this.container.classList.add("tb-custom-theme-selection");const t=document.createElement("button");t.classList.add("theme-select-button"),t.setAttribute("aria-haspopup","listbox"),this.selectedTheme.classList.add("selected-theme-value"),this.selectedTheme.textContent="Select Theme",t.appendChild(this.selectedTheme),this.container.appendChild(t),t.onclick=e=>{e.preventDefault(),t.classList.contains("open")?this.closeSelection():(this.themeOptions.classList.toggle("show"),t.classList.toggle("open"),t.setAttribute("aria-expanded","true"))},this.selectionDiv.appendChild(t),this.container.appendChild(this.selectionDiv),this.initializeCategoryOptions()}initializeCategoryOptions(){this.themeOptions.className="theme-options-list",this.themeOptions.setAttribute("role","listbox"),this.getThemes().forEach((t=>{const e=document.createElement("div");e.className="theme-option",e.role="option",e.setAttribute("data-value",t.ThemeName),e.textContent=t.ThemeName;const n=this.currentTheme;n&&n.ThemeName===t.ThemeName&&(e.classList.add("selected"),this.selectedTheme.textContent=t.ThemeName),e.onclick=()=>{this.themeOptions.querySelectorAll(".theme-option").forEach((t=>t.classList.remove("selected"))),e.classList.add("selected"),this.selectedTheme.textContent=t.ThemeName,this.saveSelectedTheme(t),this.closeSelection()},this.themeOptions.appendChild(e)})),this.selectionDiv.appendChild(this.themeOptions)}saveSelectedTheme(t){(new o).updateLocationTheme(t.ThemeId).then((e=>{this.setTheme(t)}))}closeSelection(){if(this.themeOptions.classList.contains("show")){this.themeOptions.classList.remove("show");const t=this.container.querySelector(".theme-select-button");t.setAttribute("aria-expanded","false"),t.classList.toggle("open")}}handleOutsideClick(t){this.themeOptions.classList.contains("show")&&!this.container.contains(t.target)&&this.closeSelection()}render(t){t.appendChild(this.container)}}var Ie=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class Ne{constructor(){this.toolboxService=new o,this.appVersion=new d}generateShareLink(){return Ie(this,void 0,void 0,(function*(){try{const t=yield this.appVersion.getActiveVersionId();if(!t)throw new Error("No active version found");return`${s}/wp_apppreview.aspx?AppVersionId=${t}`}catch(t){throw console.error("Error generating share link:",t),t}}))}copyToClipboard(t){return Ie(this,void 0,void 0,(function*(){try{return yield navigator.clipboard.writeText(t),!0}catch(t){return console.error("Clipboard copy failed:",t),!1}}))}getVersions(){return Ie(this,void 0,void 0,(function*(){try{return(yield this.toolboxService.getVersions()).AppVersions}catch(t){return console.error("Failed to fetch versions:",t),[]}}))}activateVersion(t){return Ie(this,void 0,void 0,(function*(){try{return yield this.toolboxService.activateVersion(t)}catch(t){return console.error("Version activation failed:",t),!1}}))}createVersion(t){return Ie(this,arguments,void 0,(function*(t,e=!1){try{let n;if(e){const e=yield this.appVersion.getActiveVersionId();n=yield this.toolboxService.duplicateVersion(e,t)}else n=yield this.toolboxService.createVersion(t);return n}catch(t){return console.error("Version creation failed:",t),null}}))}getActiveVersion(){return Ie(this,void 0,void 0,(function*(){return(yield this.getVersions()).find((t=>t.IsActive))||null}))}}var Le=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class _e{constructor(){this.versionController=new Ne,this.container=document.createElement("div"),this.selectionDiv=document.createElement("div"),this.versionSelection=document.createElement("div"),this.activeVersion=document.createElement("span"),this.init(),document.addEventListener("click",this.handleOutsideClick.bind(this))}init(){this.container.classList.add("tb-custom-theme-selection");const t=this.createSelectionButton();this.selectionDiv.appendChild(t),this.container.appendChild(this.selectionDiv),this.initializeVersionOptions()}createSelectionButton(){const t=document.createElement("button");return t.classList.add("theme-select-button"),t.setAttribute("aria-haspopup","listbox"),this.activeVersion.classList.add("selected-theme-value"),this.activeVersion.textContent="Select Version",t.appendChild(this.activeVersion),t.onclick=e=>{e.preventDefault(),t.classList.contains("open")?this.closeSelection():this.toggleSelection(t)},t}toggleSelection(t){this.versionSelection.classList.toggle("show"),t.classList.toggle("open"),t.setAttribute("aria-expanded","true")}initializeVersionOptions(){return Le(this,void 0,void 0,(function*(){this.versionSelection.className="theme-options-list",this.versionSelection.setAttribute("role","listbox"),this.versionSelection.innerHTML="",(yield this.versionController.getVersions()).forEach((t=>this.createVersionOption(t))),this.addNewVersionButton(),this.selectionDiv.appendChild(this.versionSelection)}))}addNewVersionButton(){const t=document.createElement("div");t.className="theme-option",t.innerHTML=`<i class="fa fa-plus"></i> ${Zt.t("navbar.appversion.create_new")}`,t.onclick=()=>{this.createVersionModal()},this.versionSelection.appendChild(t)}selectFromTemplateButton(){const t=document.createElement("div");t.className="theme-option",t.innerHTML='<i class="fa fa-plus"></i> Select from template',this.versionSelection.appendChild(t)}createVersionOption(t){const e=document.createElement("div");e.className="theme-option",e.role="option",e.setAttribute("data-value",t.AppVersionName),e.textContent=t.AppVersionName;const n=this.createDuplicateButton(t);e.append(n),t.IsActive&&(e.classList.add("selected"),this.activeVersion.textContent=t.AppVersionName),e.addEventListener("click",(e=>this.handleVersionSelection(e,t))),this.versionSelection.appendChild(e)}createDuplicateButton(t){const e=document.createElement("span");return e.className="clone-version fa fa-clone",e.title=`${Zt.t("navbar.appversion.duplicate")}`,e.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),this.createVersionModal(t.AppVersionName+" - Copy","Duplicate version","Duplicate")})),e}handleVersionSelection(t,e){return Le(this,void 0,void 0,(function*(){t.target.classList.contains("clone-version")||(this.versionSelection.querySelectorAll(".theme-option").forEach((t=>t.classList.remove("selected"))),t.currentTarget.classList.add("selected"),this.activeVersion.textContent=e.AppVersionName,(yield this.versionController.activateVersion(e.AppVersionId))&&this.clearActiveTheme(),this.closeSelection())}))}clearActiveTheme(){location.reload()}createVersionModal(t,e,n){const i=new se("page-form");i.addField({type:"text",id:"version_name",placeholder:"Version name",required:!0,value:t});const r=document.createElement("div");i.render(r);const s=this.createSubmitSection(n);r.appendChild(s);const o=new l({title:e||"Create new version",width:"400px",body:r});o.open();let a=!1;e&&(a=!0),this.setupModalButtons(o,r,a)}createSubmitSection(t){const e=document.createElement("div");e.classList.add("popup-footer"),e.style.marginBottom="-12px";const n=this.createButton("submit_form","tb-btn-primary",`${t||"Save"}`),i=this.createButton("cancel_form","tb-btn-secondary","Cancel");return e.appendChild(n),e.appendChild(i),e}setupModalButtons(t,e,n){const i=e.querySelector("#submit_form"),r=e.querySelector("#cancel_form");null==i||i.addEventListener("click",(i=>Le(this,void 0,void 0,(function*(){i.preventDefault();const r=e.querySelector("#version_name").value;if(r){const e=yield this.versionController.createVersion(r,n);t.close(),yield this.refreshVersionList(),e&&this.clearActiveTheme()}})))),null==r||r.addEventListener("click",(e=>{e.preventDefault(),t.close()}))}createButton(t,e,n){const i=document.createElement("button");return i.id=t,i.classList.add("tb-btn",e),i.innerText=n,i}closeSelection(){if(this.versionSelection.classList.contains("show")){this.versionSelection.classList.remove("show");const t=this.container.querySelector(".theme-select-button");t.setAttribute("aria-expanded","false"),t.classList.toggle("open")}}handleOutsideClick(t){this.versionSelection.classList.contains("show")&&!this.container.contains(t.target)&&this.closeSelection()}refreshVersionList(){return Le(this,void 0,void 0,(function*(){yield this.initializeVersionOptions(),this.versionSelection.classList.contains("show")||this.versionSelection.classList.add("show");const t=this.container.querySelector(".theme-select-button");t.classList.contains("open")||t.classList.add("open"),t.setAttribute("aria-expanded","true")}))}render(t){t.appendChild(this.container)}}class ke{constructor(t){this.appVersion=t,this.pages=this.appVersion.Pages,this.toolboxService=new o,this.showList()}showList(){const t=document.createElement("ul");t.classList.add("tb-custom-list"),this.pages.forEach((e=>{const n=this.buildListItem(e);t.appendChild(n)}));const e=document.getElementById("tree-container");e.innerHTML="",e.appendChild(t)}buildListItem(t){const e=document.createElement("li");e.classList.add("tb-custom-list-item");const n=document.createElement("div");n.classList.add("tb-custom-menu-item"),n.classList.add("page-list-items");const i=document.createElement("span");i.style.textTransform="capitalize",i.classList.add("tb-dropdown-toggle"),i.setAttribute("role","button"),i.setAttribute("aria-expanded","false"),i.innerHTML=`<i class="fa-regular fa-file tree-icon"></i><span>&nbsp; ${t.PageName}</span>`;const r=document.createElement("i");r.classList.add("fa-regular","fa-trash-can","tb-delete-icon");const s=document.createElement("i");s.classList.add("fa-regular","fa-edit","tb-update-icon"),"Home"!==t.PageName&&"Web Link"!==t.PageName||(r.style.display="none",s.style.display="none");const o=document.createElement("div");return o.classList.add("tb-menu-icons-container"),r.setAttribute("data-id",t.PageId),s.setAttribute("data-id",t.PageId),r.addEventListener("click",(t=>this.handleDelete(t))),n.appendChild(i),"Web Link"===t.PageName&&(n.style.display="none"),"Home"!==t.PageName&&(o.append(r),n.appendChild(o)),e.appendChild(n),e}handleDelete(t){const e=t.target.dataset.id,n=document.createElement("div"),i=document.createElement("div");i.classList.add("popup-body"),i.id="confirmation_modal_message",i.innerText="Are you sure you want to delete this page?";const r=document.createElement("div");r.classList.add("popup-footer");const s=document.createElement("button");s.id="yes_delete",s.classList.add("tb-btn","tb-btn-primary"),s.innerText="Delete";const o=document.createElement("button");o.id="close_popup",o.classList.add("tb-btn","tb-btn-outline"),o.innerText="Cancel",r.appendChild(s),r.appendChild(o),n.appendChild(i),n.appendChild(r);const c=new l({title:"Delete Page",width:"100",body:n});c.open(),o.addEventListener("click",(t=>{c.close()})),s.addEventListener("click",(t=>{this.toolboxService.deletePage(this.appVersion.AppVersionId,e).then((t=>{console.log(t),t.error.message?new a("error",t.error.message):(this.appVersion=t.AppVersion,this.pages=this.appVersion.Pages,this.showList(),c.close(),console.log(window.app.toolboxApp.editor.init()))}))}))}}class Oe{constructor(t){this.mainContainer=document.getElementById("mapping-section"),this.treeContainer=document.getElementById("tree-container"),this.renderTitle(),this.renderHideOrShowPages(),this.addPageCreationEvent(),this.appVersionManager=t,this.toolboxService=new o,this.appVersionManager.getActiveVersion().then((t=>{var e;this.version=t,this.pages=t.Pages,this.homePage=null===(e=t.Pages)||void 0===e?void 0:e.find((t=>"Home"==t.PageName)),this.homePage&&(this.clearMappings(),this.createPageTree(this.homePage.PageId,"tree-container"))}))}renderTitle(){document.getElementById("sidebar_mapping_title").textContent="MAPPING"}renderHideOrShowPages(){const t=document.getElementById("current-page-title");let e=t.nextSibling;for(;e;){let t=e;e=e.nextSibling,1===t.nodeType&&t.remove()}const n=document.createElement("span");n.id="list_all_pages",n.style.display="block",n.textContent="List all pages";const i=document.createElement("span");i.id="hide_pages",i.style.display="none",i.textContent="Hide pages",n.addEventListener("click",(t=>{i.style.display="block",n.style.display="none",this.clearMappings(),this.showAllPages()})),i.addEventListener("click",(t=>{i.style.display="none",n.style.display="block",this.homePage&&(this.clearMappings(),this.createPageTree(this.homePage.PageId,"tree-container"))})),t.insertAdjacentElement("afterend",i),t.insertAdjacentElement("afterend",n)}getPage(t){return this.pages.find((e=>e.PageId==t))}showAllPages(){new ke(this.version)}createPageTree(t,e){let n=this.getPage(t),i=[];if(n&&n.PageMenuStructure){n.PageMenuStructure.Rows.forEach((t=>{t.Tiles.forEach((t=>{n=this.getPage(t.Action.ObjectId),n&&i.push(n)}))}));const r=this.createTree(t,i),s=document.getElementById(e);s.innerHTML="",s.appendChild(r)}}createTree(t,e,n=!0){const i=document.createElement("ul");return i.classList.add("tb-custom-list"),e.forEach((e=>{const r=this.buildListItem(t,e,n);i.appendChild(r)})),i}buildListItem(t,e,n=!0){"Menu"!=e.PageType&&(n=!1);const i=document.createElement("li");i.classList.add("tb-custom-list-item"),i.dataset.parentPageId=t;const r=document.createElement("div");r.classList.add("child-div"),r.id=`child-div-${e.PageId}`,r.style.position="relative",r.style.paddingLeft="20px";const s=document.createElement("div");s.classList.add("tb-custom-menu-item");const o=document.createElement("span");o.classList.add("tb-dropdown-toggle"),o.setAttribute("role","button"),o.setAttribute("aria-expanded","false");let a="fa-regular fa-file tree-icon";return n&&(a="fa-caret-right tree-icon"),o.innerHTML=`<i class="fa ${a}"></i><span>${e.PageName}</span>`,s.appendChild(o),i.appendChild(s),i.appendChild(r),n&&i.addEventListener("click",(t=>{t.stopPropagation(),this.createPageTree(e.PageId,`child-div-${e.PageId}`)})),i}clearMappings(){var t;null===(t=this.treeContainer)||void 0===t||t.replaceChildren("")}addPageCreationEvent(){const t=document.getElementById("page-submit"),e=document.getElementById("page-title");t.addEventListener("click",(t=>{t.preventDefault();const n=e.value;n?this.createPage(n):new a("error",Zt.t("messages.error.empty_page_name"))}))}createPage(t){this.toolboxService.createMenuPage(this.version.AppVersionId,t).then((t=>{console.log(t)}))}}class Pe{constructor(){this.appVersions=new d,this.container=document.getElementById("navbar-buttons"),this.init()}init(){const t=new Ae,e=new Se,n=new _e;let i=new Ee("open-mapping",Zt.t("navbar.tree"),{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="18.818" height="16" viewBox="0 0 18.818 18">\n        <path id="Path_993" data-name="Path 993" d="M19.545,5a3.283,3.283,0,0,0-3.273,3.273A3.228,3.228,0,0,0,16.784,10l-2.541,3.177H10.427a3.273,3.273,0,1,0,0,1.636h3.816L16.784,18a3.229,3.229,0,0,0-.511,1.732,3.273,3.273,0,1,0,3.273-3.273,3.207,3.207,0,0,0-1.563.419L15.685,14l2.3-2.873a3.207,3.207,0,0,0,1.563.419,3.273,3.273,0,0,0,0-6.545Zm0,1.636a1.636,1.636,0,1,1-1.636,1.636A1.623,1.623,0,0,1,19.545,6.636ZM7.273,12.364A1.636,1.636,0,1,1,5.636,14,1.623,1.623,0,0,1,7.273,12.364Zm12.273,5.727a1.636,1.636,0,1,1-1.636,1.636A1.623,1.623,0,0,1,19.545,18.091Z" transform="translate(-4 -5)"></path>\n        </svg>',variant:"outline",labelId:"navbar_tree_label"});i.button.addEventListener("click",(t=>{t.preventDefault();const e=document.getElementById("tools-section"),n=document.querySelector("#mapping-section");e.style.display="none",n.style.display="block",new Oe(this.appVersions)}));let r=new Ee("publish",Zt.t("navbar.publish.label"),{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="13" height="16" viewBox="0 0 13 18">\n        <path id="Path_958" data-name="Path 958" d="M13.5,3.594l-.519.507L7.925,9.263l1.038,1.06,3.814-3.9V18.644h1.444V6.429l3.814,3.9,1.038-1.06L14.019,4.1ZM7,20.119v1.475H20V20.119Z" transform="translate(-7 -3.594)" fill="#fff"></path>\n      </svg>',labelId:"navbar_tree_label"});t.render(this.container),n.render(this.container),e.render(this.container),i.render(this.container),r.render(this.container),r.button.addEventListener("click",(t=>{t.preventDefault(),(new Te).openModal()}))}render(t){t.appendChild(this.container)}}class Me{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("tb-tabs");const t=document.createElement("button");t.id="pages-button",t.className="tb-tab-button active",t.setAttribute("data-tab","pages");const e=document.createElement("span");e.id="sidebar_tabs_pages_label",e.innerText=Zt.t("sidebar.pages"),t.appendChild(e);const n=document.createElement("button");n.id="templates-button",n.className="tb-tab-button",n.setAttribute("data-tab","templates");const i=document.createElement("span");i.id="sidebar_tabs_templates_label",i.innerText=Zt.t("sidebar.templates.label"),n.appendChild(i),t.addEventListener("click",(e=>{e.preventDefault(),null==t||t.classList.add("active"),null==n||n.classList.remove("active"),this.switchTabs("pages-content","templates-content")})),n.addEventListener("click",(e=>{e.preventDefault(),null==n||n.classList.add("active"),null==t||t.classList.remove("active"),this.switchTabs("templates-content","pages-content")})),this.container.appendChild(t),this.container.appendChild(n)}switchTabs(t,e){const n=document.getElementById(t),i=document.getElementById(e);console.log(n,i),n.style.display="block",i.style.display="none"}render(t){t.appendChild(this.container)}}class je{constructor(){this.container=document.createElement("div"),this.selectionDiv=document.createElement("div"),this.categoryOptions=document.createElement("div"),this.selectedCategory=document.createElement("span"),this.themeManager=new q,this.init(),document.addEventListener("click",this.handleOutsideClick.bind(this))}init(){this.container.className="sidebar-section services-section",this.container.id="dropdownMenu",this.selectionDiv.className="tb-custom-category-selection";const t=document.createElement("button");t.className="category-select-button",t.setAttribute("aria-haspopup","listbox"),t.setAttribute("aria-expanded","false"),this.selectedCategory.className="selected-category-value",this.selectedCategory.textContent=Zt.t("sidebar.icon_category.general"),t.appendChild(this.selectedCategory),t.onclick=e=>{e.preventDefault(),t.classList.contains("open")?this.closeSelection():(this.categoryOptions.classList.toggle("show"),t.classList.toggle("open"),t.setAttribute("aria-expanded","true"))},this.selectionDiv.appendChild(t),this.container.appendChild(this.selectionDiv),this.initializeCategoryOptions(),this.loadThemeIcons()}initializeCategoryOptions(){this.categoryOptions.className="category-options-list",this.categoryOptions.setAttribute("role","listbox"),[{name:"General",label:Zt.t("sidebar.icon_category.general")},{name:"Services",label:Zt.t("sidebar.icon_category.services")},{name:"Health",label:Zt.t("sidebar.icon_category.health")},{name:"Living",label:Zt.t("sidebar.icon_category.living")}].forEach((t=>{const e=document.createElement("div");e.className="category-option",e.role="option",e.setAttribute("data-value",t.name),e.textContent=t.label,e.onclick=()=>{this.categoryOptions.querySelectorAll(".category-option").forEach((t=>t.classList.remove("selected"))),e.classList.add("selected"),this.selectedCategory.textContent=t.label,this.loadThemeIcons(t.name),this.closeSelection()},this.categoryOptions.appendChild(e)})),this.selectionDiv.appendChild(this.categoryOptions)}closeSelection(){if(this.categoryOptions.classList.contains("show")){this.categoryOptions.classList.remove("show");const t=this.container.querySelector(".category-select-button");t.setAttribute("aria-expanded","false"),t.classList.toggle("open")}}loadThemeIcons(t="General"){document.querySelectorAll("#icons-list").forEach((t=>t.remove()));const e=document.createElement("div");e.classList.add("icons-list"),e.id="icons-list",new P(this.themeManager,t).render(e),this.container.appendChild(e)}handleOutsideClick(t){this.categoryOptions.classList.contains("show")&&!this.container.contains(t.target)&&this.closeSelection()}render(t){t.appendChild(this.container)}}class qe extends q{constructor(){super(),this.container=document.createElement("div"),this.init()}init(){this.container.className="sidebar-section theme-section",this.container.style.paddingTop="0px";const t=this.getActiveThemeColors();new A(t,"theme-color-palette").render(this.container)}render(t){t.appendChild(this.container)}}var De=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class Be{constructor(t,e){this.editor=t,this.page=e,this.toolBoxService=new o,this.contentMapper=new S(this.page.PageId)}saveContentDescription(t){"Location"===this.page.PageName?this.saveLocationContent(t):"Reception"===this.page.PageName?this.saveReceptionContent(t):this.saveContentPageInfo(t)}saveContentPageInfo(t){return De(this,void 0,void 0,(function*(){const e={ProductServiceId:this.page.PageId,ProductServiceDescription:t};if(yield this.toolBoxService.updateDescription(e)){const e=this.editor.Components.getWrapper().find("#contentDescription")[0];e&&this.updateMapper(e,t)}}))}saveLocationContent(t){return De(this,void 0,void 0,(function*(){const e={LocationDescription:t,LocationImageBase64:"",ReceptionDescription:"",ReceptionImageBase64:""};if(yield this.toolBoxService.updateLocationInfo(e)){const e=this.editor.Components.getWrapper().find("#contentDescription")[0];e&&this.updateMapper(e,t)}}))}saveReceptionContent(t){return De(this,void 0,void 0,(function*(){const e={LocationDescription:"",LocationImageBase64:"",ReceptionDescription:t,ReceptionImageBase64:""};if(yield this.toolBoxService.updateLocationInfo(e)){const e=this.editor.Components.getWrapper().find("#contentDescription")[0];e&&this.updateMapper(e,t)}}))}updateMapper(t,e){const n=t.parent();t.replaceWith(`<div ${v} id="contentDescription">${this.addGrapesAttributes(e)}</div>`),this.contentMapper.updateContentDescription(n.getId(),e)}updateContentImage(t){"Reception"===this.page.PageName||"Location"===this.page.PageName?this.updateLocationImage(t):this.updateServiceContentImage(t)}updateCtaButtonImage(t){const e=globalThis.ctaContainerId,n=this.editor.Components.getWrapper().find(`#${e}`)[0];if(n){const i=n.find("img")[0],r=n.find("svg")[0];if(i){i.setAttributes({src:t,alt:"cta Image"});const n=`\n                    <svg ${v} xmlns="http://www.w3.org/2000/svg" id="Component_57_1" data-name="Component 57 – 1" width="22" height="22" viewBox="0 0 33 33">\n                        <g ${v} id="Ellipse_532" data-name="Ellipse 532" fill="#fff" stroke="#5068a8" stroke-width="2">\n                        <circle ${v} cx="16.5" cy="16.5" r="16.5" stroke="none"/>\n                        <circle ${v} cx="16.5" cy="16.5" r="16" fill="none"/>\n                        </g>\n                        <path ${v} id="Icon_feather-edit-2" data-name="Icon feather-edit-2" d="M12.834,3.8a1.854,1.854,0,0,1,2.622,2.622L6.606,15.274,3,16.257l.983-3.606Z" transform="translate(7 6.742)" fill="#5068a8" stroke="#5068a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>\n                    </svg>\n                    `;r.replaceWith(n),this.contentMapper.updateContentButtonType(e,"Image",t)}}}updateServiceContentImage(t){return De(this,void 0,void 0,(function*(){try{const e=yield T(t),n={ProductServiceId:this.page.PageId,ProductServiceDescription:"",ProductServiceImageBase64:e};if(yield this.toolBoxService.updateContentImage(n)){const e=this.editor.Components.getWrapper().find("#product-service-image")[0];e&&(e.setAttributes({src:t,alt:`${this.page.PageName} Image`}),this.contentMapper.updateContentImage(e.parent().getId(),t))}}catch(t){console.error("Error:",t)}}))}updateLocationImage(t){return De(this,void 0,void 0,(function*(){try{const e=yield T(t);let n;if("Location"===this.page.PageName?n={LocationDescription:"",LocationImageBase64:e,ReceptionDescription:"",ReceptionImageBase64:""}:"Reception"===this.page.PageName&&(n={LocationDescription:"",LocationImageBase64:"",ReceptionDescription:"",ReceptionImageBase64:e}),yield this.toolBoxService.updateLocationInfo(n)){const e=this.editor.Components.getWrapper().find("#product-service-image")[0];e&&(e.setAttributes({src:t,alt:`${this.page.PageName} Image`}),this.contentMapper.updateContentImage(e.parent().getId(),t))}}catch(t){console.error("Error:",t)}}))}deleteContentImage(){return De(this,void 0,void 0,(function*(){try{const t={ProductServiceId:this.page.PageId};if(yield this.toolBoxService.deleteContentImage(t)){const t=this.editor.Components.getWrapper().find("#product-service-image")[0];if(t){const e=t.parent();e&&e.remove()}}}catch(t){console.error("Error deleting media:",t)}}))}addGrapesAttributes(t){const e=document.createElement("div");return"string"==typeof t&&(e.innerHTML=t),e.querySelectorAll("*").forEach((t=>{t.setAttribute("data-gjs-draggable","false"),t.setAttribute("data-gjs-selectable","false"),t.setAttribute("data-gjs-editable","false"),t.setAttribute("data-gjs-highlightable","false"),t.setAttribute("data-gjs-droppable","false"),t.setAttribute("data-gjs-resizable","false"),t.setAttribute("data-gjs-hoverable","false")})),e.innerHTML}}class $e{constructor(t,e,n){this.container=document.createElement("div"),this.message=t,this.title=e,this.toolboxService=new o,this.onConfirmCallback=n||(()=>{}),this.init()}init(){this.container.classList.add("popup-modal"),this.container.style.display="flex";const t=document.createElement("div");t.classList.add("popup");const e=document.createElement("div");e.classList.add("popup-header");const n=document.createElement("span");n.innerText=this.title;const i=document.createElement("button");i.classList.add("close"),i.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 21 21">\n                <path id="Icon_material-close" data-name="Icon material-close" d="M28.5,9.615,26.385,7.5,18,15.885,9.615,7.5,7.5,9.615,15.885,18,7.5,26.385,9.615,28.5,18,20.115,26.385,28.5,28.5,26.385,20.115,18Z" transform="translate(-7.5 -7.5)" fill="#6a747f" opacity="0.54"></path>\n            </svg>\n        ',i.addEventListener("click",(()=>{this.close()})),e.appendChild(n),e.appendChild(i);const r=document.createElement("hr"),s=document.createElement("div");s.classList.add("popup-body"),s.id="confirmation_modal_message",s.innerText=this.message;const o=document.createElement("div");o.classList.add("popup-footer");const a=document.createElement("button");a.className="tb-btn tb-btn-outline",a.id="cancel_confirmation",a.innerText=Zt.t("sidebar.confirmation_cancel"),a.addEventListener("click",(()=>{this.close()}));const l=document.createElement("button");l.className="tb-btn tb-btn-primary",l.id="confirm_action",l.innerText=Zt.t("sidebar.confirmation_accept"),l.addEventListener("click",(t=>{t.preventDefault(),this.onConfirmCallback(),this.close()})),o.appendChild(l),o.appendChild(a),t.appendChild(e),t.appendChild(r),t.appendChild(s),t.appendChild(o),this.container.appendChild(t)}close(){this.container.remove()}render(t){t.appendChild(this.container)}}var Re=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class Ue{constructor(t,e){this.mediaFile=t,this.type=e,this.toolboxService=new o,this.container=document.createElement("div"),this.init()}init(){this.container.className="file-item valid",this.container.id=this.mediaFile.MediaId;const t=document.createElement("img");t.src=this.mediaFile.MediaUrl,t.alt=this.mediaFile.MediaName,t.className="preview-image";const e=document.createElement("div");e.className="file-info";const n=document.createElement("div");n.className="file-name",n.innerText=this.mediaFile.MediaName;const i=document.createElement("div");i.className="file-size",i.innerText=this.formatBytes(this.mediaFile.MediaSize),e.appendChild(n),e.appendChild(i);const r=document.createElement("span");r.className="status-icon",r.style.color="green",this.setupItemClickEvent(r);const s=document.createElement("span");s.className="delete-media fa-regular fa-trash-can",s.title="Delete image",s.addEventListener("click",(t=>{t.stopPropagation(),this.deleteEvent()})),this.container.appendChild(t),this.container.appendChild(e),this.container.appendChild(r),this.container.appendChild(s)}formatBytes(t){const e=["Bytes","KB","MB","GB","TB"];if(0===t)return"0 Byte";const n=parseInt(Math.floor(Math.log(t)/Math.log(1024)).toString());return 0===n?t+" "+e[n]:(t/Math.pow(1024,n)).toFixed(1)+" "+e[n]}setupItemClickEvent(t){this.container.addEventListener("click",(()=>{document.querySelectorAll(".file-item").forEach((t=>{t.classList.remove("selected");const e=t.querySelector(".status-icon");e&&(e.innerHTML=t.classList.contains("invalid")?"⚠":"")})),this.container.classList.contains("selected")?t.innerHTML="":t.innerHTML='\n                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="13.423" viewBox="0 0 18 13.423">\n                        <path id="Icon_awesome-check" data-name="Icon awesome-check" d="M6.114,17.736l-5.85-5.85a.9.9,0,0,1,0-1.273L1.536,9.341a.9.9,0,0,1,1.273,0L6.75,13.282l8.441-8.441a.9.9,0,0,1,1.273,0l1.273,1.273a.9.9,0,0,1,0,1.273L7.386,17.736A.9.9,0,0,1,6.114,17.736Z" transform="translate(0 -4.577)" fill="#3a9341"></path>\n                    </svg>\n                ',this.container.classList.toggle("selected"),this.setupModalActions()}))}setupModalActions(){var t,e;const n=document.querySelector(".modal-actions");if(!n)return;n.style.display="flex";const i=n.querySelector("#cancel-modal"),r=n.querySelector("#save-modal");if(!i||!r)return;const s=i.cloneNode(!0),o=r.cloneNode(!0);null===(t=i.parentNode)||void 0===t||t.replaceChild(s,i),null===(e=r.parentNode)||void 0===e||e.replaceChild(o,r);const a=document.querySelector(".tb-modal");a&&(s.addEventListener("click",(()=>{a.style.display="none",a.remove()})),o.addEventListener("click",(()=>{"tile"===this.type?this.addImageToTile():"content"===this.type?this.addImageToContentPage():"cta"===this.type&&this.updateCtaButtonImage(),a.style.display="none",a.remove()})))}addImageToTile(){const t=globalThis.selectedComponent;if(t)try{const e=encodeURI(this.mediaFile.MediaUrl);t.addStyle({"background-image":`url(${e})`,"background-color":"transparent","background-size":"cover","background-position":"center","background-blend-mode":"overlay"}),t.getEl().style.backgroundColor="transparent",globalThis.tileMapper.updateTile(t.parent().getId(),"BGImageUrl",e),globalThis.tileMapper.updateTile(t.parent().getId(),"Opacity","0"),globalThis.tileMapper.updateTile(t.parent().getId(),"BGColor","transparent");const n=t.parent(),i=n.parent(),r=globalThis.tileMapper.getTile(i.getId(),n.getId());t&&r&&new O(t,r).setTileAttributes()}catch(t){console.error("Error adding image to tile:",t)}}addImageToContentPage(){return Re(this,void 0,void 0,(function*(){const t=encodeURI(this.mediaFile.MediaUrl),e=globalThis.activeEditor,n=globalThis.pageData;new Be(e,n).updateContentImage(t)}))}updateCtaButtonImage(){return Re(this,void 0,void 0,(function*(){const t=encodeURI(this.mediaFile.MediaUrl),e=globalThis.activeEditor,n=globalThis.pageData;new Be(e,n).updateCtaButtonImage(t)}))}deleteEvent(){new $e("Are you sure you want to delete this media file?","Delete media",(()=>Re(this,void 0,void 0,(function*(){try{yield this.toolboxService.deleteMedia(this.mediaFile.MediaId);let t=yield this.toolboxService.getMediaFiles();t=t.filter((t=>t.MediaId!==this.mediaFile.MediaId));const e=document.getElementById(this.mediaFile.MediaId);e&&e.remove(),0===t.length&&(document.querySelector(".modal-actions").style.display="none")}catch(t){console.error("Error deleting media:",t)}})))).render(document.body)}getElement(){return this.container}render(t){t.appendChild(this.container)}}var Ve=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class He{constructor(t){this.fileListElement=null,this.progressIntervals={},this.type=t,this.modalContent=document.createElement("div"),this.toolboxService=new o,this.init()}init(){this.modalContent.className="tb-modal-content";const t=document.createElement("div");t.className="tb-modal-header";const e=document.createElement("h2");e.innerText=Zt.t("sidebar.image_upload.modal_title");const n=document.createElement("span");n.className="close",n.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21">\n              <path id="Icon_material-close" data-name="Icon material-close" d="M28.5,9.615,26.385,7.5,18,15.885,9.615,7.5,7.5,9.615,15.885,18,7.5,26.385,9.615,28.5,18,20.115,26.385,28.5,28.5,26.385,20.115,18Z" transform="translate(-7.5 -7.5)" fill="#6a747f" opacity="0.54"></path>\n            </svg>\n        ',n.addEventListener("click",(t=>{t.preventDefault();const e=this.modalContent.parentElement;e.style.display="none",null==e||e.remove()})),t.appendChild(e),t.appendChild(n);const i=document.createElement("div");i.className="modal-actions";const r=document.createElement("button");r.className="tb-btn tb-btn-outline",r.id="cancel-modal",r.innerText=Zt.t("sidebar.image_upload.cancel"),r.addEventListener("click",(t=>{t.preventDefault();const e=this.modalContent.parentElement;e.style.display="none",null==e||e.remove()}));const s=document.createElement("button");s.className="tb-btn tb-btn-primary",s.id="save-modal",s.innerText=Zt.t("sidebar.image_upload.save"),i.appendChild(r),i.appendChild(s),this.modalContent.appendChild(t),this.uploadArea(),this.createFileListElement(),this.loadMediaFiles(),this.modalContent.appendChild(i)}uploadArea(){const t=document.createElement("div");t.className="upload-area",t.id="uploadArea",t.innerHTML=`\n        <svg xmlns="http://www.w3.org/2000/svg" width="40.999" height="28.865" viewBox="0 0 40.999 28.865">\n            <path id="Path_1040" data-name="Path 1040" d="M21.924,11.025a3.459,3.459,0,0,0-3.287,3.608,3.459,3.459,0,0,0,3.287,3.608,3.459,3.459,0,0,0,3.287-3.608A3.459,3.459,0,0,0,21.924,11.025ZM36.716,21.849l-11.5,14.432-8.218-9.02L8.044,39.89h41Z" transform="translate(-8.044 -11.025)" fill="#afadad"></path>\n          </svg>\n          <div class="upload-text">\n            ${Zt.t("sidebar.image_upload.upload_message")}\n        </div>\n        `,this.setupDragAndDrop(t),this.modalContent.appendChild(t)}createFileListElement(){this.fileListElement=document.createElement("div"),this.fileListElement.className="file-list",this.fileListElement.id="fileList";const t=document.createElement("div");t.className="loading-media",t.textContent="Loading media files...",this.fileListElement.appendChild(t),this.modalContent.appendChild(this.fileListElement)}loadMediaFiles(){return Ve(this,void 0,void 0,(function*(){try{const t=yield this.toolboxService.getMediaFiles();this.fileListElement&&(this.fileListElement.innerHTML="",t&&t.length>0&&t.forEach((t=>{new Ue(t,this.type).render(this.fileListElement)})))}catch(t){console.error("Error loading media files:",t),this.fileListElement&&(this.fileListElement.innerHTML='<div class="error-message">Error loading media files. Please try again.</div>')}}))}setupDragAndDrop(t){return Ve(this,void 0,void 0,(function*(){const e=document.createElement("input");e.type="file",e.id="fileInput",e.multiple=!0,e.accept="image/jpeg, image/jpg, image/png",e.style.display="none",t.appendChild(e),t.querySelector("#browseLink"),t.addEventListener("click",(t=>{e.click()})),e.addEventListener("change",(()=>{e.files&&e.files.length>0&&this.handleFiles(e.files)})),t.addEventListener("dragover",(e=>{e.preventDefault(),t.classList.add("drag-over")})),t.addEventListener("dragleave",(e=>{e.preventDefault(),t.classList.remove("drag-over")})),t.addEventListener("drop",(e=>Ve(this,void 0,void 0,(function*(){var n;e.preventDefault(),t.classList.remove("drag-over"),(null===(n=e.dataTransfer)||void 0===n?void 0:n.files)&&e.dataTransfer.files.length>0&&(yield this.handleFiles(e.dataTransfer.files))}))))}))}handleFiles(t){return Ve(this,void 0,void 0,(function*(){const e=Array.from(t);for(const t of e)if(t.type.startsWith("image/"))try{const e=yield this.readFileAsDataURL(t),n=t.name.replace(/\s+/g,"-").replace(/[()]/g,""),i={MediaId:Date.now().toString(),MediaName:n,MediaUrl:e,MediaType:t.type,MediaSize:t.size};if(console.log(i),this.fileListElement&&this.displayMediaFileProgress(this.fileListElement,i),!this.validateFile(i))return;(yield this.toolboxService.uploadFile(i.MediaUrl,i.MediaName,i.MediaSize,i.MediaType)).BC_Trn_Media}catch(e){if(console.error("Error processing file:",e),this.fileListElement){const n=document.createElement("div");n.className="upload-error",n.textContent=`Error uploading ${t.name}: ${e}`,this.fileListElement.insertBefore(n,this.fileListElement.firstChild),setTimeout((()=>{n.remove()}),5e3)}}}))}displayMediaFileProgress(t,e){const n=document.createElement("div");n.className="file-item "+(this.validateFile(e)?"valid":"invalid"),n.setAttribute("data-mediaid",e.MediaId);const i=this.validateFile(e);var r;n.innerHTML=`\n              <img src="${e.MediaUrl}" alt="File thumbnail" class="preview-image">\n              <div class="file-info">\n                <div class="file-info-details">\n                  <div>\n                    <div class="file-name">${r=e.MediaName,r.split("-").slice(1).join("-")}</div>\n                    <div class="file-size">${this.formatFileSize(e.MediaSize.toString())}</div>\n                  </div>\n                  <div class="progress-text">0%</div>\n                </div>\n                <div class="progress-bar">\n                    <div class="progress" style="width: 0%"></div>\n                </div>\n                ${i?"":"<small>File is invalid. Please upload a valid file (jpg, png, jpeg and less than 2MB).</small>"}\n              </div>\n              <span class="status-icon" style="color: ${i?"green":"red"}">\n                ${i?"":"⚠"}\n              </span>\n              ${i?"":'<span style="margin-left: 10px" id="delete-invalid" class="fa-regular fa-trash-can"></span>'}\n            `,t.insertBefore(n,t.firstChild);const s=n.querySelector("#delete-invalid");s&&(s.style.cursor="pointer",s.addEventListener("click",(e=>{e.preventDefault(),t.removeChild(n)})));let o=0;const a=n.querySelector(".progress"),l=n.querySelector(".progress-text"),c=setInterval((()=>{o+=Math.floor(15*Math.random())+5,a&&(a.style.width=`${o>100?100:o}%`),l&&(l.textContent=`${o>100?100:o}%`),o>=100&&(clearInterval(c),i&&(t.removeChild(n),this.displayMediaFile(t,e)))}),300);this.progressIntervals=this.progressIntervals||{},this.progressIntervals[e.MediaId]=c}validateFile(t){const e=t.MediaSize<=2097152,n=["image/jpeg","image/jpg","image/png"].includes(t.MediaType);return e&&n}formatFileSize(t){const e=parseInt(t,10);return e<1024?e+" B":e<1048576?Math.round(e/1024)+" KB":(e/1048576).toFixed(2)+" MB"}displayMediaFile(t,e){const n=new Ue(e,this.type);n.render(t),t.insertBefore(n.getElement(),t.firstChild)}destroy(){Object.values(this.progressIntervals).forEach((t=>{clearInterval(t)})),this.progressIntervals={}}readFileAsDataURL(t){return new Promise(((e,n)=>{const i=new FileReader;i.onload=()=>{i.result?e(i.result):n(new Error("FileReader did not produce a result"))},i.onerror=()=>{n(i.error)},i.readAsDataURL(t)}))}render(t){t.appendChild(this.modalContent)}}class Fe{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="bg-section";const t=document.createElement("button");t.className="add-image",t.id="image-bg",t.innerHTML='\n            <span class="plus">\n               <i class="fa fa-plus"></i>\n            </span>\n            <span class="image-icon">\n                <i class="fa fa-image"></i>\n            </span>\n        ';const e=document.createElement("div");e.className="slider-wrapper",e.id="slider-wrapper",e.style.display="none";const n=document.createElement("input");n.type="range",n.id="bg-opacity",n.min="0",n.max="100",n.value="0",n.addEventListener("input",(t=>{const e=t.target.value,n=document.getElementById("valueDisplay");n&&(n.innerHTML=`${e}%`),this.updateImageOpacity(e)}));const i=document.createElement("span");i.id="valueDisplay",i.innerHTML="0%",e.appendChild(n),e.appendChild(i),t.addEventListener("click",(t=>{if(t.preventDefault(),!globalThis.selectedComponent)return;const e=document.createElement("div");e.classList.add("tb-modal"),e.style.display="flex",new He("tile").render(e);const n=document.createElement("input");n.type="file",n.multiple=!0,n.accept="image/jpeg, image/jpg, image/png",n.id="fileInput",n.style.display="none",document.body.appendChild(e),document.body.appendChild(n)})),this.container.appendChild(t),this.container.appendChild(e)}updateImageOpacity(t){const e=globalThis.selectedComponent;if(!e)return;const n=t/100;e.getEl().style.backgroundColor=`rgba(0, 0, 0, ${n})`,globalThis.tileMapper.updateTile(e.parent().getId(),"Opacity",t)}render(t){t.appendChild(this.container)}}class ze{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("tile-img-container"),this.container.id="tile-img-container";const t=document.createElement("img");t.alt="Tile Image",t.src="https://staging.comforta.yukon.software/media/receptie-197@3x.png",t.className="tile-img-thumbnail";const e=document.createElement("button");let n;e.className="tile-img-delete-button",e.id="tile-img-delete-button",e.innerHTML='<i class="fa fa-xmark"></i>',e.addEventListener("click",(t=>{t.preventDefault();const e=globalThis.selectedComponent;if(!e)return;const i=e.parent(),r=i.parent();n=globalThis.tileMapper.getTile(r.getId(),i.getId());const s=e.getStyle();delete s["background-image"],s["background-color"]=n.BGColor,e.setStyle(s),globalThis.tileMapper.updateTile(e.parent().getId(),"BGImageUrl",""),globalThis.tileMapper.updateTile(e.parent().getId(),"Opacity","0"),this.container.style.display="none",document.getElementById("slider-wrapper").style.display="none"})),this.container.appendChild(t),this.container.appendChild(e)}render(t){t.appendChild(this.container)}}class Ge{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("tile-img-section");const t=new ze;(new Fe).render(this.container),t.render(this.container)}render(t){t.appendChild(this.container)}}class Ze{constructor(){this.input=document.createElement("input"),this.init()}init(){this.input.type="text",this.input.placeholder="Enter a title",this.input.classList.add("tb-form-control"),this.input.id="tile-title",this.input.addEventListener("input",(t=>{const e=globalThis.selectedComponent;let n=e.getClasses().includes("first-tile")&&e.getClasses().includes("high-priority-template");if(!e)return;const i=e.closest(".container-row").components().length,r=e.find(".tile-title")[0];if(r){const t=3===i?this.truncate(11):2===i?this.truncate(14):this.truncate(25);r.components(t),r.addAttributes({title:this.input.value})}n&&(this.input.value=this.input.value.toUpperCase()),globalThis.tileMapper.updateTile(e.parent().getId(),"Text",this.input.value.trim());const s=r.parent();s&&"none"===s.getStyle().display&&s.addStyle({display:"block"})}))}truncate(t){return this.input.value.length>t?this.input.value.substring(0,t)+"..":this.input.value}render(t){t.appendChild(this.input)}}class We{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="text-color-palette text-colors",this.container.id="text-color-palette",Object.entries({color1:"#ffffff",color2:"#333333"}).forEach((([t,e])=>{const n=document.createElement("div");n.className="color-item";const i=document.createElement("input");i.type="radio",i.id=`text-color-${t}`,i.name="text-color",i.value=e;const r=document.createElement("label");r.className="color-box",r.setAttribute("for",`text-color-${t}`),r.style.backgroundColor=e,r.setAttribute("data-tile-color",e),n.appendChild(i),n.appendChild(r),this.container.appendChild(n),n.onclick=t=>{t.preventDefault();const n=globalThis.selectedComponent;if(!n)return;const r=n.find("path")[0];r&&r.addAttributes({fill:e}),n.addStyle({color:e}),globalThis.tileMapper.updateTile(n.parent().getId(),"Color",e),i.checked=!0}}))}render(t){t.appendChild(this.container)}}class Je{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("text-alignment");const t=document.createElement("div");t.classList.add("align-item"),t.innerHTML='\n            <input type="radio" id="tile-left"\n                name="alignment" value="left" />\n            <label for="tile-left" class="fas fa-align-left">\n            </label>\n        ';const e=document.createElement("div");e.classList.add("align-item"),e.innerHTML='\n            <input type="radio" id="tile-center"\n                     name="alignment" value="center" />\n            <label for="tile-center">\n                <svg xmlns="http://www.w3.org/2000/svg"\n                width="12.7" height="14.626"\n                viewBox="0 0 12.7 14.626">\n                <path id="Group_2344-converted"\n                    data-name="Group 2344-converted"\n                    d="M5.863,1.868V3.736L5.031,2.9,4.2,2.073l-.336.341-.336.342,1.411,1.41L6.35,5.577,7.758,4.17,9.165,2.762l-.333-.333L8.5,2.1l-.831.817-.83.817V0H5.863V1.868M0,7.313v.794H12.7V6.519H0v.794m4.937,3.149-1.4,1.4.333.333.334.333.83-.816.831-.817v3.729h.974V10.89l.832.832.831.832.336-.342.336-.341L7.766,10.465c-.773-.773-1.41-1.406-1.416-1.406s-.642.631-1.413,1.4"\n                    fill-rule="evenodd" fill="#696969" />\n                </svg>\n            </label>\n        ',t.onclick=t=>{t.preventDefault();const e=document.getElementById("tile-left"),n=globalThis.selectedComponent;if(!n)return;n.addStyle({"justify-content":"start","align-items":"start"});const i=n.find(".tile-title")[0];i&&i.addStyle({"text-align":"left"}),globalThis.tileMapper.updateTile(n.parent().getId(),"Align","left"),e.checked=!0},e.onclick=t=>{t.preventDefault();const e=document.getElementById("tile-center"),n=globalThis.selectedComponent;if(!n)return;n.addStyle({"justify-content":"center","align-items":"center"});const i=n.find(".tile-title")[0];i&&i.addStyle({"text-align":"center"}),globalThis.tileMapper.updateTile(n.parent().getId(),"Align","center"),e.checked=!0},this.container.appendChild(t),this.container.appendChild(e)}render(t){t.appendChild(this.container)}}class Ke{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("title-style");const t=new We,e=new Je;t.render(this.container),e.render(this.container)}render(t){t.appendChild(this.container)}}class Ye{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="sidebar-section title-section";const t=new Ze,e=new Ke;t.render(this.container),e.render(this.container)}render(t){t.appendChild(this.container)}}class Xe{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.id="menu-page-section";const t=new qe,e=new Ge,n=new Ye,i=new je;t.render(this.container),e.render(this.container),n.render(this.container),i.render(this.container)}render(t){t.appendChild(this.container)}}class Qe{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="tb-tab-content active-tab",this.container.id="pages-content",(new Xe).render(this.container)}render(t){t.appendChild(this.container)}}const tn={Templates:[{Id:"template-one",Rows:[{Id:"8024f98a-fef5-410c-8350-916b7394862e",Tiles:[{Id:"MQhNnVTdyWtKhTq",Name:"Title",Text:"Title",Color:"#000000",Align:"center",Icon:"",BGColor:"",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}}]},{Id:"ZngzLIvl20250326202112011",Tiles:[{Id:"cBggkiXC20250326202112011",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"FjjiLxOp20250326202113039",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"qnDgmZMJ20250326202115737",Tiles:[{Id:"vWMSlmsk20250326202115736",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"hGqxooDx20250326202118005",Tiles:[{Id:"jHltKWiP20250326202118005",Name:"Title",Text:"Title",Color:"#333333",Align:"center",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"MyHZFUgV20250326202119203",Name:"Title",Text:"Title",Color:"#333333",Align:"center",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"ilvtXnXw20250326202119576",Name:"Title",Text:"Title",Color:"#333333",Align:"center",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]}]},{Id:"template-two",Rows:[{Id:"8024f98a-fef5-410c-8350-916b7394862e",Tiles:[{Id:"MQhNnVTdyWtKhTq",Name:"Title",Text:"Title",Color:"#000000",Align:"center",Icon:"",BGColor:"",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}}]},{Id:"hGqxooDx20250326202118005",Tiles:[{Id:"jHltKWiP20250326202118005",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"ZvCzVboB20250326202531961",Tiles:[{Id:"ipSbryyM20250326202531961",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]}]},{Id:"template-three",Rows:[{Id:"8024f98a-fef5-410c-8350-916b7394862e",Tiles:[{Id:"MQhNnVTdyWtKhTq",Name:"Title",Text:"Title",Color:"#000000",Align:"left",Icon:"",BGColor:"",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}},{Id:"ntcFxRKO20250326202614640",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"hGqxooDx20250326202118005",Tiles:[{Id:"jHltKWiP20250326202118005",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"ZvCzVboB20250326202531961",Tiles:[{Id:"ipSbryyM20250326202531961",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"pbaPLIje20250326202617562",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"yCtmNReZ20250326202618523",Tiles:[{Id:"dgXzpgXE20250326202618523",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"omnlZjhw20250326202619269",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]}]},{Id:"template-four",Rows:[{Id:"8024f98a-fef5-410c-8350-916b7394862e",Tiles:[{Id:"MQhNnVTdyWtKhTq",Name:"Title",Text:"Title",Color:"#000000",Align:"left",Icon:"",BGColor:"",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}}]},{Id:"ZvCzVboB20250326202531961",Tiles:[{Id:"ipSbryyM20250326202531961",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"pbaPLIje20250326202617562",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"yCtmNReZ20250326202618523",Tiles:[{Id:"dgXzpgXE20250326202618523",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"omnlZjhw20250326202619269",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]}]}]};class en{constructor(t,e,n){this.pageId=t,this.editor=e,this.templateId=n,this.init()}init(){return t=this,e=void 0,i=function*(){var t;const e=null===(t=tn.Templates.find((t=>t.Id===this.templateId)))||void 0===t?void 0:t.Rows,n=(new d).getPages().find((t=>t.PageId===this.pageId));if(n){const t=this.getUpdatedPageData(e,n);this.editor.DomComponents.clear(),this.applyTemplate(t)}},new((n=void 0)||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i}getUpdatedPageData(t,e){const n=JSON.parse(JSON.stringify(t));let i=JSON.parse(JSON.stringify(e));return i.PageMenuStructure.Rows=n,i=JSON.parse(JSON.stringify(i)),i}applyTemplate(t){const e=new Wt(t).generateHTML();this.editor.setComponents(e),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(t))}}class nn{constructor(t){this.templateList=document.createElement("div"),this.templateList.id="page-templates",t.forEach(((t,e)=>{const n=document.createElement("div");n.className="page-template-wrapper",n.id=t.id;const i=document.createElement("div");i.className="page-template-block-number";const r=document.createElement("div");r.className="page-template-block",r.title=Zt.t("sidebar.templates.click_to_add_template");const s=document.createElement("div"),o=document.createElement("img");o.style.width="100%",o.style.height="100%",o.src=t.image,s.appendChild(o),r.appendChild(s),i.innerHTML=`${e+1}`,n.appendChild(i),n.appendChild(r),n.addEventListener("click",(t=>{t.preventDefault();const e=globalThis.activeEditor,i=globalThis.pageData;if(!e&&!(null==i?void 0:i.PageId))return void new a("error",Zt.t("messages.error.no_active_page"));if(!i||"Menu"!==i.PageType)return void new a("error",Zt.t("messages.error.templates_on_menu_pages"));const r=Zt.t("sidebar.templates.confirmation_title"),s=Zt.t("sidebar.templates.confirmation_message");new $e(s,r,(()=>{return t=this,r=void 0,o=function*(){new en(i.PageId,e,n.id)},new((s=void 0)||(s=Promise))((function(e,n){function i(t){try{l(o.next(t))}catch(t){n(t)}}function a(t){try{l(o.throw(t))}catch(t){n(t)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(t){t(n)}))).then(i,a)}l((o=o.apply(t,r||[])).next())}));var t,r,s,o})).render(document.body)})),this.templateList.appendChild(n)}))}render(t){t.appendChild(this.templateList)}}class rn{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="tb-tab-content active-tab",this.container.id="templates-content",this.container.style.display="none";const t=document.createElement("div");t.className="sidebar-section",t.id="page-templates",new nn([{id:"template-one",image:"/Resources/UCGrapes1/src/images/template-1.png"},{id:"template-two",image:"/Resources/UCGrapes1/src/images/template-2.png"},{id:"template-three",image:"/Resources/UCGrapes1/src/images/template-3.png"},{id:"template-four",image:"/Resources/UCGrapes1/src/images/template-4.png"}]).render(t),this.container.appendChild(t)}render(t){t.appendChild(this.container)}}class sn{constructor(){this.container=document.getElementById("tools-section"),this.init()}init(){const t=new Me,e=new Qe,n=new rn;t.render(this.container),e.render(this.container),n.render(this.container)}render(t){t.appendChild(this.container)}}class on{constructor(t){this.activeFilter=null,this.debugResults=t,this.container=document.createElement("div"),this.container.classList.add("tb_debug_dashboard")}debugSummary(){const t=document.createElement("div");t.classList.add("tb_debug_summary");const e=this.createSummaryItem(this.debugResults.Summary.TotalUrls,`${Zt.t("navbar.debug.total_urls")}`,!0),n=this.createSummaryItem(this.debugResults.Summary.SuccessCount,`${Zt.t("navbar.debug.total_successful")}`),i=this.createSummaryItem(this.debugResults.Summary.FailureCount,`${Zt.t("navbar.debug.total_failed")}`);return t.appendChild(e),t.appendChild(n),t.appendChild(i),t}createSummaryItem(t,e,n=!1){const i=document.createElement("div");return i.classList.add("tb_debug_summary_item"),n&&i.classList.add("active"),i.innerHTML=`\n            <h3>${parseFloat(t).toString()}</h3>\n            <p>${e}</p>\n        `,i.addEventListener("click",(()=>{this.container.querySelectorAll(".tb_debug_summary_item").forEach((t=>t.classList.remove("active"))),i.classList.add("active"),this.activeFilter=e===`${Zt.t("navbar.debug.total_urls")}`?null:e,this.filterPageSections()})),i}filterPageSections(){this.container.querySelectorAll(".tb_debug_page-section").forEach((t=>{const e=t.querySelector(".tb_debug_url-list");if(!e)return;const n=e.querySelectorAll(".tb_debug_url-item");let i=!1;n.forEach((t=>{const e=t.querySelector(".tb_debug_url-status"),n=this.shouldShowUrlItem(e);t.classList.toggle("hidden",!n),n&&(i=!0)})),t.classList.toggle("hidden",!i)}))}shouldShowUrlItem(t){var e,n;return!t||null===this.activeFilter||(this.activeFilter===`${Zt.t("navbar.debug.total_successful")}`?t.classList.contains("tb_debug_status-200"):this.activeFilter!==`${Zt.t("navbar.debug.total_failed")}`||Number(null===(e=t.textContent)||void 0===e?void 0:e.split(" ")[0])>=400||0==Number(null===(n=t.textContent)||void 0===n?void 0:n.split(" ")[0]))}debugPageSections(){const t=document.createElement("div");return t.classList.add("tb_debug_page-sections"),this.debugResults.Pages.forEach((e=>{const n=this.debugPageSection(e);t.appendChild(n)})),t}debugPageSection(t){const e=document.createElement("div");e.classList.add("tb_debug_page-section");const n=document.createElement("div");n.classList.add("tb_debug_page-title"),n.innerText=t.Page,e.appendChild(n);const i=this.createUrlList(t.UrlList);return e.appendChild(i),e}createUrlList(t){const e=document.createElement("div");return e.classList.add("tb_debug_url-list"),t.forEach(((t,n)=>{const i=this.createUrlItem(t);e.appendChild(i)})),e}createUrlItem(t){const e=document.createElement("div");return e.classList.add("tb_debug_url-item"),e.innerHTML=`\n            <details>\n                <summary class="tb_debug_url-header">\n                    <div class="tb_debug_url-text">${E(t.Url,70)}</div>\n                    <div class="tb_debug_url-status tb_debug_status-${t.StatusCode}">${t.StatusCode} ${E(t.StatusMessage,10)}</div>\n                </summary>\n                <div class="tb_debug_details-content">\n                    <strong>${Zt.t("navbar.debug.full_url")}:</strong> ${t.Url}\n                    <br><strong>${Zt.t("navbar.debug.status_code")}:</strong> ${t.StatusCode}\n                    <br><strong>${Zt.t("navbar.debug.status_message")}:</strong> ${t.StatusMessage}\n                    ${t.StatusCode>=400||0==t.StatusCode?`${this.getAffectedTiles(t)}`:""}\n                </div>\n            </details>\n        `,e}getAffectedTiles(t){return"Tile"===t.AffectedType?`<br><strong>${Zt.t("navbar.debug.affected_tile")}:</strong> <div class="tb_debug-badge">${t.AffectedName}</div>`:"Cta"===t.AffectedType?`<br><strong>${Zt.t("navbar.debug.affected_cta")}: </strong><div class="tb_debug-badge">${t.AffectedName}</div>`:"Content"===t.AffectedType?`<br><strong>${Zt.t("navbar.debug.affected_content")}: </strong><div class="tb_debug-badge">${t.AffectedName}</div>`:""}buildDebugUI(){return this.container.appendChild(this.debugSummary()),this.container.appendChild(this.debugPageSections()),this.filterPageSections(),this.container}}var an=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class ln{constructor(){this.appVersions=new d}init(){return an(this,void 0,void 0,(function*(){const t=yield this.getUrls();this.debugProcess(t)}))}debugProcess(t){return an(this,void 0,void 0,(function*(){let e;try{const n=new o,i=yield n.debugApp(t);i&&(e=i.DebugResults)}catch(t){console.error(t)}finally{this.displayResults(e)}}))}getUrls(){return an(this,void 0,void 0,(function*(){var t,e,n,i;let r=[];const s=yield this.appVersions.getActiveVersion(),o=null==s?void 0:s.Pages;for(const s of o){let a=[];const l=null===(t=s.PageMenuStructure)||void 0===t?void 0:t.Rows;if(l)for(const t of l){const n=t.Tiles;if(n)for(const t of n)(null===(e=t.Action)||void 0===e?void 0:e.ObjectUrl)&&a.push({url:t.Action.ObjectUrl,affectedType:"Tile",affectedName:t.Name||"Unnamed Tile"}),t.BGImageUrl&&a.push({url:t.BGImageUrl,affectedType:"Tile",affectedName:t.Name||"Unnamed Tile"})}const c=null===(n=s.PageContentStructure)||void 0===n?void 0:n.Content;if(c)for(const t of c)"Image"===t.ContentType&&t.ContentValue&&a.push({url:t.ContentValue,affectedType:"Content",affectedName:t.ContentType||"Unnamed Content"});const d=null===(i=s.PageContentStructure)||void 0===i?void 0:i.Cta;if(d)for(const t of d)t.CtaButtonImgUrl&&a.push({url:t.CtaButtonImgUrl,affectedType:"Cta",affectedName:t.CtaLabel||"Unnamed CTA"}),"SiteUrl"==t.CtaType&&t.CtaAction&&a.push({url:t.CtaAction,affectedType:"Cta",affectedName:t.CtaLabel||"Unnamed CTA"}),"Form"==t.CtaType&&t.CtaAction&&a.push({url:t.CtaAction,affectedType:"Cta",affectedName:t.CtaLabel||"Unnamed CTA"});a.length>0&&r.push({page:s.PageName||`Page-${o.indexOf(s)+1}`,urls:a})}return r}))}displayResults(t){const e=new on(t),n=document.getElementById("tb-debugging");n&&(n.innerHTML="",n.appendChild(e.buildDebugUI()))}}var cn=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class dn{constructor(){this.appVersionController=new Ne,this.toolboxManager=new fn}createButton(t,e,n){const i=document.createElement("button");return i.id=t,i.classList.add("tb-btn",e),i.innerText=n,i}openShareLinkModal(){return cn(this,void 0,void 0,(function*(){try{const t=this.createModalContent(),e=new l({title:Zt.t("navbar.share.modal_title"),width:"500px",body:t});e.open(),this.setupModalEventListeners(t,e)}catch(t){console.error("Error opening share link modal:",t)}}))}createModalContent(){const t=document.createElement("div"),e=document.createElement("p");e.innerText=Zt.t("navbar.share.modal_description");const n=this.createLinkSection(),i=this.createSubmitSection(n);return t.appendChild(e),t.appendChild(n),t.appendChild(i),t}createLinkSection(){const t=document.createElement("div");t.classList.add("share-link-body"),t.style.display="flex",t.style.flexDirection="column",t.style.padding="10px";const e=document.createElement("a");return e.target="_blank",e.style.overflowWrap="break-word",e.style.maxWidth="100%",this.populateLinkAsync(e),t.appendChild(e),t}populateLinkAsync(t){return cn(this,void 0,void 0,(function*(){try{const e=yield this.appVersionController.generateShareLink();t.href=e,t.innerText=e}catch(e){t.innerText="Failed to generate link",t.href="#"}}))}createSubmitSection(t){const e=document.createElement("div");e.classList.add("popup-footer"),e.style.marginBottom="-12px";const n=this.createButton("copy-link","tb-btn-primary",Zt.t("navbar.share.copy")),i=this.createButton("cancel","tb-btn-outline",Zt.t("navbar.share.close"));return e.appendChild(n),e.appendChild(i),e}setupModalEventListeners(t,e){const n=t.querySelector("a"),i=t.querySelector("#copy-link"),r=t.querySelector("#cancel");i&&n&&i.addEventListener("click",(t=>cn(this,void 0,void 0,(function*(){t.preventDefault(),n.href&&((yield this.appVersionController.copyToClipboard(n.href))?setTimeout((()=>{e.close(),this.toolboxManager.openToastMessage(Zt.t("navbar.share.copied"))}),500):(e.close(),console.error("Failed to copy link")))})))),r&&r.addEventListener("click",(t=>{t.preventDefault(),e.close()}))}}class un{constructor(){this.appVersions=new d,this.debugController=new ln,this.container=document.getElementById("navbar-buttons-left"),this.init()}init(){let t=new Ee("debug-button",Zt.t("navbar.debug.label"),{labelId:"debug_button_label"});t.button.style.marginRight="10px",t.button.addEventListener("click",(t=>{t.preventDefault(),this.initialiseDebug(),this.debugController.init()}));let e=new Ee("open-mapping",Zt.t("navbar.share.label"),{svg:'\n        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.293 2.293a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.414L13 5.414V15a1 1 0 1 1-2 0V5.414L9.707 6.707a1 1 0 0 1-1.414-1.414l3-3zM4 11a2 2 0 0 1 2-2h2a1 1 0 0 1 0 2H6v9h12v-9h-2a1 1 0 1 1 0-2h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-9z" fill="#0D0D0D"/>\n        </svg>\n    ',variant:"outline",labelId:"navbar_tree_label"});t.render(this.container),e.render(this.container),e.button.addEventListener("click",(t=>{t.preventDefault(),(new dn).openShareLinkModal()}))}initialiseDebug(){const t=document.createElement("div");t.id="tb-debugging",t.innerHTML='\n      <div class="tb_debug-spinner-container">\n          <div class="tb_debug-spinner"></div>\n      </div>\n      <p style="text-align: center; font-size: 14px; margin-top: 10px">Please wait while we are checking the urls...</p>\n    ',new l({title:Zt.t("navbar.debug.modal_title"),width:"800px",body:t}).open()}render(t){t.appendChild(this.container)}}class hn{constructor(t){this.history=[],this.future=[],this.maxHistory=20,this.pageId=t;const e=localStorage.getItem(`data-${this.pageId}`);if(e)try{const t=JSON.parse(e);this.history.push(t)}catch(t){console.error("Failed to parse initial data:",t)}}saveState(){try{const t=localStorage.getItem(`data-${this.pageId}`);if(t){const e=JSON.parse(t),n=this.history.length?this.history[this.history.length-1]:null;return!(n&&JSON.stringify(n)===JSON.stringify(e)||(this.history.push(e),this.history.length>this.maxHistory&&this.history.shift(),this.future=[],0))}return!1}catch(t){return console.error("Error saving state:",t),!1}}undo(){if(0===this.history.length)return null;const t=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");this.future.push(t);const e=this.history.pop();return localStorage.setItem(`data-${this.pageId}`,JSON.stringify(e)),this.findChanges(t,e)}redo(){if(0===this.future.length)return null;const t=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");this.history.push(t);const e=this.future.pop();return localStorage.setItem(`data-${this.pageId}`,JSON.stringify(e)),this.findChanges(t,e)}findChanges(t,e){var n,i;const r=new Set,s=new Set,o=(null===(n=t.PageMenuStructure)||void 0===n?void 0:n.Rows)||[],a=(null===(i=e.PageMenuStructure)||void 0===i?void 0:i.Rows)||[],l=new Set(o.map((t=>t.Id)));return new Set(a.map((t=>t.Id))),o.forEach((t=>{const e=a.find((e=>e.Id===t.Id));e?JSON.stringify(t)!==JSON.stringify(e)&&s.add(t.Id):s.add(t.Id)})),a.forEach((t=>{l.has(t.Id)||s.add(t.Id)})),o.forEach((t=>{var e,n,i,s;const o=a.find((e=>e.Id===t.Id));if(o){const a=new Set((null===(e=t.Tiles)||void 0===e?void 0:e.map((t=>t.Id)))||[]),l=new Set((null===(n=o.Tiles)||void 0===n?void 0:n.map((t=>t.Id)))||[]);null===(i=t.Tiles)||void 0===i||i.forEach((t=>{l.has(t.Id)||r.add(t.Id)})),null===(s=o.Tiles)||void 0===s||s.forEach((e=>{if(a.has(e.Id)){const n=t.Tiles.find((t=>t.Id===e.Id));JSON.stringify(n)!==JSON.stringify(e)&&r.add(e.Id)}else r.add(e.Id)}))}})),{affectedTiles:Array.from(r),affectedRows:Array.from(s)}}addFreshRow(t,e){var n,i;this.saveState();const r=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),s={Id:t,Tiles:[{Id:e,Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}}]};null===(i=null===(n=r.PageMenuStructure)||void 0===n?void 0:n.Rows)||void 0===i||i.push(s),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(r))}addTile(t,e){var n,i;this.saveState();const r={Id:e,Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}},s=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),o=null===(i=null===(n=s.PageMenuStructure)||void 0===n?void 0:n.Rows)||void 0===i?void 0:i.find((e=>e.Id===t));o&&(o.Tiles.push(r),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(s)))}removeTile(t,e){var n,i;this.saveState();const r=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),s=r.PageMenuStructure.Rows.find((t=>String(t.Id)===String(e)));s&&(s.Tiles=s.Tiles.filter((e=>e.Id!==t)),0===s.Tiles.length&&(r.PageMenuStructure.Rows=null===(i=null===(n=r.PageMenuStructure)||void 0===n?void 0:n.Rows)||void 0===i?void 0:i.filter((t=>t.Id!==s.Id))),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(r)))}updateTile(t,e,n){var i,r;this.saveState();const s=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");null===(r=null===(i=null==s?void 0:s.PageMenuStructure)||void 0===i?void 0:i.Rows)||void 0===r||r.forEach((i=>{i.Tiles.forEach((i=>{if(i.Id===t)if(e.includes(".")){const t=e.split(".");let r=i;for(let e=0;e<t.length-1;e++)r=r[t[e]];r[t[t.length-1]]=n}else i[e]=n}))})),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(s))}getTile(t,e){var n,i;const r=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(t){const s=null===(i=null===(n=null==r?void 0:r.PageMenuStructure)||void 0===n?void 0:n.Rows)||void 0===i?void 0:i.find((e=>e.Id===t));if(s)return s.Tiles.find((t=>t.Id===e))||null}return null}moveTile(t,e,n,i){var r,s,o,a,l,c,d,u;this.saveState();const h=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),p=null===(r=null==h?void 0:h.PageMenuStructure)||void 0===r?void 0:r.Rows.find((t=>t.Id===e));if(!p)return;const f=null===(s=null==p?void 0:p.Tiles)||void 0===s?void 0:s.findIndex((e=>e.Id===t));if(-1===f)return;const[g]=null===(o=null==p?void 0:p.Tiles)||void 0===o?void 0:o.splice(f,1),m=null===(l=null===(a=h.PageMenuStructure)||void 0===a?void 0:a.Rows)||void 0===l?void 0:l.find((t=>t.Id===n));m?(m.Tiles.splice(i,0,g),3===(null===(c=null==m?void 0:m.Tiles)||void 0===c?void 0:c.length)&&(null==m||m.Tiles.forEach((t=>{t.Align="center"}))),0===(null===(d=null==p?void 0:p.Tiles)||void 0===d?void 0:d.length)&&(h.PageMenuStructure.Rows=null===(u=null==h?void 0:h.PageMenuStructure)||void 0===u?void 0:u.Rows.filter((t=>t.Id!==p.Id))),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(h))):p.Tiles.splice(f,0,g)}}var pn=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class fn{constructor(){this.appVersions=new d,this.toolboxService=new o,this.pageAttacher=new ie}setUpNavBar(){this.autoSave();const t=document.getElementById("tb-navbar"),e=new Pe;(new un).render(t),e.render(t)}setUpSideBar(){const t=document.getElementById("tb-sidebar");(new sn).render(t)}setUpScrollButtons(){const t=document.getElementById("child-container"),e=document.querySelector(".navigator .page-navigator-left"),n=document.querySelector(".navigator .page-navigator-right"),i=()=>{e.style.display=t.scrollLeft>0?"none":"block";const i=t.scrollWidth-t.clientWidth;n.style.display=t.scrollLeft<i-5?"none":"block"};e.onclick=()=>{t.scrollLeft-=300},n.onclick=()=>{t.scrollLeft+=300},t.addEventListener("scroll",i),window.addEventListener("resize",i),i()}autoSave(){setInterval((()=>pn(this,void 0,void 0,(function*(){this.savePages()}))),1e4)}savePages(){return pn(this,arguments,void 0,(function*(t=!1){console.log("auto saving...");try{const t=new Map,e=yield this.appVersions.getActiveVersion(),n=e.Pages;return yield Promise.all(n.map((n=>pn(this,void 0,void 0,(function*(){const i=n.PageId,r=`data-${i}`,s=JSON.parse(localStorage.getItem(r)||"{}");let o=null;if("Menu"===n.PageType||"MyCare"===n.PageType||"MyLiving"===n.PageType||"MyService"===n.PageType?o="PageMenuStructure":"Content"!==n.PageType&&"Location"!==n.PageType&&"Reception"!==n.PageType||(o="PageContentStructure"),!o||!s[o])return;const a=JSON.stringify(s[o]);if(a!==("string"==typeof n.PageStructure?n.PageStructure:JSON.stringify(n.PageStructure))){const r={AppVersionId:e.AppVersionId,PageId:i,PageName:n.PageName,PageType:n.PageType,PageStructure:a};try{yield this.toolboxService.autoSavePage(r),t.set(i,a)}catch(t){throw console.error(`Failed to save page ${n.PageName}:`,t),t}}}))))),t}catch(t){throw console.error("Error saving pages:",t),t}}))}openToastMessage(t){const e=document.createElement("div");e.id="toast",e.textContent=t||"Your changes are saved",document.body.appendChild(e),setTimeout((()=>{e.style.opacity="1",e.style.transform="translateX(-50%) translateY(0)"}),100),setTimeout((()=>{e.style.opacity="0",setTimeout((()=>{document.body.removeChild(e)}),500)}),3e3)}unDoReDo(){const t=document.getElementById("undo"),e=document.getElementById("redo"),n=globalThis.currentPageId;if(!n)return void console.log("No pageId found");const i=new hn(n);t.disabled=!i.history.length,t&&(t.onclick=t=>{t.preventDefault(),i.undo()}),e&&(e.onclick=t=>{t.preventDefault(),i.redo()})}}const gn=function(t,e){return t===e||t!=t&&e!=e},mn=function(t,e){for(var n=t.length;n--;)if(gn(t[n][0],e))return n;return-1};var vn=Array.prototype.splice;function bn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}bn.prototype.clear=function(){this.__data__=[],this.size=0},bn.prototype.delete=function(t){var e=this.__data__,n=mn(e,t);return!(n<0||(n==e.length-1?e.pop():vn.call(e,n,1),--this.size,0))},bn.prototype.get=function(t){var e=this.__data__,n=mn(e,t);return n<0?void 0:e[n][1]},bn.prototype.has=function(t){return mn(this.__data__,t)>-1},bn.prototype.set=function(t,e){var n=this.__data__,i=mn(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};const yn=bn,wn="object"==typeof global&&global&&global.Object===Object&&global;var Cn="object"==typeof self&&self&&self.Object===Object&&self;const xn=wn||Cn||Function("return this")(),Tn=xn.Symbol;var En=Object.prototype,An=En.hasOwnProperty,Sn=En.toString,In=Tn?Tn.toStringTag:void 0;var Nn=Object.prototype.toString;var Ln=Tn?Tn.toStringTag:void 0;const _n=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Ln&&Ln in Object(t)?function(t){var e=An.call(t,In),n=t[In];try{t[In]=void 0;var i=!0}catch(t){}var r=Sn.call(t);return i&&(e?t[In]=n:delete t[In]),r}(t):function(t){return Nn.call(t)}(t)},kn=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},On=function(t){if(!kn(t))return!1;var e=_n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Pn=xn["__core-js_shared__"];var Mn,jn=(Mn=/[^.]+$/.exec(Pn&&Pn.keys&&Pn.keys.IE_PROTO||""))?"Symbol(src)_1."+Mn:"";var qn=Function.prototype.toString;const Dn=function(t){if(null!=t){try{return qn.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var Bn=/^\[object .+?Constructor\]$/,$n=Function.prototype,Rn=Object.prototype,Un=$n.toString,Vn=Rn.hasOwnProperty,Hn=RegExp("^"+Un.call(Vn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Fn=function(t){return!(!kn(t)||(e=t,jn&&jn in e))&&(On(t)?Hn:Bn).test(Dn(t));var e},zn=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Fn(n)?n:void 0},Gn=zn(xn,"Map"),Zn=zn(Object,"create");var Wn=Object.prototype.hasOwnProperty;var Jn=Object.prototype.hasOwnProperty;function Kn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Kn.prototype.clear=function(){this.__data__=Zn?Zn(null):{},this.size=0},Kn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Kn.prototype.get=function(t){var e=this.__data__;if(Zn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Wn.call(e,t)?e[t]:void 0},Kn.prototype.has=function(t){var e=this.__data__;return Zn?void 0!==e[t]:Jn.call(e,t)},Kn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Zn&&void 0===e?"__lodash_hash_undefined__":e,this};const Yn=Kn,Xn=function(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map};function Qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Yn,map:new(Gn||yn),string:new Yn}},Qn.prototype.delete=function(t){var e=Xn(this,t).delete(t);return this.size-=e?1:0,e},Qn.prototype.get=function(t){return Xn(this,t).get(t)},Qn.prototype.has=function(t){return Xn(this,t).has(t)},Qn.prototype.set=function(t,e){var n=Xn(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};const ti=Qn;function ei(t){var e=this.__data__=new yn(t);this.size=e.size}ei.prototype.clear=function(){this.__data__=new yn,this.size=0},ei.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},ei.prototype.get=function(t){return this.__data__.get(t)},ei.prototype.has=function(t){return this.__data__.has(t)},ei.prototype.set=function(t,e){var n=this.__data__;if(n instanceof yn){var i=n.__data__;if(!Gn||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new ti(i)}return n.set(t,e),this.size=n.size,this};const ni=ei,ii=function(){try{var t=zn(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),ri=function(t,e,n){"__proto__"==e&&ii?ii(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},si=function(t,e,n){(void 0!==n&&!gn(t[e],n)||void 0===n&&!(e in t))&&ri(t,e,n)},oi=function(t,e,n){for(var i=-1,r=Object(t),s=n(t),o=s.length;o--;){var a=s[++i];if(!1===e(r[a],a,r))break}return t};var ai="object"==typeof exports&&exports&&!exports.nodeType&&exports,li=ai&&"object"==typeof module&&module&&!module.nodeType&&module,ci=li&&li.exports===ai?xn.Buffer:void 0,di=ci?ci.allocUnsafe:void 0;const ui=function(t,e){if(e)return t.slice();var n=t.length,i=di?di(n):new t.constructor(n);return t.copy(i),i},hi=xn.Uint8Array,pi=function(t){var e=new t.constructor(t.byteLength);return new hi(e).set(new hi(t)),e},fi=function(t,e){var n=e?pi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},gi=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e};var mi=Object.create;const vi=function(){function t(){}return function(e){if(!kn(e))return{};if(mi)return mi(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),bi=function(t,e){return function(n){return t(e(n))}},yi=bi(Object.getPrototypeOf,Object);var wi=Object.prototype;const Ci=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||wi)},xi=function(t){return"function"!=typeof t.constructor||Ci(t)?{}:vi(yi(t))},Ti=function(t){return null!=t&&"object"==typeof t},Ei=function(t){return Ti(t)&&"[object Arguments]"==_n(t)};var Ai=Object.prototype,Si=Ai.hasOwnProperty,Ii=Ai.propertyIsEnumerable;const Ni=Ei(function(){return arguments}())?Ei:function(t){return Ti(t)&&Si.call(t,"callee")&&!Ii.call(t,"callee")},Li=Array.isArray,_i=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},ki=function(t){return null!=t&&_i(t.length)&&!On(t)};var Oi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Pi=Oi&&"object"==typeof module&&module&&!module.nodeType&&module,Mi=Pi&&Pi.exports===Oi?xn.Buffer:void 0;const ji=(Mi?Mi.isBuffer:void 0)||function(){return!1};var qi=Function.prototype,Di=Object.prototype,Bi=qi.toString,$i=Di.hasOwnProperty,Ri=Bi.call(Object);var Ui={};Ui["[object Float32Array]"]=Ui["[object Float64Array]"]=Ui["[object Int8Array]"]=Ui["[object Int16Array]"]=Ui["[object Int32Array]"]=Ui["[object Uint8Array]"]=Ui["[object Uint8ClampedArray]"]=Ui["[object Uint16Array]"]=Ui["[object Uint32Array]"]=!0,Ui["[object Arguments]"]=Ui["[object Array]"]=Ui["[object ArrayBuffer]"]=Ui["[object Boolean]"]=Ui["[object DataView]"]=Ui["[object Date]"]=Ui["[object Error]"]=Ui["[object Function]"]=Ui["[object Map]"]=Ui["[object Number]"]=Ui["[object Object]"]=Ui["[object RegExp]"]=Ui["[object Set]"]=Ui["[object String]"]=Ui["[object WeakMap]"]=!1;const Vi=function(t){return function(e){return t(e)}};var Hi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Fi=Hi&&"object"==typeof module&&module&&!module.nodeType&&module,zi=Fi&&Fi.exports===Hi&&wn.process;const Gi=function(){try{return Fi&&Fi.require&&Fi.require("util").types||zi&&zi.binding&&zi.binding("util")}catch(t){}}();var Zi=Gi&&Gi.isTypedArray;const Wi=Zi?Vi(Zi):function(t){return Ti(t)&&_i(t.length)&&!!Ui[_n(t)]},Ji=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var Ki=Object.prototype.hasOwnProperty;const Yi=function(t,e,n){var i=t[e];Ki.call(t,e)&&gn(i,n)&&(void 0!==n||e in t)||ri(t,e,n)},Xi=function(t,e,n,i){var r=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=i?i(n[a],t[a],a,n,t):void 0;void 0===l&&(l=t[a]),r?ri(n,a,l):Yi(n,a,l)}return n};var Qi=/^(?:0|[1-9]\d*)$/;const tr=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Qi.test(t))&&t>-1&&t%1==0&&t<e};var er=Object.prototype.hasOwnProperty;const nr=function(t,e){var n=Li(t),i=!n&&Ni(t),r=!n&&!i&&ji(t),s=!n&&!i&&!r&&Wi(t),o=n||i||r||s,a=o?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],l=a.length;for(var c in t)!e&&!er.call(t,c)||o&&("length"==c||r&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||tr(c,l))||a.push(c);return a};var ir=Object.prototype.hasOwnProperty;const rr=function(t){if(!kn(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Ci(t),n=[];for(var i in t)("constructor"!=i||!e&&ir.call(t,i))&&n.push(i);return n},sr=function(t){return ki(t)?nr(t,!0):rr(t)},or=function(t,e,n,i,r,s,o){var a,l=Ji(t,n),c=Ji(e,n),d=o.get(c);if(d)si(t,n,d);else{var u=s?s(l,c,n+"",t,e,o):void 0,h=void 0===u;if(h){var p=Li(c),f=!p&&ji(c),g=!p&&!f&&Wi(c);u=c,p||f||g?Li(l)?u=l:Ti(a=l)&&ki(a)?u=gi(l):f?(h=!1,u=ui(c,!0)):g?(h=!1,u=fi(c,!0)):u=[]:function(t){if(!Ti(t)||"[object Object]"!=_n(t))return!1;var e=yi(t);if(null===e)return!0;var n=$i.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Bi.call(n)==Ri}(c)||Ni(c)?(u=l,Ni(l)?u=function(t){return Xi(t,sr(t))}(l):kn(l)&&!On(l)||(u=xi(c))):h=!1}h&&(o.set(c,u),r(u,c,i,s,o),o.delete(c)),si(t,n,u)}},ar=function t(e,n,i,r,s){e!==n&&oi(n,(function(o,a){if(s||(s=new ni),kn(o))or(e,n,a,i,t,r,s);else{var l=r?r(Ji(e,a),o,a+"",e,n,s):void 0;void 0===l&&(l=o),si(e,a,l)}}),sr)},lr=function(t){return t};var cr=Math.max;const dr=ii?function(t,e){return ii(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:lr;var ur=Date.now;const hr=(pr=dr,fr=0,gr=0,function(){var t=ur(),e=16-(t-gr);if(gr=t,e>0){if(++fr>=800)return arguments[0]}else fr=0;return pr.apply(void 0,arguments)});var pr,fr,gr;const mr=function(t,e){return hr(function(t,e,n){return e=cr(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,s=cr(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(o),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,a)}}(t,e,lr),t+"")},vr=(br=function(t,e,n){ar(t,e,n)},mr((function(t,e){var n=-1,i=e.length,r=i>1?e[i-1]:void 0,s=i>2?e[2]:void 0;for(r=br.length>3&&"function"==typeof r?(i--,r):void 0,s&&function(t,e,n){if(!kn(n))return!1;var i=typeof e;return!!("number"==i?ki(n)&&tr(e,n.length):"string"==i&&e in n)&&gn(n[e],t)}(e[0],e[1],s)&&(r=i<3?void 0:r,i=1),t=Object(t);++n<i;){var o=e[n];o&&br(t,o,n)}return t})));var br,yr=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(yr||{});class wr{constructor(t,e,n={}){this.attrName=t,this.keyName=e;const i=yr.TYPE&yr.ATTRIBUTE;this.scope=null!=n.scope?n.scope&yr.LEVEL|i:yr.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}static keys(t){return Array.from(t.attributes).map((t=>t.name))}add(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)}canAdd(t,e){return null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1)}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class Cr extends Error{constructor(t){super(t="[Parchment] "+t),this.message=t,this.name=this.constructor.name}}const xr=class t{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(null==t)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let n=null;try{n=t.parentNode}catch{return null}return this.find(n,e)}return null}create(e,n,i){const r=this.query(n);if(null==r)throw new Cr(`Unable to create ${n} blot`);const s=r,o=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:s.create(i),a=new s(e,o,i);return t.blots.set(a.domNode,a),a}find(e,n=!1){return t.find(e,n)}query(t,e=yr.ANY){let n;return"string"==typeof t?n=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?n=this.types.text:"number"==typeof t?t&yr.LEVEL&yr.BLOCK?n=this.types.block:t&yr.LEVEL&yr.INLINE&&(n=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some((t=>(n=this.classes[t],!!n))),n=n||this.tags[t.tagName]),null==n?null:"scope"in n&&e&yr.LEVEL&n.scope&&e&yr.TYPE&n.scope?n:null}register(...t){return t.map((t=>{const e="blotName"in t,n="attrName"in t;if(!e&&!n)throw new Cr("Invalid definition");if(e&&"abstract"===t.blotName)throw new Cr("Cannot register abstract class");const i=e?t.blotName:n?t.attrName:void 0;return this.types[i]=t,n?"string"==typeof t.keyName&&(this.attributes[t.keyName]=t):e&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map((t=>t.toUpperCase())):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach((e=>{(null==this.tags[e]||null==t.className)&&(this.tags[e]=t)})))),t}))}};xr.blots=new WeakMap;let Tr=xr;function Er(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter((t=>0===t.indexOf(`${e}-`)))}const Ar=class extends wr{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map((t=>t.split("-").slice(0,-1).join("-")))}add(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0)}remove(t){Er(t,this.keyName).forEach((e=>{t.classList.remove(e)})),0===t.classList.length&&t.removeAttribute("class")}value(t){const e=(Er(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}};function Sr(t){const e=t.split("-"),n=e.slice(1).map((t=>t[0].toUpperCase()+t.slice(1))).join("");return e[0]+n}const Ir=class extends wr{static keys(t){return(t.getAttribute("style")||"").split(";").map((t=>t.split(":")[0].trim()))}add(t,e){return!!this.canAdd(t,e)&&(t.style[Sr(this.keyName)]=e,!0)}remove(t){t.style[Sr(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[Sr(this.keyName)];return this.canAdd(t,e)?e:""}},Nr=class{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=Tr.find(this.domNode);if(null==t)return;const e=wr.keys(this.domNode),n=Ar.keys(this.domNode),i=Ir.keys(this.domNode);e.concat(n).concat(i).forEach((e=>{const n=t.scroll.query(e,yr.ATTRIBUTE);n instanceof wr&&(this.attributes[n.attrName]=n)}))}copy(t){Object.keys(this.attributes).forEach((e=>{const n=this.attributes[e].value(this.domNode);t.format(e,n)}))}move(t){this.copy(t),Object.keys(this.attributes).forEach((t=>{this.attributes[t].remove(this.domNode)})),this.attributes={}}values(){return Object.keys(this.attributes).reduce(((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t)),{})}},Lr=class{constructor(t,e){this.scroll=t,this.domNode=e,Tr.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(null==this.tagName)throw new Cr("Blot definition missing tagName");let e,n;return Array.isArray(this.tagName)?("string"==typeof t?(n=t.toUpperCase(),parseInt(n,10).toString()===n&&(n=parseInt(n,10))):"number"==typeof t&&(n=t),e="number"==typeof n?document.createElement(this.tagName[n-1]):n&&this.tagName.indexOf(n)>-1?document.createElement(n):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){null!=this.parent&&this.parent.removeChild(this),Tr.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,n,i){const r=this.isolate(t,e);if(null!=this.scroll.query(n,yr.BLOT)&&i)r.wrap(n,i);else if(null!=this.scroll.query(n,yr.ATTRIBUTE)){const t=this.scroll.create(this.statics.scope);r.wrap(t),t.format(n,i)}}insertAt(t,e,n){const i=null==n?this.scroll.create("text",e):this.scroll.create(e,n),r=this.split(t);this.parent.insertBefore(i,r||void 0)}isolate(t,e){const n=this.split(t);if(null==n)throw new Error("Attempt to isolate at end");return n.split(e),n}length(){return 1}offset(t=this.parent){return null==this.parent||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const n="string"==typeof t?this.scroll.create(t,e):t;return null!=this.parent&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n}split(t,e){return 0===t?this:this.next}update(t,e){}wrap(t,e){const n="string"==typeof t?this.scroll.create(t,e):t;if(null!=this.parent&&this.parent.insertBefore(n,this.next||void 0),"function"!=typeof n.appendChild)throw new Cr(`Cannot wrap ${t}`);return n.appendChild(this),n}};Lr.blotName="abstract";let _r=Lr;const kr=class extends _r{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(n+=1),[this.parent.domNode,n]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};kr.scope=yr.INLINE_BLOT;const Or=kr;class Pr{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let n=e();for(;n&&t>0;)t-=1,n=e();return n}contains(t){const e=this.iterator();let n=e();for(;n;){if(n===t)return!0;n=e()}return!1}indexOf(t){const e=this.iterator();let n=e(),i=0;for(;n;){if(n===t)return i;i+=1,n=e()}return-1}insertBefore(t,e){null!=t&&(this.remove(t),t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,n=this.head;for(;null!=n;){if(n===t)return e;e+=n.length(),n=n.next}return-1}remove(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return null!=t&&(t=t.next),e}}find(t,e=!1){const n=this.iterator();let i=n();for(;i;){const r=i.length();if(t<r||e&&t===r&&(null==i.next||0!==i.next.length()))return[i,t];t-=r,i=n()}return[null,0]}forEach(t){const e=this.iterator();let n=e();for(;n;)t(n),n=e()}forEachAt(t,e,n){if(e<=0)return;const[i,r]=this.find(t);let s=t-r;const o=this.iterator(i);let a=o();for(;a&&s<t+e;){const i=a.length();t>s?n(a,t-s,Math.min(e,s+i-t)):n(a,0,Math.min(i,t+e-s)),s+=i,a=o()}}map(t){return this.reduce(((e,n)=>(e.push(t(n)),e)),[])}reduce(t,e){const n=this.iterator();let i=n();for(;i;)e=t(e,i),i=n();return e}}function Mr(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const n=e.create(yr.INLINE);return Array.from(t.childNodes).forEach((t=>{n.domNode.appendChild(t)})),t.parentNode&&t.parentNode.replaceChild(n.domNode,t),n.attach(),n}}const jr=class t extends _r{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach((t=>{t.attach()}))}attachUI(e){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=e,t.uiClass&&this.uiNode.classList.add(t.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Pr,Array.from(this.domNode.childNodes).filter((t=>t!==this.uiNode)).reverse().forEach((t=>{try{const e=Mr(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(t){if(t instanceof Cr)return;throw t}}))}deleteAt(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,((t,e,n)=>{t.deleteAt(e,n)}))}descendant(e,n=0){const[i,r]=this.children.find(n);return null==e.blotName&&e(i)||null!=e.blotName&&i instanceof e?[i,r]:i instanceof t?i.descendant(e,r):[null,-1]}descendants(e,n=0,i=Number.MAX_VALUE){let r=[],s=i;return this.children.forEachAt(n,i,((n,i,o)=>{(null==e.blotName&&e(n)||null!=e.blotName&&n instanceof e)&&r.push(n),n instanceof t&&(r=r.concat(n.descendants(e,i,s))),s-=o})),r}detach(){this.children.forEach((t=>{t.detach()})),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach((n=>{e||this.statics.allowedChildren.some((t=>n instanceof t))||(n.statics.scope===yr.BLOCK_BLOT?(null!=n.next&&this.splitAfter(n),null!=n.prev&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof t?n.unwrap():n.remove())}))}formatAt(t,e,n,i){this.children.forEachAt(t,e,((t,e,r)=>{t.formatAt(e,r,n,i)}))}insertAt(t,e,n){const[i,r]=this.children.find(t);if(i)i.insertAt(r,e,n);else{const t=null==n?this.scroll.create("text",e):this.scroll.create(e,n);this.appendChild(t)}}insertBefore(t,e){null!=t.parent&&t.parent.children.remove(t);let n=null;this.children.insertBefore(t,e||null),t.parent=this,null!=e&&(n=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(t.domNode,n),t.attach()}length(){return this.children.reduce(((t,e)=>t+e.length()),0)}moveChildren(t,e){this.children.forEach((n=>{t.insertBefore(n,e)}))}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,n=!1){const[i,r]=this.children.find(e,n),s=[[this,e]];return i instanceof t?s.concat(i.path(r,n)):(null!=i&&s.push([i,r]),s)}removeChild(t){this.children.remove(t)}replaceWith(e,n){const i="string"==typeof e?this.scroll.create(e,n):e;return i instanceof t&&this.moveChildren(i),super.replaceWith(i)}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(t,this.length(),((t,i,r)=>{const s=t.split(i,e);null!=s&&n.appendChild(s)})),n}splitAfter(t){const e=this.clone();for(;null!=t.next;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const n=[],i=[];t.forEach((t=>{t.target===this.domNode&&"childList"===t.type&&(n.push(...t.addedNodes),i.push(...t.removedNodes))})),i.forEach((t=>{if(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const e=this.scroll.find(t);null!=e&&(null==e.domNode.parentNode||e.domNode.parentNode===this.domNode)&&e.detach()})),n.filter((t=>t.parentNode===this.domNode&&t!==this.uiNode)).sort(((t,e)=>t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1)).forEach((t=>{let e=null;null!=t.nextSibling&&(e=this.scroll.find(t.nextSibling));const n=Mr(t,this.scroll);(n.next!==e||null==n.next)&&(null!=n.parent&&n.parent.removeChild(this),this.insertBefore(n,e||void 0))})),this.enforceAllowedChildren()}};jr.uiClass="";const qr=jr,Dr=class t extends qr{static create(t){return super.create(t)}static formats(e,n){const i=n.query(t.blotName);if(null==i||e.tagName!==i.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Nr(this.domNode)}format(e,n){if(e!==this.statics.blotName||n){const t=this.scroll.query(e,yr.INLINE);if(null==t)return;t instanceof wr?this.attributes.attribute(t,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}else this.children.forEach((e=>{e instanceof t||(e=e.wrap(t.blotName,!0)),this.attributes.copy(e)})),this.unwrap()}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,i){null!=this.formats()[n]||this.scroll.query(n,yr.ATTRIBUTE)?this.isolate(t,e).format(n,i):super.formatAt(t,e,n,i)}optimize(e){super.optimize(e);const n=this.formats();if(0===Object.keys(n).length)return this.unwrap();const i=this.next;i instanceof t&&i.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}(n,i.formats())&&(i.moveChildren(this),i.remove())}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some((t=>t.target===this.domNode&&"attributes"===t.type))&&this.attributes.build()}wrap(e,n){const i=super.wrap(e,n);return i instanceof t&&this.attributes.move(i),i}};Dr.allowedChildren=[Dr,Or],Dr.blotName="inline",Dr.scope=yr.INLINE_BLOT,Dr.tagName="SPAN";const Br=Dr,$r=class t extends qr{static create(t){return super.create(t)}static formats(e,n){const i=n.query(t.blotName);if(null==i||e.tagName!==i.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Nr(this.domNode)}format(e,n){const i=this.scroll.query(e,yr.BLOCK);null!=i&&(i instanceof wr?this.attributes.attribute(i,n):e!==this.statics.blotName||n?n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n):this.replaceWith(t.blotName))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,i){null!=this.scroll.query(n,yr.BLOCK)?this.format(n,i):super.formatAt(t,e,n,i)}insertAt(t,e,n){if(null==n||null!=this.scroll.query(e,yr.INLINE))super.insertAt(t,e,n);else{const i=this.split(t);if(null==i)throw new Error("Attempt to insertAt after block boundaries");{const t=this.scroll.create(e,n);i.parent.insertBefore(t,i)}}}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some((t=>t.target===this.domNode&&"attributes"===t.type))&&this.attributes.build()}};$r.blotName="block",$r.scope=yr.BLOCK_BLOT,$r.tagName="P",$r.allowedChildren=[Br,$r,Or];const Rr=$r,Ur=class extends qr{checkMerge(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,n,i){super.formatAt(t,e,n,i),this.enforceAllowedChildren()}insertAt(t,e,n){super.insertAt(t,e,n),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Ur.blotName="container",Ur.scope=yr.BLOCK_BLOT;const Vr=Ur,Hr=class extends Or{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,n,i){0===t&&e===this.length()?this.format(n,i):super.formatAt(t,e,n,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}},Fr={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},zr=class extends qr{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver((t=>{this.update(t)})),this.observer.observe(this.domNode,Fr),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const n=this.registry.find(t,e);return n?n.scroll===this?n:e?this.find(n.scroll.domNode.parentNode,!0):null:null}query(t,e=yr.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){null!=this.scroll&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),0===t&&e===this.length()?this.children.forEach((t=>{t.remove()})):super.deleteAt(t,e)}formatAt(t,e,n,i){this.update(),super.formatAt(t,e,n,i)}insertAt(t,e,n){this.update(),super.insertAt(t,e,n)}optimize(t=[],e={}){super.optimize(e);const n=e.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)t.push(i.pop());const r=(t,e=!0)=>{null==t||t===this||null!=t.domNode.parentNode&&(n.has(t.domNode)||n.set(t.domNode,[]),e&&r(t.parent))},s=t=>{n.has(t.domNode)&&(t instanceof qr&&t.children.forEach(s),n.delete(t.domNode),t.optimize(e))};let o=t;for(let e=0;o.length>0;e+=1){if(e>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(o.forEach((t=>{const e=this.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(r(this.find(t.previousSibling,!1)),Array.from(t.addedNodes).forEach((t=>{const e=this.find(t,!1);r(e,!1),e instanceof qr&&e.children.forEach((t=>{r(t,!1)}))}))):"attributes"===t.type&&r(e.prev)),r(e))})),this.children.forEach(s),o=Array.from(this.observer.takeRecords()),i=o.slice();i.length>0;)t.push(i.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const n=new WeakMap;t.map((t=>{const e=this.find(t.target,!0);return null==e?null:n.has(e.domNode)?(n.get(e.domNode).push(t),null):(n.set(e.domNode,[t]),e)})).forEach((t=>{null!=t&&t!==this&&n.has(t.domNode)&&t.update(n.get(t.domNode)||[],e)})),e.mutationsMap=n,n.has(this.domNode)&&super.update(n.get(this.domNode),e),this.optimize(t,e)}};zr.blotName="scroll",zr.defaultChild=Rr,zr.allowedChildren=[Rr,Vr],zr.scope=yr.BLOCK_BLOT,zr.tagName="DIV";const Gr=zr,Zr=class t extends Or{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,n){null==n?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,n)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const n=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(t,e){t.some((t=>"characterData"===t.type&&t.target===this.domNode))&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Zr.blotName="text",Zr.scope=yr.INLINE_BLOT;const Wr=Zr;var Jr=n(2660);const Kr=bi(Object.keys,Object);var Yr=Object.prototype.hasOwnProperty;const Xr=function(t){return ki(t)?nr(t):function(t){if(!Ci(t))return Kr(t);var e=[];for(var n in Object(t))Yr.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)},Qr=function(){return[]};var ts=Object.prototype.propertyIsEnumerable,es=Object.getOwnPropertySymbols;const ns=es?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}(es(t),(function(e){return ts.call(t,e)})))}:Qr,is=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t},rs=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)is(e,ns(t)),t=yi(t);return e}:Qr,ss=function(t,e,n){var i=e(t);return Li(t)?i:is(i,n(t))},os=function(t){return ss(t,Xr,ns)},as=function(t){return ss(t,sr,rs)},ls=zn(xn,"DataView"),cs=zn(xn,"Promise"),ds=zn(xn,"Set"),us=zn(xn,"WeakMap");var hs="[object Map]",ps="[object Promise]",fs="[object Set]",gs="[object WeakMap]",ms="[object DataView]",vs=Dn(ls),bs=Dn(Gn),ys=Dn(cs),ws=Dn(ds),Cs=Dn(us),xs=_n;(ls&&xs(new ls(new ArrayBuffer(1)))!=ms||Gn&&xs(new Gn)!=hs||cs&&xs(cs.resolve())!=ps||ds&&xs(new ds)!=fs||us&&xs(new us)!=gs)&&(xs=function(t){var e=_n(t),n="[object Object]"==e?t.constructor:void 0,i=n?Dn(n):"";if(i)switch(i){case vs:return ms;case bs:return hs;case ys:return ps;case ws:return fs;case Cs:return gs}return e});const Ts=xs;var Es=Object.prototype.hasOwnProperty;var As=/\w*$/;var Ss=Tn?Tn.prototype:void 0,Is=Ss?Ss.valueOf:void 0;const Ns=function(t,e,n){var i,r,s,o=t.constructor;switch(e){case"[object ArrayBuffer]":return pi(t);case"[object Boolean]":case"[object Date]":return new o(+t);case"[object DataView]":return function(t,e){var n=e?pi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return fi(t,n);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(t);case"[object RegExp]":return(s=new(r=t).constructor(r.source,As.exec(r))).lastIndex=r.lastIndex,s;case"[object Symbol]":return i=t,Is?Object(Is.call(i)):{}}};var Ls=Gi&&Gi.isMap;const _s=Ls?Vi(Ls):function(t){return Ti(t)&&"[object Map]"==Ts(t)};var ks=Gi&&Gi.isSet;const Os=ks?Vi(ks):function(t){return Ti(t)&&"[object Set]"==Ts(t)};var Ps="[object Arguments]",Ms="[object Function]",js="[object Object]",qs={};qs[Ps]=qs["[object Array]"]=qs["[object ArrayBuffer]"]=qs["[object DataView]"]=qs["[object Boolean]"]=qs["[object Date]"]=qs["[object Float32Array]"]=qs["[object Float64Array]"]=qs["[object Int8Array]"]=qs["[object Int16Array]"]=qs["[object Int32Array]"]=qs["[object Map]"]=qs["[object Number]"]=qs[js]=qs["[object RegExp]"]=qs["[object Set]"]=qs["[object String]"]=qs["[object Symbol]"]=qs["[object Uint8Array]"]=qs["[object Uint8ClampedArray]"]=qs["[object Uint16Array]"]=qs["[object Uint32Array]"]=!0,qs["[object Error]"]=qs[Ms]=qs["[object WeakMap]"]=!1;const Ds=function t(e,n,i,r,s,o){var a,l=1&n,c=2&n,d=4&n;if(i&&(a=s?i(e,r,s,o):i(e)),void 0!==a)return a;if(!kn(e))return e;var u=Li(e);if(u){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Es.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!l)return gi(e,a)}else{var h=Ts(e),p=h==Ms||"[object GeneratorFunction]"==h;if(ji(e))return ui(e,l);if(h==js||h==Ps||p&&!s){if(a=c||p?{}:xi(e),!l)return c?function(t,e){return Xi(t,rs(t),e)}(e,function(t,e){return t&&Xi(e,sr(e),t)}(a,e)):function(t,e){return Xi(t,ns(t),e)}(e,function(t,e){return t&&Xi(e,Xr(e),t)}(a,e))}else{if(!qs[h])return s?e:{};a=Ns(e,h,l)}}o||(o=new ni);var f=o.get(e);if(f)return f;o.set(e,a),Os(e)?e.forEach((function(r){a.add(t(r,n,i,r,e,o))})):_s(e)&&e.forEach((function(r,s){a.set(s,t(r,n,i,s,e,o))}));var g=u?void 0:(d?c?as:os:c?sr:Xr)(e);return function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););}(g||e,(function(r,s){g&&(r=e[s=r]),Yi(a,s,t(r,n,i,s,e,o))})),a},Bs=function(t){return Ds(t,5)};function $s(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new ti;++e<n;)this.add(t[e])}$s.prototype.add=$s.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},$s.prototype.has=function(t){return this.__data__.has(t)};const Rs=$s,Us=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1},Vs=function(t,e,n,i,r,s){var o=1&n,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),d=s.get(e);if(c&&d)return c==e&&d==t;var u=-1,h=!0,p=2&n?new Rs:void 0;for(s.set(t,e),s.set(e,t);++u<a;){var f=t[u],g=e[u];if(i)var m=o?i(g,f,u,e,t,s):i(f,g,u,t,e,s);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!Us(e,(function(t,e){if(o=e,!p.has(o)&&(f===t||r(f,t,n,i,s)))return p.push(e);var o}))){h=!1;break}}else if(f!==g&&!r(f,g,n,i,s)){h=!1;break}}return s.delete(t),s.delete(e),h},Hs=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n},Fs=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n};var zs=Tn?Tn.prototype:void 0,Gs=zs?zs.valueOf:void 0;var Zs=Object.prototype.hasOwnProperty;var Ws="[object Arguments]",Js="[object Array]",Ks="[object Object]",Ys=Object.prototype.hasOwnProperty;const Xs=function(t,e,n,i,r,s){var o=Li(t),a=Li(e),l=o?Js:Ts(t),c=a?Js:Ts(e),d=(l=l==Ws?Ks:l)==Ks,u=(c=c==Ws?Ks:c)==Ks,h=l==c;if(h&&ji(t)){if(!ji(e))return!1;o=!0,d=!1}if(h&&!d)return s||(s=new ni),o||Wi(t)?Vs(t,e,n,i,r,s):function(t,e,n,i,r,s,o){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!s(new hi(t),new hi(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return gn(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=Hs;case"[object Set]":var l=1&i;if(a||(a=Fs),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;i|=2,o.set(t,e);var d=Vs(a(t),a(e),i,r,s,o);return o.delete(t),d;case"[object Symbol]":if(Gs)return Gs.call(t)==Gs.call(e)}return!1}(t,e,l,n,i,r,s);if(!(1&n)){var p=d&&Ys.call(t,"__wrapped__"),f=u&&Ys.call(e,"__wrapped__");if(p||f){var g=p?t.value():t,m=f?e.value():e;return s||(s=new ni),r(g,m,n,i,s)}}return!!h&&(s||(s=new ni),function(t,e,n,i,r,s){var o=1&n,a=os(t),l=a.length;if(l!=os(e).length&&!o)return!1;for(var c=l;c--;){var d=a[c];if(!(o?d in e:Zs.call(e,d)))return!1}var u=s.get(t),h=s.get(e);if(u&&h)return u==e&&h==t;var p=!0;s.set(t,e),s.set(e,t);for(var f=o;++c<l;){var g=t[d=a[c]],m=e[d];if(i)var v=o?i(m,g,d,e,t,s):i(g,m,d,t,e,s);if(!(void 0===v?g===m||r(g,m,n,i,s):v)){p=!1;break}f||(f="constructor"==d)}if(p&&!f){var b=t.constructor,y=e.constructor;b==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(p=!1)}return s.delete(t),s.delete(e),p}(t,e,n,i,r,s))},Qs=function t(e,n,i,r,s){return e===n||(null==e||null==n||!Ti(e)&&!Ti(n)?e!=e&&n!=n:Xs(e,n,i,r,t,s))},to=function(t,e){return Qs(t,e)};class eo extends Hr{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}eo.blotName="break",eo.tagName="BR";const no=eo;class io extends Wr{}const ro={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function so(t){return t.replace(/[&<>"']/g,(t=>ro[t]))}class oo extends Br{static allowedChildren=[oo,no,Hr,io];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(t,e){const n=oo.order.indexOf(t),i=oo.order.indexOf(e);return n>=0||i>=0?n-i:t===e?0:t<e?-1:1}formatAt(t,e,n,i){if(oo.compare(this.statics.blotName,n)<0&&this.scroll.query(n,yr.BLOT)){const r=this.isolate(t,e);i&&r.wrap(n,i)}else super.formatAt(t,e,n,i)}optimize(t){if(super.optimize(t),this.parent instanceof oo&&oo.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}}const ao=oo;class lo extends Rr{cache={};delta(){return null==this.cache.delta&&(this.cache.delta=uo(this)),this.cache.delta}deleteAt(t,e){super.deleteAt(t,e),this.cache={}}formatAt(t,e,n,i){e<=0||(this.scroll.query(n,yr.BLOCK)?t+e===this.length()&&this.format(n,i):super.formatAt(t,Math.min(e,this.length()-t-1),n,i),this.cache={})}insertAt(t,e,n){if(null!=n)return super.insertAt(t,e,n),void(this.cache={});if(0===e.length)return;const i=e.split("\n"),r=i.shift();r.length>0&&(t<this.length()-1||null==this.children.tail?super.insertAt(Math.min(t,this.length()-1),r):this.children.tail.insertAt(this.children.tail.length(),r),this.cache={});let s=this;i.reduce(((t,e)=>(s=s.split(t,!0),s.insertAt(0,e),e.length)),t+r.length)}insertBefore(t,e){const{head:n}=this.children;super.insertBefore(t,e),n instanceof no&&n.remove(),this.cache={}}length(){return null==this.cache.length&&(this.cache.length=super.length()+1),this.cache.length}moveChildren(t,e){super.moveChildren(t,e),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&(0===t||t>=this.length()-1)){const e=this.clone();return 0===t?(this.parent.insertBefore(e,this),this):(this.parent.insertBefore(e,this.next),e)}const n=super.split(t,e);return this.cache={},n}}lo.blotName="block",lo.tagName="P",lo.defaultChild=no,lo.allowedChildren=[no,ao,Hr,io];class co extends Hr{attach(){super.attach(),this.attributes=new Nr(this.domNode)}delta(){return(new Jr).insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){const n=this.scroll.query(t,yr.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,e)}formatAt(t,e,n,i){this.format(n,i)}insertAt(t,e,n){if(null!=n)return void super.insertAt(t,e,n);const i=e.split("\n"),r=i.pop(),s=i.map((t=>{const e=this.scroll.create(lo.blotName);return e.insertAt(0,t),e})),o=this.split(t);s.forEach((t=>{this.parent.insertBefore(t,o)})),r&&this.parent.insertBefore(this.scroll.create("text",r),o)}}function uo(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.descendants(Or).reduce(((t,n)=>0===n.length()?t:t.insert(n.value(),ho(n,{},e))),new Jr).insert("\n",ho(t))}function ho(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==t?e:("formats"in t&&"function"==typeof t.formats&&(e={...e,...t.formats()},n&&delete e["code-token"]),null==t.parent||"scroll"===t.parent.statics.blotName||t.parent.statics.scope!==t.statics.scope?e:ho(t.parent,e,n))}co.scope=yr.BLOCK_BLOT;class po extends Hr{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\ufeff";static value(){}constructor(t,e,n){super(t,e),this.selection=n,this.textNode=document.createTextNode(po.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){null!=this.parent&&this.parent.removeChild(this)}format(t,e){if(0!==this.savedLength)return void super.format(t,e);let n=this,i=0;for(;null!=n&&n.statics.scope!==yr.BLOCK_BLOT;)i+=n.offset(n.parent),n=n.parent;null!=n&&(this.savedLength=po.CONTENTS.length,n.optimize(),n.formatAt(i,po.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||null==this.parent)return null;const t=this.selection.getNativeRange();for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof io?this.prev:null,n=e?e.length():0,i=this.next instanceof io?this.next:null,r=i?i.text:"",{textNode:s}=this,o=s.data.split(po.CONTENTS).join("");let a;if(s.data=po.CONTENTS,e)a=e,(o||i)&&(e.insertAt(e.length(),o+r),i&&i.remove());else if(i)a=i,i.insertAt(0,o);else{const t=document.createTextNode(o);a=this.scroll.create(t),this.parent.insertBefore(a,this)}if(this.remove(),t){const r=(t,r)=>e&&t===e.domNode?r:t===s?n+r-1:i&&t===i.domNode?n+o.length+r:null,l=r(t.start.node,t.start.offset),c=r(t.end.node,t.end.offset);if(null!==l&&null!==c)return{startNode:a.domNode,startOffset:l,endNode:a.domNode,endOffset:c}}return null}update(t,e){if(t.some((t=>"characterData"===t.type&&t.target===this.textNode))){const t=this.restore();t&&(e.range=t)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if("A"===e.domNode.tagName){this.savedLength=po.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}}const fo=po;var go=n(3697);const mo=new WeakMap,vo=["error","warn","log","info"];let bo="warn";function yo(t){if(bo&&vo.indexOf(t)<=vo.indexOf(bo)){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];console[t](...n)}}function wo(t){return vo.reduce(((e,n)=>(e[n]=yo.bind(console,n,t),e)),{})}wo.level=t=>{bo=t},yo.level=wo.level;const Co=wo,xo=Co("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((t=>{document.addEventListener(t,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach((t=>{const n=mo.get(t);n&&n.emitter&&n.emitter.handleDOM(...e)}))}))}));const To=class extends go{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",xo.error)}emit(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return xo.log.call(xo,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(this.domListeners[t.type]||[]).forEach((e=>{let{node:i,handler:r}=e;(t.target===i||i.contains(t.target))&&r(t,...n)}))}listenDOM(t,e,n){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:n})}},Eo=Co("quill:selection");class Ao{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.index=t,this.length=e}}function So(t,e){try{e.parentNode}catch(t){return!1}return t.contains(e)}const Io=class{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Ao(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(()=>{this.mouseDown||this.composing||setTimeout(this.update.bind(this,To.sources.USER),1)})),this.emitter.on(To.events.SCROLL_BEFORE_UPDATE,(()=>{if(!this.hasFocus())return;const t=this.getNativeRange();null!=t&&t.start.node!==this.cursor.textNode&&this.emitter.once(To.events.SCROLL_UPDATE,((e,n)=>{try{this.root.contains(t.start.node)&&this.root.contains(t.end.node)&&this.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset);const i=n.some((t=>"characterData"===t.type||"childList"===t.type||"attributes"===t.type&&t.target===this.root));this.update(i?To.sources.SILENT:e)}catch(t){}}))})),this.emitter.on(To.events.SCROLL_OPTIMIZE,((t,e)=>{if(e.range){const{startNode:t,startOffset:n,endNode:i,endOffset:r}=e.range;this.setNativeRange(t,n,i,r),this.update(To.sources.SILENT)}})),this.update(To.sources.SILENT)}handleComposition(){this.emitter.on(To.events.COMPOSITION_BEFORE_START,(()=>{this.composing=!0})),this.emitter.on(To.events.COMPOSITION_END,(()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout((()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}),1)}}))}handleDragging(){this.emitter.listenDOM("mousedown",document.body,(()=>{this.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(()=>{this.mouseDown=!1,this.update(To.sources.USER)}))}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();const n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!this.scroll.query(t,yr.BLOCK)){if(n.start.node!==this.cursor.textNode){const t=this.scroll.find(n.start.node,!1);if(null==t)return;if(t instanceof Or){const e=t.split(n.start.offset);t.parent.insertBefore(this.cursor,e)}else t.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.scroll.length();let i;t=Math.min(t,n-1),e=Math.min(t+e,n-1)-t;let[r,s]=this.scroll.leaf(t);if(null==r)return null;if(e>0&&s===r.length()){const[e]=this.scroll.leaf(t+1);if(e){const[n]=this.scroll.line(t),[i]=this.scroll.line(t+1);n===i&&(r=e,s=0)}}[i,s]=r.position(s,!0);const o=document.createRange();if(e>0)return o.setStart(i,s),[r,s]=this.scroll.leaf(t+e),null==r?null:([i,s]=r.position(s,!0),o.setEnd(i,s),o.getBoundingClientRect());let a,l="left";if(i instanceof Text){if(!i.data.length)return null;s<i.data.length?(o.setStart(i,s),o.setEnd(i,s+1)):(o.setStart(i,s-1),o.setEnd(i,s),l="right"),a=o.getBoundingClientRect()}else{if(!(r.domNode instanceof Element))return null;a=r.domNode.getBoundingClientRect(),s>0&&(l="right")}return{bottom:a.top+a.height,height:a.height,left:a[l],right:a[l],top:a.top,width:0}}getNativeRange(){const t=document.getSelection();if(null==t||t.rangeCount<=0)return null;const e=t.getRangeAt(0);if(null==e)return null;const n=this.normalizeNative(e);return Eo.info("getNativeRange",n),n}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||null!=document.activeElement&&So(this.root,document.activeElement)}normalizedToRange(t){const e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);const n=e.map((t=>{const[e,n]=t,i=this.scroll.find(e,!0),r=i.offset(this.scroll);return 0===n?r:i instanceof Or?r+i.index(e,n):r+i.length()})),i=Math.min(Math.max(...n),this.scroll.length()-1),r=Math.min(i,...n);return new Ao(r,i-r)}normalizeNative(t){if(!So(this.root,t.startContainer)||!t.collapsed&&!So(this.root,t.endContainer))return null;const e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach((t=>{let{node:e,offset:n}=t;for(;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>n)e=e.childNodes[n],n=0;else{if(e.childNodes.length!==n)break;e=e.lastChild,n=e instanceof Text?e.data.length:e.childNodes.length>0?e.childNodes.length:e.childNodes.length+1}t.node=e,t.offset=n})),e}rangeToNative(t){const e=this.scroll.length(),n=(t,n)=>{t=Math.min(e-1,t);const[i,r]=this.scroll.leaf(t);return i?i.position(r,n):[null,-1]};return[...n(t.index,!1),...n(t.index+t.length,!0)]}setNativeRange(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Eo.info("setNativeRange",t,e,n,i),null!=t&&(null==this.root.parentNode||null==t.parentNode||null==n.parentNode))return;const s=document.getSelection();if(null!=s)if(null!=t){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:o}=this.getNativeRange()||{};if(null==o||r||t!==o.startContainer||e!==o.startOffset||n!==o.endContainer||i!==o.endOffset){t instanceof Element&&"BR"===t.tagName&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),n instanceof Element&&"BR"===n.tagName&&(i=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);const r=document.createRange();r.setStart(t,e),r.setEnd(n,i),s.removeAllRanges(),s.addRange(r)}}else s.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:To.sources.API;if("string"==typeof e&&(n=e,e=!1),Eo.info("setRange",t),null!=t){const n=this.rangeToNative(t);this.setNativeRange(...n,e)}else this.setNativeRange(null);this.update(n)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:To.sources.USER;const e=this.lastRange,[n,i]=this.getRange();if(this.lastRange=n,this.lastNative=i,null!=this.lastRange&&(this.savedRange=this.lastRange),!to(e,this.lastRange)){if(!this.composing&&null!=i&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const t=this.cursor.restore();t&&this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}const n=[To.events.SELECTION_CHANGE,Bs(this.lastRange),Bs(e),t];this.emitter.emit(To.events.EDITOR_CHANGE,...n),t!==To.sources.SILENT&&this.emitter.emit(...n)}}},No=/^[ -~]*$/;function Lo(t,e,n){if(0===t.length){const[t]=Oo(n.pop());return e<=0?`</li></${t}>`:`</li></${t}>${Lo([],e-1,n)}`}const[{child:i,offset:r,length:s,indent:o,type:a},...l]=t,[c,d]=Oo(a);if(o>e)return n.push(a),o===e+1?`<${c}><li${d}>${_o(i,r,s)}${Lo(l,o,n)}`:`<${c}><li>${Lo(t,e+1,n)}`;const u=n[n.length-1];if(o===e&&a===u)return`</li><li${d}>${_o(i,r,s)}${Lo(l,o,n)}`;const[h]=Oo(n.pop());return`</li></${h}>${Lo(t,e-1,n)}`}function _o(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("html"in t&&"function"==typeof t.html)return t.html(e,n);if(t instanceof io)return so(t.value().slice(e,e+n)).replaceAll(" ","&nbsp;");if(t instanceof qr){if("list-container"===t.statics.blotName){const i=[];return t.children.forEachAt(e,n,((t,e,n)=>{const r="formats"in t&&"function"==typeof t.formats?t.formats():{};i.push({child:t,offset:e,length:n,indent:r.indent||0,type:r.list})})),Lo(i,-1,[])}const r=[];if(t.children.forEachAt(e,n,((t,e,n)=>{r.push(_o(t,e,n))})),i||"list"===t.statics.blotName)return r.join("");const{outerHTML:s,innerHTML:o}=t.domNode,[a,l]=s.split(`>${o}<`);return"<table"===a?`<table style="border: 1px solid #000;">${r.join("")}<${l}`:`${a}>${r.join("")}<${l}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function ko(t,e){return Object.keys(e).reduce(((n,i)=>{if(null==t[i])return n;const r=e[i];return r===t[i]?n[i]=r:Array.isArray(r)?r.indexOf(t[i])<0?n[i]=r.concat([t[i]]):n[i]=r:n[i]=[r,t[i]],n}),{})}function Oo(t){const e="ordered"===t?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function Po(t){return t.reduce(((t,e)=>{if("string"==typeof e.insert){const n=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(n,e.attributes)}return t.push(e)}),new Jr)}function Mo(t,e){let{index:n,length:i}=t;return new Ao(n+e,i)}const jo=class{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const n=Po(t),i=new Jr;return function(t){const e=[];return t.forEach((t=>{"string"==typeof t.insert?t.insert.split("\n").forEach(((n,i)=>{i&&e.push({insert:"\n",attributes:t.attributes}),n&&e.push({insert:n,attributes:t.attributes})})):e.push(t)})),e}(n.ops.slice()).reduce(((t,n)=>{const r=Jr.Op.length(n);let s=n.attributes||{},o=!1,a=!1;if(null!=n.insert){if(i.retain(r),"string"==typeof n.insert){const i=n.insert;a=!i.endsWith("\n")&&(e<=t||!!this.scroll.descendant(co,t)[0]),this.scroll.insertAt(t,i);const[r,o]=this.scroll.line(t);let l=vr({},ho(r));if(r instanceof lo){const[t]=r.descendant(Or,o);t&&(l=vr(l,ho(t)))}s=Jr.AttributeMap.diff(l,s)||{}}else if("object"==typeof n.insert){const i=Object.keys(n.insert)[0];if(null==i)return t;const r=null!=this.scroll.query(i,yr.INLINE);if(r)(e<=t||this.scroll.descendant(co,t)[0])&&(a=!0);else if(t>0){const[e,n]=this.scroll.descendant(Or,t-1);e instanceof io?"\n"!==e.value()[n]&&(o=!0):e instanceof Hr&&e.statics.scope===yr.INLINE_BLOT&&(o=!0)}if(this.scroll.insertAt(t,i,n.insert[i]),r){const[e]=this.scroll.descendant(Or,t);if(e){const t=vr({},ho(e));s=Jr.AttributeMap.diff(t,s)||{}}}}e+=r}else if(i.push(n),null!==n.retain&&"object"==typeof n.retain){const e=Object.keys(n.retain)[0];if(null==e)return t;this.scroll.updateEmbedAt(t,e,n.retain[e])}Object.keys(s).forEach((e=>{this.scroll.formatAt(t,r,e,s[e])}));const l=o?1:0,c=a?1:0;return e+=l+c,i.retain(l),i.delete(c),t+r+l+c}),0),i.reduce(((t,e)=>"number"==typeof e.delete?(this.scroll.deleteAt(t,e.delete),t):t+Jr.Op.length(e)),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update((new Jr).retain(t).delete(e))}formatLine(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach((i=>{this.scroll.lines(t,Math.max(e,1)).forEach((t=>{t.format(i,n[i])}))})),this.scroll.optimize();const i=(new Jr).retain(t).retain(e,Bs(n));return this.update(i)}formatText(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(n).forEach((i=>{this.scroll.formatAt(t,e,i,n[i])}));const i=(new Jr).retain(t).retain(e,Bs(n));return this.update(i)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce(((t,e)=>t.concat(e.delta())),new Jr)}getFormat(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],i=[];0===e?this.scroll.path(t).forEach((t=>{const[e]=t;e instanceof lo?n.push(e):e instanceof Or&&i.push(e)})):(n=this.scroll.lines(t,e),i=this.scroll.descendants(Or,t,e));const[r,s]=[n,i].map((t=>{const e=t.shift();if(null==e)return{};let n=ho(e);for(;Object.keys(n).length>0;){const e=t.shift();if(null==e)return n;n=ko(ho(e),n)}return n}));return{...r,...s}}getHTML(t,e){const[n,i]=this.scroll.line(t);if(n){const r=n.length();return n.length()>=i+e&&(0!==i||e!==r)?_o(n,i,e,!0):_o(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter((t=>"string"==typeof t.insert)).map((t=>t.insert)).join("")}insertContents(t,e){const n=Po(e),i=(new Jr).retain(t).concat(n);return this.scroll.insertContents(t,n),this.update(i)}insertEmbed(t,e,n){return this.scroll.insertAt(t,e,n),this.update((new Jr).retain(t).insert({[e]:n}))}insertText(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(n).forEach((i=>{this.scroll.formatAt(t,e.length,i,n[i])})),this.update((new Jr).retain(t).insert(e,Bs(n)))}isBlank(){if(0===this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if(t?.statics.blotName!==lo.blotName)return!1;const e=t;return!(e.children.length>1)&&e.children.head instanceof no}removeFormat(t,e){const n=this.getText(t,e),[i,r]=this.scroll.line(t+e);let s=0,o=new Jr;null!=i&&(s=i.length()-r,o=i.delta().slice(r,r+s-1).insert("\n"));const a=this.getContents(t,e+s).diff((new Jr).insert(n).concat(o)),l=(new Jr).retain(t).concat(a);return this.applyDelta(l)}update(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const i=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(No)&&this.scroll.find(e[0].target)){const r=this.scroll.find(e[0].target),s=ho(r),o=r.offset(this.scroll),a=e[0].oldValue.replace(fo.CONTENTS,""),l=(new Jr).insert(a),c=(new Jr).insert(r.value()),d=n&&{oldRange:Mo(n.oldRange,-o),newRange:Mo(n.newRange,-o)};t=(new Jr).retain(o).concat(l.diff(c,d)).reduce(((t,e)=>e.insert?t.insert(e.insert,s):t.push(e)),new Jr),this.delta=i.compose(t)}else this.delta=this.getDelta(),t&&to(i.compose(t),this.delta)||(t=i.diff(this.delta,n));return t}},qo=class{static DEFAULTS={};constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.quill=t,this.options=e}},Do="\ufeff",Bo=class extends Hr{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach((t=>{this.contentNode.appendChild(t)})),this.leftGuard=document.createTextNode(Do),this.rightGuard=document.createTextNode(Do),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e,n=null;const i=t.data.split(Do).join("");if(t===this.leftGuard)if(this.prev instanceof io){const t=this.prev.length();this.prev.insertAt(t,i),n={startNode:this.prev.domNode,startOffset:t+i.length}}else e=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(e),this),n={startNode:e,startOffset:i.length};else t===this.rightGuard&&(this.next instanceof io?(this.next.insertAt(0,i),n={startNode:this.next.domNode,startOffset:i.length}):(e=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(e),this.next),n={startNode:e,startOffset:i.length}));return t.data=Do,n}update(t,e){t.forEach((t=>{if("characterData"===t.type&&(t.target===this.leftGuard||t.target===this.rightGuard)){const n=this.restore(t.target);n&&(e.range=n)}}))}},$o=class{isComposing=!1;constructor(t,e){this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",(t=>{this.isComposing||this.handleCompositionStart(t)})),this.scroll.domNode.addEventListener("compositionend",(t=>{this.isComposing&&queueMicrotask((()=>{this.handleCompositionEnd(t)}))}))}handleCompositionStart(t){const e=t.target instanceof Node?this.scroll.find(t.target,!0):null;!e||e instanceof Bo||(this.emitter.emit(To.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(To.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(To.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(To.events.COMPOSITION_END,t),this.isComposing=!1}};class Ro{static DEFAULTS={modules:{}};static themes={default:Ro};modules={};constructor(t,e){this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach((t=>{null==this.modules[t]&&this.addModule(t)}))}addModule(t){const e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}const Uo=Ro,Vo=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,i="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*i,left:e.left}},Ho=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},Fo=(t,e,n,i,r,s)=>t<n&&e>i?0:t<n?-(n-t+r):e>i?e-t>i-n?t+r-n:e-i+s:0,zo=["block","break","cursor","inline","scroll","text"],Go=Co("quill"),Zo=new Tr;qr.uiClass="ql-ui";class Wo{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Zo,theme:"default"};static events=To.events;static sources=To.sources;static version="2.0.3";static imports={delta:Jr,parchment:t,"core/module":qo,"core/theme":Uo};static debug(t){!0===t&&(t="log"),Co.level(t)}static find(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return mo.get(t)||Zo.find(t,e)}static import(t){return null==this.imports[t]&&Go.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if("string"!=typeof(arguments.length<=0?void 0:arguments[0])){const t=arguments.length<=0?void 0:arguments[0],e=!!(arguments.length<=1?void 0:arguments[1]),n="attrName"in t?t.attrName:t.blotName;"string"==typeof n?this.register(`formats/${n}`,t,e):Object.keys(t).forEach((n=>{this.register(n,t[n],e)}))}else{const t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],n=!!(arguments.length<=2?void 0:arguments[2]);null==this.imports[t]||n||Go.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&"boolean"!=typeof e&&"abstract"!==e.blotName&&Zo.register(e),"function"==typeof e.register&&e.register(Zo)}}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options=function(t,e){const n=Jo(t);if(!n)throw new Error("Invalid Quill container");const i=!e.theme||e.theme===Wo.DEFAULTS.theme?Uo:Wo.import(`themes/${e.theme}`);if(!i)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:r,...s}=Wo.DEFAULTS,{modules:o,...a}=i.DEFAULTS;let l=Ko(e.modules);null!=l&&l.toolbar&&l.toolbar.constructor!==Object&&(l={...l,toolbar:{container:l.toolbar}});const c=vr({},Ko(r),Ko(o),l),d={...s,...Yo(a),...Yo(e)};let u=e.registry;return u?e.formats&&Go.warn('Ignoring "formats" option because "registry" is specified'):u=e.formats?((t,e,n)=>{const i=new Tr;return zo.forEach((t=>{const n=e.query(t);n&&i.register(n)})),t.forEach((t=>{let r=e.query(t);r||n.error(`Cannot register "${t}" specified in "formats" config. Are you sure it was registered?`);let s=0;for(;r;)if(i.register(r),r="blotName"in r?r.requiredContainer??null:null,s+=1,s>100){n.error(`Cycle detected in registering blot requiredContainer: "${t}"`);break}})),i})(e.formats,d.registry,Go):d.registry,{...d,registry:u,container:n,theme:i,modules:Object.entries(c).reduce(((t,e)=>{let[n,i]=e;if(!i)return t;const r=Wo.import(`modules/${n}`);return null==r?(Go.error(`Cannot load ${n} module. Are you sure you registered it?`),t):{...t,[n]:vr({},r.DEFAULTS||{},i)}}),{}),bounds:Jo(d.bounds)}}(t,e),this.container=this.options.container,null==this.container)return void Go.error("Invalid Quill container",t);this.options.debug&&Wo.debug(this.options.debug);const n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",mo.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new To;const i=Gr.blotName,r=this.options.registry.query(i);if(!r||!("blotName"in r))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new r(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new jo(this.scroll),this.selection=new Io(this.scroll,this.emitter),this.composition=new $o(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(To.events.EDITOR_CHANGE,(t=>{t===To.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())})),this.emitter.on(To.events.SCROLL_UPDATE,((t,e)=>{const n=this.selection.lastRange,[i]=this.selection.getRange(),r=n&&i?{oldRange:n,newRange:i}:void 0;Xo.call(this,(()=>this.editor.update(null,e,r)),t)})),this.emitter.on(To.events.SCROLL_EMBED_UPDATE,((t,e)=>{const n=this.selection.lastRange,[i]=this.selection.getRange(),r=n&&i?{oldRange:n,newRange:i}:void 0;Xo.call(this,(()=>{const n=(new Jr).retain(t.offset(this)).retain({[t.statics.blotName]:e});return this.editor.update(n,[],r)}),Wo.sources.USER)})),n){const t=this.clipboard.convert({html:`${n}<p><br></p>`,text:"\n"});this.setContents(t)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){const e=t;(t=document.createElement("div")).classList.add(e)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,n){return[t,e,,n]=Qo(t,e,n),Xo.call(this,(()=>this.editor.deleteText(t,e)),n,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:To.sources.API;return Xo.call(this,(()=>{const n=this.getSelection(!0);let i=new Jr;if(null==n)return i;if(this.scroll.query(t,yr.BLOCK))i=this.editor.formatLine(n.index,n.length,{[t]:e});else{if(0===n.length)return this.selection.format(t,e),i;i=this.editor.formatText(n.index,n.length,{[t]:e})}return this.setSelection(n,To.sources.SILENT),i}),n)}formatLine(t,e,n,i,r){let s;return[t,e,s,r]=Qo(t,e,n,i,r),Xo.call(this,(()=>this.editor.formatLine(t,e,s)),r,t,0)}formatText(t,e,n,i,r){let s;return[t,e,s,r]=Qo(t,e,n,i,r),Xo.call(this,(()=>this.editor.formatText(t,e,s)),r,t,0)}getBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=null;if(n="number"==typeof t?this.selection.getBounds(t,e):this.selection.getBounds(t.index,t.length),!n)return null;const i=this.container.getBoundingClientRect();return{bottom:n.bottom-i.top,height:n.height,left:n.left-i.left,right:n.right-i.left,top:n.top-i.top,width:n.width}}getContents(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t;return[t,e]=Qo(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof t&&(e=e??this.getLength()-t),[t,e]=Qo(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof t&&(e=e??this.getLength()-t),[t,e]=Qo(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Wo.sources.API;return Xo.call(this,(()=>this.editor.insertEmbed(t,e,n)),i,t)}insertText(t,e,n,i,r){let s;return[t,,s,r]=Qo(t,0,n,i,r),Xo.call(this,(()=>this.editor.insertText(t,e,s)),r,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,n){return[t,e,,n]=Qo(t,e,n),Xo.call(this,(()=>this.editor.removeFormat(t,e)),n,t)}scrollRectIntoView(t){((t,e)=>{const n=t.ownerDocument;let i=e,r=t;for(;r;){const t=r===n.body,e=t?{top:0,right:window.visualViewport?.width??n.documentElement.clientWidth,bottom:window.visualViewport?.height??n.documentElement.clientHeight,left:0}:Vo(r),o=getComputedStyle(r),a=Fo(i.left,i.right,e.left,e.right,Ho(o.scrollPaddingLeft),Ho(o.scrollPaddingRight)),l=Fo(i.top,i.bottom,e.top,e.bottom,Ho(o.scrollPaddingTop),Ho(o.scrollPaddingBottom));if(a||l)if(t)n.defaultView?.scrollBy(a,l);else{const{scrollLeft:t,scrollTop:e}=r;l&&(r.scrollTop+=l),a&&(r.scrollLeft+=a);const n=r.scrollLeft-t,s=r.scrollTop-e;i={left:i.left-n,top:i.top-s,right:i.right-n,bottom:i.bottom-s}}r=t||"fixed"===o.position?null:(s=r).parentElement||s.getRootNode().host||null}var s})(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:To.sources.API;return Xo.call(this,(()=>{t=new Jr(t);const e=this.getLength(),n=this.editor.deleteText(0,e),i=this.editor.insertContents(0,t),r=this.editor.deleteText(this.getLength()-1,1);return n.compose(i).compose(r)}),e)}setSelection(t,e,n){null==t?this.selection.setRange(null,e||Wo.sources.API):([t,e,,n]=Qo(t,e,n),this.selection.setRange(new Ao(Math.max(0,t),e),n),n!==To.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:To.sources.API;const n=(new Jr).insert(t);return this.setContents(n,e)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:To.sources.USER;const e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:To.sources.API;return Xo.call(this,(()=>(t=new Jr(t),this.editor.applyDelta(t))),e,!0)}}function Jo(t){return"string"==typeof t?document.querySelector(t):t}function Ko(t){return Object.entries(t??{}).reduce(((t,e)=>{let[n,i]=e;return{...t,[n]:!0===i?{}:i}}),{})}function Yo(t){return Object.fromEntries(Object.entries(t).filter((t=>void 0!==t[1])))}function Xo(t,e,n,i){if(!this.isEnabled()&&e===To.sources.USER&&!this.allowReadOnlyEdits)return new Jr;let r=null==n?null:this.getSelection();const s=this.editor.delta,o=t();if(null!=r&&(!0===n&&(n=r.index),null==i?r=ta(r,o,e):0!==i&&(r=ta(r,n,i,e)),this.setSelection(r,To.sources.SILENT)),o.length()>0){const t=[To.events.TEXT_CHANGE,o,s,e];this.emitter.emit(To.events.EDITOR_CHANGE,...t),e!==To.sources.SILENT&&this.emitter.emit(...t)}return o}function Qo(t,e,n,i,r){let s={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(r=i,i=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(r=i,i=n,n=e,e=0),"object"==typeof n?(s=n,r=i):"string"==typeof n&&(null!=i?s[n]=i:r=n),[t,e,s,r=r||To.sources.API]}function ta(t,e,n,i){const r="number"==typeof n?n:0;if(null==t)return null;let s,o;return e&&"function"==typeof e.transformPosition?[s,o]=[t.index,t.index+t.length].map((t=>e.transformPosition(t,i!==To.sources.USER))):[s,o]=[t.index,t.index+t.length].map((t=>t<e||t===e&&i===To.sources.USER?t:r>=0?t+r:Math.max(e,t+r))),new Ao(s,o-s)}const ea=class extends Vr{};function na(t){return t instanceof lo||t instanceof co}function ia(t){return"function"==typeof t.updateContent}function ra(t,e,n){n.reduce(((e,n)=>{const i=Jr.Op.length(n);let r=n.attributes||{};if(null!=n.insert)if("string"==typeof n.insert){const i=n.insert;t.insertAt(e,i);const[s]=t.descendant(Or,e),o=ho(s);r=Jr.AttributeMap.diff(o,r)||{}}else if("object"==typeof n.insert){const i=Object.keys(n.insert)[0];if(null==i)return e;if(t.insertAt(e,i,n.insert[i]),null!=t.scroll.query(i,yr.INLINE)){const[n]=t.descendant(Or,e),i=ho(n);r=Jr.AttributeMap.diff(i,r)||{}}}return Object.keys(r).forEach((n=>{t.formatAt(e,i,n,r[n])})),e+i}),e)}const sa={scope:yr.BLOCK,whitelist:["right","center","justify"]},oa=new wr("align","align",sa),aa=new Ar("align","ql-align",sa),la=new Ir("align","text-align",sa);class ca extends Ir{value(t){let e=super.value(t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map((t=>`00${parseInt(t,10).toString(16)}`.slice(-2))).join("")}`):e}}const da=new Ar("color","ql-color",{scope:yr.INLINE}),ua=new ca("color","color",{scope:yr.INLINE}),ha=new Ar("background","ql-bg",{scope:yr.INLINE}),pa=new ca("background","background-color",{scope:yr.INLINE});class fa extends ea{static create(t){const e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map((t=>t.length()<=1?"":t.domNode.innerText)).join("\n").slice(t,t+e)}html(t,e){return`<pre>\n${so(this.code(t,e))}\n</pre>`}}class ga extends lo{static TAB="  ";static register(){Wo.register(fa)}}class ma extends ao{}ma.blotName="code",ma.tagName="CODE",ga.blotName="code-block",ga.className="ql-code-block",ga.tagName="DIV",fa.blotName="code-block-container",fa.className="ql-code-block-container",fa.tagName="DIV",fa.allowedChildren=[ga],ga.allowedChildren=[io,no,fo],ga.requiredContainer=fa;const va={scope:yr.BLOCK,whitelist:["rtl"]},ba=new wr("direction","dir",va),ya=new Ar("direction","ql-direction",va),wa=new Ir("direction","direction",va),Ca={scope:yr.INLINE,whitelist:["serif","monospace"]},xa=new Ar("font","ql-font",Ca),Ta=new class extends Ir{value(t){return super.value(t).replace(/["']/g,"")}}("font","font-family",Ca),Ea=new Ar("size","ql-size",{scope:yr.INLINE,whitelist:["small","large","huge"]}),Aa=new Ir("size","font-size",{scope:yr.INLINE,whitelist:["10px","18px","32px"]}),Sa=Co("quill:keyboard"),Ia=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Na extends qo{static match(t,e){return!["altKey","ctrlKey","metaKey","shiftKey"].some((n=>!!e[n]!==t[n]&&null!==e[n]))&&(e.key===t.key||e.key===t.which)}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach((t=>{this.options.bindings[t]&&this.addBinding(this.options.bindings[t])})),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},(()=>{})),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=function(t){if("string"==typeof t||"number"==typeof t)t={key:t};else{if("object"!=typeof t)return null;t=Bs(t)}return t.shortKey&&(t[Ia]=t.shortKey,delete t.shortKey),t}(t);null!=i?("function"==typeof e&&(e={handler:e}),"function"==typeof n&&(n={handler:n}),(Array.isArray(i.key)?i.key:[i.key]).forEach((t=>{const r={...i,key:t,...e,...n};this.bindings[r.key]=this.bindings[r.key]||[],this.bindings[r.key].push(r)}))):Sa.warn("Attempted to add invalid keyboard binding",i)}listen(){this.quill.root.addEventListener("keydown",(t=>{if(t.defaultPrevented||t.isComposing)return;if(229===t.keyCode&&("Enter"===t.key||"Backspace"===t.key))return;const e=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter((e=>Na.match(t,e)));if(0===e.length)return;const n=Wo.find(t.target,!0);if(n&&n.scroll!==this.quill.scroll)return;const i=this.quill.getSelection();if(null==i||!this.quill.hasFocus())return;const[r,s]=this.quill.getLine(i.index),[o,a]=this.quill.getLeaf(i.index),[l,c]=0===i.length?[o,a]:this.quill.getLeaf(i.index+i.length),d=o instanceof Wr?o.value().slice(0,a):"",u=l instanceof Wr?l.value().slice(c):"",h={collapsed:0===i.length,empty:0===i.length&&r.length()<=1,format:this.quill.getFormat(i),line:r,offset:s,prefix:d,suffix:u,event:t};e.some((t=>{if(null!=t.collapsed&&t.collapsed!==h.collapsed)return!1;if(null!=t.empty&&t.empty!==h.empty)return!1;if(null!=t.offset&&t.offset!==h.offset)return!1;if(Array.isArray(t.format)){if(t.format.every((t=>null==h.format[t])))return!1}else if("object"==typeof t.format&&!Object.keys(t.format).every((e=>!0===t.format[e]?null!=h.format[e]:!1===t.format[e]?null==h.format[e]:to(t.format[e],h.format[e]))))return!1;return!(null!=t.prefix&&!t.prefix.test(h.prefix)||null!=t.suffix&&!t.suffix.test(h.suffix)||!0===t.handler.call(this,i,h,t))}))&&t.preventDefault()}))}handleBackspace(t,e){const n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(0===t.index||this.quill.getLength()<=1)return;let i={};const[r]=this.quill.getLine(t.index);let s=(new Jr).retain(t.index-n).delete(n);if(0===e.offset){const[e]=this.quill.getLine(t.index-1);if(e&&!("block"===e.statics.blotName&&e.length()<=1)){const e=r.formats(),n=this.quill.getFormat(t.index-1,1);if(i=Jr.AttributeMap.diff(e,n)||{},Object.keys(i).length>0){const e=(new Jr).retain(t.index+r.length()-2).retain(1,i);s=s.compose(e)}}}this.quill.updateContents(s,Wo.sources.USER),this.quill.focus()}handleDelete(t,e){const n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-n)return;let i={};const[r]=this.quill.getLine(t.index);let s=(new Jr).retain(t.index).delete(n);if(e.offset>=r.length()-1){const[e]=this.quill.getLine(t.index+1);if(e){const n=r.formats(),o=this.quill.getFormat(t.index,1);i=Jr.AttributeMap.diff(n,o)||{},Object.keys(i).length>0&&(s=s.retain(e.length()-1).retain(1,i))}}this.quill.updateContents(s,Wo.sources.USER),this.quill.focus()}handleDeleteRange(t){Ma({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){const n=Object.keys(e.format).reduce(((t,n)=>(this.quill.scroll.query(n,yr.BLOCK)&&!Array.isArray(e.format[n])&&(t[n]=e.format[n]),t)),{}),i=(new Jr).retain(t.index).delete(t.length).insert("\n",n);this.quill.updateContents(i,Wo.sources.USER),this.quill.setSelection(t.index+1,Wo.sources.SILENT),this.quill.focus()}}const La={bindings:{bold:Oa("bold"),italic:Oa("italic"),underline:Oa("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","+1",Wo.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","-1",Wo.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){null!=e.format.indent?this.quill.format("indent","-1",Wo.sources.USER):null!=e.format.list&&this.quill.format("list",!1,Wo.sources.USER)}},"indent code-block":_a(!0),"outdent code-block":_a(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,Wo.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=(new Jr).retain(t.index).delete(t.length).insert("\t");return this.quill.updateContents(n,Wo.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,Wo.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,Wo.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,Wo.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),i={...e.formats(),list:"checked"},r=(new Jr).retain(t.index).insert("\n",i).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(r,Wo.sources.USER),this.quill.setSelection(t.index+1,Wo.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,i]=this.quill.getLine(t.index),r=(new Jr).retain(t.index).insert("\n",e.format).retain(n.length()-i-1).retain(1,{header:null});this.quill.updateContents(r,Wo.sources.USER),this.quill.setSelection(t.index+1,Wo.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,i,r,s]=e.getTable(t),o=function(t,e,n,i){return null==e.prev&&null==e.next?null==n.prev&&null==n.next?0===i?-1:1:null==n.prev?-1:1:null==e.prev?-1:null==e.next?1:null}(0,i,r,s);if(null==o)return;let a=n.offset();if(o<0){const e=(new Jr).retain(a).insert("\n");this.quill.updateContents(e,Wo.sources.USER),this.quill.setSelection(t.index+1,t.length,Wo.sources.SILENT)}else if(o>0){a+=n.length();const t=(new Jr).retain(a).insert("\n");this.quill.updateContents(t,Wo.sources.USER),this.quill.setSelection(a,Wo.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:i}=e,r=i.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(r-1,Wo.sources.USER):this.quill.setSelection(r+i.length(),Wo.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(null==this.quill.scroll.query("list"))return!0;const{length:n}=e.prefix,[i,r]=this.quill.getLine(t.index);if(r>n)return!0;let s;switch(e.prefix.trim()){case"[]":case"[ ]":s="unchecked";break;case"[x]":s="checked";break;case"-":case"*":s="bullet";break;default:s="ordered"}this.quill.insertText(t.index," ",Wo.sources.USER),this.quill.history.cutoff();const o=(new Jr).retain(t.index-r).delete(n+1).retain(i.length()-2-r).retain(1,{list:s});return this.quill.updateContents(o,Wo.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,Wo.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let i=2,r=e;for(;null!=r&&r.length()<=1&&r.formats()["code-block"];)if(r=r.prev,i-=1,i<=0){const i=(new Jr).retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(i,Wo.sources.USER),this.quill.setSelection(t.index-1,Wo.sources.SILENT),!1}return!0}},"embed left":ka("ArrowLeft",!1),"embed left shift":ka("ArrowLeft",!0),"embed right":ka("ArrowRight",!1),"embed right shift":ka("ArrowRight",!0),"table down":Pa(!1),"table up":Pa(!0)}};function _a(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:i}=n;const r=this.quill.scroll.query("code-block"),{TAB:s}=r;if(0===e.length&&!i.shiftKey)return this.quill.insertText(e.index,s,Wo.sources.USER),void this.quill.setSelection(e.index+s.length,Wo.sources.SILENT);const o=0===e.length?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:a,length:l}=e;o.forEach(((e,n)=>{t?(e.insertAt(0,s),0===n?a+=s.length:l+=s.length):e.domNode.textContent.startsWith(s)&&(e.deleteAt(0,s.length),0===n?a-=s.length:l-=s.length)})),this.quill.update(Wo.sources.USER),this.quill.setSelection(a,l,Wo.sources.SILENT)}}}function ka(t,e){const n="ArrowLeft"===t?"prefix":"suffix";return{key:t,shiftKey:e,altKey:null,[n]:/^$/,handler(n){let{index:i}=n;"ArrowRight"===t&&(i+=n.length+1);const[r]=this.quill.getLeaf(i);return!(r instanceof Hr&&("ArrowLeft"===t?e?this.quill.setSelection(n.index-1,n.length+1,Wo.sources.USER):this.quill.setSelection(n.index-1,Wo.sources.USER):e?this.quill.setSelection(n.index,n.length+1,Wo.sources.USER):this.quill.setSelection(n.index+n.length+1,Wo.sources.USER),1))}}}function Oa(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],Wo.sources.USER)}}}function Pa(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const i=t?"prev":"next",r=n.line,s=r.parent[i];if(null!=s){if("table-row"===s.statics.blotName){let t=s.children.head,e=r;for(;null!=e.prev;)e=e.prev,t=t.next;const i=t.offset(this.quill.scroll)+Math.min(n.offset,t.length()-1);this.quill.setSelection(i,0,Wo.sources.USER)}}else{const e=r.table()[i];null!=e&&(t?this.quill.setSelection(e.offset(this.quill.scroll)+e.length()-1,0,Wo.sources.USER):this.quill.setSelection(e.offset(this.quill.scroll),0,Wo.sources.USER))}return!1}}}function Ma(t){let{quill:e,range:n}=t;const i=e.getLines(n);let r={};if(i.length>1){const t=i[0].formats(),e=i[i.length-1].formats();r=Jr.AttributeMap.diff(e,t)||{}}e.deleteText(n,Wo.sources.USER),Object.keys(r).length>0&&e.formatLine(n.index,1,r,Wo.sources.USER),e.setSelection(n.index,Wo.sources.SILENT)}Na.DEFAULTS=La;const ja=/font-weight:\s*normal/,qa=["P","OL","UL"],Da=t=>t&&qa.includes(t.tagName),Ba=/\bmso-list:[^;]*ignore/i,$a=/\bmso-list:[^;]*\bl(\d+)/i,Ra=/\bmso-list:[^;]*\blevel(\d+)/i,Ua=[function(t){"urn:schemas-microsoft-com:office:word"===t.documentElement.getAttribute("xmlns:w")&&(t=>{const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],i=[];e.forEach((t=>{(t.getAttribute("style")||"").match(Ba)?n.push(t):i.push(t)})),n.forEach((t=>t.parentNode?.removeChild(t)));const r=t.documentElement.innerHTML,s=i.map((t=>((t,e)=>{const n=t.getAttribute("style"),i=n?.match($a);if(!i)return null;const r=Number(i[1]),s=n?.match(Ra),o=s?Number(s[1]):1,a=new RegExp(`@list l${r}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=e.match(a);return{id:r,indent:o,type:l&&"bullet"===l[1]?"bullet":"ordered",element:t}})(t,r))).filter((t=>t));for(;s.length;){const t=[];let e=s.shift();for(;e;)t.push(e),e=s.length&&s[0]?.element===e.element.nextElementSibling&&s[0].id===e.id?s.shift():null;const n=document.createElement("ul");t.forEach((t=>{const e=document.createElement("li");e.setAttribute("data-list",t.type),t.indent>1&&e.setAttribute("class","ql-indent-"+(t.indent-1)),e.innerHTML=t.element.innerHTML,n.appendChild(e)}));const i=t[0]?.element,{parentNode:r}=i??{};i&&r?.replaceChild(n,i),t.slice(1).forEach((t=>{let{element:e}=t;r?.removeChild(e)}))}})(t)},function(t){t.querySelector('[id^="docs-internal-guid-"]')&&((t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter((t=>t.getAttribute("style")?.match(ja))).forEach((e=>{const n=t.createDocumentFragment();n.append(...e.childNodes),e.parentNode?.replaceChild(n,e)}))})(t),(t=>{Array.from(t.querySelectorAll("br")).filter((t=>Da(t.previousElementSibling)&&Da(t.nextElementSibling))).forEach((t=>{t.parentNode?.removeChild(t)}))})(t))}],Va=Co("quill:clipboard"),Ha=[[Node.TEXT_NODE,function(t,e,n){let i=t.data;if("O:P"===t.parentElement?.tagName)return e.insert(i.trim());if(!Ka(t)){if(0===i.trim().length&&i.includes("\n")&&!function(t,e){return t.previousElementSibling&&t.nextElementSibling&&!Wa(t.previousElementSibling,e)&&!Wa(t.nextElementSibling,e)}(t,n))return e;i=i.replace(/[^\S\u00a0]/g," "),i=i.replace(/ {2,}/g," "),(null==t.previousSibling&&null!=t.parentElement&&Wa(t.parentElement,n)||t.previousSibling instanceof Element&&Wa(t.previousSibling,n))&&(i=i.replace(/^ /,"")),(null==t.nextSibling&&null!=t.parentElement&&Wa(t.parentElement,n)||t.nextSibling instanceof Element&&Wa(t.nextSibling,n))&&(i=i.replace(/ $/,"")),i=i.replaceAll(" "," ")}return e.insert(i)}],[Node.TEXT_NODE,Qa],["br",function(t,e){return Za(e,"\n")||e.insert("\n"),e}],[Node.ELEMENT_NODE,Qa],[Node.ELEMENT_NODE,function(t,e,n){const i=n.query(t);if(null==i)return e;if(i.prototype instanceof Hr){const e={},r=i.value(t);if(null!=r)return e[i.blotName]=r,(new Jr).insert(e,i.formats(t,n))}else if(i.prototype instanceof Rr&&!Za(e,"\n")&&e.insert("\n"),"blotName"in i&&"formats"in i&&"function"==typeof i.formats)return Ga(e,i.blotName,i.formats(t,n),n);return e}],[Node.ELEMENT_NODE,function(t,e,n){const i=wr.keys(t),r=Ar.keys(t),s=Ir.keys(t),o={};return i.concat(r).concat(s).forEach((e=>{let i=n.query(e,yr.ATTRIBUTE);null!=i&&(o[i.attrName]=i.value(t),o[i.attrName])||(i=Fa[e],null==i||i.attrName!==e&&i.keyName!==e||(o[i.attrName]=i.value(t)||void 0),i=za[e],null==i||i.attrName!==e&&i.keyName!==e||(i=za[e],o[i.attrName]=i.value(t)||void 0))})),Object.entries(o).reduce(((t,e)=>{let[i,r]=e;return Ga(t,i,r,n)}),e)}],[Node.ELEMENT_NODE,function(t,e,n){const i={},r=t.style||{};return"italic"===r.fontStyle&&(i.italic=!0),"underline"===r.textDecoration&&(i.underline=!0),"line-through"===r.textDecoration&&(i.strike=!0),(r.fontWeight?.startsWith("bold")||parseInt(r.fontWeight,10)>=700)&&(i.bold=!0),e=Object.entries(i).reduce(((t,e)=>{let[i,r]=e;return Ga(t,i,r,n)}),e),parseFloat(r.textIndent||0)>0?(new Jr).insert("\t").concat(e):e}],["li",function(t,e,n){const i=n.query(t);if(null==i||"list"!==i.blotName||!Za(e,"\n"))return e;let r=-1,s=t.parentNode;for(;null!=s;)["OL","UL"].includes(s.tagName)&&(r+=1),s=s.parentNode;return r<=0?e:e.reduce(((t,e)=>e.insert?e.attributes&&"number"==typeof e.attributes.indent?t.push(e):t.insert(e.insert,{indent:r,...e.attributes||{}}):t),new Jr)}],["ol, ul",function(t,e,n){const i=t;let r="OL"===i.tagName?"ordered":"bullet";const s=i.getAttribute("data-checked");return s&&(r="true"===s?"checked":"unchecked"),Ga(e,"list",r,n)}],["pre",function(t,e,n){const i=n.query("code-block");return Ga(e,"code-block",!i||!("formats"in i)||"function"!=typeof i.formats||i.formats(t,n),n)}],["tr",function(t,e,n){const i="TABLE"===t.parentElement?.tagName?t.parentElement:t.parentElement?.parentElement;return null!=i?Ga(e,"table",Array.from(i.querySelectorAll("tr")).indexOf(t)+1,n):e}],["b",Xa("bold")],["i",Xa("italic")],["strike",Xa("strike")],["style",function(){return new Jr}]],Fa=[oa,ba].reduce(((t,e)=>(t[e.keyName]=e,t)),{}),za=[la,pa,ua,wa,Ta,Aa].reduce(((t,e)=>(t[e.keyName]=e,t)),{});function Ga(t,e,n,i){return i.query(e)?t.reduce(((t,i)=>{if(!i.insert)return t;if(i.attributes&&i.attributes[e])return t.push(i);const r=n?{[e]:n}:{};return t.insert(i.insert,{...r,...i.attributes})}),new Jr):t}function Za(t,e){let n="";for(let i=t.ops.length-1;i>=0&&n.length<e.length;--i){const e=t.ops[i];if("string"!=typeof e.insert)break;n=e.insert+n}return n.slice(-1*e.length)===e}function Wa(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return!(n&&n.prototype instanceof Hr)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}const Ja=new WeakMap;function Ka(t){return null!=t&&(Ja.has(t)||("PRE"===t.tagName?Ja.set(t,!0):Ja.set(t,Ka(t.parentNode))),Ja.get(t))}function Ya(t,e,n,i,r){return e.nodeType===e.TEXT_NODE?i.reduce(((n,i)=>i(e,n,t)),new Jr):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce(((s,o)=>{let a=Ya(t,o,n,i,r);return o.nodeType===e.ELEMENT_NODE&&(a=n.reduce(((e,n)=>n(o,e,t)),a),a=(r.get(o)||[]).reduce(((e,n)=>n(o,e,t)),a)),s.concat(a)}),new Jr):new Jr}function Xa(t){return(e,n,i)=>Ga(n,t,!0,i)}function Qa(t,e,n){if(!Za(e,"\n")){if(Wa(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert("\n");if(e.length()>0&&t.nextSibling){let i=t.nextSibling;for(;null!=i;){if(Wa(i,n))return e.insert("\n");const t=n.query(i);if(t&&t.prototype instanceof co)return e.insert("\n");i=i.firstChild}}}return e}function tl(t,e){let n=e;for(let e=t.length-1;e>=0;e-=1){const i=t[e];t[e]={delta:n.transform(i.delta,!0),range:i.range&&el(i.range,n)},n=i.delta.transform(n),0===t[e].delta.length()&&t.splice(e,1)}}function el(t,e){if(!t)return t;const n=e.transformPosition(t.index);return{index:n,length:e.transformPosition(t.index+t.length)-n}}class nl extends qo{constructor(t,e){super(t,e),t.root.addEventListener("drop",(e=>{e.preventDefault();let n=null;if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(e.clientX,e.clientY);else if(document.caretPositionFromPoint){const t=document.caretPositionFromPoint(e.clientX,e.clientY);n=document.createRange(),n.setStart(t.offsetNode,t.offset),n.setEnd(t.offsetNode,t.offset)}const i=n&&t.selection.normalizeNative(n);if(i){const n=t.selection.normalizedToRange(i);e.dataTransfer?.files&&this.upload(n,e.dataTransfer.files)}}))}upload(t,e){const n=[];Array.from(e).forEach((t=>{t&&this.options.mimetypes?.includes(t.type)&&n.push(t)})),n.length>0&&this.options.handler.call(this,t,n)}}nl.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map((t=>new Promise((e=>{const n=new FileReader;n.onload=()=>{e(n.result)},n.readAsDataURL(t)}))));Promise.all(n).then((e=>{const n=e.reduce(((t,e)=>t.insert({image:e})),(new Jr).retain(t.index).delete(t.length));this.quill.updateContents(n,To.sources.USER),this.quill.setSelection(t.index+e.length,To.sources.SILENT)}))}};const il=nl,rl=["insertText","insertReplacementText"],sl=/Mac/i.test(navigator.platform);Wo.register({"blots/block":lo,"blots/block/embed":co,"blots/break":no,"blots/container":ea,"blots/cursor":fo,"blots/embed":Bo,"blots/inline":ao,"blots/scroll":class extends Gr{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=lo;static allowedChildren=[lo,co,ea];constructor(t,e,n){let{emitter:i}=n;super(t,e),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",(t=>this.handleDragStart(t)))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(To.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(To.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(To.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){const[n,i]=this.line(t),[r]=this.line(t+e);if(super.deleteAt(t,e),null!=r&&n!==r&&i>0){if(n instanceof co||r instanceof co)return void this.optimize();const t=r.children.head instanceof no?null:r.children.head;n.moveChildren(r,t),n.remove()}this.optimize()}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,n,i){super.formatAt(t,e,n,i),this.optimize()}insertAt(t,e,n){if(t>=this.length())if(null==n||null==this.scroll.query(e,yr.BLOCK)){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t),null==n&&e.endsWith("\n")?t.insertAt(0,e.slice(0,-1),n):t.insertAt(0,e,n)}else{const t=this.scroll.create(e,n);this.appendChild(t)}else super.insertAt(t,e,n);this.optimize()}insertBefore(t,e){if(t.statics.scope===yr.INLINE_BLOT){const n=this.scroll.create(this.statics.defaultChild.blotName);n.appendChild(t),super.insertBefore(n,e)}else super.insertBefore(t,e)}insertContents(t,e){const n=this.deltaToRenderBlocks(e.concat((new Jr).insert("\n"))),i=n.pop();if(null==i)return;this.batchStart();const r=n.shift();if(r){const e="block"===r.type&&(0===r.delta.length()||!this.descendant(co,t)[0]&&t<this.length()),n="block"===r.type?r.delta:(new Jr).insert({[r.key]:r.value});ra(this,t,n);const i="block"===r.type?1:0,s=t+n.length()+i;e&&this.insertAt(s-1,"\n");const o=ho(this.line(t)[0]),a=Jr.AttributeMap.diff(o,r.attributes)||{};Object.keys(a).forEach((t=>{this.formatAt(s-1,1,t,a[t])})),t=s}let[s,o]=this.children.find(t);n.length&&(s&&(s=s.split(o),o=0),n.forEach((t=>{if("block"===t.type)ra(this.createBlock(t.attributes,s||void 0),0,t.delta);else{const e=this.create(t.key,t.value);this.insertBefore(e,s||void 0),Object.keys(t.attributes).forEach((n=>{e.format(n,t.attributes[n])}))}}))),"block"===i.type&&i.delta.length()&&ra(this,s?s.offset(s.scroll)+o:this.length(),i.delta),this.batchEnd(),this.optimize()}isEnabled(){return"true"===this.domNode.getAttribute("contenteditable")}leaf(t){const e=this.path(t).pop();if(!e)return[null,-1];const[n,i]=e;return n instanceof Or?[n,i]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(na,t)}lines(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;const n=(t,e,i)=>{let r=[],s=i;return t.children.forEachAt(e,i,((t,e,i)=>{na(t)?r.push(t):t instanceof Vr&&(r=r.concat(n(t,e,s))),s-=i})),r};return n(this,t,e)}optimize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit(To.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch)return void(Array.isArray(t)&&(this.batch=this.batch.concat(t)));let e=To.sources.USER;"string"==typeof t&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),(t=t.filter((t=>{let{target:e}=t;const n=this.find(e,!0);return n&&!ia(n)}))).length>0&&this.emitter.emit(To.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(To.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,n){const[i]=this.descendant((t=>t instanceof co),t);i&&i.statics.blotName===e&&ia(i)&&i.updateContent(n)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const e=[];let n=new Jr;return t.forEach((t=>{const i=t?.insert;if(i)if("string"==typeof i){const r=i.split("\n");r.slice(0,-1).forEach((i=>{n.insert(i,t.attributes),e.push({type:"block",delta:n,attributes:t.attributes??{}}),n=new Jr}));const s=r[r.length-1];s&&n.insert(s,t.attributes)}else{const r=Object.keys(i)[0];if(!r)return;this.query(r,yr.INLINE)?n.push(t):(n.length()&&e.push({type:"block",delta:n,attributes:{}}),n=new Jr,e.push({type:"blockEmbed",key:r,value:i[r],attributes:t.attributes??{}}))}})),n.length()&&e.push({type:"block",delta:n,attributes:{}}),e}createBlock(t,e){let n;const i={};Object.entries(t).forEach((t=>{let[e,r]=t;null!=this.query(e,yr.BLOCK&yr.BLOT)?n=e:i[e]=r}));const r=this.create(n||this.statics.defaultChild.blotName,n?t[n]:void 0);this.insertBefore(r,e||void 0);const s=r.length();return Object.entries(i).forEach((t=>{let[e,n]=t;r.formatAt(0,s,e,n)})),r}},"blots/text":io,"modules/clipboard":class extends qo{static DEFAULTS={matchers:[]};constructor(t,e){super(t,e),this.quill.root.addEventListener("copy",(t=>this.onCaptureCopy(t,!1))),this.quill.root.addEventListener("cut",(t=>this.onCaptureCopy(t,!0))),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],Ha.concat(this.options.matchers??[]).forEach((t=>{let[e,n]=t;this.addMatcher(e,n)}))}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:n}=t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i[ga.blotName])return(new Jr).insert(n||"",{[ga.blotName]:i[ga.blotName]});if(!e)return(new Jr).insert(n||"",i);const r=this.convertHTML(e);return Za(r,"\n")&&(null==r.ops[r.ops.length-1].attributes||i.table)?r.compose((new Jr).retain(r.length()-1).delete(1)):r}normalizeHTML(t){(t=>{t.documentElement&&Ua.forEach((e=>{e(t)}))})(t)}convertHTML(t){const e=(new DOMParser).parseFromString(t,"text/html");this.normalizeHTML(e);const n=e.body,i=new WeakMap,[r,s]=this.prepareMatching(n,i);return Ya(this.quill.scroll,n,r,s,i)}dangerouslyPasteHTML(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wo.sources.API;if("string"==typeof t){const n=this.convert({html:t,text:""});this.quill.setContents(n,e),this.quill.setSelection(0,Wo.sources.SILENT)}else{const i=this.convert({html:e,text:""});this.quill.updateContents((new Jr).retain(t).concat(i),n),this.quill.setSelection(t+i.length(),Wo.sources.SILENT)}}onCaptureCopy(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.defaultPrevented)return;t.preventDefault();const[n]=this.quill.selection.getRange();if(null==n)return;const{html:i,text:r}=this.onCopy(n,e);t.clipboardData?.setData("text/plain",r),t.clipboardData?.setData("text/html",i),e&&Ma({range:n,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter((t=>"#"!==t[0])).join("\n")}onCapturePaste(t){if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const e=this.quill.getSelection(!0);if(null==e)return;const n=t.clipboardData?.getData("text/html");let i=t.clipboardData?.getData("text/plain");if(!n&&!i){const e=t.clipboardData?.getData("text/uri-list");e&&(i=this.normalizeURIList(e))}const r=Array.from(t.clipboardData?.files||[]);if(!n&&r.length>0)this.quill.uploader.upload(e,r);else{if(n&&r.length>0){const t=(new DOMParser).parseFromString(n,"text/html");if(1===t.body.childElementCount&&"IMG"===t.body.firstElementChild?.tagName)return void this.quill.uploader.upload(e,r)}this.onPaste(e,{html:n,text:i})}}onCopy(t){const e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:n,html:i}=e;const r=this.quill.getFormat(t.index),s=this.convert({text:n,html:i},r);Va.log("onPaste",s,{text:n,html:i});const o=(new Jr).retain(t.index).delete(t.length).concat(s);this.quill.updateContents(o,Wo.sources.USER),this.quill.setSelection(o.length()-t.length,Wo.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){const n=[],i=[];return this.matchers.forEach((r=>{const[s,o]=r;switch(s){case Node.TEXT_NODE:i.push(o);break;case Node.ELEMENT_NODE:n.push(o);break;default:Array.from(t.querySelectorAll(s)).forEach((t=>{if(e.has(t)){const n=e.get(t);n?.push(o)}else e.set(t,[o])}))}})),[n,i]}},"modules/history":class extends qo{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(t,e){super(t,e),this.quill.on(Wo.events.EDITOR_CHANGE,((t,e,n,i)=>{t===Wo.events.SELECTION_CHANGE?e&&i!==Wo.sources.SILENT&&(this.currentRange=e):t===Wo.events.TEXT_CHANGE&&(this.ignoreChange||(this.options.userOnly&&i!==Wo.sources.USER?this.transform(e):this.record(e,n)),this.currentRange=el(this.currentRange,e))})),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",(t=>{"historyUndo"===t.inputType?(this.undo(),t.preventDefault()):"historyRedo"===t.inputType&&(this.redo(),t.preventDefault())}))}change(t,e){if(0===this.stack[t].length)return;const n=this.stack[t].pop();if(!n)return;const i=this.quill.getContents(),r=n.delta.invert(i);this.stack[e].push({delta:r,range:el(n.range,r)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n.delta,Wo.sources.USER),this.ignoreChange=!1,this.restoreSelection(n)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,e){if(0===t.ops.length)return;this.stack.redo=[];let n=t.invert(e),i=this.currentRange;const r=Date.now();if(this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0){const t=this.stack.undo.pop();t&&(n=n.compose(t.delta),i=t.range)}else this.lastRecorded=r;0!==n.length()&&(this.stack.undo.push({delta:n,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){tl(this.stack.undo,t),tl(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,Wo.sources.USER);else{const e=function(t,e){const n=e.reduce(((t,e)=>t+(e.delete||0)),0);let i=e.length()-n;return function(t,e){const n=e.ops[e.ops.length-1];return null!=n&&(null!=n.insert?"string"==typeof n.insert&&n.insert.endsWith("\n"):null!=n.attributes&&Object.keys(n.attributes).some((e=>null!=t.query(e,yr.BLOCK))))}(t,e)&&(i-=1),i}(this.quill.scroll,t.delta);this.quill.setSelection(e,Wo.sources.USER)}}},"modules/keyboard":Na,"modules/uploader":il,"modules/input":class extends qo{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",(t=>{this.handleBeforeInput(t)})),/Android/i.test(navigator.userAgent)||t.on(Wo.events.COMPOSITION_BEFORE_START,(()=>{this.handleCompositionStart()}))}deleteRange(t){Ma({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===t.length)return!1;if(e){const n=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents((new Jr).retain(t.index).insert(e,n),Wo.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,Wo.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!rl.includes(t.inputType))return;const e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||!0===e.collapsed)return;const n=function(t){return"string"==typeof t.data?t.data:t.dataTransfer?.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}(t);if(null==n)return;const i=this.quill.selection.normalizeNative(e),r=i?this.quill.selection.normalizedToRange(i):null;r&&this.replaceText(r,n)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}},"modules/uiNode":class extends qo{isListening=!1;selectionChangeDeadline=0;constructor(t,e){super(t,e),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,e){let{line:n,event:i}=e;if(!(n instanceof qr&&n.uiNode))return!0;const r="rtl"===getComputedStyle(n.domNode).direction;return!!(r&&"ArrowRight"!==i.key||!r&&"ArrowLeft"!==i.key)||(this.quill.setSelection(t.index-1,t.length+(i.shiftKey?1:0),Wo.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",(t=>{!t.defaultPrevented&&(t=>"ArrowLeft"===t.key||"ArrowRight"===t.key||"ArrowUp"===t.key||"ArrowDown"===t.key||"Home"===t.key||!(!sl||"a"!==t.key||!0!==t.ctrlKey))(t)&&this.ensureListeningToSelectionChange()}))}ensureListeningToSelectionChange(){this.selectionChangeDeadline=Date.now()+100,this.isListening||(this.isListening=!0,document.addEventListener("selectionchange",(()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()}),{once:!0}))}handleSelectionChange(){const t=document.getSelection();if(!t)return;const e=t.getRangeAt(0);if(!0!==e.collapsed||0!==e.startOffset)return;const n=this.quill.scroll.find(e.startContainer);if(!(n instanceof qr&&n.uiNode))return;const i=document.createRange();i.setStartAfter(n.uiNode),i.setEndAfter(n.uiNode),t.removeAllRanges(),t.addRange(i)}}});const ol=Wo,al=new class extends Ar{add(t,e){let n=0;if("+1"===e||"-1"===e){const i=this.value(t)||0;n="+1"===e?i+1:i-1}else"number"==typeof e&&(n=e);return 0===n?(this.remove(t),!0):super.add(t,n.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}}("indent","ql-indent",{scope:yr.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),ll=al;class cl extends ea{}cl.blotName="list-container",cl.tagName="OL";class dl extends lo{static create(t){const e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){Wo.register(cl)}constructor(t,e){super(t,e);const n=e.ownerDocument.createElement("span"),i=n=>{if(!t.isEnabled())return;const i=this.statics.formats(e,t);"checked"===i?(this.format("list","unchecked"),n.preventDefault()):"unchecked"===i&&(this.format("list","checked"),n.preventDefault())};n.addEventListener("mousedown",i),n.addEventListener("touchstart",i),this.attachUI(n)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}}dl.blotName="list",dl.tagName="LI",cl.allowedChildren=[dl],dl.requiredContainer=cl;const ul=class extends ao{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}};class hl extends ao{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(t){const e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return pl(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("href",this.constructor.sanitize(e)):super.format(t,e)}}function pl(t,e){const n=document.createElement("a");n.href=t;const i=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(i)>-1}const fl=["alt","height","width"],gl=["height","width"],ml=new Ar("code-token","hljs",{scope:yr.INLINE});class vl extends ao{static formats(t,e){for(;null!=t&&t!==e.domNode;){if(t.classList&&t.classList.contains(ga.className))return super.formats(t,e);t=t.parentNode}}constructor(t,e,n){super(t,e,n),ml.add(this.domNode,n)}format(t,e){t!==vl.blotName?super.format(t,e):e?ml.add(this.domNode,e):(ml.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),ml.value(this.domNode)||this.unwrap()}}vl.blotName="code-token",vl.className="ql-token";class bl extends ga{static create(t){const e=super.create(t);return"string"==typeof t&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),vl.blotName,!1),super.replaceWith(t,e)}}class yl extends fa{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,e){t===bl.blotName&&(this.forceNext=!0,this.children.forEach((n=>{n.format(t,e)})))}formatAt(t,e,n,i){n===bl.blotName&&(this.forceNext=!0),super.formatAt(t,e,n,i)}highlight(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==this.children.head)return;const n=`${Array.from(this.domNode.childNodes).filter((t=>t!==this.uiNode)).map((t=>t.textContent)).join("\n")}\n`,i=bl.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==n){if(n.trim().length>0||null==this.cachedText){const e=this.children.reduce(((t,e)=>t.concat(uo(e,!1))),new Jr),r=t(n,i);e.diff(r).reduce(((t,e)=>{let{retain:n,attributes:i}=e;return n?(i&&Object.keys(i).forEach((e=>{[bl.blotName,vl.blotName].includes(e)&&this.formatAt(t,n,e,i[e])})),t+n):t}),0)}this.cachedText=n,this.forceNext=!1}}html(t,e){const[n]=this.children.find(t);return`<pre data-language="${n?bl.formats(n.domNode):"plain"}">\n${so(this.code(t,e))}\n</pre>`}optimize(t){if(super.optimize(t),null!=this.parent&&null!=this.children.head&&null!=this.uiNode){const t=bl.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}yl.allowedChildren=[bl],bl.requiredContainer=yl,bl.allowedChildren=[vl,fo,io,no];class wl extends qo{static register(){Wo.register(vl,!0),Wo.register(bl,!0),Wo.register(yl,!0)}constructor(t,e){if(super(t,e),null==this.options.hljs)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce(((t,e)=>{let{key:n}=e;return t[n]=!0,t}),{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(Wo.events.SCROLL_BLOT_MOUNT,(t=>{if(!(t instanceof yl))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach((t=>{let{key:n,label:i}=t;const r=e.ownerDocument.createElement("option");r.textContent=i,r.setAttribute("value",n),e.appendChild(r)})),e.addEventListener("change",(()=>{t.format(bl.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)})),null==t.uiNode&&(t.attachUI(e),t.children.head&&(e.value=bl.formats(t.children.head.domNode)))}))}initTimer(){let t=null;this.quill.on(Wo.events.SCROLL_OPTIMIZE,(()=>{t&&clearTimeout(t),t=setTimeout((()=>{this.highlight(),t=null}),this.options.interval)}))}highlight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.quill.selection.composing)return;this.quill.update(Wo.sources.USER);const n=this.quill.getSelection();(null==t?this.quill.scroll.descendants(yl):[t]).forEach((t=>{t.highlight(this.highlightBlot,e)})),this.quill.update(Wo.sources.SILENT),null!=n&&this.quill.setSelection(n,Wo.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain";if(e=this.languages[e]?e:"plain","plain"===e)return so(t).split("\n").reduce(((t,n,i)=>(0!==i&&t.insert("\n",{[ga.blotName]:e}),t.insert(n))),new Jr);const n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(ga.className),n.innerHTML=((t,e,n)=>{if("string"==typeof t.versionString){const i=t.versionString.split(".")[0];if(parseInt(i,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value})(this.options.hljs,e,t),Ya(this.quill.scroll,n,[(t,e)=>{const n=ml.value(t);return n?e.compose((new Jr).retain(e.length(),{[vl.blotName]:n})):e}],[(t,n)=>t.data.split("\n").reduce(((t,n,i)=>(0!==i&&t.insert("\n",{[ga.blotName]:e}),t.insert(n))),n)],new WeakMap)}}wl.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Cl extends lo{static blotName="table";static tagName="TD";static create(t){const e=super.create();return t?e.setAttribute("data-row",t):e.setAttribute("data-row",Al()),e}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,e){t===Cl.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(t,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class xl extends ea{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&null!=this.next.children.head){const t=this.children.head.formats(),e=this.children.tail.formats(),n=this.next.children.head.formats(),i=this.next.children.tail.formats();return t.table===e.table&&t.table===n.table&&t.table===i.table}return!1}optimize(t){super.optimize(t),this.children.forEach((t=>{if(null==t.next)return;const e=t.formats(),n=t.next.formats();if(e.table!==n.table){const e=this.splitAfter(t);e&&e.optimize(),this.prev&&this.prev.optimize()}}))}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class Tl extends ea{static blotName="table-body";static tagName="TBODY"}class El extends ea{static blotName="table-container";static tagName="TABLE";balanceCells(){const t=this.descendants(xl),e=t.reduce(((t,e)=>Math.max(e.children.length,t)),0);t.forEach((t=>{new Array(e-t.children.length).fill(0).forEach((()=>{let e;null!=t.children.head&&(e=Cl.formats(t.children.head.domNode));const n=this.scroll.create(Cl.blotName,e);t.appendChild(n),n.optimize()}))}))}cells(t){return this.rows().map((e=>e.children.at(t)))}deleteColumn(t){const[e]=this.descendant(Tl);null!=e&&null!=e.children.head&&e.children.forEach((e=>{const n=e.children.at(t);null!=n&&n.remove()}))}insertColumn(t){const[e]=this.descendant(Tl);null!=e&&null!=e.children.head&&e.children.forEach((e=>{const n=e.children.at(t),i=Cl.formats(e.children.head.domNode),r=this.scroll.create(Cl.blotName,i);e.insertBefore(r,n)}))}insertRow(t){const[e]=this.descendant(Tl);if(null==e||null==e.children.head)return;const n=Al(),i=this.scroll.create(xl.blotName);e.children.head.children.forEach((()=>{const t=this.scroll.create(Cl.blotName,n);i.appendChild(t)}));const r=e.children.at(t);e.insertBefore(i,r)}rows(){const t=this.children.head;return null==t?[]:t.children.map((t=>t))}}function Al(){return`row-${Math.random().toString(36).slice(2,6)}`}El.allowedChildren=[Tl],Tl.requiredContainer=El,Tl.allowedChildren=[xl],xl.requiredContainer=Tl,xl.allowedChildren=[Cl],Cl.requiredContainer=xl;const Sl=Co("quill:toolbar");class Il extends qo{constructor(t,e){if(super(t,e),Array.isArray(this.options.container)){const e=document.createElement("div");e.setAttribute("role","toolbar"),function(t,e){Array.isArray(e[0])||(e=[e]),e.forEach((e=>{const n=document.createElement("span");n.classList.add("ql-formats"),e.forEach((t=>{if("string"==typeof t)Nl(n,t);else{const e=Object.keys(t)[0],i=t[e];Array.isArray(i)?function(t,e,n){const i=document.createElement("select");i.classList.add(`ql-${e}`),n.forEach((t=>{const e=document.createElement("option");!1!==t?e.setAttribute("value",String(t)):e.setAttribute("selected","selected"),i.appendChild(e)})),t.appendChild(i)}(n,e,i):Nl(n,e,i)}})),t.appendChild(n)}))}(e,this.options.container),t.container?.parentNode?.insertBefore(e,t.container),this.container=e}else"string"==typeof this.options.container?this.container=document.querySelector(this.options.container):this.container=this.options.container;this.container instanceof HTMLElement?(this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach((t=>{const e=this.options.handlers?.[t];e&&this.addHandler(t,e)})),Array.from(this.container.querySelectorAll("button, select")).forEach((t=>{this.attach(t)})),this.quill.on(Wo.events.EDITOR_CHANGE,(()=>{const[t]=this.quill.selection.getRange();this.update(t)}))):Sl.error("Container required for toolbar",this.options)}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find((t=>0===t.indexOf("ql-")));if(!e)return;if(e=e.slice(3),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null==this.handlers[e]&&null==this.quill.scroll.query(e))return void Sl.warn("ignoring attaching to nonexistent format",e,t);const n="SELECT"===t.tagName?"change":"click";t.addEventListener(n,(n=>{let i;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;const e=t.options[t.selectedIndex];i=!e.hasAttribute("selected")&&(e.value||!1)}else i=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),n.preventDefault();this.quill.focus();const[r]=this.quill.selection.getRange();if(null!=this.handlers[e])this.handlers[e].call(this,i);else if(this.quill.scroll.query(e).prototype instanceof Hr){if(i=prompt(`Enter ${e}`),!i)return;this.quill.updateContents((new Jr).retain(r.index).delete(r.length).insert({[e]:i}),Wo.sources.USER)}else this.quill.format(e,i,Wo.sources.USER);this.update(r)})),this.controls.push([e,t])}update(t){const e=null==t?{}:this.quill.getFormat(t);this.controls.forEach((n=>{const[i,r]=n;if("SELECT"===r.tagName){let n=null;if(null==t)n=null;else if(null==e[i])n=r.querySelector("option[selected]");else if(!Array.isArray(e[i])){let t=e[i];"string"==typeof t&&(t=t.replace(/"/g,'\\"')),n=r.querySelector(`option[value="${t}"]`)}null==n?(r.value="",r.selectedIndex=-1):n.selected=!0}else if(null==t)r.classList.remove("ql-active"),r.setAttribute("aria-pressed","false");else if(r.hasAttribute("value")){const t=e[i],n=t===r.getAttribute("value")||null!=t&&t.toString()===r.getAttribute("value")||null==t&&!r.getAttribute("value");r.classList.toggle("ql-active",n),r.setAttribute("aria-pressed",n.toString())}else{const t=null!=e[i];r.classList.toggle("ql-active",t),r.setAttribute("aria-pressed",t.toString())}}))}}function Nl(t,e,n){const i=document.createElement("button");i.setAttribute("type","button"),i.classList.add(`ql-${e}`),i.setAttribute("aria-pressed","false"),null!=n?(i.value=n,i.setAttribute("aria-label",`${e}: ${n}`)):i.setAttribute("aria-label",e),t.appendChild(i)}Il.DEFAULTS={},Il.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(null!=t)if(0===t.length){const t=this.quill.getFormat();Object.keys(t).forEach((t=>{null!=this.quill.scroll.query(t,yr.INLINE)&&this.quill.format(t,!1,Wo.sources.USER)}))}else this.quill.removeFormat(t.index,t.length,Wo.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();"rtl"===t&&null==e?this.quill.format("align","right",Wo.sources.USER):t||"right"!==e||this.quill.format("align",!1,Wo.sources.USER),this.quill.format("direction",t,Wo.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),i=parseInt(n.indent||0,10);if("+1"===t||"-1"===t){let e="+1"===t?1:-1;"rtl"===n.direction&&(e*=-1),this.quill.format("indent",i+e,Wo.sources.USER)}},link(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,Wo.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);"check"===t?"checked"===n.list||"unchecked"===n.list?this.quill.format("list",!1,Wo.sources.USER):this.quill.format("list","unchecked",Wo.sources.USER):this.quill.format("list",t,Wo.sources.USER)}}};const Ll='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',_l={align:{"":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',center:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',right:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',justify:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>'},background:'<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquote:'<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',bold:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',clean:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',code:Ll,"code-block":Ll,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',3:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',4:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',5:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',6:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'};let kl=0;function Ol(t,e){t.setAttribute(e,`${!("true"===t.getAttribute(e))}`)}const Pl=class{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(()=>{this.togglePicker()})),this.label.addEventListener("keydown",(t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Ol(this.label,"aria-expanded"),Ol(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const n=t.getAttribute("value");return n&&e.setAttribute("data-value",n),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",(()=>{this.selectItem(e,!0)})),e.addEventListener("keydown",(t=>{switch(t.key){case"Enter":this.selectItem(e,!0),t.preventDefault();break;case"Escape":this.escape(),t.preventDefault()}})),e}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${kl}`,kl+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach((e=>{const n=this.buildItem(e);t.appendChild(n),!0===e.selected&&this.selectItem(n)})),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach((t=>{this.container.setAttribute(t.name,t.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout((()=>this.label.focus()),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.container.querySelector(".ql-selected");t!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);const e=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}},Ml=class extends Pl{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach((t=>{t.classList.add("ql-primary")}))}buildItem(t){const e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);const n=this.label.querySelector(".ql-color-label"),i=t&&t.getAttribute("data-value")||"";n&&("line"===n.tagName?n.style.stroke=i:n.style.fill=i)}},jl=class extends Pl{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach((t=>{t.innerHTML=e[t.getAttribute("data-value")||""]})),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const n=t||this.defaultItem;if(null!=n){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}},ql=class{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,(t=>{const{overflowY:e}=getComputedStyle(t,null);return"visible"!==e&&"clip"!==e})(this.quill.root)&&this.quill.root.addEventListener("scroll",(()=>{this.root.style.marginTop=-1*this.quill.root.scrollTop+"px"})),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${n}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),r=this.root.getBoundingClientRect();let s=0;if(r.right>i.right&&(s=i.right-r.right,this.root.style.left=`${e+s}px`),r.left<i.left&&(s=i.left-r.left,this.root.style.left=`${e+s}px`),r.bottom>i.bottom){const e=r.bottom-r.top,i=t.bottom-t.top+e;this.root.style.top=n-i+"px",this.root.classList.add("ql-flip")}return s}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},Dl=[!1,"center","right","justify"],Bl=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],$l=[!1,"serif","monospace"],Rl=["1","2","3",!1],Ul=["small",!1,"large","huge"];class Vl extends Uo{constructor(t,e){super(t,e);const n=e=>{document.body.contains(t.root)?(null==this.tooltip||this.tooltip.root.contains(e.target)||document.activeElement===this.tooltip.textbox||this.quill.hasFocus()||this.tooltip.hide(),null!=this.pickers&&this.pickers.forEach((t=>{t.container.contains(e.target)||t.close()}))):document.body.removeEventListener("click",n)};t.emitter.listenDOM("click",document.body,n)}addModule(t){const e=super.addModule(t);return"toolbar"===t&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach((t=>{(t.getAttribute("class")||"").split(/\s+/).forEach((n=>{if(n.startsWith("ql-")&&(n=n.slice(3),null!=e[n]))if("direction"===n)t.innerHTML=e[n][""]+e[n].rtl;else if("string"==typeof e[n])t.innerHTML=e[n];else{const i=t.value||"";null!=i&&e[n][i]&&(t.innerHTML=e[n][i])}}))}))}buildPickers(t,e){this.pickers=Array.from(t).map((t=>{if(t.classList.contains("ql-align")&&(null==t.querySelector("option")&&Fl(t,Dl),"object"==typeof e.align))return new jl(t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){const n=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&Fl(t,Bl,"background"===n?"#ffffff":"#000000"),new Ml(t,e[n])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?Fl(t,$l):t.classList.contains("ql-header")?Fl(t,Rl):t.classList.contains("ql-size")&&Fl(t,Ul)),new Pl(t)})),this.quill.on(To.events.EDITOR_CHANGE,(()=>{this.pickers.forEach((t=>{t.update()}))}))}}Vl.DEFAULTS=vr({},Uo.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");null==t&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",(()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""})),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class Hl extends ql{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",(t=>{"Enter"===t.key?(this.save(),t.preventDefault()):"Escape"===t.key&&(this.cancel(),t.preventDefault())}))}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null==this.textbox)return;null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const n=this.quill.getBounds(this.quill.selection.savedRange);null!=n&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,To.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,To.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=function(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}(t);case"formula":{if(!t)break;const e=this.quill.getSelection(!0);if(null!=e){const n=e.index+e.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),t,To.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(n+1," ",To.sources.USER),this.quill.setSelection(n+2,To.sources.USER)}break}}this.textbox.value="",this.hide()}}function Fl(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach((e=>{const i=document.createElement("option");e===n?i.setAttribute("selected","selected"):i.setAttribute("value",String(e)),t.appendChild(i)}))}const zl=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Gl extends Hl{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(t,e){super(t,e),this.quill.on(To.events.EDITOR_CHANGE,((t,e,n,i)=>{if(t===To.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&i===To.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const t=this.quill.getLines(e.index,e.length);if(1===t.length){const t=this.quill.getBounds(e);null!=t&&this.position(t)}else{const n=t[t.length-1],i=this.quill.getIndex(n),r=Math.min(n.length()-1,e.index+e.length-i),s=this.quill.getBounds(new Ao(i,r));null!=s&&this.position(s)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()}))}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",(()=>{this.root.classList.remove("ql-editing")})),this.quill.on(To.events.SCROLL_OPTIMIZE,(()=>{setTimeout((()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(null!=t){const e=this.quill.getBounds(t);null!=e&&this.position(e)}}),1)}))}cancel(){this.show()}position(t){const e=super.position(t),n=this.root.querySelector(".ql-tooltip-arrow");return n.style.marginLeft="",0!==e&&(n.style.marginLeft=-1*e-n.offsetWidth/2+"px"),e}}class Zl extends Vl{constructor(t,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=zl),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new Gl(this.quill,this.options.bounds),null!=t.container&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),_l),this.buildPickers(t.container.querySelectorAll("select"),_l))}}Zl.DEFAULTS=vr({},Vl.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Wo.sources.USER)}}}}});const Wl=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Jl extends Hl{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",(t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(t=>{if(null!=this.linkRange){const t=this.linkRange;this.restoreFocus(),this.quill.formatText(t,"link",!1,To.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()})),this.quill.on(To.events.SELECTION_CHANGE,((t,e,n)=>{if(null!=t){if(0===t.length&&n===To.sources.USER){const[e,n]=this.quill.scroll.descendant(hl,t.index);if(null!=e){this.linkRange=new Ao(t.index-n,e.length());const i=hl.formats(e.domNode);this.preview.textContent=i,this.preview.setAttribute("href",i),this.show();const r=this.quill.getBounds(this.linkRange);return void(null!=r&&this.position(r))}}else delete this.linkRange;this.hide()}}))}show(){super.show(),this.root.removeAttribute("data-mode")}}class Kl extends Vl{constructor(t,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=Wl),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){null!=t.container&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),_l),this.buildPickers(t.container.querySelectorAll("select"),_l),this.tooltip=new Jl(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},((e,n)=>{t.handlers.link.call(t,!n.format.link)})))}}Kl.DEFAULTS=vr({},Vl.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const t=this.quill.getSelection();if(null==t||0===t.length)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&0!==e.indexOf("mailto:")&&(e=`mailto:${e}`);const{tooltip:n}=this.quill.theme;n.edit("link",e)}else this.quill.format("link",!1,Wo.sources.USER)}}}}});const Yl=Kl;ol.register({"attributors/attribute/direction":ba,"attributors/class/align":aa,"attributors/class/background":ha,"attributors/class/color":da,"attributors/class/direction":ya,"attributors/class/font":xa,"attributors/class/size":Ea,"attributors/style/align":la,"attributors/style/background":pa,"attributors/style/color":ua,"attributors/style/direction":wa,"attributors/style/font":Ta,"attributors/style/size":Aa},!0),ol.register({"formats/align":aa,"formats/direction":ya,"formats/indent":ll,"formats/background":pa,"formats/color":ua,"formats/font":xa,"formats/size":Ea,"formats/blockquote":class extends lo{static blotName="blockquote";static tagName="blockquote"},"formats/code-block":ga,"formats/header":class extends lo{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(t){return this.tagName.indexOf(t.tagName)+1}},"formats/list":dl,"formats/bold":ul,"formats/code":ma,"formats/italic":class extends ul{static blotName="italic";static tagName=["EM","I"]},"formats/link":hl,"formats/script":class extends ao{static blotName="script";static tagName=["SUB","SUP"];static create(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):super.create(t)}static formats(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}},"formats/strike":class extends ul{static blotName="strike";static tagName=["S","STRIKE"]},"formats/underline":class extends ao{static blotName="underline";static tagName="U"},"formats/formula":class extends Bo{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(t){if(null==window.katex)throw new Error("Formula module requires KaTeX.");const e=super.create(t);return"string"==typeof t&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}},"formats/image":class extends Hr{static blotName="image";static tagName="IMG";static create(t){const e=super.create(t);return"string"==typeof t&&e.setAttribute("src",this.sanitize(t)),e}static formats(t){return fl.reduce(((e,n)=>(t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e)),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return pl(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){fl.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}},"formats/video":class extends co{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(t){const e=super.create(t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}static formats(t){return gl.reduce(((e,n)=>(t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e)),{})}static sanitize(t){return hl.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){gl.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}},"modules/syntax":wl,"modules/table":class extends qo{static register(){Wo.register(Cl),Wo.register(xl),Wo.register(Tl),Wo.register(El)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(El).forEach((t=>{t.balanceCells()}))}deleteColumn(){const[t,,e]=this.getTable();null!=e&&(t.deleteColumn(e.cellOffset()),this.quill.update(Wo.sources.USER))}deleteRow(){const[,t]=this.getTable();null!=t&&(t.remove(),this.quill.update(Wo.sources.USER))}deleteTable(){const[t]=this.getTable();if(null==t)return;const e=t.offset();t.remove(),this.quill.update(Wo.sources.USER),this.quill.setSelection(e,Wo.sources.SILENT)}getTable(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(null==t)return[null,null,null,-1];const[e,n]=this.quill.getLine(t.index);if(null==e||e.statics.blotName!==Cl.blotName)return[null,null,null,-1];const i=e.parent;return[i.parent.parent,i,e,n]}insertColumn(t){const e=this.quill.getSelection();if(!e)return;const[n,i,r]=this.getTable(e);if(null==r)return;const s=r.cellOffset();n.insertColumn(s+t),this.quill.update(Wo.sources.USER);let o=i.rowOffset();0===t&&(o+=1),this.quill.setSelection(e.index+o,e.length,Wo.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const e=this.quill.getSelection();if(!e)return;const[n,i,r]=this.getTable(e);if(null==r)return;const s=i.rowOffset();n.insertRow(s+t),this.quill.update(Wo.sources.USER),t>0?this.quill.setSelection(e,Wo.sources.SILENT):this.quill.setSelection(e.index+i.children.length,e.length,Wo.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){const n=this.quill.getSelection();if(null==n)return;const i=new Array(t).fill(0).reduce((t=>{const n=new Array(e).fill("\n").join("");return t.insert(n,{table:Al()})}),(new Jr).retain(n.index));this.quill.updateContents(i,Wo.sources.USER),this.quill.setSelection(n.index,Wo.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(Wo.events.SCROLL_OPTIMIZE,(t=>{t.some((t=>!!["TD","TR","TBODY","TABLE"].includes(t.target.tagName)&&(this.quill.once(Wo.events.TEXT_CHANGE,((t,e,n)=>{n===Wo.sources.USER&&this.balanceTables()})),!0)))}))}},"modules/toolbar":Il,"themes/bubble":Zl,"themes/snow":Yl,"ui/icons":_l,"ui/picker":Pl,"ui/icon-picker":jl,"ui/color-picker":Ml,"ui/tooltip":ql},!0);const Xl=ol;class Ql{constructor(t,e,n){this.e=t,this.editor=e,this.page=n,this.contentDataManager=new Be(this.editor,this.page),this.init()}init(){this.openContentEditModal(),this.openImageEditModal(),this.openDeleteImageModal(),this.updateCtaButtonImage()}openContentEditModal(){if(this.e.target.closest(".tb-edit-content-icon")){const t=document.createElement("div"),e=document.createElement("div");e.id="editor",e.innerHTML=`${this.getDescription()}`;const n=document.createElement("div");n.classList.add("popup-footer"),n.style.marginBottom="-12px";const i=this.createButton("submit_form","tb-btn-primary","Save"),r=this.createButton("cancel_form","tb-btn-secondary","Cancel");n.appendChild(i),n.appendChild(r),t.appendChild(e),t.appendChild(n);const s=new l({title:"Edit Content",width:"500px",body:t});s.open(),new Xl("#editor",{modules:{toolbar:[["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}]]},theme:"snow"}),i.addEventListener("click",(()=>{const t=document.querySelector("#editor .ql-editor");this.contentDataManager.saveContentDescription(t.innerHTML),s.close()})),r.addEventListener("click",(()=>{s.close()}))}}openImageEditModal(){if(this.e.target.closest(".tb-edit-image-icon")){const t=document.createElement("div");t.classList.add("tb-modal"),t.style.display="flex",new He("content").render(t);const e=document.createElement("input");e.type="file",e.multiple=!0,e.accept="image/jpeg, image/jpg, image/png",e.id="fileInput",e.style.display="none",document.body.appendChild(t),document.body.appendChild(e)}}openDeleteImageModal(){if(this.e.target.closest(".tb-delete-image-icon")){if("Location"===this.page.PageName||"Reception"===this.page.PageName)return;new $e("Are you sure you want to delete this media file?","Delete media",(()=>{return t=this,e=void 0,i=function*(){this.contentDataManager.deleteContentImage()},new((n=void 0)||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i})).render(document.body)}}updateCtaButtonImage(){const t=this.e.target.closest(".edit-cta-image");if(t){const e=t.closest(".img-button-container");globalThis.ctaContainerId=e?e.id:"";const n=document.createElement("div");n.classList.add("tb-modal"),n.style.display="flex",new He("cta").render(n);const i=document.createElement("input");i.type="file",i.multiple=!0,i.accept="image/jpeg, image/jpg, image/png",i.id="fileInput",i.style.display="none",document.body.appendChild(n),document.body.appendChild(i)}}getDescription(){if(this.e.target.closest(".content-page-block")){const t=this.editor.Components.getWrapper().find("#contentDescription")[0];if(t)return t.getEl().innerHTML}}createButton(t,e,n){const i=document.createElement("button");return i.id=t,i.classList.add("tb-btn",e),i.innerText=n,i}}class tc{constructor(t){this.frameId=t}init(){const t=document.getElementById(this.frameId);t&&(console.log("frameClickListener",t),t.addEventListener("click",(t=>{console.log("frameClickListener",this.frameId)})))}activateEditor(){document.querySelectorAll(".mobile-frame").forEach((t=>{t.classList.remove("active-editor"),t.id.includes(this.frameId)&&t.classList.add("active-editor")}))}}class ec{constructor(t,e,n){this.toolboxService=t,this.appVersionManager=e,this.parentPage=n,console.log(n),this.pageAttacher=new ie;const i=this.render(),r=document.getElementById("child-container");null==r||r.appendChild(i)}render(){const t=document.createElement("div");t.classList.add("menu-container");const e=document.createElement("button");if(e.classList.add("menu-button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24.053" height="26.783" viewBox="0 0 24.053 26.783">                 <path class="icon-path" d="M2.672.038a2.041,2.041,0,0,0-1.4.408,2.87,2.87,0,0,0-1.154,1.6l-.094.3V22.761l.093.32a2.724,2.724,0,0,0,.7,1.207,2.65,2.65,0,0,0,1.04.706l.288.117H7.692c5.545,0,5.555,0,5.629.083a4.979,4.979,0,0,0,.418.337A6.472,6.472,0,0,0,16.6,26.738a8.81,8.81,0,0,0,2,0,6.5,6.5,0,0,0,5.409-5.425,7.669,7.669,0,0,0-.023-2.078,6.5,6.5,0,0,0-4.323-5.046,5.3,5.3,0,0,0-.516-.152L19,14.012l.012-2.195c.01-1.66,0-2.305-.042-2.651l-.054-.457-.445-.487Q16.888,6.5,15.289,4.8c-3.2-3.414-4.34-4.6-4.541-4.714A23.429,23.429,0,0,0,6.971.016q-2.15-.009-4.3.022m6.82,4.753a14.651,14.651,0,0,0,.1,3.184,2.955,2.955,0,0,0,1.551,1.847c.5.24.518.241,4.914.258l1.135.005V13.85l-.371.051a6.48,6.48,0,0,0-5.495,8.034,6.926,6.926,0,0,0,.4,1.126l.083.162H2.345l-.168-.144a1.487,1.487,0,0,1-.269-.315l-.1-.171L1.8,12.612l-.01-9.98L1.9,2.4a.736.736,0,0,1,.626-.476c.123-.013,1.737-.026,3.585-.03l3.361-.006.018,2.9m3.87.641c.885.935,1.82,1.926,2.078,2.2l.468.5-.531.032c-.292.018-1.155.024-1.917.014-1.6-.022-1.718-.041-1.925-.3a1.537,1.537,0,0,1-.171-.27c-.056-.133-.1-3.62-.053-4.071l.028-.261.206.227c.114.125.932.992,1.817,1.927m5.066,9.959a5.047,5.047,0,0,1,3.626,2.649,4.5,4.5,0,0,1,.545,2.29,4.806,4.806,0,0,1-.843,2.818,6.309,6.309,0,0,1-1.393,1.374,5.022,5.022,0,0,1-7.053-1.6,5.09,5.09,0,0,1-.467-4.129A5.21,5.21,0,0,1,14.1,16.765a4.988,4.988,0,0,1,4.328-1.374m-.972,1.85a.638.638,0,0,0-.241.158l-.119.124-.012,1.223-.012,1.223H15.9c-1.1,0-1.182,0-1.305.08a.528.528,0,0,0-.217.721c.146.272.206.283,1.523.283h1.176v1.191c0,1.124,0,1.2.081,1.322a.539.539,0,0,0,.913-.01c.063-.1.072-.242.083-1.305l.012-1.2H19.33c1.263,0,1.307-.006,1.479-.225a.6.6,0,0,0,0-.611c-.143-.234-.229-.248-1.5-.248H18.161V18.854a11.308,11.308,0,0,0-.041-1.265.549.549,0,0,0-.663-.348" fill="#6e7276" fill-rule="evenodd"/>             </svg>',"Home"==this.parentPage.PageName)e.addEventListener("click",(t=>{t.preventDefault(),this.createNewPage("Untitled")}));else{const n=this.createDropDownMenu(e);t.appendChild(n),e.addEventListener("mouseover",(()=>{var e;t.getBoundingClientRect(),((null===(e=null==t?void 0:t.parentNode)||void 0===e?void 0:e.children)||[]).length>2?(n.style.top="60px",n.style.left="-100%"):(n.style.top="-10px",n.style.left="100%")}))}return t.appendChild(e),t}createDropDownMenu(t){const n=document.createElement("div");n.classList.add("menu"),n.id="dropdownMenu";const i=document.createElement("div");i.classList.add("menu-item"),i.textContent="Add menu page",i.addEventListener("click",(()=>{this.createNewPage("Untitled")}));const r=document.createElement("div");return r.classList.add("menu-item"),r.textContent="Add content page",r.addEventListener("click",(()=>{const t=e.getInstance();t.UC.ServiceCreationParentPageType=this.parentPage.PageType,t.addServiceButtonEvent()})),n.appendChild(i),n.appendChild(r),t.addEventListener("click",(t=>{t.preventDefault()})),n}createNewPage(t){return e=this,n=void 0,r=function*(){const e=globalThis.activeVersion;this.toolboxService.createMenuPage(e.AppVersionId,t).then((t=>{if(t.error.message)console.error("error",t.error.message);else{const e={PageId:t.MenuPage.PageId,PageName:t.MenuPage.PageName,TileName:t.MenuPage.PageName,PageType:t.MenuPage.PageType};this.pageAttacher.attachToTile(e,"Menu","Menu")}}))},new((i=void 0)||(i=Promise))((function(t,s){function o(t){try{l(r.next(t))}catch(t){s(t)}}function a(t){try{l(r.throw(t))}catch(t){s(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(o,a)}l((r=r.apply(e,n||[])).next())}));var e,n,i,r}}class nc{constructor(t){this.pageId=t||null}updateTile(t,e=!1){this.rowComponent=t;const n=t.components(),i=n.length;n.forEach((t=>{const n=t.find(".add-button-right")[0];n&&n.addStyle({display:i>=3?"none":"flex"});const r={"justify-content":3===i?"center":"start","align-items":3===i?"center":"start"},s={"text-align":3===i?"center":"left"};this.updateTileHeight(t,i),this.updateAlignment(t,r,s),this.updateTileTitleLength(t,i),e||this.updateTileAttributes(t.getId(),"Align",r["justify-content"])}))}updateTileHeight(t,e){const n=t.find(".template-block")[0];1===e?n.getClasses().includes("first-tile")&&n.addClass("high-priority-template"):n.removeClass("high-priority-template")}updateAlignment(t,e,n){const i=t.find(".template-block")[0],r=t.find(".tile-title-section")[0];i.addStyle(e),r.addStyle(n)}updateTileTitleLength(t,e){var n;const i=t.find(".tile-title")[0];if(i){const t=3===e?11:2===e?15:20,r=this.truncateText(t,(null===(n=i.getAttributes())||void 0===n?void 0:n.title)||i.getEl().innerText);3===e?i.components(this.wrapTileTitle(r)):i.components(r)}}truncateText(t,e){const n=window.innerWidth;return e.length>(n<=280?t:t+4)?e.substring(0,n<=280?t:t+4).trim()+"..":e}wrapTileTitle(t){const e=t.split(" ");return e.length>1?e[0]+"<br>"+e[1]:t.replace("<br>","")}updateTileAttributes(t,e,n){let i=n;"start"===n&&(i="left"),new hn(this.pageId).updateTile(t,e,i)}}class ic{constructor(t,e,n,i){this.event=t,this.editor=e,this.pageId=n,this.frameId=i,this.tileUpdate=new nc(n),globalThis.tileMapper=new hn(this.pageId),this.init()}init(){this.addTileBottom(),this.addTileRight(),this.deleteTile(),this.removeTileIcon(),this.removeTileTile(),this.removeCTa()}addTileBottom(){var t;const e=this.event.target.closest(".action-button.add-button-bottom");if(e){const n=e.closest(".template-wrapper");if(!n)return;let i=n.parentElement,r=null==i?void 0:i.parentElement;if(!i||!r)return;const s=Array.from(r.children).indexOf(i),o=this.editor.Components.getWrapper().find("#"+r.id)[0];if(!o)return;const a=this.editor.Components.addComponent(this.getTileRow());o.append(a,{at:s+1});const l=null===(t=a.find(".template-wrapper")[0])||void 0===t?void 0:t.getId();globalThis.tileMapper.addFreshRow(a.getId(),l)}}addTileRight(){var t;const e=this.event.target.closest(".action-button.add-button-right");if(e){const n=e.closest(".template-wrapper"),i=this.editor.Components.getWrapper().find("#"+(null==n?void 0:n.id))[0];if(!i)return;const r=i.parent();if(r.components().filter((t=>"tile-wrapper"===t.get("type"))).length>=3)return;const s=this.editor.Components.addComponent(this.getTile()),o=i.index();r.append(s,{at:o+1}),globalThis.tileMapper.addTile(null===(t=null==n?void 0:n.parentElement)||void 0===t?void 0:t.id,s.getId()),this.tileUpdate.updateTile(r)}}deleteTile(){const t=this.event.target.closest(".action-button.delete-button");if(t){const e=t.closest(".template-wrapper");if(e){const t=this.editor.Components.getWrapper().find("#"+(null==e?void 0:e.id))[0],n=t.parent();t.remove(),this.tileUpdate.updateTile(n),globalThis.tileMapper.removeTile(t.getId(),n.getId()),this.removeEditor(t.getId())}}}removeTileIcon(){const t=this.event.target.closest(".tile-close-icon");if(t){const e=t.closest(".template-wrapper");if(e){const t=this.editor.Components.getWrapper().find("#"+(null==e?void 0:e.id))[0];if(this.checkTileHasIconOrTitle(t)){globalThis.tileMapper.updateTile(t.getId(),"Icon","");const e=t.find(".tile-icon-section")[0];e&&e.addStyle({display:"none"})}else console.warn("Tile has no icon or title")}}}removeTileTile(){const t=this.event.target.closest(".tile-close-title");if(t){const e=t.closest(".template-wrapper");if(e){const t=this.editor.Components.getWrapper().find("#"+(null==e?void 0:e.id))[0];if(this.checkTileHasIconOrTitle(t)){globalThis.tileMapper.updateTile(t.getId(),"Text","");const e=t.find(".tile-title-section")[0];e&&e.addStyle({display:"none"})}else console.warn("Tile has no icon or title")}}}checkTileHasIconOrTitle(t){const e=t.parent();if(!e)return!1;const n=globalThis.tileMapper.getTile(e.getId(),t.getId());return!!(n&&n.Icon&&n.Text)}removeCTa(){const t=this.event.target.closest(".cta-badge");t&&(new _).removeCta(t)}removeEditor(t){document.querySelectorAll(".mobile-frame").forEach((e=>{const n=e.querySelector(`#${t}`);if(n&&console.log(n),e.id.includes(this.frameId)){let t=e.nextElementSibling;for(;t;){const e=t;t=t.nextElementSibling,e&&(e.remove(),(new sc).activateNavigators())}}}))}getTileRow(){const t=this.getTile();return`<div class="container-row" ${b} id="${x(8)}">${t}</div>`}getTile(){return`\n      <div ${m} class="template-wrapper" id="${x(8)}">\n        <div ${g} class="template-block" style="background-color: transparent; color: #333333; justify-content: left">\n            <div ${v} id="igtdq" data-gjs-type="default" class="tile-icon-section">\n              <span ${v} id="is1dw" data-gjs-type="text" class="tile-close-icon top-right selected-tile-title">×</span>\n              <span ${v} id="ic26t" data-gjs-type="text" class="tile-icon">Title</span>\n            </div>\n            <div ${v} id="igtdq" data-gjs-type="default" class="tile-title-section">\n              <span ${v} id="is1dw" data-gjs-type="text" class="tile-close-icon top-right selected-tile-title">×</span>\n              <span ${v} style="display: block" id="ic26t" data-gjs-type="text" is-hidden="false" title="Title" class="tile-title">Title</span>\n            </div>\n        </div>\n        <button ${v} id="i9sxl" data-gjs-type="default" title="Delete template" class="action-button delete-button">&minus;</button>\n        <button ${v} id="ifvvi" data-gjs-type="default" title="Add template right" class="action-button add-button-right">+</button>\n        <button ${v} id="i4ubt" data-gjs-type="default" title="Delete template" class="action-button add-button-bottom">&plus;</button>\n        <svg ${v} class="tile-open-menu" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 27 27">\n          <g ${v} id="Group_2383" data-name="Group 2383" transform="translate(-921 -417.999)">\n            <g ${v} id="Group_2382" data-name="Group 2382" transform="translate(921 418)">\n              <circle ${v} id="Ellipse_534" data-name="Ellipse 534" cx="13.5" cy="13.5" r="13.5" transform="translate(0 -0.001)" fill="#6a747f"/>\n            </g>\n            <path ${v} id="Path_2320" data-name="Path 2320" d="M1.7,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,1.7,0ZM7.346,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,7.346,0ZM13,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,13,0Z" transform="translate(927 430)" fill="#fff"/>\n          </g>\n        </svg>\n      </div>\n    `}}var rc=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class sc{constructor(){this.handleComponentAdd=t=>{var e;const n=t.parent();n&&(null===(e=n.getEl())||void 0===e?void 0:e.classList.contains("container-row"))&&3===n.components().filter((t=>"tile-wrapper"===t.get("type"))).length&&console.log("more than 3")},this.appVersionManager=new d,this.toolboxService=new o,this.themeManager=new q}init(t,e,n){this.editor=t,this.pageData=e,this.pageId=e.PageId,this.frameId=n,new tc(this.frameId),this.onDragAndDrop(),this.onSelected(),this.onComponentUpdate(),this.onLoad()}onLoad(){void 0!==this.editor&&this.editor.on("load",(()=>{const t=this.editor.getWrapper();t?(t.view.el.addEventListener("click",(t=>{const e=t.target;e.closest(".menu-container")||e.closest(".menu-category")||e.closest(".sub-menu-header")?t.stopPropagation():(this.clearAllMenuContainers(),this.tileManager=new ic(t,this.editor,this.pageId,this.frameId),globalThis.activeEditor=this.editor,globalThis.currentPageId=this.pageId,globalThis.pageData=this.pageData,(new fn).unDoReDo(),new Ql(t,this.editor,this.pageData),this.activateEditor())})),t.view.el.addEventListener("mouseover",(t=>{const e=t.target;if(e.closest(".tile-open-menu")){const t=e.closest(".tile-open-menu"),n=t.closest(".template-wrapper");this.clearAllMenuContainers();const i=document.getElementById(`${this.frameId}-frame`),r=null==i?void 0:i.querySelector("iframe"),s=null==r?void 0:r.getBoundingClientRect(),o=new xe(n,i),a=t.getBoundingClientRect();o.render(a,s)}}))):console.error("Wrapper not found!"),this.frameEventListener(),this.activateNavigators()}))}clearAllMenuContainers(){document.querySelectorAll(".menu-container").forEach((t=>{t.remove()}))}onComponentUpdate(){this.editor.on("component:update",(t=>{window.dispatchEvent(new CustomEvent("pageChanged",{detail:{pageId:this.pageId}}))}))}onDragAndDrop(){let t,e;const n=new hn(this.pageId),i=new S(this.pageId);this.editor.on("component:drag:start",(e=>{t=e.parent})),this.editor.on("component:drag:end",(r=>{e=r.parent;const s=e.getEl();if(s&&s.classList.contains("container-row")){r.parent.components().filter((t=>"tile-wrapper"===t.get("type"))).length>3&&(r.target.remove(),this.editor.UndoManager.undo());const i=!0,s=new nc;s.updateTile(e,i),s.updateTile(t,i),n.moveTile(r.target.getId(),t.getId(),e.getId(),r.index),this.onTileUpdate(e)}else s&&s.classList.contains("content-page-wrapper")?i.moveContentRow(r.target.getId(),r.index):s&&s.classList.contains("cta-button-container")&&i.moveCta(r.target.getId(),r.index)}))}onSelected(){this.editor.on("component:selected",(t=>{globalThis.selectedComponent=t,globalThis.tileMapper=new hn(this.pageId),globalThis.frameId=this.frameId,this.setTileProperties(),this.setCtaProperties(),this.createChildEditor()})),this.editor.on("component:deselected",(()=>{globalThis.selectedComponent=null}))}onTileUpdate(t){var e;t&&(null===(e=t.getEl())||void 0===e?void 0:e.classList.contains("container-row"))&&(this.editor.off("component:add",this.handleComponentAdd),this.editor.on("component:add",this.handleComponentAdd))}frameEventListener(){document.querySelectorAll(".mobile-frame").forEach((t=>{t.id.includes(this.frameId)&&t.addEventListener("click",(t=>{globalThis.activeEditor=this.editor,globalThis.currentPageId=this.pageId,globalThis.pageData=this.pageData,this.activateEditor()}))}))}activateEditor(){document.querySelectorAll(".mobile-frame").forEach((t=>{t.classList.remove("active-editor"),t.id.includes(this.frameId)&&(t.classList.add("active-editor"),this.toggleSidebar())}))}toggleSidebar(){return rc(this,void 0,void 0,(function*(){var t,e,n;const i=document.getElementById("tools-section"),r=document.querySelector("#mapping-section");if(i.style.display="block",r.style.display="none","Content"===(null===(t=this.pageData)||void 0===t?void 0:t.PageType)||"Location"===(null===(e=this.pageData)||void 0===e?void 0:e.PageType)||"Reception"===(null===(n=this.pageData)||void 0===n?void 0:n.PageType))new ve(this.pageData);else{const t=document.getElementById("menu-page-section"),e=document.getElementById("content-page-section");t&&(t.style.display="block"),e&&e.remove(),(new he).render(t)}}))}setTileProperties(){const t=globalThis.selectedComponent,e=t.parent(),n=e.parent(),i=globalThis.tileMapper.getTile(n.getId(),e.getId());t&&i&&(this.tileProperties=new O(t,i),this.tileProperties.setTileAttributes())}setCtaProperties(){const t=globalThis.selectedComponent,e=new S(this.pageId).getContentCta(t.getId());e&&new N(t,e).setctaAttributes()}createChildEditor(){return rc(this,void 0,void 0,(function*(){var t,e;const n=globalThis.selectedComponent,i=n.parent(),r=i.parent(),s=globalThis.tileMapper.getTile(r.getId(),i.getId());if(null===(t=null==s?void 0:s.Action)||void 0===t?void 0:t.ObjectId){const t=s.Action.ObjectId,n=JSON.parse(localStorage.getItem(`data-${t}`)||"{}");let i;i=Object.keys(n).length>0?n:null===(e=this.appVersionManager.getPages())||void 0===e?void 0:e.find((e=>e.PageId===t)),this.removeOtherEditors(),this.activateNavigators(),i&&new ee(t,i).init(s)}else this.removeOtherEditors(),n.getClasses().includes("template-block")&&(new ec(this.toolboxService,this.appVersionManager,this.pageData).render(),this.activateNavigators().scrollBy(200))}))}removeOtherEditors(){document.querySelectorAll(".mobile-frame").forEach((t=>{if(t.id.includes(this.frameId)){let e=t.nextElementSibling;for(;e;){const t=e;e=e.nextElementSibling,t&&t.remove()}}}))}activateNavigators(){const t=document.querySelector(".page-navigator-left"),e=document.querySelector(".page-navigator-right"),n=document.getElementById("child-container"),i=document.getElementById("scroll-left"),r=document.getElementById("scroll-right"),s=document.querySelectorAll(".mobile-frame"),o=document.querySelector(".menu-container"),a=o?o.clientWidth:0;Array.from(s).reduce(((t,e)=>t+e.clientWidth),0)+a>n.clientWidth?(t.style.display="flex",e.style.display="flex"):(t.style.display="none",e.style.display="none");const l=window.innerWidth<=1440?s.length>1?"flex-start":"center":s.length>3?"flex-start":"center";n.style.setProperty("justify-content",l);const c=t=>{const e=t+a;n.scrollTo({left:n.scrollLeft+e,behavior:"smooth"})};i.addEventListener("click",(()=>c(-200))),r.addEventListener("click",(()=>{c(200),console.log("menuContainer",null==o?void 0:o.clientWidth)}));const d=()=>{const{scrollLeft:t,scrollWidth:e,clientWidth:s}=n;i.style.display=t>0?"flex":"none",r.style.display=t+s<e?"flex":"none"};return d(),n.addEventListener("scroll",d),{updateButtonVisibility:d,scrollBy:c}}}class oc{constructor(t,e){this.title=e||"Page Name",this.id=t,this.container=document.createElement("div"),this.editor=new hc,this.editorWidth=globalThis.deviceWidth,this.init()}init(){this.container.classList.add("app-bar");const t=document.createElement("div");t.innerHTML='\n        <svg class="content-back-button" xmlns="http://www.w3.org/2000/svg" data-name="Group 14" width="47" height="47" viewBox="0 0 47 47">\n            <g id="Ellipse_6" data-name="Ellipse 6" fill="none" stroke="#262626" stroke-width="1">\n            <circle cx="23.5" cy="23.5" r="23.5" stroke="none"></circle>\n            <circle cx="23.5" cy="23.5" r="23" fill="none"></circle>\n            </g>\n            <path id="Icon_ionic-ios-arrow-round-up" data-name="Icon ionic-ios-arrow-round-up" d="M13.242,7.334a.919.919,0,0,1-1.294.007L7.667,3.073V19.336a.914.914,0,0,1-1.828,0V3.073L1.557,7.348A.925.925,0,0,1,.263,7.341.91.91,0,0,1,.27,6.054L6.106.26h0A1.026,1.026,0,0,1,6.394.07.872.872,0,0,1,6.746,0a.916.916,0,0,1,.64.26l5.836,5.794A.9.9,0,0,1,13.242,7.334Z" transform="translate(13 30.501) rotate(-90)" fill="#262626"></path>\n        </svg>\n        ';const e=t.firstElementChild;null==e||e.addEventListener("click",(t=>{t.preventDefault();const e=document.querySelector(`#${this.id}-frame`);if(e){let t=e.nextElementSibling;for(;t;){const e=t;t=t.nextElementSibling,e.remove()}e.remove(),(new sc).activateNavigators()}}));const n=document.createElement("div");n.classList.add("appbar-title-container");const i=document.createElement("h1");i.className="title";const r=this.editorWidth?this.editorWidth<=350?16:24:16,s=this.title.length>r?this.title.substring(0,r)+"...":this.title;i.setAttribute("title",this.title||"Page Name"),i.textContent=s||"Page Name";const o=document.createElement("div");o.classList.add("icon-container");const a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.id="edit_page_title",a.setAttribute("width","14px"),a.setAttribute("height","14px"),a.setAttribute("viewBox","0 0 24 24"),a.setAttribute("fill","none"),a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a.innerHTML='\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M18.4324 4C18.2266 4 18.0227 4.04055 17.8325 4.11933C17.6423 4.19811 17.4695 4.31358 17.3239 4.45914L5.25659 16.5265L4.42524 19.5748L7.47353 18.7434L19.5409 6.67608C19.6864 6.53051 19.8019 6.3577 19.8807 6.16751C19.9595 5.97732 20 5.77348 20 5.56761C20 5.36175 19.9595 5.1579 19.8807 4.96771C19.8019 4.77752 19.6864 4.60471 19.5409 4.45914C19.3953 4.31358 19.2225 4.19811 19.0323 4.11933C18.8421 4.04055 18.6383 4 18.4324 4ZM17.0671 2.27157C17.5 2.09228 17.9639 2 18.4324 2C18.9009 2 19.3648 2.09228 19.7977 2.27157C20.2305 2.45086 20.6238 2.71365 20.9551 3.04493C21.2864 3.37621 21.5492 3.7695 21.7285 4.20235C21.9077 4.63519 22 5.09911 22 5.56761C22 6.03611 21.9077 6.50003 21.7285 6.93288C21.5492 7.36572 21.2864 7.75901 20.9551 8.09029L8.69996 20.3454C8.57691 20.4685 8.42387 20.5573 8.25597 20.6031L3.26314 21.9648C2.91693 22.0592 2.54667 21.9609 2.29292 21.7071C2.03917 21.4534 1.94084 21.0831 2.03526 20.7369L3.39694 15.7441C3.44273 15.5762 3.53154 15.4231 3.6546 15.3001L15.9097 3.04493C16.241 2.71365 16.6343 2.45086 17.0671 2.27157Z" fill="#5068a8"></path>\n        ';const l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.id="save_page_title",l.style.display="none",l.setAttribute("width","24px"),l.setAttribute("height","24px"),l.setAttribute("viewBox","0 0 48 48"),l.setAttribute("fill","none"),l.innerHTML='\n            <rect width="48" height="48" fill="white" fill-opacity="0.01"/>\n            <path d="M43 11L16.875 37L5 25.1818" stroke="#5068a8" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>\n        ',o.appendChild(a),o.appendChild(l),a.addEventListener("click",(()=>{i.contentEditable="true",i.textContent=i.title,i.focus();const t=document.createRange();t.selectNodeContents(i),t.collapse(!1);const e=window.getSelection();null==e||e.removeAllRanges(),null==e||e.addRange(t),i.style.outline="none",i.style.whiteSpace="nowrap",i.style.overflow="hidden",i.style.textOverflow="clip",a.style.display="none",l.style.display="block",n.style.borderWidth="1px"})),i.addEventListener("input",(t=>{i.title=i.textContent||""})),l.addEventListener("click",(t=>{t.preventDefault(),(new d).updatePageTitle(i.title),this.resetTitle(i,a,l,n)})),e&&this.container.appendChild(e),n.appendChild(i),n.appendChild(a),n.appendChild(l),this.container.appendChild(n)}resetTitle(t,e,n,i){t.contentEditable="false",e.style.display="block",n.style.display="none",i.style.removeProperty("border-width"),t.style.whiteSpace="",t.style.overflow="",t.style.textOverflow="";const r=this.editorWidth?this.editorWidth<=350?16:24:16;t.textContent&&t.textContent.length>r&&(t.textContent=t.textContent.substring(0,r)+"...")}render(t){t.appendChild(this.container)}}class ac{constructor(t,e=!1,n,i){this.container=document.createElement("div"),this.id=t,this.isHome=e,this.pageName=i,this.pageData=n,this.init()}init(){this.container.className="mobile-frame",this.container.id=`${this.id}-frame`,this.container.setAttribute("data-pageid","1");const t=new p,e=new f,n=new oc(this.id,this.pageName);t.render(this.container),this.isHome?e.render(this.container):n.render(this.container);const i=document.createElement("div");i.id=this.id,this.container.appendChild(i),new u(this.pageData,this.container)}render(t){t.appendChild(this.container)}}class lc{constructor(t){this.pageId=t,this.container=document.createElement("div"),this.init()}init(){this.container.style.justifyContent="center",this.container.className="frame-list",this.container.id="child-container",new ac(`${this.pageId}`,!0).render(this.container)}render(t){t.appendChild(this.container)}}class cc{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.style.display="none",this.container.className="navigator page-navigator-left",this.container.innerHTML='<span id="scroll-left"><i class="fa fa-arrow-left-long"></i></span>',this.container.addEventListener("click",(t=>{}))}render(t){t.appendChild(this.container)}}class dc{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.style.display="none",this.container.className="navigator page-navigator-right",this.container.innerHTML='<span id="scroll-right"><i class="fa fa-arrow-right-long"></i></span>',this.container.addEventListener("click",(t=>{}))}render(t){t.appendChild(this.container)}}var uc=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class hc{constructor(){this.editors=[],this.config=e.getInstance(),this.organisationLogo=this.config.organisationLogo,this.appVersion=new d,this.themeManager=new q,this.toolboxService=new o,this.editorEvents=new sc,this.jsonToGrapes=new Wt(this)}init(){return uc(this,void 0,void 0,(function*(){const t=yield this.appVersion.getActiveVersion();this.homepage=null==t?void 0:t.Pages.find((t=>"Home"===t.PageName)),document.getElementById("main-content").innerHTML="",this.setUpEditorFrame(),this.setUpEditor()}))}setUpEditorFrame(){const t=new cc,e=new dc,n=new lc("gjs-0"),i=document.getElementById("main-content");t.render(i),n.render(i),e.render(i),this.setClientWidth(n.container)}setClientWidth(t){const e=t.querySelector(".mobile-frame");e&&(globalThis.deviceWidth=e.clientWidth,globalThis.deviceHeight=e.clientHeight)}setUpEditor(){return uc(this,void 0,void 0,(function*(){const t=this.initializeGrapesEditor("gjs-0");this.finalizeEditorSetup(t),yield this.loadHomePage(t),this.activateHomeEditor("gjs-0"),this.themeManager.applyTheme(this.themeManager.currentTheme)}))}loadHomePage(t){return uc(this,void 0,void 0,(function*(){var e;const n=new Wt(this.homepage).generateHTML();t.setComponents(n),this.editorEvents.init(t,this.homepage,"gjs-0"),localStorage.setItem(`data-${null===(e=this.homepage)||void 0===e?void 0:e.PageId}`,JSON.stringify(this.homepage)),new D(this.homepage.PageId)}))}initializeGrapesEditor(t){return grapesjs.init({container:`#${t}`,fromElement:!0,height:"100%",width:"auto",canvas:{styles:["/Resources/UCGrapes1/src/css/toolbox.css","/DVelop/Bootstrap/Shared/fontawesome_vlatest/css/all.min.css?202521714271081","https://fonts.googleapis.com/css2?family=Inter:opsz@14..32&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"]},baseCss:" ",dragMode:"normal",panels:{defaults:[]},sidebarManager:!1,storageManager:!1,modal:!1,commands:!1,hoverable:!1,highlightable:!1,selectable:!1,richTextEditor:{}})}finalizeEditorSetup(t){t.getWrapper().set({selectable:!1,droppable:!1,draggable:!1,hoverable:!1});const e=t.Canvas.getElement();e&&e.style.setProperty("height","calc(100% - 100px)","important");const n=t.Canvas.getBody();n&&n.style.setProperty("background-color","#EFEEEC","important")}activateHomeEditor(t){document.getElementById(`${t}-frame`).classList.add("active-editor")}}const pc=class{constructor(){this.config=e.getInstance(),this.toolboxManager=new fn,this.editor=new hc,this.config.isInitialized||console.error("ToolboxApp created before AppConfig was initialized!"),this.initialiseLocalisation(),this.initialise()}initialise(){this.toolboxManager.setUpNavBar(),this.toolboxManager.setUpSideBar(),this.toolboxManager.unDoReDo(),this.editor.init()}initialiseLocalisation(){"Dutch"==this.config.currentLanguage?Zt.locale="nl":Zt.locale="en"}};window.App=class{constructor(t,n,i,r,s,o,a,l,c){e.getInstance().init(t,n,i,r,s,o,a,l,c),this.toolboxApp=new pc}}})()})();
=======
/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var A={2:(A,e,t)=>{var n=t(2199),r=t(4664),i=t(5950);A.exports=function(A){return n(A,i,r)}},79:(A,e,t)=>{var n=t(3702),r=t(80),i=t(4739),s=t(8655),o=t(1175);function a(A){var e=-1,t=null==A?0:A.length;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}a.prototype.clear=n,a.prototype.delete=r,a.prototype.get=i,a.prototype.has=s,a.prototype.set=o,A.exports=a},80:(A,e,t)=>{var n=t(6025),r=Array.prototype.splice;A.exports=function(A){var e=this.__data__,t=n(e,A);return!(t<0||(t==e.length-1?e.pop():r.call(e,t,1),--this.size,0))}},104:(A,e,t)=>{var n=t(3661);function r(A,e){if("function"!=typeof A||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var n=arguments,r=e?e.apply(this,n):n[0],i=t.cache;if(i.has(r))return i.get(r);var s=A.apply(this,n);return t.cache=i.set(r,s)||i,s};return t.cache=new(r.Cache||n),t}r.Cache=n,A.exports=r},181:A=>{A.exports=function(A){var e=[];if(null!=A)for(var t in Object(A))e.push(t);return e}},270:(A,e,t)=>{var n=t(7068),r=t(346);A.exports=function A(e,t,i,s,o){return e===t||(null==e||null==t||!r(e)&&!r(t)?e!=e&&t!=t:n(e,t,i,s,A,o))}},289:(A,e,t)=>{var n=t(2651);A.exports=function(A){return n(this,A).get(A)}},294:A=>{A.exports=function(A){return"number"==typeof A&&A>-1&&A%1==0&&A<=9007199254740991}},317:A=>{A.exports=function(A){var e=-1,t=Array(A.size);return A.forEach((function(A,n){t[++e]=[n,A]})),t}},346:A=>{A.exports=function(A){return null!=A&&"object"==typeof A}},354:function(A){A.exports=function(){"use strict";var A=function(e,t){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,e){A.__proto__=e}||function(A,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(A[t]=e[t])},A(e,t)};function e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var t=function(){return t=Object.assign||function(A){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(A[r]=e[r]);return A},t.apply(this,arguments)};function n(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))}function r(A,e){var t,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(A,s)}catch(A){i=[6,A],n=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}function i(A,e,t){if(t||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return A.concat(n||e)}for(var s=function(){function A(A,e,t,n){this.left=A,this.top=e,this.width=t,this.height=n}return A.prototype.add=function(e,t,n,r){return new A(this.left+e,this.top+t,this.width+n,this.height+r)},A.fromClientRect=function(e,t){return new A(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},A.fromDOMRectList=function(e,t){var n=Array.from(t).find((function(A){return 0!==A.width}));return n?new A(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):A.EMPTY},A.EMPTY=new A(0,0,0,0),A}(),o=function(A,e){return s.fromClientRect(A,e.getBoundingClientRect())},a=function(A){for(var e=[],t=0,n=A.length;t<n;){var r=A.charCodeAt(t++);if(r>=55296&&r<=56319&&t<n){var i=A.charCodeAt(t++);56320==(64512&i)?e.push(((1023&r)<<10)+(1023&i)+65536):(e.push(r),t--)}else e.push(r)}return e},l=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var t=A.length;if(!t)return"";for(var n=[],r=-1,i="";++r<t;){var s=A[r];s<=65535?n.push(s):(s-=65536,n.push(55296+(s>>10),s%1024+56320)),(r+1===t||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u="undefined"==typeof Uint8Array?[]:new Uint8Array(256),d=0;d<64;d++)u[c.charCodeAt(d)]=d;for(var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g="undefined"==typeof Uint8Array?[]:new Uint8Array(256),p=0;p<64;p++)g[h.charCodeAt(p)]=p;for(var f=function(A,e,t){return A.slice?A.slice(e,t):new Uint16Array(Array.prototype.slice.call(A,e,t))},B=function(){function A(A,e,t,n,r,i){this.initialValue=A,this.errorValue=e,this.highStart=t,this.highValueIndex=n,this.index=r,this.data=i}return A.prototype.get=function(A){var e;if(A>=0){if(A<55296||A>56319&&A<=65535)return e=((e=this.index[A>>5])<<2)+(31&A),this.data[e];if(A<=65535)return e=((e=this.index[2048+(A-55296>>5)])<<2)+(31&A),this.data[e];if(A<this.highStart)return e=2080+(A>>11),e=this.index[e],e+=A>>5&63,e=((e=this.index[e])<<2)+(31&A),this.data[e];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},A}(),m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w="undefined"==typeof Uint8Array?[]:new Uint8Array(256),v=0;v<64;v++)w[m.charCodeAt(v)]=v;var C=10,y=13,b=15,Q=17,U=18,E=19,F=20,I=21,x=22,T=24,L=25,H=26,S=27,N=28,O=30,M=32,D=33,k=34,P=35,_=37,K=38,R=39,j=40,V=42,q=[9001,65288],G="×",$="÷",J=function(A){var e,t,n,r=function(A){var e,t,n,r,i,s=.75*A.length,o=A.length,a=0;"="===A[A.length-1]&&(s--,"="===A[A.length-2]&&s--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(s):new Array(s),c=Array.isArray(l)?l:new Uint8Array(l);for(e=0;e<o;e+=4)t=g[A.charCodeAt(e)],n=g[A.charCodeAt(e+1)],r=g[A.charCodeAt(e+2)],i=g[A.charCodeAt(e+3)],c[a++]=t<<2|n>>4,c[a++]=(15&n)<<4|r>>2,c[a++]=(3&r)<<6|63&i;return l}(A),i=Array.isArray(r)?function(A){for(var e=A.length,t=[],n=0;n<e;n+=4)t.push(A[n+3]<<24|A[n+2]<<16|A[n+1]<<8|A[n]);return t}(r):new Uint32Array(r),s=Array.isArray(r)?function(A){for(var e=A.length,t=[],n=0;n<e;n+=2)t.push(A[n+1]<<8|A[n]);return t}(r):new Uint16Array(r),o=f(s,12,i[4]/2),a=2===i[5]?f(s,(24+i[4])/2):(e=i,t=Math.ceil((24+i[4])/4),e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n)));return new B(i[0],i[1],i[2],i[3],o,a)}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),W=[O,36],Z=[1,2,3,5],X=[C,8],z=[S,H],Y=Z.concat(X),AA=[K,R,j,k,P],eA=[b,y],tA=function(A,e,t,n){var r=n[t];if(Array.isArray(A)?-1!==A.indexOf(r):A===r)for(var i=t;i<=n.length;){if((a=n[++i])===e)return!0;if(a!==C)break}if(r===C)for(i=t;i>0;){var s=n[--i];if(Array.isArray(A)?-1!==A.indexOf(s):A===s)for(var o=t;o<=n.length;){var a;if((a=n[++o])===e)return!0;if(a!==C)break}if(s!==C)break}return!1},nA=function(A,e){for(var t=A;t>=0;){var n=e[t];if(n!==C)return n;t--}return 0},rA=function(A,e,t,n,r){if(0===t[n])return G;var i=n-1;if(Array.isArray(r)&&!0===r[i])return G;var s=i-1,o=i+1,a=e[i],l=s>=0?e[s]:0,c=e[o];if(2===a&&3===c)return G;if(-1!==Z.indexOf(a))return"!";if(-1!==Z.indexOf(c))return G;if(-1!==X.indexOf(c))return G;if(8===nA(i,e))return $;if(11===J.get(A[i]))return G;if((a===M||a===D)&&11===J.get(A[o]))return G;if(7===a||7===c)return G;if(9===a)return G;if(-1===[C,y,b].indexOf(a)&&9===c)return G;if(-1!==[Q,U,E,T,N].indexOf(c))return G;if(nA(i,e)===x)return G;if(tA(23,x,i,e))return G;if(tA([Q,U],I,i,e))return G;if(tA(12,12,i,e))return G;if(a===C)return $;if(23===a||23===c)return G;if(16===c||16===a)return $;if(-1!==[y,b,I].indexOf(c)||14===a)return G;if(36===l&&-1!==eA.indexOf(a))return G;if(a===N&&36===c)return G;if(c===F)return G;if(-1!==W.indexOf(c)&&a===L||-1!==W.indexOf(a)&&c===L)return G;if(a===S&&-1!==[_,M,D].indexOf(c)||-1!==[_,M,D].indexOf(a)&&c===H)return G;if(-1!==W.indexOf(a)&&-1!==z.indexOf(c)||-1!==z.indexOf(a)&&-1!==W.indexOf(c))return G;if(-1!==[S,H].indexOf(a)&&(c===L||-1!==[x,b].indexOf(c)&&e[o+1]===L)||-1!==[x,b].indexOf(a)&&c===L||a===L&&-1!==[L,N,T].indexOf(c))return G;if(-1!==[L,N,T,Q,U].indexOf(c))for(var u=i;u>=0;){if((d=e[u])===L)return G;if(-1===[N,T].indexOf(d))break;u--}if(-1!==[S,H].indexOf(c))for(u=-1!==[Q,U].indexOf(a)?s:i;u>=0;){var d;if((d=e[u])===L)return G;if(-1===[N,T].indexOf(d))break;u--}if(K===a&&-1!==[K,R,k,P].indexOf(c)||-1!==[R,k].indexOf(a)&&-1!==[R,j].indexOf(c)||-1!==[j,P].indexOf(a)&&c===j)return G;if(-1!==AA.indexOf(a)&&-1!==[F,H].indexOf(c)||-1!==AA.indexOf(c)&&a===S)return G;if(-1!==W.indexOf(a)&&-1!==W.indexOf(c))return G;if(a===T&&-1!==W.indexOf(c))return G;if(-1!==W.concat(L).indexOf(a)&&c===x&&-1===q.indexOf(A[o])||-1!==W.concat(L).indexOf(c)&&a===U)return G;if(41===a&&41===c){for(var h=t[i],g=1;h>0&&41===e[--h];)g++;if(g%2!=0)return G}return a===M&&c===D?G:$},iA=function(A,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=function(A,e){void 0===e&&(e="strict");var t=[],n=[],r=[];return A.forEach((function(A,i){var s=J.get(A);if(s>50?(r.push(!0),s-=50):r.push(!1),-1!==["normal","auto","loose"].indexOf(e)&&-1!==[8208,8211,12316,12448].indexOf(A))return n.push(i),t.push(16);if(4===s||11===s){if(0===i)return n.push(i),t.push(O);var o=t[i-1];return-1===Y.indexOf(o)?(n.push(n[i-1]),t.push(o)):(n.push(i),t.push(O))}return n.push(i),31===s?t.push("strict"===e?I:_):s===V||29===s?t.push(O):43===s?A>=131072&&A<=196605||A>=196608&&A<=262141?t.push(_):t.push(O):void t.push(s)})),[n,t,r]}(A,e.lineBreak),n=t[0],r=t[1],i=t[2];"break-all"!==e.wordBreak&&"break-word"!==e.wordBreak||(r=r.map((function(A){return-1!==[L,O,V].indexOf(A)?_:A})));var s="keep-all"===e.wordBreak?i.map((function(e,t){return e&&A[t]>=19968&&A[t]<=40959})):void 0;return[n,r,s]},sA=function(){function A(A,e,t,n){this.codePoints=A,this.required="!"===e,this.start=t,this.end=n}return A.prototype.slice=function(){return l.apply(void 0,this.codePoints.slice(this.start,this.end))},A}(),oA=45,aA=43,lA=-1,cA=function(A){return A>=48&&A<=57},uA=function(A){return cA(A)||A>=65&&A<=70||A>=97&&A<=102},dA=function(A){return 10===A||9===A||32===A},hA=function(A){return function(A){return function(A){return A>=97&&A<=122}(A)||function(A){return A>=65&&A<=90}(A)}(A)||function(A){return A>=128}(A)||95===A},gA=function(A){return hA(A)||cA(A)||A===oA},pA=function(A){return A>=0&&A<=8||11===A||A>=14&&A<=31||127===A},fA=function(A,e){return 92===A&&10!==e},BA=function(A,e,t){return A===oA?hA(e)||fA(e,t):!!hA(A)||!(92!==A||!fA(A,e))},mA=function(A,e,t){return A===aA||A===oA?!!cA(e)||46===e&&cA(t):cA(46===A?e:A)},wA=function(A){var e=0,t=1;A[e]!==aA&&A[e]!==oA||(A[e]===oA&&(t=-1),e++);for(var n=[];cA(A[e]);)n.push(A[e++]);var r=n.length?parseInt(l.apply(void 0,n),10):0;46===A[e]&&e++;for(var i=[];cA(A[e]);)i.push(A[e++]);var s=i.length,o=s?parseInt(l.apply(void 0,i),10):0;69!==A[e]&&101!==A[e]||e++;var a=1;A[e]!==aA&&A[e]!==oA||(A[e]===oA&&(a=-1),e++);for(var c=[];cA(A[e]);)c.push(A[e++]);var u=c.length?parseInt(l.apply(void 0,c),10):0;return t*(r+o*Math.pow(10,-s))*Math.pow(10,a*u)},vA={type:2},CA={type:3},yA={type:4},bA={type:13},QA={type:8},UA={type:21},EA={type:9},FA={type:10},IA={type:11},xA={type:12},TA={type:14},LA={type:23},HA={type:1},SA={type:25},NA={type:24},OA={type:26},MA={type:27},DA={type:28},kA={type:29},PA={type:31},_A={type:32},KA=function(){function A(){this._value=[]}return A.prototype.write=function(A){this._value=this._value.concat(a(A))},A.prototype.read=function(){for(var A=[],e=this.consumeToken();e!==_A;)A.push(e),e=this.consumeToken();return A},A.prototype.consumeToken=function(){var A=this.consumeCodePoint();switch(A){case 34:return this.consumeStringToken(34);case 35:var e=this.peekCodePoint(0),t=this.peekCodePoint(1),n=this.peekCodePoint(2);if(gA(e)||fA(t,n)){var r=BA(e,t,n)?2:1;return{type:5,value:this.consumeName(),flags:r}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),bA;break;case 39:return this.consumeStringToken(39);case 40:return vA;case 41:return CA;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),TA;break;case aA:if(mA(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case 44:return yA;case oA:var i=A,s=this.peekCodePoint(0),o=this.peekCodePoint(1);if(mA(i,s,o))return this.reconsumeCodePoint(A),this.consumeNumericToken();if(BA(i,s,o))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();if(s===oA&&62===o)return this.consumeCodePoint(),this.consumeCodePoint(),NA;break;case 46:if(mA(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var a=this.consumeCodePoint();if(42===a&&47===(a=this.consumeCodePoint()))return this.consumeToken();if(a===lA)return this.consumeToken()}break;case 58:return OA;case 59:return MA;case 60:if(33===this.peekCodePoint(0)&&this.peekCodePoint(1)===oA&&this.peekCodePoint(2)===oA)return this.consumeCodePoint(),this.consumeCodePoint(),SA;break;case 64:var c=this.peekCodePoint(0),u=this.peekCodePoint(1),d=this.peekCodePoint(2);if(BA(c,u,d))return{type:7,value:this.consumeName()};break;case 91:return DA;case 92:if(fA(A,this.peekCodePoint(0)))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();break;case 93:return kA;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),QA;break;case 123:return IA;case 125:return xA;case 117:case 85:var h=this.peekCodePoint(0),g=this.peekCodePoint(1);return h!==aA||!uA(g)&&63!==g||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(A),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),EA;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),UA;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),FA;break;case lA:return _A}return dA(A)?(this.consumeWhiteSpace(),PA):cA(A)?(this.reconsumeCodePoint(A),this.consumeNumericToken()):hA(A)?(this.reconsumeCodePoint(A),this.consumeIdentLikeToken()):{type:6,value:l(A)}},A.prototype.consumeCodePoint=function(){var A=this._value.shift();return void 0===A?-1:A},A.prototype.reconsumeCodePoint=function(A){this._value.unshift(A)},A.prototype.peekCodePoint=function(A){return A>=this._value.length?-1:this._value[A]},A.prototype.consumeUnicodeRangeToken=function(){for(var A=[],e=this.consumeCodePoint();uA(e)&&A.length<6;)A.push(e),e=this.consumeCodePoint();for(var t=!1;63===e&&A.length<6;)A.push(e),e=this.consumeCodePoint(),t=!0;if(t)return{type:30,start:parseInt(l.apply(void 0,A.map((function(A){return 63===A?48:A}))),16),end:parseInt(l.apply(void 0,A.map((function(A){return 63===A?70:A}))),16)};var n=parseInt(l.apply(void 0,A),16);if(this.peekCodePoint(0)===oA&&uA(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();for(var r=[];uA(e)&&r.length<6;)r.push(e),e=this.consumeCodePoint();return{type:30,start:n,end:parseInt(l.apply(void 0,r),16)}}return{type:30,start:n,end:n}},A.prototype.consumeIdentLikeToken=function(){var A=this.consumeName();return"url"===A.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:A}):{type:20,value:A}},A.prototype.consumeUrlToken=function(){var A=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===lA)return{type:22,value:""};var e=this.peekCodePoint(0);if(39===e||34===e){var t=this.consumeStringToken(this.consumeCodePoint());return 0===t.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===lA||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:t.value}):(this.consumeBadUrlRemnants(),LA)}for(;;){var n=this.consumeCodePoint();if(n===lA||41===n)return{type:22,value:l.apply(void 0,A)};if(dA(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===lA||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:l.apply(void 0,A)}):(this.consumeBadUrlRemnants(),LA);if(34===n||39===n||40===n||pA(n))return this.consumeBadUrlRemnants(),LA;if(92===n){if(!fA(n,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),LA;A.push(this.consumeEscapedCodePoint())}else A.push(n)}},A.prototype.consumeWhiteSpace=function(){for(;dA(this.peekCodePoint(0));)this.consumeCodePoint()},A.prototype.consumeBadUrlRemnants=function(){for(;;){var A=this.consumeCodePoint();if(41===A||A===lA)return;fA(A,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},A.prototype.consumeStringSlice=function(A){for(var e="";A>0;){var t=Math.min(5e4,A);e+=l.apply(void 0,this._value.splice(0,t)),A-=t}return this._value.shift(),e},A.prototype.consumeStringToken=function(A){for(var e="",t=0;;){var n=this._value[t];if(n===lA||void 0===n||n===A)return{type:0,value:e+=this.consumeStringSlice(t)};if(10===n)return this._value.splice(0,t),HA;if(92===n){var r=this._value[t+1];r!==lA&&void 0!==r&&(10===r?(e+=this.consumeStringSlice(t),t=-1,this._value.shift()):fA(n,r)&&(e+=this.consumeStringSlice(t),e+=l(this.consumeEscapedCodePoint()),t=-1))}t++}},A.prototype.consumeNumber=function(){var A=[],e=4,t=this.peekCodePoint(0);for(t!==aA&&t!==oA||A.push(this.consumeCodePoint());cA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());t=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(46===t&&cA(n))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;cA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());t=this.peekCodePoint(0),n=this.peekCodePoint(1);var r=this.peekCodePoint(2);if((69===t||101===t)&&((n===aA||n===oA)&&cA(r)||cA(n)))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;cA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());return[wA(A),e]},A.prototype.consumeNumericToken=function(){var A=this.consumeNumber(),e=A[0],t=A[1],n=this.peekCodePoint(0),r=this.peekCodePoint(1),i=this.peekCodePoint(2);return BA(n,r,i)?{type:15,number:e,flags:t,unit:this.consumeName()}:37===n?(this.consumeCodePoint(),{type:16,number:e,flags:t}):{type:17,number:e,flags:t}},A.prototype.consumeEscapedCodePoint=function(){var A=this.consumeCodePoint();if(uA(A)){for(var e=l(A);uA(this.peekCodePoint(0))&&e.length<6;)e+=l(this.consumeCodePoint());dA(this.peekCodePoint(0))&&this.consumeCodePoint();var t=parseInt(e,16);return 0===t||function(A){return A>=55296&&A<=57343}(t)||t>1114111?65533:t}return A===lA?65533:A},A.prototype.consumeName=function(){for(var A="";;){var e=this.consumeCodePoint();if(gA(e))A+=l(e);else{if(!fA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),A;A+=l(this.consumeEscapedCodePoint())}}},A}(),RA=function(){function A(A){this._tokens=A}return A.create=function(e){var t=new KA;return t.write(e),new A(t.read())},A.parseValue=function(e){return A.create(e).parseComponentValue()},A.parseValues=function(e){return A.create(e).parseComponentValues()},A.prototype.parseComponentValue=function(){for(var A=this.consumeToken();31===A.type;)A=this.consumeToken();if(32===A.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(A);var e=this.consumeComponentValue();do{A=this.consumeToken()}while(31===A.type);if(32===A.type)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},A.prototype.parseComponentValues=function(){for(var A=[];;){var e=this.consumeComponentValue();if(32===e.type)return A;A.push(e),A.push()}},A.prototype.consumeComponentValue=function(){var A=this.consumeToken();switch(A.type){case 11:case 28:case 2:return this.consumeSimpleBlock(A.type);case 19:return this.consumeFunction(A)}return A},A.prototype.consumeSimpleBlock=function(A){for(var e={type:A,values:[]},t=this.consumeToken();;){if(32===t.type||XA(t,A))return e;this.reconsumeToken(t),e.values.push(this.consumeComponentValue()),t=this.consumeToken()}},A.prototype.consumeFunction=function(A){for(var e={name:A.value,values:[],type:18};;){var t=this.consumeToken();if(32===t.type||3===t.type)return e;this.reconsumeToken(t),e.values.push(this.consumeComponentValue())}},A.prototype.consumeToken=function(){var A=this._tokens.shift();return void 0===A?_A:A},A.prototype.reconsumeToken=function(A){this._tokens.unshift(A)},A}(),jA=function(A){return 15===A.type},VA=function(A){return 17===A.type},qA=function(A){return 20===A.type},GA=function(A){return 0===A.type},$A=function(A,e){return qA(A)&&A.value===e},JA=function(A){return 31!==A.type},WA=function(A){return 31!==A.type&&4!==A.type},ZA=function(A){var e=[],t=[];return A.forEach((function(A){if(4===A.type){if(0===t.length)throw new Error("Error parsing function args, zero tokens for arg");return e.push(t),void(t=[])}31!==A.type&&t.push(A)})),t.length&&e.push(t),e},XA=function(A,e){return 11===e&&12===A.type||28===e&&29===A.type||2===e&&3===A.type},zA=function(A){return 17===A.type||15===A.type},YA=function(A){return 16===A.type||zA(A)},Ae=function(A){return A.length>1?[A[0],A[1]]:[A[0]]},ee={type:17,number:0,flags:4},te={type:16,number:50,flags:4},ne={type:16,number:100,flags:4},re=function(A,e,t){var n=A[0],r=A[1];return[ie(n,e),ie(void 0!==r?r:n,t)]},ie=function(A,e){if(16===A.type)return A.number/100*e;if(jA(A))switch(A.unit){case"rem":case"em":return 16*A.number;default:return A.number}return A.number},se="grad",oe="turn",ae=function(A,e){if(15===e.type)switch(e.unit){case"deg":return Math.PI*e.number/180;case se:return Math.PI/200*e.number;case"rad":return e.number;case oe:return 2*Math.PI*e.number}throw new Error("Unsupported angle type")},le=function(A){return 15===A.type&&("deg"===A.unit||A.unit===se||"rad"===A.unit||A.unit===oe)},ce=function(A){switch(A.filter(qA).map((function(A){return A.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ee,ee];case"to top":case"bottom":return ue(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ee,ne];case"to right":case"left":return ue(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ne,ne];case"to bottom":case"top":return ue(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ne,ee];case"to left":case"right":return ue(270)}return 0},ue=function(A){return Math.PI*A/180},de=function(A,e){if(18===e.type){var t=ve[e.name];if(void 0===t)throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(A,e.values)}if(5===e.type){if(3===e.value.length){var n=e.value.substring(0,1),r=e.value.substring(1,2),i=e.value.substring(2,3);return pe(parseInt(n+n,16),parseInt(r+r,16),parseInt(i+i,16),1)}if(4===e.value.length){n=e.value.substring(0,1),r=e.value.substring(1,2),i=e.value.substring(2,3);var s=e.value.substring(3,4);return pe(parseInt(n+n,16),parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16)/255)}if(6===e.value.length)return n=e.value.substring(0,2),r=e.value.substring(2,4),i=e.value.substring(4,6),pe(parseInt(n,16),parseInt(r,16),parseInt(i,16),1);if(8===e.value.length)return n=e.value.substring(0,2),r=e.value.substring(2,4),i=e.value.substring(4,6),s=e.value.substring(6,8),pe(parseInt(n,16),parseInt(r,16),parseInt(i,16),parseInt(s,16)/255)}if(20===e.type){var o=ye[e.value.toUpperCase()];if(void 0!==o)return o}return ye.TRANSPARENT},he=function(A){return!(255&A)},ge=function(A){var e=255&A,t=255&A>>8,n=255&A>>16,r=255&A>>24;return e<255?"rgba("+r+","+n+","+t+","+e/255+")":"rgb("+r+","+n+","+t+")"},pe=function(A,e,t,n){return(A<<24|e<<16|t<<8|Math.round(255*n))>>>0},fe=function(A,e){if(17===A.type)return A.number;if(16===A.type){var t=3===e?1:255;return 3===e?A.number/100*t:Math.round(A.number/100*t)}return 0},Be=function(A,e){var t=e.filter(WA);if(3===t.length){var n=t.map(fe),r=n[0],i=n[1],s=n[2];return pe(r,i,s,1)}if(4===t.length){var o=t.map(fe),a=(r=o[0],i=o[1],s=o[2],o[3]);return pe(r,i,s,a)}return 0};function me(A,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-A)*t*6+A:t<.5?e:t<2/3?6*(e-A)*(2/3-t)+A:A}var we=function(A,e){var t=e.filter(WA),n=t[0],r=t[1],i=t[2],s=t[3],o=(17===n.type?ue(n.number):ae(A,n))/(2*Math.PI),a=YA(r)?r.number/100:0,l=YA(i)?i.number/100:0,c=void 0!==s&&YA(s)?ie(s,1):1;if(0===a)return pe(255*l,255*l,255*l,1);var u=l<=.5?l*(a+1):l+a-l*a,d=2*l-u,h=me(d,u,o+1/3),g=me(d,u,o),p=me(d,u,o-1/3);return pe(255*h,255*g,255*p,c)},ve={hsl:we,hsla:we,rgb:Be,rgba:Be},Ce=function(A,e){return de(A,RA.create(e).parseComponentValue())},ye={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},be={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(A,e){return e.map((function(A){if(qA(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Qe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ue=function(A,e){var t=de(A,e[0]),n=e[1];return n&&YA(n)?{color:t,stop:n}:{color:t,stop:null}},Ee=function(A,e){var t=A[0],n=A[A.length-1];null===t.stop&&(t.stop=ee),null===n.stop&&(n.stop=ne);for(var r=[],i=0,s=0;s<A.length;s++){var o=A[s].stop;if(null!==o){var a=ie(o,e);a>i?r.push(a):r.push(i),i=a}else r.push(null)}var l=null;for(s=0;s<r.length;s++){var c=r[s];if(null===c)null===l&&(l=s);else if(null!==l){for(var u=s-l,d=(c-r[l-1])/(u+1),h=1;h<=u;h++)r[l+h-1]=d*h;l=null}}return A.map((function(A,t){return{color:A.color,stop:Math.max(Math.min(1,r[t]/e),0)}}))},Fe=function(A,e,t){var n="number"==typeof A?A:function(A,e,t){var n=e/2,r=t/2,i=ie(A[0],e)-n,s=r-ie(A[1],t);return(Math.atan2(s,i)+2*Math.PI)%(2*Math.PI)}(A,e,t),r=Math.abs(e*Math.sin(n))+Math.abs(t*Math.cos(n)),i=e/2,s=t/2,o=r/2,a=Math.sin(n-Math.PI/2)*o,l=Math.cos(n-Math.PI/2)*o;return[r,i-l,i+l,s-a,s+a]},Ie=function(A,e){return Math.sqrt(A*A+e*e)},xe=function(A,e,t,n,r){return[[0,0],[0,e],[A,0],[A,e]].reduce((function(A,e){var i=e[0],s=e[1],o=Ie(t-i,n-s);return(r?o<A.optimumDistance:o>A.optimumDistance)?{optimumCorner:e,optimumDistance:o}:A}),{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},Te=function(A,e){var t=ue(180),n=[];return ZA(e).forEach((function(e,r){if(0===r){var i=e[0];if(20===i.type&&-1!==["top","left","right","bottom"].indexOf(i.value))return void(t=ce(e));if(le(i))return void(t=(ae(A,i)+ue(270))%ue(360))}var s=Ue(A,e);n.push(s)})),{angle:t,stops:n,type:1}},Le="closest-side",He="farthest-side",Se="closest-corner",Ne="farthest-corner",Oe="circle",Me="ellipse",De="cover",ke="contain",Pe=function(A,e){var t=0,n=3,r=[],i=[];return ZA(e).forEach((function(e,s){var o=!0;if(0===s?o=e.reduce((function(A,e){if(qA(e))switch(e.value){case"center":return i.push(te),!1;case"top":case"left":return i.push(ee),!1;case"right":case"bottom":return i.push(ne),!1}else if(YA(e)||zA(e))return i.push(e),!1;return A}),o):1===s&&(o=e.reduce((function(A,e){if(qA(e))switch(e.value){case Oe:return t=0,!1;case Me:return t=1,!1;case ke:case Le:return n=0,!1;case He:return n=1,!1;case Se:return n=2,!1;case De:case Ne:return n=3,!1}else if(zA(e)||YA(e))return Array.isArray(n)||(n=[]),n.push(e),!1;return A}),o)),o){var a=Ue(A,e);r.push(a)}})),{size:n,shape:t,stops:r,position:i,type:2}},_e=function(A,e){if(22===e.type){var t={url:e.value,type:0};return A.cache.addImage(e.value),t}if(18===e.type){var n=Re[e.name];if(void 0===n)throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(A,e.values)}throw new Error("Unsupported image type "+e.type)};var Ke,Re={"linear-gradient":function(A,e){var t=ue(180),n=[];return ZA(e).forEach((function(e,r){if(0===r){var i=e[0];if(20===i.type&&"to"===i.value)return void(t=ce(e));if(le(i))return void(t=ae(A,i))}var s=Ue(A,e);n.push(s)})),{angle:t,stops:n,type:1}},"-moz-linear-gradient":Te,"-ms-linear-gradient":Te,"-o-linear-gradient":Te,"-webkit-linear-gradient":Te,"radial-gradient":function(A,e){var t=0,n=3,r=[],i=[];return ZA(e).forEach((function(e,s){var o=!0;if(0===s){var a=!1;o=e.reduce((function(A,e){if(a)if(qA(e))switch(e.value){case"center":return i.push(te),A;case"top":case"left":return i.push(ee),A;case"right":case"bottom":return i.push(ne),A}else(YA(e)||zA(e))&&i.push(e);else if(qA(e))switch(e.value){case Oe:return t=0,!1;case Me:return t=1,!1;case"at":return a=!0,!1;case Le:return n=0,!1;case De:case He:return n=1,!1;case ke:case Se:return n=2,!1;case Ne:return n=3,!1}else if(zA(e)||YA(e))return Array.isArray(n)||(n=[]),n.push(e),!1;return A}),o)}if(o){var l=Ue(A,e);r.push(l)}})),{size:n,shape:t,stops:r,position:i,type:2}},"-moz-radial-gradient":Pe,"-ms-radial-gradient":Pe,"-o-radial-gradient":Pe,"-webkit-radial-gradient":Pe,"-webkit-gradient":function(A,e){var t=ue(180),n=[],r=1;return ZA(e).forEach((function(e,t){var i=e[0];if(0===t){if(qA(i)&&"linear"===i.value)return void(r=1);if(qA(i)&&"radial"===i.value)return void(r=2)}if(18===i.type)if("from"===i.name){var s=de(A,i.values[0]);n.push({stop:ee,color:s})}else if("to"===i.name)s=de(A,i.values[0]),n.push({stop:ne,color:s});else if("color-stop"===i.name){var o=i.values.filter(WA);if(2===o.length){s=de(A,o[1]);var a=o[0];VA(a)&&n.push({stop:{type:16,number:100*a.number,flags:a.flags},color:s})}}})),1===r?{angle:(t+ue(180))%ue(360),stops:n,type:r}:{size:3,shape:0,stops:n,position:[],type:r}}},je={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(A,e){if(0===e.length)return[];var t=e[0];return 20===t.type&&"none"===t.value?[]:e.filter((function(A){return WA(A)&&function(A){return!(20===A.type&&"none"===A.value||18===A.type&&!Re[A.name])}(A)})).map((function(e){return _e(A,e)}))}},Ve={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(A,e){return e.map((function(A){if(qA(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},qe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(A,e){return ZA(e).map((function(A){return A.filter(YA)})).map(Ae)}},Ge={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(A,e){return ZA(e).map((function(A){return A.filter(qA).map((function(A){return A.value})).join(" ")})).map($e)}},$e=function(A){switch(A){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(A){A.AUTO="auto",A.CONTAIN="contain",A.COVER="cover"}(Ke||(Ke={}));var Je,We={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(A,e){return ZA(e).map((function(A){return A.filter(Ze)}))}},Ze=function(A){return qA(A)||YA(A)},Xe=function(A){return{name:"border-"+A+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},ze=Xe("top"),Ye=Xe("right"),At=Xe("bottom"),et=Xe("left"),tt=function(A){return{name:"border-radius-"+A,initialValue:"0 0",prefix:!1,type:1,parse:function(A,e){return Ae(e.filter(YA))}}},nt=tt("top-left"),rt=tt("top-right"),it=tt("bottom-right"),st=tt("bottom-left"),ot=function(A){return{name:"border-"+A+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(A,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},at=ot("top"),lt=ot("right"),ct=ot("bottom"),ut=ot("left"),dt=function(A){return{name:"border-"+A+"-width",initialValue:"0",type:0,prefix:!1,parse:function(A,e){return jA(e)?e.number:0}}},ht=dt("top"),gt=dt("right"),pt=dt("bottom"),ft=dt("left"),Bt={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},mt={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(A,e){return"rtl"===e?1:0}},wt={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(A,e){return e.filter(qA).reduce((function(A,e){return A|vt(e.value)}),0)}},vt=function(A){switch(A){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Ct={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},yt={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(A,e){return 20===e.type&&"normal"===e.value?0:17===e.type||15===e.type?e.number:0}};!function(A){A.NORMAL="normal",A.STRICT="strict"}(Je||(Je={}));var bt,Qt={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){return"strict"===e?Je.STRICT:Je.NORMAL}},Ut={name:"line-height",initialValue:"normal",prefix:!1,type:4},Et=function(A,e){return qA(A)&&"normal"===A.value?1.2*e:17===A.type?e*A.number:YA(A)?ie(A,e):e},Ft={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(A,e){return 20===e.type&&"none"===e.value?null:_e(A,e)}},It={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(A,e){return"inside"===e?0:1}},xt={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Tt=function(A){return{name:"margin-"+A,initialValue:"0",prefix:!1,type:4}},Lt=Tt("top"),Ht=Tt("right"),St=Tt("bottom"),Nt=Tt("left"),Ot={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(A,e){return e.filter(qA).map((function(A){switch(A.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},Mt={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){return"break-word"===e?"break-word":"normal"}},Dt=function(A){return{name:"padding-"+A,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},kt=Dt("top"),Pt=Dt("right"),_t=Dt("bottom"),Kt=Dt("left"),Rt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(A,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},jt={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(A,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Vt={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(A,e){return 1===e.length&&$A(e[0],"none")?[]:ZA(e).map((function(e){for(var t={color:ye.TRANSPARENT,offsetX:ee,offsetY:ee,blur:ee},n=0,r=0;r<e.length;r++){var i=e[r];zA(i)?(0===n?t.offsetX=i:1===n?t.offsetY=i:t.blur=i,n++):t.color=de(A,i)}return t}))}},qt={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Gt={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(A,e){if(20===e.type&&"none"===e.value)return null;if(18===e.type){var t=$t[e.name];if(void 0===t)throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},$t={matrix:function(A){var e=A.filter((function(A){return 17===A.type})).map((function(A){return A.number}));return 6===e.length?e:null},matrix3d:function(A){var e=A.filter((function(A){return 17===A.type})).map((function(A){return A.number})),t=e[0],n=e[1];e[2],e[3];var r=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var s=e[12],o=e[13];return e[14],e[15],16===e.length?[t,n,r,i,s,o]:null}},Jt={type:16,number:50,flags:4},Wt=[Jt,Jt],Zt={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(A,e){var t=e.filter(YA);return 2!==t.length?Wt:[t[0],t[1]]}},Xt={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(A){A.NORMAL="normal",A.BREAK_ALL="break-all",A.KEEP_ALL="keep-all"}(bt||(bt={}));for(var zt={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){switch(e){case"break-all":return bt.BREAK_ALL;case"keep-all":return bt.KEEP_ALL;default:return bt.NORMAL}}},Yt={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(A,e){if(20===e.type)return{auto:!0,order:0};if(VA(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},An={name:"time",parse:function(A,e){if(15===e.type)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},en={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(A,e){return VA(e)?e.number:1}},tn={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},nn={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(A,e){return e.filter(qA).map((function(A){switch(A.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(A){return 0!==A}))}},rn={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(A,e){var t=[],n=[];return e.forEach((function(A){switch(A.type){case 20:case 0:t.push(A.value);break;case 17:t.push(A.number.toString());break;case 4:n.push(t.join(" ")),t.length=0}})),t.length&&n.push(t.join(" ")),n.map((function(A){return-1===A.indexOf(" ")?A:"'"+A+"'"}))}},sn={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},on={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(A,e){return VA(e)?e.number:qA(e)&&"bold"===e.value?700:400}},an={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(A,e){return e.filter(qA).map((function(A){return A.value}))}},ln={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},cn=function(A,e){return!!(A&e)},un={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(A,e){if(0===e.length)return[];var t=e[0];return 20===t.type&&"none"===t.value?[]:e}},dn={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(0===e.length)return null;var t=e[0];if(20===t.type&&"none"===t.value)return null;for(var n=[],r=e.filter(JA),i=0;i<r.length;i++){var s=r[i],o=r[i+1];if(20===s.type){var a=o&&VA(o)?o.number:1;n.push({counter:s.value,increment:a})}}return n}},hn={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(0===e.length)return[];for(var t=[],n=e.filter(JA),r=0;r<n.length;r++){var i=n[r],s=n[r+1];if(qA(i)&&"none"!==i.value){var o=s&&VA(s)?s.number:0;t.push({counter:i.value,reset:o})}}return t}},gn={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(A,e){return e.filter(jA).map((function(e){return An.parse(A,e)}))}},pn={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(0===e.length)return null;var t=e[0];if(20===t.type&&"none"===t.value)return null;var n=[],r=e.filter(GA);if(r.length%2!=0)return null;for(var i=0;i<r.length;i+=2){var s=r[i].value,o=r[i+1].value;n.push({open:s,close:o})}return n}},fn=function(A,e,t){if(!A)return"";var n=A[Math.min(e,A.length-1)];return n?t?n.open:n.close:""},Bn={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(A,e){return 1===e.length&&$A(e[0],"none")?[]:ZA(e).map((function(e){for(var t={color:255,offsetX:ee,offsetY:ee,blur:ee,spread:ee,inset:!1},n=0,r=0;r<e.length;r++){var i=e[r];$A(i,"inset")?t.inset=!0:zA(i)?(0===n?t.offsetX=i:1===n?t.offsetY=i:2===n?t.blur=i:t.spread=i,n++):t.color=de(A,i)}return t}))}},mn={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(A,e){var t=[];return e.filter(qA).forEach((function(A){switch(A.value){case"stroke":t.push(1);break;case"fill":t.push(0);break;case"markers":t.push(2)}})),[0,1,2].forEach((function(A){-1===t.indexOf(A)&&t.push(A)})),t}},wn={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},vn={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(A,e){return jA(e)?e.number:0}},Cn=function(){function A(A,e){var t,n;this.animationDuration=Qn(A,gn,e.animationDuration),this.backgroundClip=Qn(A,be,e.backgroundClip),this.backgroundColor=Qn(A,Qe,e.backgroundColor),this.backgroundImage=Qn(A,je,e.backgroundImage),this.backgroundOrigin=Qn(A,Ve,e.backgroundOrigin),this.backgroundPosition=Qn(A,qe,e.backgroundPosition),this.backgroundRepeat=Qn(A,Ge,e.backgroundRepeat),this.backgroundSize=Qn(A,We,e.backgroundSize),this.borderTopColor=Qn(A,ze,e.borderTopColor),this.borderRightColor=Qn(A,Ye,e.borderRightColor),this.borderBottomColor=Qn(A,At,e.borderBottomColor),this.borderLeftColor=Qn(A,et,e.borderLeftColor),this.borderTopLeftRadius=Qn(A,nt,e.borderTopLeftRadius),this.borderTopRightRadius=Qn(A,rt,e.borderTopRightRadius),this.borderBottomRightRadius=Qn(A,it,e.borderBottomRightRadius),this.borderBottomLeftRadius=Qn(A,st,e.borderBottomLeftRadius),this.borderTopStyle=Qn(A,at,e.borderTopStyle),this.borderRightStyle=Qn(A,lt,e.borderRightStyle),this.borderBottomStyle=Qn(A,ct,e.borderBottomStyle),this.borderLeftStyle=Qn(A,ut,e.borderLeftStyle),this.borderTopWidth=Qn(A,ht,e.borderTopWidth),this.borderRightWidth=Qn(A,gt,e.borderRightWidth),this.borderBottomWidth=Qn(A,pt,e.borderBottomWidth),this.borderLeftWidth=Qn(A,ft,e.borderLeftWidth),this.boxShadow=Qn(A,Bn,e.boxShadow),this.color=Qn(A,Bt,e.color),this.direction=Qn(A,mt,e.direction),this.display=Qn(A,wt,e.display),this.float=Qn(A,Ct,e.cssFloat),this.fontFamily=Qn(A,rn,e.fontFamily),this.fontSize=Qn(A,sn,e.fontSize),this.fontStyle=Qn(A,ln,e.fontStyle),this.fontVariant=Qn(A,an,e.fontVariant),this.fontWeight=Qn(A,on,e.fontWeight),this.letterSpacing=Qn(A,yt,e.letterSpacing),this.lineBreak=Qn(A,Qt,e.lineBreak),this.lineHeight=Qn(A,Ut,e.lineHeight),this.listStyleImage=Qn(A,Ft,e.listStyleImage),this.listStylePosition=Qn(A,It,e.listStylePosition),this.listStyleType=Qn(A,xt,e.listStyleType),this.marginTop=Qn(A,Lt,e.marginTop),this.marginRight=Qn(A,Ht,e.marginRight),this.marginBottom=Qn(A,St,e.marginBottom),this.marginLeft=Qn(A,Nt,e.marginLeft),this.opacity=Qn(A,en,e.opacity);var r=Qn(A,Ot,e.overflow);this.overflowX=r[0],this.overflowY=r[r.length>1?1:0],this.overflowWrap=Qn(A,Mt,e.overflowWrap),this.paddingTop=Qn(A,kt,e.paddingTop),this.paddingRight=Qn(A,Pt,e.paddingRight),this.paddingBottom=Qn(A,_t,e.paddingBottom),this.paddingLeft=Qn(A,Kt,e.paddingLeft),this.paintOrder=Qn(A,mn,e.paintOrder),this.position=Qn(A,jt,e.position),this.textAlign=Qn(A,Rt,e.textAlign),this.textDecorationColor=Qn(A,tn,null!==(t=e.textDecorationColor)&&void 0!==t?t:e.color),this.textDecorationLine=Qn(A,nn,null!==(n=e.textDecorationLine)&&void 0!==n?n:e.textDecoration),this.textShadow=Qn(A,Vt,e.textShadow),this.textTransform=Qn(A,qt,e.textTransform),this.transform=Qn(A,Gt,e.transform),this.transformOrigin=Qn(A,Zt,e.transformOrigin),this.visibility=Qn(A,Xt,e.visibility),this.webkitTextStrokeColor=Qn(A,wn,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=Qn(A,vn,e.webkitTextStrokeWidth),this.wordBreak=Qn(A,zt,e.wordBreak),this.zIndex=Qn(A,Yt,e.zIndex)}return A.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},A.prototype.isTransparent=function(){return he(this.backgroundColor)},A.prototype.isTransformed=function(){return null!==this.transform},A.prototype.isPositioned=function(){return 0!==this.position},A.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},A.prototype.isFloating=function(){return 0!==this.float},A.prototype.isInlineLevel=function(){return cn(this.display,4)||cn(this.display,33554432)||cn(this.display,268435456)||cn(this.display,536870912)||cn(this.display,67108864)||cn(this.display,134217728)},A}(),yn=function(A,e){this.content=Qn(A,un,e.content),this.quotes=Qn(A,pn,e.quotes)},bn=function(A,e){this.counterIncrement=Qn(A,dn,e.counterIncrement),this.counterReset=Qn(A,hn,e.counterReset)},Qn=function(A,e,t){var n=new KA,r=null!=t?t.toString():e.initialValue;n.write(r);var i=new RA(n.read());switch(e.type){case 2:var s=i.parseComponentValue();return e.parse(A,qA(s)?s.value:e.initialValue);case 0:return e.parse(A,i.parseComponentValue());case 1:return e.parse(A,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return ae(A,i.parseComponentValue());case"color":return de(A,i.parseComponentValue());case"image":return _e(A,i.parseComponentValue());case"length":var o=i.parseComponentValue();return zA(o)?o:ee;case"length-percentage":var a=i.parseComponentValue();return YA(a)?a:ee;case"time":return An.parse(A,i.parseComponentValue())}}},Un=function(A,e){var t=function(A){switch(A.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(A);return 1===t||e===t},En=function(A,e){this.context=A,this.textNodes=[],this.elements=[],this.flags=0,Un(e,3),this.styles=new Cn(A,window.getComputedStyle(e,null)),Tr(e)&&(this.styles.animationDuration.some((function(A){return A>0}))&&(e.style.animationDuration="0s"),null!==this.styles.transform&&(e.style.transform="none")),this.bounds=o(this.context,e),Un(e,4)&&(this.flags|=16)},Fn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",In="undefined"==typeof Uint8Array?[]:new Uint8Array(256),xn=0;xn<64;xn++)In[Fn.charCodeAt(xn)]=xn;for(var Tn=function(A,e,t){return A.slice?A.slice(e,t):new Uint16Array(Array.prototype.slice.call(A,e,t))},Ln=function(){function A(A,e,t,n,r,i){this.initialValue=A,this.errorValue=e,this.highStart=t,this.highValueIndex=n,this.index=r,this.data=i}return A.prototype.get=function(A){var e;if(A>=0){if(A<55296||A>56319&&A<=65535)return e=((e=this.index[A>>5])<<2)+(31&A),this.data[e];if(A<=65535)return e=((e=this.index[2048+(A-55296>>5)])<<2)+(31&A),this.data[e];if(A<this.highStart)return e=2080+(A>>11),e=this.index[e],e+=A>>5&63,e=((e=this.index[e])<<2)+(31&A),this.data[e];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},A}(),Hn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Sn="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Nn=0;Nn<64;Nn++)Sn[Hn.charCodeAt(Nn)]=Nn;var On,Mn=8,Dn=9,kn=11,Pn=12,_n=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var t=A.length;if(!t)return"";for(var n=[],r=-1,i="";++r<t;){var s=A[r];s<=65535?n.push(s):(s-=65536,n.push(55296+(s>>10),s%1024+56320)),(r+1===t||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},Kn=function(A){var e,t,n,r=function(A){var e,t,n,r,i,s=.75*A.length,o=A.length,a=0;"="===A[A.length-1]&&(s--,"="===A[A.length-2]&&s--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(s):new Array(s),c=Array.isArray(l)?l:new Uint8Array(l);for(e=0;e<o;e+=4)t=In[A.charCodeAt(e)],n=In[A.charCodeAt(e+1)],r=In[A.charCodeAt(e+2)],i=In[A.charCodeAt(e+3)],c[a++]=t<<2|n>>4,c[a++]=(15&n)<<4|r>>2,c[a++]=(3&r)<<6|63&i;return l}(A),i=Array.isArray(r)?function(A){for(var e=A.length,t=[],n=0;n<e;n+=4)t.push(A[n+3]<<24|A[n+2]<<16|A[n+1]<<8|A[n]);return t}(r):new Uint32Array(r),s=Array.isArray(r)?function(A){for(var e=A.length,t=[],n=0;n<e;n+=2)t.push(A[n+1]<<8|A[n]);return t}(r):new Uint16Array(r),o=Tn(s,12,i[4]/2),a=2===i[5]?Tn(s,(24+i[4])/2):(e=i,t=Math.ceil((24+i[4])/4),e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n)));return new Ln(i[0],i[1],i[2],i[3],o,a)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),Rn="×",jn=function(A){return Kn.get(A)},Vn=function(A,e,t){var n=t-2,r=e[n],i=e[t-1],s=e[t];if(2===i&&3===s)return Rn;if(2===i||3===i||4===i)return"÷";if(2===s||3===s||4===s)return"÷";if(i===Mn&&-1!==[Mn,Dn,kn,Pn].indexOf(s))return Rn;if(!(i!==kn&&i!==Dn||s!==Dn&&10!==s))return Rn;if((i===Pn||10===i)&&10===s)return Rn;if(13===s||5===s)return Rn;if(7===s)return Rn;if(1===i)return Rn;if(13===i&&14===s){for(;5===r;)r=e[--n];if(14===r)return Rn}if(15===i&&15===s){for(var o=0;15===r;)o++,r=e[--n];if(o%2==0)return Rn}return"÷"},qn=function(A){var e=function(A){for(var e=[],t=0,n=A.length;t<n;){var r=A.charCodeAt(t++);if(r>=55296&&r<=56319&&t<n){var i=A.charCodeAt(t++);56320==(64512&i)?e.push(((1023&r)<<10)+(1023&i)+65536):(e.push(r),t--)}else e.push(r)}return e}(A),t=e.length,n=0,r=0,i=e.map(jn);return{next:function(){if(n>=t)return{done:!0,value:null};for(var A=Rn;n<t&&(A=Vn(0,i,++n))===Rn;);if(A!==Rn||n===t){var s=_n.apply(null,e.slice(r,n));return r=n,{value:s,done:!1}}return{done:!0,value:null}}}},Gn=function(A){return 0===A[0]&&255===A[1]&&0===A[2]&&255===A[3]},$n=function(A,e,t,n,r){var i="http://www.w3.org/2000/svg",s=document.createElementNS(i,"svg"),o=document.createElementNS(i,"foreignObject");return s.setAttributeNS(null,"width",A.toString()),s.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",t.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(o),o.appendChild(r),s},Jn=function(A){return new Promise((function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(A))}))},Wn={get SUPPORT_RANGE_BOUNDS(){var A=function(A){if(A.createRange){var e=A.createRange();if(e.getBoundingClientRect){var t=A.createElement("boundtest");t.style.height="123px",t.style.display="block",A.body.appendChild(t),e.selectNode(t);var n=e.getBoundingClientRect(),r=Math.round(n.height);if(A.body.removeChild(t),123===r)return!0}}return!1}(document);return Object.defineProperty(Wn,"SUPPORT_RANGE_BOUNDS",{value:A}),A},get SUPPORT_WORD_BREAKING(){var A=Wn.SUPPORT_RANGE_BOUNDS&&function(A){var e=A.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",A.body.appendChild(e);var t=A.createRange();e.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var n=e.firstChild,r=a(n.data).map((function(A){return l(A)})),i=0,s={},o=r.every((function(A,e){t.setStart(n,i),t.setEnd(n,i+A.length);var r=t.getBoundingClientRect();i+=A.length;var o=r.x>s.x||r.y>s.y;return s=r,0===e||o}));return A.body.removeChild(e),o}(document);return Object.defineProperty(Wn,"SUPPORT_WORD_BREAKING",{value:A}),A},get SUPPORT_SVG_DRAWING(){var A=function(A){var e=new Image,t=A.createElement("canvas"),n=t.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),t.toDataURL()}catch(A){return!1}return!0}(document);return Object.defineProperty(Wn,"SUPPORT_SVG_DRAWING",{value:A}),A},get SUPPORT_FOREIGNOBJECT_DRAWING(){var A="function"==typeof Array.from&&"function"==typeof window.fetch?function(A){var e=A.createElement("canvas"),t=100;e.width=t,e.height=t;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,t,t);var r=new Image,i=e.toDataURL();r.src=i;var s=$n(t,t,0,0,r);return n.fillStyle="red",n.fillRect(0,0,t,t),Jn(s).then((function(e){n.drawImage(e,0,0);var r=n.getImageData(0,0,t,t).data;n.fillStyle="red",n.fillRect(0,0,t,t);var s=A.createElement("div");return s.style.backgroundImage="url("+i+")",s.style.height=t+"px",Gn(r)?Jn($n(t,t,0,0,s)):Promise.reject(!1)})).then((function(A){return n.drawImage(A,0,0),Gn(n.getImageData(0,0,t,t).data)})).catch((function(){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(Wn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:A}),A},get SUPPORT_CORS_IMAGES(){var A=void 0!==(new Image).crossOrigin;return Object.defineProperty(Wn,"SUPPORT_CORS_IMAGES",{value:A}),A},get SUPPORT_RESPONSE_TYPE(){var A="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(Wn,"SUPPORT_RESPONSE_TYPE",{value:A}),A},get SUPPORT_CORS_XHR(){var A="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Wn,"SUPPORT_CORS_XHR",{value:A}),A},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var A=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(Wn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:A}),A}},Zn=function(A,e){this.text=A,this.bounds=e},Xn=function(A,e){var t=e.ownerDocument;if(t){var n=t.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var r=e.parentNode;if(r){r.replaceChild(n,e);var i=o(A,n);return n.firstChild&&r.replaceChild(n.firstChild,n),i}}return s.EMPTY},zn=function(A,e,t){var n=A.ownerDocument;if(!n)throw new Error("Node has no owner document");var r=n.createRange();return r.setStart(A,e),r.setEnd(A,e+t),r},Yn=function(A){if(Wn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(A)).map((function(A){return A.segment}))}return function(A){for(var e,t=qn(A),n=[];!(e=t.next()).done;)e.value&&n.push(e.value.slice());return n}(A)},Ar=function(A,e){return 0!==e.letterSpacing?Yn(A):function(A,e){if(Wn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(A)).map((function(A){return A.segment}))}return tr(A,e)}(A,e)},er=[32,160,4961,65792,65793,4153,4241],tr=function(A,e){for(var t,n=function(A,e){var t=a(A),n=iA(t,e),r=n[0],i=n[1],s=n[2],o=t.length,l=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var A=G;c<o&&(A=rA(t,i,r,++c,s))===G;);if(A!==G||c===o){var e=new sA(t,A,l,c);return l=c,{value:e,done:!1}}return{done:!0,value:null}}}}(A,{lineBreak:e.lineBreak,wordBreak:"break-word"===e.overflowWrap?"break-word":e.wordBreak}),r=[],i=function(){if(t.value){var A=t.value.slice(),e=a(A),n="";e.forEach((function(A){-1===er.indexOf(A)?n+=l(A):(n.length&&r.push(n),r.push(l(A)),n="")})),n.length&&r.push(n)}};!(t=n.next()).done;)i();return r},nr=function(A,e,t){this.text=rr(e.data,t.textTransform),this.textBounds=function(A,e,t,n){var r=Ar(e,t),i=[],o=0;return r.forEach((function(e){if(t.textDecorationLine.length||e.trim().length>0)if(Wn.SUPPORT_RANGE_BOUNDS){var r=zn(n,o,e.length).getClientRects();if(r.length>1){var a=Yn(e),l=0;a.forEach((function(e){i.push(new Zn(e,s.fromDOMRectList(A,zn(n,l+o,e.length).getClientRects()))),l+=e.length}))}else i.push(new Zn(e,s.fromDOMRectList(A,r)))}else{var c=n.splitText(e.length);i.push(new Zn(e,Xn(A,n))),n=c}else Wn.SUPPORT_RANGE_BOUNDS||(n=n.splitText(e.length));o+=e.length})),i}(A,this.text,t,e)},rr=function(A,e){switch(e){case 1:return A.toLowerCase();case 3:return A.replace(ir,sr);case 2:return A.toUpperCase();default:return A}},ir=/(^|\s|:|-|\(|\))([a-z])/g,sr=function(A,e,t){return A.length>0?e+t.toUpperCase():A},or=function(A){function t(e,t){var n=A.call(this,e,t)||this;return n.src=t.currentSrc||t.src,n.intrinsicWidth=t.naturalWidth,n.intrinsicHeight=t.naturalHeight,n.context.cache.addImage(n.src),n}return e(t,A),t}(En),ar=function(A){function t(e,t){var n=A.call(this,e,t)||this;return n.canvas=t,n.intrinsicWidth=t.width,n.intrinsicHeight=t.height,n}return e(t,A),t}(En),lr=function(A){function t(e,t){var n=A.call(this,e,t)||this,r=new XMLSerializer,i=o(e,t);return t.setAttribute("width",i.width+"px"),t.setAttribute("height",i.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(r.serializeToString(t)),n.intrinsicWidth=t.width.baseVal.value,n.intrinsicHeight=t.height.baseVal.value,n.context.cache.addImage(n.svg),n}return e(t,A),t}(En),cr=function(A){function t(e,t){var n=A.call(this,e,t)||this;return n.value=t.value,n}return e(t,A),t}(En),ur=function(A){function t(e,t){var n=A.call(this,e,t)||this;return n.start=t.start,n.reversed="boolean"==typeof t.reversed&&!0===t.reversed,n}return e(t,A),t}(En),dr=[{type:15,flags:0,unit:"px",number:3}],hr=[{type:16,flags:0,number:50}],gr="checkbox",pr="radio",fr="password",Br=707406591,mr=function(A){function t(e,t){var n,r,i,o=A.call(this,e,t)||this;switch(o.type=t.type.toLowerCase(),o.checked=t.checked,o.value=0===(i=(r=t).type===fr?new Array(r.value.length+1).join("•"):r.value).length?r.placeholder||"":i,o.type!==gr&&o.type!==pr||(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=1,o.styles.backgroundClip=[0],o.styles.backgroundOrigin=[0],o.bounds=(n=o.bounds).width>n.height?new s(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new s(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n),o.type){case gr:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=dr;break;case pr:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=hr}return o}return e(t,A),t}(En),wr=function(A){function t(e,t){var n=A.call(this,e,t)||this,r=t.options[t.selectedIndex||0];return n.value=r&&r.text||"",n}return e(t,A),t}(En),vr=function(A){function t(e,t){var n=A.call(this,e,t)||this;return n.value=t.value,n}return e(t,A),t}(En),Cr=function(A){function t(e,t){var n=A.call(this,e,t)||this;n.src=t.src,n.width=parseInt(t.width,10)||0,n.height=parseInt(t.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(t.contentWindow&&t.contentWindow.document&&t.contentWindow.document.documentElement){n.tree=Ur(e,t.contentWindow.document.documentElement);var r=t.contentWindow.document.documentElement?Ce(e,getComputedStyle(t.contentWindow.document.documentElement).backgroundColor):ye.TRANSPARENT,i=t.contentWindow.document.body?Ce(e,getComputedStyle(t.contentWindow.document.body).backgroundColor):ye.TRANSPARENT;n.backgroundColor=he(r)?he(i)?n.styles.backgroundColor:i:r}}catch(A){}return n}return e(t,A),t}(En),yr=["OL","UL","MENU"],br=function(A,e,t,n){for(var r=e.firstChild,i=void 0;r;r=i)if(i=r.nextSibling,Ir(r)&&r.data.trim().length>0)t.textNodes.push(new nr(A,r,t.styles));else if(xr(r))if(Vr(r)&&r.assignedNodes)r.assignedNodes().forEach((function(e){return br(A,e,t,n)}));else{var s=Qr(A,r);s.styles.isVisible()&&(Er(r,s,n)?s.flags|=4:Fr(s.styles)&&(s.flags|=2),-1!==yr.indexOf(r.tagName)&&(s.flags|=8),t.elements.push(s),r.slot,r.shadowRoot?br(A,r.shadowRoot,s,n):Rr(r)||Or(r)||jr(r)||br(A,r,s,n))}},Qr=function(A,e){return Pr(e)?new or(A,e):Dr(e)?new ar(A,e):Or(e)?new lr(A,e):Hr(e)?new cr(A,e):Sr(e)?new ur(A,e):Nr(e)?new mr(A,e):jr(e)?new wr(A,e):Rr(e)?new vr(A,e):_r(e)?new Cr(A,e):new En(A,e)},Ur=function(A,e){var t=Qr(A,e);return t.flags|=4,br(A,e,t,t),t},Er=function(A,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Mr(A)&&t.styles.isTransparent()},Fr=function(A){return A.isPositioned()||A.isFloating()},Ir=function(A){return A.nodeType===Node.TEXT_NODE},xr=function(A){return A.nodeType===Node.ELEMENT_NODE},Tr=function(A){return xr(A)&&void 0!==A.style&&!Lr(A)},Lr=function(A){return"object"==typeof A.className},Hr=function(A){return"LI"===A.tagName},Sr=function(A){return"OL"===A.tagName},Nr=function(A){return"INPUT"===A.tagName},Or=function(A){return"svg"===A.tagName},Mr=function(A){return"BODY"===A.tagName},Dr=function(A){return"CANVAS"===A.tagName},kr=function(A){return"VIDEO"===A.tagName},Pr=function(A){return"IMG"===A.tagName},_r=function(A){return"IFRAME"===A.tagName},Kr=function(A){return"STYLE"===A.tagName},Rr=function(A){return"TEXTAREA"===A.tagName},jr=function(A){return"SELECT"===A.tagName},Vr=function(A){return"SLOT"===A.tagName},qr=function(A){return A.tagName.indexOf("-")>0},Gr=function(){function A(){this.counters={}}return A.prototype.getCounterValue=function(A){var e=this.counters[A];return e&&e.length?e[e.length-1]:1},A.prototype.getCounterValues=function(A){return this.counters[A]||[]},A.prototype.pop=function(A){var e=this;A.forEach((function(A){return e.counters[A].pop()}))},A.prototype.parse=function(A){var e=this,t=A.counterIncrement,n=A.counterReset,r=!0;null!==t&&t.forEach((function(A){var t=e.counters[A.counter];t&&0!==A.increment&&(r=!1,t.length||t.push(1),t[Math.max(0,t.length-1)]+=A.increment)}));var i=[];return r&&n.forEach((function(A){var t=e.counters[A.counter];i.push(A.counter),t||(t=e.counters[A.counter]=[]),t.push(A.reset)})),i},A}(),$r={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Jr={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Wr={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Zr={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Xr=function(A,e,t,n,r,i){return A<e||A>t?si(A,r,i.length>0):n.integers.reduce((function(e,t,r){for(;A>=t;)A-=t,e+=n.values[r];return e}),"")+i},zr=function(A,e,t,n){var r="";do{t||A--,r=n(A)+r,A/=e}while(A*e>=e);return r},Yr=function(A,e,t,n,r){var i=t-e+1;return(A<0?"-":"")+(zr(Math.abs(A),i,n,(function(A){return l(Math.floor(A%i)+e)}))+r)},Ai=function(A,e,t){void 0===t&&(t=". ");var n=e.length;return zr(Math.abs(A),n,!1,(function(A){return e[Math.floor(A%n)]}))+t},ei=function(A,e,t,n,r,i){if(A<-9999||A>9999)return si(A,4,r.length>0);var s=Math.abs(A),o=r;if(0===s)return e[0]+o;for(var a=0;s>0&&a<=4;a++){var l=s%10;0===l&&cn(i,1)&&""!==o?o=e[l]+o:l>1||1===l&&0===a||1===l&&1===a&&cn(i,2)||1===l&&1===a&&cn(i,4)&&A>100||1===l&&a>1&&cn(i,8)?o=e[l]+(a>0?t[a-1]:"")+o:1===l&&a>0&&(o=t[a-1]+o),s=Math.floor(s/10)}return(A<0?n:"")+o},ti="十百千萬",ni="拾佰仟萬",ri="マイナス",ii="마이너스",si=function(A,e,t){var n=t?". ":"",r=t?"、":"",i=t?", ":"",s=t?" ":"";switch(e){case 0:return"•"+s;case 1:return"◦"+s;case 2:return"◾"+s;case 5:var o=Yr(A,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Ai(A,"〇一二三四五六七八九",r);case 6:return Xr(A,1,3999,$r,3,n).toLowerCase();case 7:return Xr(A,1,3999,$r,3,n);case 8:return Yr(A,945,969,!1,n);case 9:return Yr(A,97,122,!1,n);case 10:return Yr(A,65,90,!1,n);case 11:return Yr(A,1632,1641,!0,n);case 12:case 49:return Xr(A,1,9999,Jr,3,n);case 35:return Xr(A,1,9999,Jr,3,n).toLowerCase();case 13:return Yr(A,2534,2543,!0,n);case 14:case 30:return Yr(A,6112,6121,!0,n);case 15:return Ai(A,"子丑寅卯辰巳午未申酉戌亥",r);case 16:return Ai(A,"甲乙丙丁戊己庚辛壬癸",r);case 17:case 48:return ei(A,"零一二三四五六七八九",ti,"負",r,14);case 47:return ei(A,"零壹貳參肆伍陸柒捌玖",ni,"負",r,15);case 42:return ei(A,"零一二三四五六七八九",ti,"负",r,14);case 41:return ei(A,"零壹贰叁肆伍陆柒捌玖",ni,"负",r,15);case 26:return ei(A,"〇一二三四五六七八九","十百千万",ri,r,0);case 25:return ei(A,"零壱弐参四伍六七八九","拾百千万",ri,r,7);case 31:return ei(A,"영일이삼사오육칠팔구","십백천만",ii,i,7);case 33:return ei(A,"零一二三四五六七八九","十百千萬",ii,i,0);case 32:return ei(A,"零壹貳參四五六七八九","拾百千",ii,i,7);case 18:return Yr(A,2406,2415,!0,n);case 20:return Xr(A,1,19999,Zr,3,n);case 21:return Yr(A,2790,2799,!0,n);case 22:return Yr(A,2662,2671,!0,n);case 22:return Xr(A,1,10999,Wr,3,n);case 23:return Ai(A,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Ai(A,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Yr(A,3302,3311,!0,n);case 28:return Ai(A,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",r);case 29:return Ai(A,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",r);case 34:return Yr(A,3792,3801,!0,n);case 37:return Yr(A,6160,6169,!0,n);case 38:return Yr(A,4160,4169,!0,n);case 39:return Yr(A,2918,2927,!0,n);case 40:return Yr(A,1776,1785,!0,n);case 43:return Yr(A,3046,3055,!0,n);case 44:return Yr(A,3174,3183,!0,n);case 45:return Yr(A,3664,3673,!0,n);case 46:return Yr(A,3872,3881,!0,n);default:return Yr(A,48,57,!0,n)}},oi="data-html2canvas-ignore",ai=function(){function A(A,e,t){if(this.context=A,this.options=t,this.scrolledElements=[],this.referenceElement=e,this.counters=new Gr,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement,!1)}return A.prototype.toIFrame=function(A,e){var t=this,i=ci(A,e);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var s=A.defaultView.pageXOffset,o=A.defaultView.pageYOffset,a=i.contentWindow,l=a.document,c=hi(i).then((function(){return n(t,void 0,void 0,(function(){var A,t;return r(this,(function(n){switch(n.label){case 0:return this.scrolledElements.forEach(mi),a&&(a.scrollTo(e.left,e.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||a.scrollY===e.top&&a.scrollX===e.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-e.left,a.scrollY-e.top,0,0))),A=this.options.onclone,void 0===(t=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:n.sent(),n.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,di(l)]:[3,4];case 3:n.sent(),n.label=4;case 4:return"function"==typeof A?[2,Promise.resolve().then((function(){return A(l,t)})).then((function(){return i}))]:[2,i]}}))}))}));return l.open(),l.write(fi(document.doctype)+"<html></html>"),Bi(this.referenceElement.ownerDocument,s,o),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),c},A.prototype.createElementClone=function(A){if(Un(A,2),Dr(A))return this.createCanvasClone(A);if(kr(A))return this.createVideoClone(A);if(Kr(A))return this.createStyleClone(A);var e=A.cloneNode(!1);return Pr(e)&&(Pr(A)&&A.currentSrc&&A.currentSrc!==A.src&&(e.src=A.currentSrc,e.srcset=""),"lazy"===e.loading&&(e.loading="eager")),qr(e)?this.createCustomElementClone(e):e},A.prototype.createCustomElementClone=function(A){var e=document.createElement("html2canvascustomelement");return pi(A.style,e),e},A.prototype.createStyleClone=function(A){try{var e=A.sheet;if(e&&e.cssRules){var t=[].slice.call(e.cssRules,0).reduce((function(A,e){return e&&"string"==typeof e.cssText?A+e.cssText:A}),""),n=A.cloneNode(!1);return n.textContent=t,n}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),"SecurityError"!==A.name)throw A}return A.cloneNode(!1)},A.prototype.createCanvasClone=function(A){var e;if(this.options.inlineImages&&A.ownerDocument){var t=A.ownerDocument.createElement("img");try{return t.src=A.toDataURL(),t}catch(e){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",A)}}var n=A.cloneNode(!1);try{n.width=A.width,n.height=A.height;var r=A.getContext("2d"),i=n.getContext("2d");if(i)if(!this.options.allowTaint&&r)i.putImageData(r.getImageData(0,0,A.width,A.height),0,0);else{var s=null!==(e=A.getContext("webgl2"))&&void 0!==e?e:A.getContext("webgl");if(s){var o=s.getContextAttributes();!1===(null==o?void 0:o.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",A)}i.drawImage(A,0,0)}return n}catch(e){this.context.logger.info("Unable to clone canvas as it is tainted",A)}return n},A.prototype.createVideoClone=function(A){var e=A.ownerDocument.createElement("canvas");e.width=A.offsetWidth,e.height=A.offsetHeight;var t=e.getContext("2d");try{return t&&(t.drawImage(A,0,0,e.width,e.height),this.options.allowTaint||t.getImageData(0,0,e.width,e.height)),e}catch(e){this.context.logger.info("Unable to clone video as it is tainted",A)}var n=A.ownerDocument.createElement("canvas");return n.width=A.offsetWidth,n.height=A.offsetHeight,n},A.prototype.appendChildNode=function(A,e,t){xr(e)&&("SCRIPT"===e.tagName||e.hasAttribute(oi)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(e))||this.options.copyStyles&&xr(e)&&Kr(e)||A.appendChild(this.cloneNode(e,t))},A.prototype.cloneChildNodes=function(A,e,t){for(var n=this,r=A.shadowRoot?A.shadowRoot.firstChild:A.firstChild;r;r=r.nextSibling)if(xr(r)&&Vr(r)&&"function"==typeof r.assignedNodes){var i=r.assignedNodes();i.length&&i.forEach((function(A){return n.appendChildNode(e,A,t)}))}else this.appendChildNode(e,r,t)},A.prototype.cloneNode=function(A,e){if(Ir(A))return document.createTextNode(A.data);if(!A.ownerDocument)return A.cloneNode(!1);var t=A.ownerDocument.defaultView;if(t&&xr(A)&&(Tr(A)||Lr(A))){var n=this.createElementClone(A);n.style.transitionProperty="none";var r=t.getComputedStyle(A),i=t.getComputedStyle(A,":before"),s=t.getComputedStyle(A,":after");this.referenceElement===A&&Tr(n)&&(this.clonedReferenceElement=n),Mr(n)&&yi(n);var o=this.counters.parse(new bn(this.context,r)),a=this.resolvePseudoContent(A,n,i,On.BEFORE);qr(A)&&(e=!0),kr(A)||this.cloneChildNodes(A,n,e),a&&n.insertBefore(a,n.firstChild);var l=this.resolvePseudoContent(A,n,s,On.AFTER);return l&&n.appendChild(l),this.counters.pop(o),(r&&(this.options.copyStyles||Lr(A))&&!_r(A)||e)&&pi(r,n),0===A.scrollTop&&0===A.scrollLeft||this.scrolledElements.push([n,A.scrollLeft,A.scrollTop]),(Rr(A)||jr(A))&&(Rr(n)||jr(n))&&(n.value=A.value),n}return A.cloneNode(!1)},A.prototype.resolvePseudoContent=function(A,e,t,n){var r=this;if(t){var i=t.content,s=e.ownerDocument;if(s&&i&&"none"!==i&&"-moz-alt-content"!==i&&"none"!==t.display){this.counters.parse(new bn(this.context,t));var o=new yn(this.context,t),a=s.createElement("html2canvaspseudoelement");pi(t,a),o.content.forEach((function(e){if(0===e.type)a.appendChild(s.createTextNode(e.value));else if(22===e.type){var t=s.createElement("img");t.src=e.value,t.style.opacity="1",a.appendChild(t)}else if(18===e.type){if("attr"===e.name){var n=e.values.filter(qA);n.length&&a.appendChild(s.createTextNode(A.getAttribute(n[0].value)||""))}else if("counter"===e.name){var i=e.values.filter(WA),l=i[0],c=i[1];if(l&&qA(l)){var u=r.counters.getCounterValue(l.value),d=c&&qA(c)?xt.parse(r.context,c.value):3;a.appendChild(s.createTextNode(si(u,d,!1)))}}else if("counters"===e.name){var h=e.values.filter(WA),g=(l=h[0],h[1]);if(c=h[2],l&&qA(l)){var p=r.counters.getCounterValues(l.value),f=c&&qA(c)?xt.parse(r.context,c.value):3,B=g&&0===g.type?g.value:"",m=p.map((function(A){return si(A,f,!1)})).join(B);a.appendChild(s.createTextNode(m))}}}else if(20===e.type)switch(e.value){case"open-quote":a.appendChild(s.createTextNode(fn(o.quotes,r.quoteDepth++,!0)));break;case"close-quote":a.appendChild(s.createTextNode(fn(o.quotes,--r.quoteDepth,!1)));break;default:a.appendChild(s.createTextNode(e.value))}})),a.className=wi+" "+vi;var l=n===On.BEFORE?" "+wi:" "+vi;return Lr(e)?e.className.baseValue+=l:e.className+=l,a}}},A.destroy=function(A){return!!A.parentNode&&(A.parentNode.removeChild(A),!0)},A}();!function(A){A[A.BEFORE=0]="BEFORE",A[A.AFTER=1]="AFTER"}(On||(On={}));var li,ci=function(A,e){var t=A.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(oi,"true"),A.body.appendChild(t),t},ui=function(A){return new Promise((function(e){A.complete?e():A.src?(A.onload=e,A.onerror=e):e()}))},di=function(A){return Promise.all([].slice.call(A.images,0).map(ui))},hi=function(A){return new Promise((function(e,t){var n=A.contentWindow;if(!n)return t("No window assigned for iframe");var r=n.document;n.onload=A.onload=function(){n.onload=A.onload=null;var t=setInterval((function(){r.body.childNodes.length>0&&"complete"===r.readyState&&(clearInterval(t),e(A))}),50)}}))},gi=["all","d","content"],pi=function(A,e){for(var t=A.length-1;t>=0;t--){var n=A.item(t);-1===gi.indexOf(n)&&e.style.setProperty(n,A.getPropertyValue(n))}return e},fi=function(A){var e="";return A&&(e+="<!DOCTYPE ",A.name&&(e+=A.name),A.internalSubset&&(e+=A.internalSubset),A.publicId&&(e+='"'+A.publicId+'"'),A.systemId&&(e+='"'+A.systemId+'"'),e+=">"),e},Bi=function(A,e,t){A&&A.defaultView&&(e!==A.defaultView.pageXOffset||t!==A.defaultView.pageYOffset)&&A.defaultView.scrollTo(e,t)},mi=function(A){var e=A[0],t=A[1],n=A[2];e.scrollLeft=t,e.scrollTop=n},wi="___html2canvas___pseudoelement_before",vi="___html2canvas___pseudoelement_after",Ci='{\n    content: "" !important;\n    display: none !important;\n}',yi=function(A){bi(A,"."+wi+":before"+Ci+"\n         ."+vi+":after"+Ci)},bi=function(A,e){var t=A.ownerDocument;if(t){var n=t.createElement("style");n.textContent=e,A.appendChild(n)}},Qi=function(){function A(){}return A.getOrigin=function(e){var t=A._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},A.isSameOrigin=function(e){return A.getOrigin(e)===A._origin},A.setContext=function(e){A._link=e.document.createElement("a"),A._origin=A.getOrigin(e.location.href)},A._origin="about:blank",A}(),Ui=function(){function A(A,e){this.context=A,this._options=e,this._cache={}}return A.prototype.addImage=function(A){var e=Promise.resolve();return this.has(A)?e:Hi(A)||xi(A)?((this._cache[A]=this.loadImage(A)).catch((function(){})),e):e},A.prototype.match=function(A){return this._cache[A]},A.prototype.loadImage=function(A){return n(this,void 0,void 0,(function(){var e,t,n,i,s=this;return r(this,(function(r){switch(r.label){case 0:return e=Qi.isSameOrigin(A),t=!Ti(A)&&!0===this._options.useCORS&&Wn.SUPPORT_CORS_IMAGES&&!e,n=!Ti(A)&&!e&&!Hi(A)&&"string"==typeof this._options.proxy&&Wn.SUPPORT_CORS_XHR&&!t,e||!1!==this._options.allowTaint||Ti(A)||Hi(A)||n||t?(i=A,n?[4,this.proxy(i)]:[3,2]):[2];case 1:i=r.sent(),r.label=2;case 2:return this.context.logger.debug("Added image "+A.substring(0,256)),[4,new Promise((function(A,e){var n=new Image;n.onload=function(){return A(n)},n.onerror=e,(Li(i)||t)&&(n.crossOrigin="anonymous"),n.src=i,!0===n.complete&&setTimeout((function(){return A(n)}),500),s._options.imageTimeout>0&&setTimeout((function(){return e("Timed out ("+s._options.imageTimeout+"ms) loading image")}),s._options.imageTimeout)}))];case 3:return[2,r.sent()]}}))}))},A.prototype.has=function(A){return void 0!==this._cache[A]},A.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},A.prototype.proxy=function(A){var e=this,t=this._options.proxy;if(!t)throw new Error("No proxy defined");var n=A.substring(0,256);return new Promise((function(r,i){var s=Wn.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(200===o.status)if("text"===s)r(o.response);else{var A=new FileReader;A.addEventListener("load",(function(){return r(A.result)}),!1),A.addEventListener("error",(function(A){return i(A)}),!1),A.readAsDataURL(o.response)}else i("Failed to proxy resource "+n+" with status code "+o.status)},o.onerror=i;var a=t.indexOf("?")>-1?"&":"?";if(o.open("GET",""+t+a+"url="+encodeURIComponent(A)+"&responseType="+s),"text"!==s&&o instanceof XMLHttpRequest&&(o.responseType=s),e._options.imageTimeout){var l=e._options.imageTimeout;o.timeout=l,o.ontimeout=function(){return i("Timed out ("+l+"ms) proxying "+n)}}o.send()}))},A}(),Ei=/^data:image\/svg\+xml/i,Fi=/^data:image\/.*;base64,/i,Ii=/^data:image\/.*/i,xi=function(A){return Wn.SUPPORT_SVG_DRAWING||!Si(A)},Ti=function(A){return Ii.test(A)},Li=function(A){return Fi.test(A)},Hi=function(A){return"blob"===A.substr(0,4)},Si=function(A){return"svg"===A.substr(-3).toLowerCase()||Ei.test(A)},Ni=function(){function A(A,e){this.type=0,this.x=A,this.y=e}return A.prototype.add=function(e,t){return new A(this.x+e,this.y+t)},A}(),Oi=function(A,e,t){return new Ni(A.x+(e.x-A.x)*t,A.y+(e.y-A.y)*t)},Mi=function(){function A(A,e,t,n){this.type=1,this.start=A,this.startControl=e,this.endControl=t,this.end=n}return A.prototype.subdivide=function(e,t){var n=Oi(this.start,this.startControl,e),r=Oi(this.startControl,this.endControl,e),i=Oi(this.endControl,this.end,e),s=Oi(n,r,e),o=Oi(r,i,e),a=Oi(s,o,e);return t?new A(this.start,n,s,a):new A(a,o,i,this.end)},A.prototype.add=function(e,t){return new A(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},A.prototype.reverse=function(){return new A(this.end,this.endControl,this.startControl,this.start)},A}(),Di=function(A){return 1===A.type},ki=function(A){var e=A.styles,t=A.bounds,n=re(e.borderTopLeftRadius,t.width,t.height),r=n[0],i=n[1],s=re(e.borderTopRightRadius,t.width,t.height),o=s[0],a=s[1],l=re(e.borderBottomRightRadius,t.width,t.height),c=l[0],u=l[1],d=re(e.borderBottomLeftRadius,t.width,t.height),h=d[0],g=d[1],p=[];p.push((r+o)/t.width),p.push((h+c)/t.width),p.push((i+g)/t.height),p.push((a+u)/t.height);var f=Math.max.apply(Math,p);f>1&&(r/=f,i/=f,o/=f,a/=f,c/=f,u/=f,h/=f,g/=f);var B=t.width-o,m=t.height-u,w=t.width-c,v=t.height-g,C=e.borderTopWidth,y=e.borderRightWidth,b=e.borderBottomWidth,Q=e.borderLeftWidth,U=ie(e.paddingTop,A.bounds.width),E=ie(e.paddingRight,A.bounds.width),F=ie(e.paddingBottom,A.bounds.width),I=ie(e.paddingLeft,A.bounds.width);this.topLeftBorderDoubleOuterBox=r>0||i>0?Pi(t.left+Q/3,t.top+C/3,r-Q/3,i-C/3,li.TOP_LEFT):new Ni(t.left+Q/3,t.top+C/3),this.topRightBorderDoubleOuterBox=r>0||i>0?Pi(t.left+B,t.top+C/3,o-y/3,a-C/3,li.TOP_RIGHT):new Ni(t.left+t.width-y/3,t.top+C/3),this.bottomRightBorderDoubleOuterBox=c>0||u>0?Pi(t.left+w,t.top+m,c-y/3,u-b/3,li.BOTTOM_RIGHT):new Ni(t.left+t.width-y/3,t.top+t.height-b/3),this.bottomLeftBorderDoubleOuterBox=h>0||g>0?Pi(t.left+Q/3,t.top+v,h-Q/3,g-b/3,li.BOTTOM_LEFT):new Ni(t.left+Q/3,t.top+t.height-b/3),this.topLeftBorderDoubleInnerBox=r>0||i>0?Pi(t.left+2*Q/3,t.top+2*C/3,r-2*Q/3,i-2*C/3,li.TOP_LEFT):new Ni(t.left+2*Q/3,t.top+2*C/3),this.topRightBorderDoubleInnerBox=r>0||i>0?Pi(t.left+B,t.top+2*C/3,o-2*y/3,a-2*C/3,li.TOP_RIGHT):new Ni(t.left+t.width-2*y/3,t.top+2*C/3),this.bottomRightBorderDoubleInnerBox=c>0||u>0?Pi(t.left+w,t.top+m,c-2*y/3,u-2*b/3,li.BOTTOM_RIGHT):new Ni(t.left+t.width-2*y/3,t.top+t.height-2*b/3),this.bottomLeftBorderDoubleInnerBox=h>0||g>0?Pi(t.left+2*Q/3,t.top+v,h-2*Q/3,g-2*b/3,li.BOTTOM_LEFT):new Ni(t.left+2*Q/3,t.top+t.height-2*b/3),this.topLeftBorderStroke=r>0||i>0?Pi(t.left+Q/2,t.top+C/2,r-Q/2,i-C/2,li.TOP_LEFT):new Ni(t.left+Q/2,t.top+C/2),this.topRightBorderStroke=r>0||i>0?Pi(t.left+B,t.top+C/2,o-y/2,a-C/2,li.TOP_RIGHT):new Ni(t.left+t.width-y/2,t.top+C/2),this.bottomRightBorderStroke=c>0||u>0?Pi(t.left+w,t.top+m,c-y/2,u-b/2,li.BOTTOM_RIGHT):new Ni(t.left+t.width-y/2,t.top+t.height-b/2),this.bottomLeftBorderStroke=h>0||g>0?Pi(t.left+Q/2,t.top+v,h-Q/2,g-b/2,li.BOTTOM_LEFT):new Ni(t.left+Q/2,t.top+t.height-b/2),this.topLeftBorderBox=r>0||i>0?Pi(t.left,t.top,r,i,li.TOP_LEFT):new Ni(t.left,t.top),this.topRightBorderBox=o>0||a>0?Pi(t.left+B,t.top,o,a,li.TOP_RIGHT):new Ni(t.left+t.width,t.top),this.bottomRightBorderBox=c>0||u>0?Pi(t.left+w,t.top+m,c,u,li.BOTTOM_RIGHT):new Ni(t.left+t.width,t.top+t.height),this.bottomLeftBorderBox=h>0||g>0?Pi(t.left,t.top+v,h,g,li.BOTTOM_LEFT):new Ni(t.left,t.top+t.height),this.topLeftPaddingBox=r>0||i>0?Pi(t.left+Q,t.top+C,Math.max(0,r-Q),Math.max(0,i-C),li.TOP_LEFT):new Ni(t.left+Q,t.top+C),this.topRightPaddingBox=o>0||a>0?Pi(t.left+Math.min(B,t.width-y),t.top+C,B>t.width+y?0:Math.max(0,o-y),Math.max(0,a-C),li.TOP_RIGHT):new Ni(t.left+t.width-y,t.top+C),this.bottomRightPaddingBox=c>0||u>0?Pi(t.left+Math.min(w,t.width-Q),t.top+Math.min(m,t.height-b),Math.max(0,c-y),Math.max(0,u-b),li.BOTTOM_RIGHT):new Ni(t.left+t.width-y,t.top+t.height-b),this.bottomLeftPaddingBox=h>0||g>0?Pi(t.left+Q,t.top+Math.min(v,t.height-b),Math.max(0,h-Q),Math.max(0,g-b),li.BOTTOM_LEFT):new Ni(t.left+Q,t.top+t.height-b),this.topLeftContentBox=r>0||i>0?Pi(t.left+Q+I,t.top+C+U,Math.max(0,r-(Q+I)),Math.max(0,i-(C+U)),li.TOP_LEFT):new Ni(t.left+Q+I,t.top+C+U),this.topRightContentBox=o>0||a>0?Pi(t.left+Math.min(B,t.width+Q+I),t.top+C+U,B>t.width+Q+I?0:o-Q+I,a-(C+U),li.TOP_RIGHT):new Ni(t.left+t.width-(y+E),t.top+C+U),this.bottomRightContentBox=c>0||u>0?Pi(t.left+Math.min(w,t.width-(Q+I)),t.top+Math.min(m,t.height+C+U),Math.max(0,c-(y+E)),u-(b+F),li.BOTTOM_RIGHT):new Ni(t.left+t.width-(y+E),t.top+t.height-(b+F)),this.bottomLeftContentBox=h>0||g>0?Pi(t.left+Q+I,t.top+v,Math.max(0,h-(Q+I)),g-(b+F),li.BOTTOM_LEFT):new Ni(t.left+Q+I,t.top+t.height-(b+F))};!function(A){A[A.TOP_LEFT=0]="TOP_LEFT",A[A.TOP_RIGHT=1]="TOP_RIGHT",A[A.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",A[A.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(li||(li={}));var Pi=function(A,e,t,n,r){var i=(Math.sqrt(2)-1)/3*4,s=t*i,o=n*i,a=A+t,l=e+n;switch(r){case li.TOP_LEFT:return new Mi(new Ni(A,l),new Ni(A,l-o),new Ni(a-s,e),new Ni(a,e));case li.TOP_RIGHT:return new Mi(new Ni(A,e),new Ni(A+s,e),new Ni(a,l-o),new Ni(a,l));case li.BOTTOM_RIGHT:return new Mi(new Ni(a,e),new Ni(a,e+o),new Ni(A+s,l),new Ni(A,l));case li.BOTTOM_LEFT:default:return new Mi(new Ni(a,l),new Ni(a-s,l),new Ni(A,e+o),new Ni(A,e))}},_i=function(A){return[A.topLeftBorderBox,A.topRightBorderBox,A.bottomRightBorderBox,A.bottomLeftBorderBox]},Ki=function(A){return[A.topLeftPaddingBox,A.topRightPaddingBox,A.bottomRightPaddingBox,A.bottomLeftPaddingBox]},Ri=function(A,e,t){this.offsetX=A,this.offsetY=e,this.matrix=t,this.type=0,this.target=6},ji=function(A,e){this.path=A,this.target=e,this.type=1},Vi=function(A){this.opacity=A,this.type=2,this.target=6},qi=function(A){return 1===A.type},Gi=function(A,e){return A.length===e.length&&A.some((function(A,t){return A===e[t]}))},$i=function(A){this.element=A,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},Ji=function(){function A(A,e){if(this.container=A,this.parent=e,this.effects=[],this.curves=new ki(this.container),this.container.styles.opacity<1&&this.effects.push(new Vi(this.container.styles.opacity)),null!==this.container.styles.transform){var t=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,r=this.container.styles.transform;this.effects.push(new Ri(t,n,r))}if(0!==this.container.styles.overflowX){var i=_i(this.curves),s=Ki(this.curves);Gi(i,s)?this.effects.push(new ji(i,6)):(this.effects.push(new ji(i,2)),this.effects.push(new ji(s,4)))}}return A.prototype.getEffects=function(A){for(var e=-1===[2,3].indexOf(this.container.styles.position),t=this.parent,n=this.effects.slice(0);t;){var r=t.effects.filter((function(A){return!qi(A)}));if(e||0!==t.container.styles.position||!t.parent){if(n.unshift.apply(n,r),e=-1===[2,3].indexOf(t.container.styles.position),0!==t.container.styles.overflowX){var i=_i(t.curves),s=Ki(t.curves);Gi(i,s)||n.unshift(new ji(s,6))}}else n.unshift.apply(n,r);t=t.parent}return n.filter((function(e){return cn(e.target,A)}))},A}(),Wi=function(A,e,t,n){A.container.elements.forEach((function(r){var i=cn(r.flags,4),s=cn(r.flags,2),o=new Ji(r,A);cn(r.styles.display,2048)&&n.push(o);var a=cn(r.flags,8)?[]:n;if(i||s){var l=i||r.styles.isPositioned()?t:e,c=new $i(o);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var u=r.styles.zIndex.order;if(u<0){var d=0;l.negativeZIndex.some((function(A,e){return u>A.element.container.styles.zIndex.order?(d=e,!1):d>0})),l.negativeZIndex.splice(d,0,c)}else if(u>0){var h=0;l.positiveZIndex.some((function(A,e){return u>=A.element.container.styles.zIndex.order?(h=e+1,!1):h>0})),l.positiveZIndex.splice(h,0,c)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else r.styles.isFloating()?l.nonPositionedFloats.push(c):l.nonPositionedInlineLevel.push(c);Wi(o,c,i?c:t,a)}else r.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),Wi(o,e,t,a);cn(r.flags,8)&&Zi(r,a)}))},Zi=function(A,e){for(var t=A instanceof ur?A.start:1,n=A instanceof ur&&A.reversed,r=0;r<e.length;r++){var i=e[r];i.container instanceof cr&&"number"==typeof i.container.value&&0!==i.container.value&&(t=i.container.value),i.listValue=si(t,i.container.styles.listStyleType,!0),t+=n?-1:1}},Xi=function(A,e){switch(e){case 0:return Yi(A.topLeftBorderBox,A.topLeftPaddingBox,A.topRightBorderBox,A.topRightPaddingBox);case 1:return Yi(A.topRightBorderBox,A.topRightPaddingBox,A.bottomRightBorderBox,A.bottomRightPaddingBox);case 2:return Yi(A.bottomRightBorderBox,A.bottomRightPaddingBox,A.bottomLeftBorderBox,A.bottomLeftPaddingBox);default:return Yi(A.bottomLeftBorderBox,A.bottomLeftPaddingBox,A.topLeftBorderBox,A.topLeftPaddingBox)}},zi=function(A,e){var t=[];return Di(A)?t.push(A.subdivide(.5,!1)):t.push(A),Di(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Yi=function(A,e,t,n){var r=[];return Di(A)?r.push(A.subdivide(.5,!1)):r.push(A),Di(t)?r.push(t.subdivide(.5,!0)):r.push(t),Di(n)?r.push(n.subdivide(.5,!0).reverse()):r.push(n),Di(e)?r.push(e.subdivide(.5,!1).reverse()):r.push(e),r},As=function(A){var e=A.bounds,t=A.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},es=function(A){var e=A.styles,t=A.bounds,n=ie(e.paddingLeft,t.width),r=ie(e.paddingRight,t.width),i=ie(e.paddingTop,t.width),s=ie(e.paddingBottom,t.width);return t.add(n+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+r),-(e.borderTopWidth+e.borderBottomWidth+i+s))},ts=function(A,e,t){var n=function(A,e){return 0===A?e.bounds:2===A?es(e):As(e)}(ss(A.styles.backgroundOrigin,e),A),r=function(A,e){return 0===A?e.bounds:2===A?es(e):As(e)}(ss(A.styles.backgroundClip,e),A),i=is(ss(A.styles.backgroundSize,e),t,n),s=i[0],o=i[1],a=re(ss(A.styles.backgroundPosition,e),n.width-s,n.height-o);return[os(ss(A.styles.backgroundRepeat,e),a,i,n,r),Math.round(n.left+a[0]),Math.round(n.top+a[1]),s,o]},ns=function(A){return qA(A)&&A.value===Ke.AUTO},rs=function(A){return"number"==typeof A},is=function(A,e,t){var n=e[0],r=e[1],i=e[2],s=A[0],o=A[1];if(!s)return[0,0];if(YA(s)&&o&&YA(o))return[ie(s,t.width),ie(o,t.height)];var a=rs(i);if(qA(s)&&(s.value===Ke.CONTAIN||s.value===Ke.COVER))return rs(i)?t.width/t.height<i!=(s.value===Ke.COVER)?[t.width,t.width/i]:[t.height*i,t.height]:[t.width,t.height];var l=rs(n),c=rs(r),u=l||c;if(ns(s)&&(!o||ns(o)))return l&&c?[n,r]:a||u?u&&a?[l?n:r*i,c?r:n/i]:[l?n:t.width,c?r:t.height]:[t.width,t.height];if(a){var d=0,h=0;return YA(s)?d=ie(s,t.width):YA(o)&&(h=ie(o,t.height)),ns(s)?d=h*i:o&&!ns(o)||(h=d/i),[d,h]}var g=null,p=null;if(YA(s)?g=ie(s,t.width):o&&YA(o)&&(p=ie(o,t.height)),null===g||o&&!ns(o)||(p=l&&c?g/n*r:t.height),null!==p&&ns(s)&&(g=l&&c?p/r*n:t.width),null!==g&&null!==p)return[g,p];throw new Error("Unable to calculate background-size for element")},ss=function(A,e){var t=A[e];return void 0===t?A[0]:t},os=function(A,e,t,n,r){var i=e[0],s=e[1],o=t[0],a=t[1];switch(A){case 2:return[new Ni(Math.round(n.left),Math.round(n.top+s)),new Ni(Math.round(n.left+n.width),Math.round(n.top+s)),new Ni(Math.round(n.left+n.width),Math.round(a+n.top+s)),new Ni(Math.round(n.left),Math.round(a+n.top+s))];case 3:return[new Ni(Math.round(n.left+i),Math.round(n.top)),new Ni(Math.round(n.left+i+o),Math.round(n.top)),new Ni(Math.round(n.left+i+o),Math.round(n.height+n.top)),new Ni(Math.round(n.left+i),Math.round(n.height+n.top))];case 1:return[new Ni(Math.round(n.left+i),Math.round(n.top+s)),new Ni(Math.round(n.left+i+o),Math.round(n.top+s)),new Ni(Math.round(n.left+i+o),Math.round(n.top+s+a)),new Ni(Math.round(n.left+i),Math.round(n.top+s+a))];default:return[new Ni(Math.round(r.left),Math.round(r.top)),new Ni(Math.round(r.left+r.width),Math.round(r.top)),new Ni(Math.round(r.left+r.width),Math.round(r.height+r.top)),new Ni(Math.round(r.left),Math.round(r.height+r.top))]}},as="Hidden Text",ls=function(){function A(A){this._data={},this._document=A}return A.prototype.parseMetrics=function(A,e){var t=this._document.createElement("div"),n=this._document.createElement("img"),r=this._document.createElement("span"),i=this._document.body;t.style.visibility="hidden",t.style.fontFamily=A,t.style.fontSize=e,t.style.margin="0",t.style.padding="0",t.style.whiteSpace="nowrap",i.appendChild(t),n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",r.style.fontFamily=A,r.style.fontSize=e,r.style.margin="0",r.style.padding="0",r.appendChild(this._document.createTextNode(as)),t.appendChild(r),t.appendChild(n);var s=n.offsetTop-r.offsetTop+2;t.removeChild(r),t.appendChild(this._document.createTextNode(as)),t.style.lineHeight="normal",n.style.verticalAlign="super";var o=n.offsetTop-t.offsetTop+2;return i.removeChild(t),{baseline:s,middle:o}},A.prototype.getMetrics=function(A,e){var t=A+" "+e;return void 0===this._data[t]&&(this._data[t]=this.parseMetrics(A,e)),this._data[t]},A}(),cs=function(A,e){this.context=A,this.options=e},us=function(A){function t(e,t){var n=A.call(this,e,t)||this;return n._activeEffects=[],n.canvas=t.canvas?t.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),t.canvas||(n.canvas.width=Math.floor(t.width*t.scale),n.canvas.height=Math.floor(t.height*t.scale),n.canvas.style.width=t.width+"px",n.canvas.style.height=t.height+"px"),n.fontMetrics=new ls(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-t.x,-t.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+t.width+"x"+t.height+") with scale "+t.scale),n}return e(t,A),t.prototype.applyEffects=function(A){for(var e=this;this._activeEffects.length;)this.popEffect();A.forEach((function(A){return e.applyEffect(A)}))},t.prototype.applyEffect=function(A){this.ctx.save(),function(A){return 2===A.type}(A)&&(this.ctx.globalAlpha=A.opacity),function(A){return 0===A.type}(A)&&(this.ctx.translate(A.offsetX,A.offsetY),this.ctx.transform(A.matrix[0],A.matrix[1],A.matrix[2],A.matrix[3],A.matrix[4],A.matrix[5]),this.ctx.translate(-A.offsetX,-A.offsetY)),qi(A)&&(this.path(A.path),this.ctx.clip()),this._activeEffects.push(A)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(A){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return A.element.container.styles.isVisible()?[4,this.renderStackContent(A)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.renderNode=function(A){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return cn(A.container.flags,16),A.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(A)]:[3,3];case 1:return e.sent(),[4,this.renderNodeContent(A)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.renderTextWithLetterSpacing=function(A,e,t){var n=this;0===e?this.ctx.fillText(A.text,A.bounds.left,A.bounds.top+t):Yn(A.text).reduce((function(e,r){return n.ctx.fillText(r,e,A.bounds.top+t),e+n.ctx.measureText(r).width}),A.bounds.left)},t.prototype.createFontStyle=function(A){var e=A.fontVariant.filter((function(A){return"normal"===A||"small-caps"===A})).join(""),t=fs(A.fontFamily).join(", "),n=jA(A.fontSize)?""+A.fontSize.number+A.fontSize.unit:A.fontSize.number+"px";return[[A.fontStyle,e,A.fontWeight,n,t].join(" "),t,n]},t.prototype.renderTextNode=function(A,e){return n(this,void 0,void 0,(function(){var t,n,i,s,o,a,l,c,u=this;return r(this,(function(r){return t=this.createFontStyle(e),n=t[0],i=t[1],s=t[2],this.ctx.font=n,this.ctx.direction=1===e.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(i,s),a=o.baseline,l=o.middle,c=e.paintOrder,A.textBounds.forEach((function(A){c.forEach((function(t){switch(t){case 0:u.ctx.fillStyle=ge(e.color),u.renderTextWithLetterSpacing(A,e.letterSpacing,a);var n=e.textShadow;n.length&&A.text.trim().length&&(n.slice(0).reverse().forEach((function(t){u.ctx.shadowColor=ge(t.color),u.ctx.shadowOffsetX=t.offsetX.number*u.options.scale,u.ctx.shadowOffsetY=t.offsetY.number*u.options.scale,u.ctx.shadowBlur=t.blur.number,u.renderTextWithLetterSpacing(A,e.letterSpacing,a)})),u.ctx.shadowColor="",u.ctx.shadowOffsetX=0,u.ctx.shadowOffsetY=0,u.ctx.shadowBlur=0),e.textDecorationLine.length&&(u.ctx.fillStyle=ge(e.textDecorationColor||e.color),e.textDecorationLine.forEach((function(e){switch(e){case 1:u.ctx.fillRect(A.bounds.left,Math.round(A.bounds.top+a),A.bounds.width,1);break;case 2:u.ctx.fillRect(A.bounds.left,Math.round(A.bounds.top),A.bounds.width,1);break;case 3:u.ctx.fillRect(A.bounds.left,Math.ceil(A.bounds.top+l),A.bounds.width,1)}})));break;case 1:e.webkitTextStrokeWidth&&A.text.trim().length&&(u.ctx.strokeStyle=ge(e.webkitTextStrokeColor),u.ctx.lineWidth=e.webkitTextStrokeWidth,u.ctx.lineJoin=window.chrome?"miter":"round",u.ctx.strokeText(A.text,A.bounds.left,A.bounds.top+a)),u.ctx.strokeStyle="",u.ctx.lineWidth=0,u.ctx.lineJoin="miter"}}))})),[2]}))}))},t.prototype.renderReplacedElement=function(A,e,t){if(t&&A.intrinsicWidth>0&&A.intrinsicHeight>0){var n=es(A),r=Ki(e);this.path(r),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(t,0,0,A.intrinsicWidth,A.intrinsicHeight,n.left,n.top,n.width,n.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(A){return n(this,void 0,void 0,(function(){var e,n,i,o,a,l,c,u,d,h,g,p,f,B,m,w,v,C;return r(this,(function(r){switch(r.label){case 0:this.applyEffects(A.getEffects(4)),e=A.container,n=A.curves,i=e.styles,o=0,a=e.textNodes,r.label=1;case 1:return o<a.length?(l=a[o],[4,this.renderTextNode(l,i)]):[3,4];case 2:r.sent(),r.label=3;case 3:return o++,[3,1];case 4:if(!(e instanceof or))return[3,8];r.label=5;case 5:return r.trys.push([5,7,,8]),[4,this.context.cache.match(e.src)];case 6:return m=r.sent(),this.renderReplacedElement(e,n,m),[3,8];case 7:return r.sent(),this.context.logger.error("Error loading image "+e.src),[3,8];case 8:if(e instanceof ar&&this.renderReplacedElement(e,n,e.canvas),!(e instanceof lr))return[3,12];r.label=9;case 9:return r.trys.push([9,11,,12]),[4,this.context.cache.match(e.svg)];case 10:return m=r.sent(),this.renderReplacedElement(e,n,m),[3,12];case 11:return r.sent(),this.context.logger.error("Error loading svg "+e.svg.substring(0,255)),[3,12];case 12:return e instanceof Cr&&e.tree?[4,new t(this.context,{scale:this.options.scale,backgroundColor:e.backgroundColor,x:0,y:0,width:e.width,height:e.height}).render(e.tree)]:[3,14];case 13:c=r.sent(),e.width&&e.height&&this.ctx.drawImage(c,0,0,e.width,e.height,e.bounds.left,e.bounds.top,e.bounds.width,e.bounds.height),r.label=14;case 14:if(e instanceof mr&&(u=Math.min(e.bounds.width,e.bounds.height),e.type===gr?e.checked&&(this.ctx.save(),this.path([new Ni(e.bounds.left+.39363*u,e.bounds.top+.79*u),new Ni(e.bounds.left+.16*u,e.bounds.top+.5549*u),new Ni(e.bounds.left+.27347*u,e.bounds.top+.44071*u),new Ni(e.bounds.left+.39694*u,e.bounds.top+.5649*u),new Ni(e.bounds.left+.72983*u,e.bounds.top+.23*u),new Ni(e.bounds.left+.84*u,e.bounds.top+.34085*u),new Ni(e.bounds.left+.39363*u,e.bounds.top+.79*u)]),this.ctx.fillStyle=ge(Br),this.ctx.fill(),this.ctx.restore()):e.type===pr&&e.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.bounds.left+u/2,e.bounds.top+u/2,u/4,0,2*Math.PI,!0),this.ctx.fillStyle=ge(Br),this.ctx.fill(),this.ctx.restore())),ds(e)&&e.value.length){switch(d=this.createFontStyle(i),v=d[0],h=d[1],g=this.fontMetrics.getMetrics(v,h).baseline,this.ctx.font=v,this.ctx.fillStyle=ge(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=gs(e.styles.textAlign),C=es(e),p=0,e.styles.textAlign){case 1:p+=C.width/2;break;case 2:p+=C.width}f=C.add(p,0,0,-C.height/2+1),this.ctx.save(),this.path([new Ni(C.left,C.top),new Ni(C.left+C.width,C.top),new Ni(C.left+C.width,C.top+C.height),new Ni(C.left,C.top+C.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Zn(e.value,f),i.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!cn(e.styles.display,2048))return[3,20];if(null===e.styles.listStyleImage)return[3,19];if(0!==(B=e.styles.listStyleImage).type)return[3,18];m=void 0,w=B.url,r.label=15;case 15:return r.trys.push([15,17,,18]),[4,this.context.cache.match(w)];case 16:return m=r.sent(),this.ctx.drawImage(m,e.bounds.left-(m.width+10),e.bounds.top),[3,18];case 17:return r.sent(),this.context.logger.error("Error loading list-style-image "+w),[3,18];case 18:return[3,20];case 19:A.listValue&&-1!==e.styles.listStyleType&&(v=this.createFontStyle(i)[0],this.ctx.font=v,this.ctx.fillStyle=ge(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",C=new s(e.bounds.left,e.bounds.top+ie(e.styles.paddingTop,e.bounds.width),e.bounds.width,Et(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Zn(A.listValue,C),i.letterSpacing,Et(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),r.label=20;case 20:return[2]}}))}))},t.prototype.renderStackContent=function(A){return n(this,void 0,void 0,(function(){var e,t,n,i,s,o,a,l,c,u,d,h,g,p,f;return r(this,(function(r){switch(r.label){case 0:return cn(A.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(A.element)];case 1:r.sent(),e=0,t=A.negativeZIndex,r.label=2;case 2:return e<t.length?(f=t[e],[4,this.renderStack(f)]):[3,5];case 3:r.sent(),r.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(A.element)];case 6:r.sent(),n=0,i=A.nonInlineLevel,r.label=7;case 7:return n<i.length?(f=i[n],[4,this.renderNode(f)]):[3,10];case 8:r.sent(),r.label=9;case 9:return n++,[3,7];case 10:s=0,o=A.nonPositionedFloats,r.label=11;case 11:return s<o.length?(f=o[s],[4,this.renderStack(f)]):[3,14];case 12:r.sent(),r.label=13;case 13:return s++,[3,11];case 14:a=0,l=A.nonPositionedInlineLevel,r.label=15;case 15:return a<l.length?(f=l[a],[4,this.renderStack(f)]):[3,18];case 16:r.sent(),r.label=17;case 17:return a++,[3,15];case 18:c=0,u=A.inlineLevel,r.label=19;case 19:return c<u.length?(f=u[c],[4,this.renderNode(f)]):[3,22];case 20:r.sent(),r.label=21;case 21:return c++,[3,19];case 22:d=0,h=A.zeroOrAutoZIndexOrTransformedOrOpacity,r.label=23;case 23:return d<h.length?(f=h[d],[4,this.renderStack(f)]):[3,26];case 24:r.sent(),r.label=25;case 25:return d++,[3,23];case 26:g=0,p=A.positiveZIndex,r.label=27;case 27:return g<p.length?(f=p[g],[4,this.renderStack(f)]):[3,30];case 28:r.sent(),r.label=29;case 29:return g++,[3,27];case 30:return[2]}}))}))},t.prototype.mask=function(A){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(A.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(A){this.ctx.beginPath(),this.formatPath(A),this.ctx.closePath()},t.prototype.formatPath=function(A){var e=this;A.forEach((function(A,t){var n=Di(A)?A.start:A;0===t?e.ctx.moveTo(n.x,n.y):e.ctx.lineTo(n.x,n.y),Di(A)&&e.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)}))},t.prototype.renderRepeat=function(A,e,t,n){this.path(A),this.ctx.fillStyle=e,this.ctx.translate(t,n),this.ctx.fill(),this.ctx.translate(-t,-n)},t.prototype.resizeImage=function(A,e,t){var n;if(A.width===e&&A.height===t)return A;var r=(null!==(n=this.canvas.ownerDocument)&&void 0!==n?n:document).createElement("canvas");return r.width=Math.max(1,e),r.height=Math.max(1,t),r.getContext("2d").drawImage(A,0,0,A.width,A.height,0,0,e,t),r},t.prototype.renderBackgroundImage=function(A){return n(this,void 0,void 0,(function(){var e,t,n,i,s,o;return r(this,(function(a){switch(a.label){case 0:e=A.styles.backgroundImage.length-1,t=function(t){var i,s,o,a,l,c,u,d,h,g,p,f,B,m,w,v,C,y,b,Q,U,E,F,I,x,T,L,H,S,N,O;return r(this,(function(r){switch(r.label){case 0:if(0!==t.type)return[3,5];i=void 0,s=t.url,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.context.cache.match(s)];case 2:return i=r.sent(),[3,4];case 3:return r.sent(),n.context.logger.error("Error loading background-image "+s),[3,4];case 4:return i&&(o=ts(A,e,[i.width,i.height,i.width/i.height]),v=o[0],E=o[1],F=o[2],b=o[3],Q=o[4],m=n.ctx.createPattern(n.resizeImage(i,b,Q),"repeat"),n.renderRepeat(v,m,E,F)),[3,6];case 5:1===t.type?(a=ts(A,e,[null,null,null]),v=a[0],E=a[1],F=a[2],b=a[3],Q=a[4],l=Fe(t.angle,b,Q),c=l[0],u=l[1],d=l[2],h=l[3],g=l[4],(p=document.createElement("canvas")).width=b,p.height=Q,f=p.getContext("2d"),B=f.createLinearGradient(u,h,d,g),Ee(t.stops,c).forEach((function(A){return B.addColorStop(A.stop,ge(A.color))})),f.fillStyle=B,f.fillRect(0,0,b,Q),b>0&&Q>0&&(m=n.ctx.createPattern(p,"repeat"),n.renderRepeat(v,m,E,F))):function(A){return 2===A.type}(t)&&(w=ts(A,e,[null,null,null]),v=w[0],C=w[1],y=w[2],b=w[3],Q=w[4],U=0===t.position.length?[te]:t.position,E=ie(U[0],b),F=ie(U[U.length-1],Q),I=function(A,e,t,n,r){var i=0,s=0;switch(A.size){case 0:0===A.shape?i=s=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-r)):1===A.shape&&(i=Math.min(Math.abs(e),Math.abs(e-n)),s=Math.min(Math.abs(t),Math.abs(t-r)));break;case 2:if(0===A.shape)i=s=Math.min(Ie(e,t),Ie(e,t-r),Ie(e-n,t),Ie(e-n,t-r));else if(1===A.shape){var o=Math.min(Math.abs(t),Math.abs(t-r))/Math.min(Math.abs(e),Math.abs(e-n)),a=xe(n,r,e,t,!0),l=a[0],c=a[1];s=o*(i=Ie(l-e,(c-t)/o))}break;case 1:0===A.shape?i=s=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-r)):1===A.shape&&(i=Math.max(Math.abs(e),Math.abs(e-n)),s=Math.max(Math.abs(t),Math.abs(t-r)));break;case 3:if(0===A.shape)i=s=Math.max(Ie(e,t),Ie(e,t-r),Ie(e-n,t),Ie(e-n,t-r));else if(1===A.shape){o=Math.max(Math.abs(t),Math.abs(t-r))/Math.max(Math.abs(e),Math.abs(e-n));var u=xe(n,r,e,t,!1);l=u[0],c=u[1],s=o*(i=Ie(l-e,(c-t)/o))}}return Array.isArray(A.size)&&(i=ie(A.size[0],n),s=2===A.size.length?ie(A.size[1],r):i),[i,s]}(t,E,F,b,Q),x=I[0],T=I[1],x>0&&T>0&&(L=n.ctx.createRadialGradient(C+E,y+F,0,C+E,y+F,x),Ee(t.stops,2*x).forEach((function(A){return L.addColorStop(A.stop,ge(A.color))})),n.path(v),n.ctx.fillStyle=L,x!==T?(H=A.bounds.left+.5*A.bounds.width,S=A.bounds.top+.5*A.bounds.height,O=1/(N=T/x),n.ctx.save(),n.ctx.translate(H,S),n.ctx.transform(1,0,0,N,0,0),n.ctx.translate(-H,-S),n.ctx.fillRect(C,O*(y-S)+S,b,Q*O),n.ctx.restore()):n.ctx.fill())),r.label=6;case 6:return e--,[2]}}))},n=this,i=0,s=A.styles.backgroundImage.slice(0).reverse(),a.label=1;case 1:return i<s.length?(o=s[i],[5,t(o)]):[3,4];case 2:a.sent(),a.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},t.prototype.renderSolidBorder=function(A,e,t){return n(this,void 0,void 0,(function(){return r(this,(function(n){return this.path(Xi(t,e)),this.ctx.fillStyle=ge(A),this.ctx.fill(),[2]}))}))},t.prototype.renderDoubleBorder=function(A,e,t,i){return n(this,void 0,void 0,(function(){var n,s;return r(this,(function(r){switch(r.label){case 0:return e<3?[4,this.renderSolidBorder(A,t,i)]:[3,2];case 1:return r.sent(),[2];case 2:return n=function(A,e){switch(e){case 0:return Yi(A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox,A.topRightBorderBox,A.topRightBorderDoubleOuterBox);case 1:return Yi(A.topRightBorderBox,A.topRightBorderDoubleOuterBox,A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox);case 2:return Yi(A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox,A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox);default:return Yi(A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox,A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox)}}(i,t),this.path(n),this.ctx.fillStyle=ge(A),this.ctx.fill(),s=function(A,e){switch(e){case 0:return Yi(A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox,A.topRightBorderDoubleInnerBox,A.topRightPaddingBox);case 1:return Yi(A.topRightBorderDoubleInnerBox,A.topRightPaddingBox,A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox);case 2:return Yi(A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox,A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox);default:return Yi(A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox,A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox)}}(i,t),this.path(s),this.ctx.fill(),[2]}}))}))},t.prototype.renderNodeBackgroundAndBorders=function(A){return n(this,void 0,void 0,(function(){var e,t,n,i,s,o,a,l,c=this;return r(this,(function(r){switch(r.label){case 0:return this.applyEffects(A.getEffects(2)),e=A.container.styles,t=!he(e.backgroundColor)||e.backgroundImage.length,n=[{style:e.borderTopStyle,color:e.borderTopColor,width:e.borderTopWidth},{style:e.borderRightStyle,color:e.borderRightColor,width:e.borderRightWidth},{style:e.borderBottomStyle,color:e.borderBottomColor,width:e.borderBottomWidth},{style:e.borderLeftStyle,color:e.borderLeftColor,width:e.borderLeftWidth}],i=hs(ss(e.backgroundClip,0),A.curves),t||e.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),he(e.backgroundColor)||(this.ctx.fillStyle=ge(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(A.container)]):[3,2];case 1:r.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach((function(e){c.ctx.save();var t,n,r,i,s,o=_i(A.curves),a=e.inset?0:1e4,l=(t=o,n=-a+(e.inset?1:-1)*e.spread.number,r=(e.inset?1:-1)*e.spread.number,i=e.spread.number*(e.inset?-2:2),s=e.spread.number*(e.inset?-2:2),t.map((function(A,e){switch(e){case 0:return A.add(n,r);case 1:return A.add(n+i,r);case 2:return A.add(n+i,r+s);case 3:return A.add(n,r+s)}return A})));e.inset?(c.path(o),c.ctx.clip(),c.mask(l)):(c.mask(o),c.ctx.clip(),c.path(l)),c.ctx.shadowOffsetX=e.offsetX.number+a,c.ctx.shadowOffsetY=e.offsetY.number,c.ctx.shadowColor=ge(e.color),c.ctx.shadowBlur=e.blur.number,c.ctx.fillStyle=e.inset?ge(e.color):"rgba(0,0,0,1)",c.ctx.fill(),c.ctx.restore()})),r.label=2;case 2:s=0,o=0,a=n,r.label=3;case 3:return o<a.length?0!==(l=a[o]).style&&!he(l.color)&&l.width>0?2!==l.style?[3,5]:[4,this.renderDashedDottedBorder(l.color,l.width,s,A.curves,2)]:[3,11]:[3,13];case 4:return r.sent(),[3,11];case 5:return 3!==l.style?[3,7]:[4,this.renderDashedDottedBorder(l.color,l.width,s,A.curves,3)];case 6:return r.sent(),[3,11];case 7:return 4!==l.style?[3,9]:[4,this.renderDoubleBorder(l.color,l.width,s,A.curves)];case 8:return r.sent(),[3,11];case 9:return[4,this.renderSolidBorder(l.color,s,A.curves)];case 10:r.sent(),r.label=11;case 11:s++,r.label=12;case 12:return o++,[3,3];case 13:return[2]}}))}))},t.prototype.renderDashedDottedBorder=function(A,e,t,i,s){return n(this,void 0,void 0,(function(){var n,o,a,l,c,u,d,h,g,p,f,B,m,w,v,C;return r(this,(function(r){return this.ctx.save(),n=function(A,e){switch(e){case 0:return zi(A.topLeftBorderStroke,A.topRightBorderStroke);case 1:return zi(A.topRightBorderStroke,A.bottomRightBorderStroke);case 2:return zi(A.bottomRightBorderStroke,A.bottomLeftBorderStroke);default:return zi(A.bottomLeftBorderStroke,A.topLeftBorderStroke)}}(i,t),o=Xi(i,t),2===s&&(this.path(o),this.ctx.clip()),Di(o[0])?(a=o[0].start.x,l=o[0].start.y):(a=o[0].x,l=o[0].y),Di(o[1])?(c=o[1].end.x,u=o[1].end.y):(c=o[1].x,u=o[1].y),d=0===t||2===t?Math.abs(a-c):Math.abs(l-u),this.ctx.beginPath(),3===s?this.formatPath(n):this.formatPath(o.slice(0,2)),h=e<3?3*e:2*e,g=e<3?2*e:e,3===s&&(h=e,g=e),p=!0,d<=2*h?p=!1:d<=2*h+g?(h*=f=d/(2*h+g),g*=f):(B=Math.floor((d+g)/(h+g)),m=(d-B*h)/(B-1),g=(w=(d-(B+1)*h)/B)<=0||Math.abs(g-m)<Math.abs(g-w)?m:w),p&&(3===s?this.ctx.setLineDash([0,h+g]):this.ctx.setLineDash([h,g])),3===s?(this.ctx.lineCap="round",this.ctx.lineWidth=e):this.ctx.lineWidth=2*e+1.1,this.ctx.strokeStyle=ge(A),this.ctx.stroke(),this.ctx.setLineDash([]),2===s&&(Di(o[0])&&(v=o[3],C=o[0],this.ctx.beginPath(),this.formatPath([new Ni(v.end.x,v.end.y),new Ni(C.start.x,C.start.y)]),this.ctx.stroke()),Di(o[1])&&(v=o[1],C=o[2],this.ctx.beginPath(),this.formatPath([new Ni(v.end.x,v.end.y),new Ni(C.start.x,C.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},t.prototype.render=function(A){return n(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ge(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=new Ji(A,null),r=new $i(n),Wi(n,r,r,i=[]),Zi(n.container,i),e=r,[4,this.renderStack(e)];case 1:return t.sent(),this.applyEffects([]),[2,this.canvas]}var n,r,i}))}))},t}(cs),ds=function(A){return A instanceof vr||A instanceof wr||A instanceof mr&&A.type!==pr&&A.type!==gr},hs=function(A,e){switch(A){case 0:return _i(e);case 2:return function(A){return[A.topLeftContentBox,A.topRightContentBox,A.bottomRightContentBox,A.bottomLeftContentBox]}(e);default:return Ki(e)}},gs=function(A){switch(A){case 1:return"center";case 2:return"right";default:return"left"}},ps=["-apple-system","system-ui"],fs=function(A){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?A.filter((function(A){return-1===ps.indexOf(A)})):A},Bs=function(A){function t(e,t){var n=A.call(this,e,t)||this;return n.canvas=t.canvas?t.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=t,n.canvas.width=Math.floor(t.width*t.scale),n.canvas.height=Math.floor(t.height*t.scale),n.canvas.style.width=t.width+"px",n.canvas.style.height=t.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-t.x,-t.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+t.width+"x"+t.height+" at "+t.x+","+t.y+") with scale "+t.scale),n}return e(t,A),t.prototype.render=function(A){return n(this,void 0,void 0,(function(){var e,t;return r(this,(function(n){switch(n.label){case 0:return e=$n(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,A),[4,ms(e)];case 1:return t=n.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ge(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(t,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},t}(cs),ms=function(A){return new Promise((function(e,t){var n=new Image;n.onload=function(){e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(A))}))},ws=function(){function A(A){var e=A.id,t=A.enabled;this.id=e,this.enabled=t,this.start=Date.now()}return A.prototype.debug=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,i([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},A.prototype.getTime=function(){return Date.now()-this.start},A.prototype.info=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,i([this.id,this.getTime()+"ms"],A))},A.prototype.warn=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,i([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},A.prototype.error=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,i([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},A.instances={},A}(),vs=function(){function A(e,t){var n;this.windowBounds=t,this.instanceName="#"+A.instanceCount++,this.logger=new ws({id:this.instanceName,enabled:e.logging}),this.cache=null!==(n=e.cache)&&void 0!==n?n:new Ui(this,e)}return A.instanceCount=1,A}();"undefined"!=typeof window&&Qi.setContext(window);var Cs=function(A,e){return n(void 0,void 0,void 0,(function(){var n,i,a,l,c,u,d,h,g,p,f,B,m,w,v,C,y,b,Q,U,E,F,I,x,T,L,H,S,N,O,M,D,k,P,_,K,R,j;return r(this,(function(r){switch(r.label){case 0:if(!A||"object"!=typeof A)return[2,Promise.reject("Invalid element provided as first argument")];if(!(n=A.ownerDocument))throw new Error("Element is not attached to a Document");if(!(i=n.defaultView))throw new Error("Document is not attached to a Window");return a={allowTaint:null!==(F=e.allowTaint)&&void 0!==F&&F,imageTimeout:null!==(I=e.imageTimeout)&&void 0!==I?I:15e3,proxy:e.proxy,useCORS:null!==(x=e.useCORS)&&void 0!==x&&x},l=t({logging:null===(T=e.logging)||void 0===T||T,cache:e.cache},a),c={windowWidth:null!==(L=e.windowWidth)&&void 0!==L?L:i.innerWidth,windowHeight:null!==(H=e.windowHeight)&&void 0!==H?H:i.innerHeight,scrollX:null!==(S=e.scrollX)&&void 0!==S?S:i.pageXOffset,scrollY:null!==(N=e.scrollY)&&void 0!==N?N:i.pageYOffset},u=new s(c.scrollX,c.scrollY,c.windowWidth,c.windowHeight),d=new vs(l,u),h=null!==(O=e.foreignObjectRendering)&&void 0!==O&&O,g={allowTaint:null!==(M=e.allowTaint)&&void 0!==M&&M,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:h,copyStyles:h},d.logger.debug("Starting document clone with size "+u.width+"x"+u.height+" scrolled to "+-u.left+","+-u.top),p=new ai(d,A,g),(f=p.clonedReferenceElement)?[4,p.toIFrame(n,u)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return B=r.sent(),m=Mr(f)||"HTML"===f.tagName?function(A){var e=A.body,t=A.documentElement;if(!e||!t)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),r=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new s(0,0,n,r)}(f.ownerDocument):o(d,f),w=m.width,v=m.height,C=m.left,y=m.top,b=ys(d,f,e.backgroundColor),Q={canvas:e.canvas,backgroundColor:b,scale:null!==(k=null!==(D=e.scale)&&void 0!==D?D:i.devicePixelRatio)&&void 0!==k?k:1,x:(null!==(P=e.x)&&void 0!==P?P:0)+C,y:(null!==(_=e.y)&&void 0!==_?_:0)+y,width:null!==(K=e.width)&&void 0!==K?K:Math.ceil(w),height:null!==(R=e.height)&&void 0!==R?R:Math.ceil(v)},h?(d.logger.debug("Document cloned, using foreign object rendering"),[4,new Bs(d,Q).render(f)]):[3,3];case 2:return U=r.sent(),[3,5];case 3:return d.logger.debug("Document cloned, element located at "+C+","+y+" with size "+w+"x"+v+" using computed rendering"),d.logger.debug("Starting DOM parsing"),E=Ur(d,f),b===E.styles.backgroundColor&&(E.styles.backgroundColor=ye.TRANSPARENT),d.logger.debug("Starting renderer for element at "+Q.x+","+Q.y+" with size "+Q.width+"x"+Q.height),[4,new us(d,Q).render(E)];case 4:U=r.sent(),r.label=5;case 5:return(null===(j=e.removeContainer)||void 0===j||j)&&(ai.destroy(B)||d.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),d.logger.debug("Finished rendering"),[2,U]}}))}))},ys=function(A,e,t){var n=e.ownerDocument,r=n.documentElement?Ce(A,getComputedStyle(n.documentElement).backgroundColor):ye.TRANSPARENT,i=n.body?Ce(A,getComputedStyle(n.body).backgroundColor):ye.TRANSPARENT,s="string"==typeof t?Ce(A,t):null===t?ye.TRANSPARENT:4294967295;return e===n.documentElement?he(r)?he(i)?s:i:r:s};return function(A,e){return void 0===e&&(e={}),Cs(A,e)}}()},361:A=>{var e=/^(?:0|[1-9]\d*)$/;A.exports=function(A,t){var n=typeof A;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&e.test(A))&&A>-1&&A%1==0&&A<t}},392:A=>{A.exports=function(A,e){return null==A?void 0:A[e]}},426:A=>{var e=Object.prototype.hasOwnProperty;A.exports=function(A,t){return null!=A&&e.call(A,t)}},583:(A,e,t)=>{var n=t(7237),r=t(7255),i=t(8586),s=t(7797);A.exports=function(A){return i(A)?n(s(A)):r(A)}},631:(A,e,t)=>{var n=t(8077),r=t(9326);A.exports=function(A,e){return null!=A&&r(A,e,n)}},641:(A,e,t)=>{var n=t(6649),r=t(5950);A.exports=function(A,e){return A&&n(A,e,r)}},659:(A,e,t)=>{var n=t(1873),r=Object.prototype,i=r.hasOwnProperty,s=r.toString,o=n?n.toStringTag:void 0;A.exports=function(A){var e=i.call(A,o),t=A[o];try{A[o]=void 0;var n=!0}catch(A){}var r=s.call(A);return n&&(e?A[o]=t:delete A[o]),r}},689:(A,e,t)=>{var n=t(2),r=Object.prototype.hasOwnProperty;A.exports=function(A,e,t,i,s,o){var a=1&t,l=n(A),c=l.length;if(c!=n(e).length&&!a)return!1;for(var u=c;u--;){var d=l[u];if(!(a?d in e:r.call(e,d)))return!1}var h=o.get(A),g=o.get(e);if(h&&g)return h==e&&g==A;var p=!0;o.set(A,e),o.set(e,A);for(var f=a;++u<c;){var B=A[d=l[u]],m=e[d];if(i)var w=a?i(m,B,d,e,A,o):i(B,m,d,A,e,o);if(!(void 0===w?B===m||s(B,m,t,i,o):w)){p=!1;break}f||(f="constructor"==d)}if(p&&!f){var v=A.constructor,C=e.constructor;v==C||!("constructor"in A)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof C&&C instanceof C||(p=!1)}return o.delete(A),o.delete(e),p}},695:(A,e,t)=>{var n=t(8096),r=t(2428),i=t(6449),s=t(3656),o=t(361),a=t(7167),l=Object.prototype.hasOwnProperty;A.exports=function(A,e){var t=i(A),c=!t&&r(A),u=!t&&!c&&s(A),d=!t&&!c&&!u&&a(A),h=t||c||u||d,g=h?n(A.length,String):[],p=g.length;for(var f in A)!e&&!l.call(A,f)||h&&("length"==f||u&&("offset"==f||"parent"==f)||d&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||o(f,p))||g.push(f);return g}},756:(A,e,t)=>{var n=t(3805);A.exports=function(A){return A==A&&!n(A)}},776:(A,e,t)=>{var n=t(756),r=t(5950);A.exports=function(A){for(var e=r(A),t=e.length;t--;){var i=e[t],s=A[i];e[t]=[i,s,n(s)]}return e}},828:(A,e,t)=>{var n=t(4647),r=t(3222),i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");A.exports=function(A){return(A=r(A))&&A.replace(i,n).replace(s,"")}},882:A=>{A.exports=function(A,e,t,n){var r=-1,i=null==A?0:A.length;for(n&&i&&(t=A[++r]);++r<i;)t=e(t,A[r],r,A);return t}},909:(A,e,t)=>{var n=t(641),r=t(8329)(n);A.exports=r},938:A=>{A.exports=function(A){var e=this.__data__,t=e.delete(A);return this.size=e.size,t}},945:(A,e,t)=>{var n=t(79),r=t(8223),i=t(3661);A.exports=function(A,e){var t=this.__data__;if(t instanceof n){var s=t.__data__;if(!r||s.length<199)return s.push([A,e]),this.size=++t.size,this;t=this.__data__=new i(s)}return t.set(A,e),this.size=t.size,this}},999:(A,e,t)=>{var n=t(9302),r=t(6800);A.exports=function(A){return n((function(e,t){var n=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=A.length>3&&"function"==typeof s?(i--,s):void 0,o&&r(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var a=t[n];a&&A(e,a,n,s)}return e}))}},1033:A=>{A.exports=function(A,e,t){switch(t.length){case 0:return A.call(e);case 1:return A.call(e,t[0]);case 2:return A.call(e,t[0],t[1]);case 3:return A.call(e,t[0],t[1],t[2])}return A.apply(e,t)}},1042:(A,e,t)=>{var n=t(6110)(Object,"create");A.exports=n},1074:A=>{A.exports=function(A){return A.split("")}},1175:(A,e,t)=>{var n=t(6025);A.exports=function(A,e){var t=this.__data__,r=n(t,A);return r<0?(++this.size,t.push([A,e])):t[r][1]=e,this}},1234:A=>{A.exports=function(A,e,t){for(var n=-1,r=A.length,i=e.length,s={};++n<r;){var o=n<i?e[n]:void 0;t(s,A[n],o)}return s}},1331:(A,e,t)=>{var n=t(2552),r=t(8879),i=t(346),s=Function.prototype,o=Object.prototype,a=s.toString,l=o.hasOwnProperty,c=a.call(Object);A.exports=function(A){if(!i(A)||"[object Object]"!=n(A))return!1;var e=r(A);if(null===e)return!0;var t=l.call(e,"constructor")&&e.constructor;return"function"==typeof t&&t instanceof t&&a.call(t)==c}},1380:A=>{A.exports=function(A){return this.__data__.set(A,"__lodash_hash_undefined__"),this}},1420:(A,e,t)=>{var n=t(79);A.exports=function(){this.__data__=new n,this.size=0}},1448:(A,e,t)=>{var n=t(426),r=t(9326);A.exports=function(A,e){return null!=A&&r(A,e,n)}},1459:A=>{A.exports=function(A){return this.__data__.has(A)}},1489:(A,e,t)=>{var n=t(7400);A.exports=function(A){var e=n(A),t=e%1;return e==e?t?e-t:e:0}},1549:(A,e,t)=>{var n=t(2032),r=t(3862),i=t(6721),s=t(2749),o=t(5749);function a(A){var e=-1,t=null==A?0:A.length;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}a.prototype.clear=n,a.prototype.delete=r,a.prototype.get=i,a.prototype.has=s,a.prototype.set=o,A.exports=a},1733:A=>{var e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;A.exports=function(A){return A.match(e)||[]}},1769:(A,e,t)=>{var n=t(6449),r=t(8586),i=t(1802),s=t(3222);A.exports=function(A,e){return n(A)?A:r(A,e)?[A]:i(s(A))}},1791:(A,e,t)=>{var n=t(6547),r=t(3360);A.exports=function(A,e,t,i){var s=!t;t||(t={});for(var o=-1,a=e.length;++o<a;){var l=e[o],c=i?i(t[l],A[l],l,t,A):void 0;void 0===c&&(c=A[l]),s?r(t,l,c):n(t,l,c)}return t}},1799:(A,e,t)=>{var n=t(7217),r=t(270);A.exports=function(A,e,t,i){var s=t.length,o=s,a=!i;if(null==A)return!o;for(A=Object(A);s--;){var l=t[s];if(a&&l[2]?l[1]!==A[l[0]]:!(l[0]in A))return!1}for(;++s<o;){var c=(l=t[s])[0],u=A[c],d=l[1];if(a&&l[2]){if(void 0===u&&!(c in A))return!1}else{var h=new n;if(i)var g=i(u,d,c,A,e,h);if(!(void 0===g?r(d,u,3,i,h):g))return!1}}return!0}},1800:A=>{var e=/\s/;A.exports=function(A){for(var t=A.length;t--&&e.test(A.charAt(t)););return t}},1802:(A,e,t)=>{var n=t(2224),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,s=n((function(A){var e=[];return 46===A.charCodeAt(0)&&e.push(""),A.replace(r,(function(A,t,n,r){e.push(n?r.replace(i,"$1"):t||A)})),e}));A.exports=s},1811:A=>{var e=Date.now;A.exports=function(A){var t=0,n=0;return function(){var r=e(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return A.apply(void 0,arguments)}}},1873:(A,e,t)=>{var n=t(9325).Symbol;A.exports=n},1882:(A,e,t)=>{var n=t(2552),r=t(3805);A.exports=function(A){if(!r(A))return!1;var e=n(A);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1961:(A,e,t)=>{var n=t(9653);A.exports=function(A,e){var t=e?n(A.buffer):A.buffer;return new A.constructor(t,A.byteOffset,A.length)}},1986:(A,e,t)=>{var n=t(1873),r=t(7828),i=t(5288),s=t(5911),o=t(317),a=t(4247),l=n?n.prototype:void 0,c=l?l.valueOf:void 0;A.exports=function(A,e,t,n,l,u,d){switch(t){case"[object DataView]":if(A.byteLength!=e.byteLength||A.byteOffset!=e.byteOffset)return!1;A=A.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(A.byteLength!=e.byteLength||!u(new r(A),new r(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+A,+e);case"[object Error]":return A.name==e.name&&A.message==e.message;case"[object RegExp]":case"[object String]":return A==e+"";case"[object Map]":var h=o;case"[object Set]":var g=1&n;if(h||(h=a),A.size!=e.size&&!g)return!1;var p=d.get(A);if(p)return p==e;n|=2,d.set(A,e);var f=s(h(A),h(e),n,l,u,d);return d.delete(A),f;case"[object Symbol]":if(c)return c.call(A)==c.call(e)}return!1}},2032:(A,e,t)=>{var n=t(1042);A.exports=function(){this.__data__=n?n(null):{},this.size=0}},2054:A=>{var e="\\ud800-\\udfff",t="["+e+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",i="[^"+e+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",a="(?:"+n+"|"+r+")?",l="[\\ufe0e\\ufe0f]?",c=l+a+"(?:\\u200d(?:"+[i,s,o].join("|")+")"+l+a+")*",u="(?:"+[i+n+"?",n,s,o,t].join("|")+")",d=RegExp(r+"(?="+r+")|"+u+c,"g");A.exports=function(A){return A.match(d)||[]}},2199:(A,e,t)=>{var n=t(4528),r=t(6449);A.exports=function(A,e,t){var i=e(A);return r(A)?i:n(i,t(A))}},2224:(A,e,t)=>{var n=t(104);A.exports=function(A){var e=n(A,(function(A){return 500===t.size&&t.clear(),A})),t=e.cache;return e}},2225:A=>{var e="\\ud800-\\udfff",t="\\u2700-\\u27bf",n="a-z\\xdf-\\xf6\\xf8-\\xff",r="A-Z\\xc0-\\xd6\\xd8-\\xde",i="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",s="["+i+"]",o="\\d+",a="["+t+"]",l="["+n+"]",c="[^"+e+i+o+t+n+r+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",h="["+r+"]",g="(?:"+l+"|"+c+")",p="(?:"+h+"|"+c+")",f="(?:['’](?:d|ll|m|re|s|t|ve))?",B="(?:['’](?:D|LL|M|RE|S|T|VE))?",m="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",w="[\\ufe0e\\ufe0f]?",v=w+m+"(?:\\u200d(?:"+["[^"+e+"]",u,d].join("|")+")"+w+m+")*",C="(?:"+[a,u,d].join("|")+")"+v,y=RegExp([h+"?"+l+"+"+f+"(?="+[s,h,"$"].join("|")+")",p+"+"+B+"(?="+[s,h+g,"$"].join("|")+")",h+"?"+g+"+"+f,h+"+"+B,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",o,C].join("|"),"g");A.exports=function(A){return A.match(y)||[]}},2428:(A,e,t)=>{var n=t(7534),r=t(346),i=Object.prototype,s=i.hasOwnProperty,o=i.propertyIsEnumerable,a=n(function(){return arguments}())?n:function(A){return r(A)&&s.call(A,"callee")&&!o.call(A,"callee")};A.exports=a},2493:(A,e,t)=>{var n=t(4051),r=t(6800),i=t(1489),s=t(3222);A.exports=function(A,e,t){return e=(t?r(A,e,t):void 0===e)?1:i(e),n(s(A),e)}},2507:(A,e,t)=>{var n=t(8754),r=t(9698),i=t(3912),s=t(3222);A.exports=function(A){return function(e){e=s(e);var t=r(e)?i(e):void 0,o=t?t[0]:e.charAt(0),a=t?n(t,1).join(""):e.slice(1);return o[A]()+a}}},2523:A=>{A.exports=function(A,e,t,n){for(var r=A.length,i=t+(n?1:-1);n?i--:++i<r;)if(e(A[i],i,A))return i;return-1}},2552:(A,e,t)=>{var n=t(1873),r=t(659),i=t(9350),s=n?n.toStringTag:void 0;A.exports=function(A){return null==A?void 0===A?"[object Undefined]":"[object Null]":s&&s in Object(A)?r(A):i(A)}},2651:(A,e,t)=>{var n=t(4218);A.exports=function(A,e){var t=A.__data__;return n(e)?t["string"==typeof e?"string":"hash"]:t.map}},2660:(A,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=t(5606),r=t(7193),i=t(8142),s=t(9106);e.AttributeMap=s.default;const o=t(5759);e.Op=o.default;const a=t(8317);e.OpIterator=a.default;const l=String.fromCharCode(0),c=(A,e)=>{if("object"!=typeof A||null===A)throw new Error("cannot retain a "+typeof A);if("object"!=typeof e||null===e)throw new Error("cannot retain a "+typeof e);const t=Object.keys(A)[0];if(!t||t!==Object.keys(e)[0])throw new Error(`embed types not matched: ${t} != ${Object.keys(e)[0]}`);return[t,A[t],e[t]]};class u{constructor(A){Array.isArray(A)?this.ops=A:null!=A&&Array.isArray(A.ops)?this.ops=A.ops:this.ops=[]}static registerEmbed(A,e){this.handlers[A]=e}static unregisterEmbed(A){delete this.handlers[A]}static getHandler(A){const e=this.handlers[A];if(!e)throw new Error(`no handlers for embed type "${A}"`);return e}insert(A,e){const t={};return"string"==typeof A&&0===A.length?this:(t.insert=A,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(t.attributes=e),this.push(t))}delete(A){return A<=0?this:this.push({delete:A})}retain(A,e){if("number"==typeof A&&A<=0)return this;const t={retain:A};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(t.attributes=e),this.push(t)}push(A){let e=this.ops.length,t=this.ops[e-1];if(A=r(A),"object"==typeof t){if("number"==typeof A.delete&&"number"==typeof t.delete)return this.ops[e-1]={delete:t.delete+A.delete},this;if("number"==typeof t.delete&&null!=A.insert&&(e-=1,t=this.ops[e-1],"object"!=typeof t))return this.ops.unshift(A),this;if(i(A.attributes,t.attributes)){if("string"==typeof A.insert&&"string"==typeof t.insert)return this.ops[e-1]={insert:t.insert+A.insert},"object"==typeof A.attributes&&(this.ops[e-1].attributes=A.attributes),this;if("number"==typeof A.retain&&"number"==typeof t.retain)return this.ops[e-1]={retain:t.retain+A.retain},"object"==typeof A.attributes&&(this.ops[e-1].attributes=A.attributes),this}}return e===this.ops.length?this.ops.push(A):this.ops.splice(e,0,A),this}chop(){const A=this.ops[this.ops.length-1];return A&&"number"==typeof A.retain&&!A.attributes&&this.ops.pop(),this}filter(A){return this.ops.filter(A)}forEach(A){this.ops.forEach(A)}map(A){return this.ops.map(A)}partition(A){const e=[],t=[];return this.forEach((n=>{(A(n)?e:t).push(n)})),[e,t]}reduce(A,e){return this.ops.reduce(A,e)}changeLength(){return this.reduce(((A,e)=>e.insert?A+o.default.length(e):e.delete?A-e.delete:A),0)}length(){return this.reduce(((A,e)=>A+o.default.length(e)),0)}slice(A=0,e=1/0){const t=[],n=new a.default(this.ops);let r=0;for(;r<e&&n.hasNext();){let i;r<A?i=n.next(A-r):(i=n.next(e-r),t.push(i)),r+=o.default.length(i)}return new u(t)}compose(A){const e=new a.default(this.ops),t=new a.default(A.ops),n=[],r=t.peek();if(null!=r&&"number"==typeof r.retain&&null==r.attributes){let A=r.retain;for(;"insert"===e.peekType()&&e.peekLength()<=A;)A-=e.peekLength(),n.push(e.next());r.retain-A>0&&t.next(r.retain-A)}const o=new u(n);for(;e.hasNext()||t.hasNext();)if("insert"===t.peekType())o.push(t.next());else if("delete"===e.peekType())o.push(e.next());else{const A=Math.min(e.peekLength(),t.peekLength()),n=e.next(A),r=t.next(A);if(r.retain){const a={};if("number"==typeof n.retain)a.retain="number"==typeof r.retain?A:r.retain;else if("number"==typeof r.retain)null==n.retain?a.insert=n.insert:a.retain=n.retain;else{const A=null==n.retain?"insert":"retain",[e,t,i]=c(n[A],r.retain),s=u.getHandler(e);a[A]={[e]:s.compose(t,i,"retain"===A)}}const l=s.default.compose(n.attributes,r.attributes,"number"==typeof n.retain);if(l&&(a.attributes=l),o.push(a),!t.hasNext()&&i(o.ops[o.ops.length-1],a)){const A=new u(e.rest());return o.concat(A).chop()}}else"number"==typeof r.delete&&("number"==typeof n.retain||"object"==typeof n.retain&&null!==n.retain)&&o.push(r)}return o.chop()}concat(A){const e=new u(this.ops.slice());return A.ops.length>0&&(e.push(A.ops[0]),e.ops=e.ops.concat(A.ops.slice(1))),e}diff(A,e){if(this.ops===A.ops)return new u;const t=[this,A].map((e=>e.map((t=>{if(null!=t.insert)return"string"==typeof t.insert?t.insert:l;throw new Error("diff() called "+(e===A?"on":"with")+" non-document")})).join(""))),r=new u,o=n(t[0],t[1],e,!0),c=new a.default(this.ops),d=new a.default(A.ops);return o.forEach((A=>{let e=A[1].length;for(;e>0;){let t=0;switch(A[0]){case n.INSERT:t=Math.min(d.peekLength(),e),r.push(d.next(t));break;case n.DELETE:t=Math.min(e,c.peekLength()),c.next(t),r.delete(t);break;case n.EQUAL:t=Math.min(c.peekLength(),d.peekLength(),e);const A=c.next(t),o=d.next(t);i(A.insert,o.insert)?r.retain(t,s.default.diff(A.attributes,o.attributes)):r.push(o).delete(t)}e-=t}})),r.chop()}eachLine(A,e="\n"){const t=new a.default(this.ops);let n=new u,r=0;for(;t.hasNext();){if("insert"!==t.peekType())return;const i=t.peek(),s=o.default.length(i)-t.peekLength(),a="string"==typeof i.insert?i.insert.indexOf(e,s)-s:-1;if(a<0)n.push(t.next());else if(a>0)n.push(t.next(a));else{if(!1===A(n,t.next(1).attributes||{},r))return;r+=1,n=new u}}n.length()>0&&A(n,{},r)}invert(A){const e=new u;return this.reduce(((t,n)=>{if(n.insert)e.delete(o.default.length(n));else{if("number"==typeof n.retain&&null==n.attributes)return e.retain(n.retain),t+n.retain;if(n.delete||"number"==typeof n.retain){const r=n.delete||n.retain;return A.slice(t,t+r).forEach((A=>{n.delete?e.push(A):n.retain&&n.attributes&&e.retain(o.default.length(A),s.default.invert(n.attributes,A.attributes))})),t+r}if("object"==typeof n.retain&&null!==n.retain){const r=A.slice(t,t+1),i=new a.default(r.ops).next(),[o,l,d]=c(n.retain,i.insert),h=u.getHandler(o);return e.retain({[o]:h.invert(l,d)},s.default.invert(n.attributes,i.attributes)),t+1}}return t}),0),e.chop()}transform(A,e=!1){if(e=!!e,"number"==typeof A)return this.transformPosition(A,e);const t=A,n=new a.default(this.ops),r=new a.default(t.ops),i=new u;for(;n.hasNext()||r.hasNext();)if("insert"!==n.peekType()||!e&&"insert"===r.peekType())if("insert"===r.peekType())i.push(r.next());else{const A=Math.min(n.peekLength(),r.peekLength()),t=n.next(A),o=r.next(A);if(t.delete)continue;if(o.delete)i.push(o);else{const n=t.retain,r=o.retain;let a="object"==typeof r&&null!==r?r:A;if("object"==typeof n&&null!==n&&"object"==typeof r&&null!==r){const A=Object.keys(n)[0];if(A===Object.keys(r)[0]){const t=u.getHandler(A);t&&(a={[A]:t.transform(n[A],r[A],e)})}}i.retain(a,s.default.transform(t.attributes,o.attributes,e))}}else i.retain(o.default.length(n.next()));return i.chop()}transformPosition(A,e=!1){e=!!e;const t=new a.default(this.ops);let n=0;for(;t.hasNext()&&n<=A;){const r=t.peekLength(),i=t.peekType();t.next(),"delete"!==i?("insert"===i&&(n<A||!e)&&(A+=r),n+=r):A-=Math.min(r,A-n)}return A}}u.Op=o.default,u.OpIterator=a.default,u.AttributeMap=s.default,u.handlers={},e.default=u,A.exports=u,A.exports.default=u},2749:(A,e,t)=>{var n=t(1042),r=Object.prototype.hasOwnProperty;A.exports=function(A){var e=this.__data__;return n?void 0!==e[A]:r.call(e,A)}},2804:(A,e,t)=>{var n=t(6110)(t(9325),"Promise");A.exports=n},2824:(A,e,t)=>{var n=t(7805),r=t(3290),i=t(1961),s=t(3007),o=t(5529),a=t(2428),l=t(6449),c=t(3693),u=t(3656),d=t(1882),h=t(3805),g=t(1331),p=t(7167),f=t(4974),B=t(9884);A.exports=function(A,e,t,m,w,v,C){var y=f(A,t),b=f(e,t),Q=C.get(b);if(Q)n(A,t,Q);else{var U=v?v(y,b,t+"",A,e,C):void 0,E=void 0===U;if(E){var F=l(b),I=!F&&u(b),x=!F&&!I&&p(b);U=b,F||I||x?l(y)?U=y:c(y)?U=s(y):I?(E=!1,U=r(b,!0)):x?(E=!1,U=i(b,!0)):U=[]:g(b)||a(b)?(U=y,a(y)?U=B(y):h(y)&&!d(y)||(U=o(b))):E=!1}E&&(C.set(b,U),w(U,b,m,v,C),C.delete(b)),n(A,t,U)}}},2865:(A,e,t)=>{var n=t(9570),r=t(1811)(n);A.exports=r},2903:(A,e,t)=>{var n=t(3805),r=t(5527),i=t(181),s=Object.prototype.hasOwnProperty;A.exports=function(A){if(!n(A))return i(A);var e=r(A),t=[];for(var o in A)("constructor"!=o||!e&&s.call(A,o))&&t.push(o);return t}},2949:(A,e,t)=>{var n=t(2651);A.exports=function(A,e){var t=n(this,A),r=t.size;return t.set(A,e),this.size+=t.size==r?0:1,this}},3007:A=>{A.exports=function(A,e){var t=-1,n=A.length;for(e||(e=Array(n));++t<n;)e[t]=A[t];return e}},3031:(A,e,t)=>{var n=t(3120),r=t(6155),i=t(9302),s=t(6800),o=i((function(A,e){if(null==A)return[];var t=e.length;return t>1&&s(A,e[0],e[1])?e=[]:t>2&&s(e[0],e[1],e[2])&&(e=[e[0]]),r(A,n(e,1),[])}));A.exports=o},3040:(A,e,t)=>{var n=t(1549),r=t(79),i=t(8223);A.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||r),string:new n}}},3120:(A,e,t)=>{var n=t(4528),r=t(5891);A.exports=function A(e,t,i,s,o){var a=-1,l=e.length;for(i||(i=r),o||(o=[]);++a<l;){var c=e[a];t>0&&i(c)?t>1?A(c,t-1,i,s,o):n(o,c):s||(o[o.length]=c)}return o}},3181:(A,e,t)=>{var n=t(5508)();A.exports=n},3221:A=>{A.exports=function(A){return function(e,t,n){for(var r=-1,i=Object(e),s=n(e),o=s.length;o--;){var a=s[A?o:++r];if(!1===t(i[a],a,i))break}return e}}},3222:(A,e,t)=>{var n=t(7556);A.exports=function(A){return null==A?"":n(A)}},3243:(A,e,t)=>{var n=t(6110),r=function(){try{var A=n(Object,"defineProperty");return A({},"",{}),A}catch(A){}}();A.exports=r},3290:(A,e,t)=>{A=t.nmd(A);var n=t(9325),r=e&&!e.nodeType&&e,i=r&&A&&!A.nodeType&&A,s=i&&i.exports===r?n.Buffer:void 0,o=s?s.allocUnsafe:void 0;A.exports=function(A,e){if(e)return A.slice();var t=A.length,n=o?o(t):new A.constructor(t);return A.copy(n),n}},3345:A=>{A.exports=function(){return[]}},3360:(A,e,t)=>{var n=t(3243);A.exports=function(A,e,t){"__proto__"==e&&n?n(A,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):A[e]=t}},3375:(A,e,t)=>{var n=t(5765);A.exports=function(A){return A&&A.length?n(A):[]}},3488:A=>{A.exports=function(A){return A}},3605:A=>{A.exports=function(A){return this.__data__.get(A)}},3650:(A,e,t)=>{var n=t(4335)(Object.keys,Object);A.exports=n},3656:(A,e,t)=>{A=t.nmd(A);var n=t(9325),r=t(9935),i=e&&!e.nodeType&&e,s=i&&A&&!A.nodeType&&A,o=s&&s.exports===i?n.Buffer:void 0,a=(o?o.isBuffer:void 0)||r;A.exports=a},3661:(A,e,t)=>{var n=t(3040),r=t(7670),i=t(289),s=t(4509),o=t(2949);function a(A){var e=-1,t=null==A?0:A.length;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}a.prototype.clear=n,a.prototype.delete=r,a.prototype.get=i,a.prototype.has=s,a.prototype.set=o,A.exports=a},3663:(A,e,t)=>{var n=t(1799),r=t(776),i=t(7197);A.exports=function(A){var e=r(A);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(t){return t===A||n(t,A,e)}}},3693:(A,e,t)=>{var n=t(4894),r=t(346);A.exports=function(A){return r(A)&&n(A)}},3697:A=>{"use strict";var e=Object.prototype.hasOwnProperty,t="~";function n(){}function r(A,e,t){this.fn=A,this.context=e,this.once=t||!1}function i(A,e,n,i,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new r(n,i||A,s),a=t?t+e:e;return A._events[a]?A._events[a].fn?A._events[a]=[A._events[a],o]:A._events[a].push(o):(A._events[a]=o,A._eventsCount++),A}function s(A,e){0==--A._eventsCount?A._events=new n:delete A._events[e]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(t=!1)),o.prototype.eventNames=function(){var A,n,r=[];if(0===this._eventsCount)return r;for(n in A=this._events)e.call(A,n)&&r.push(t?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(A)):r},o.prototype.listeners=function(A){var e=t?t+A:A,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,s=new Array(i);r<i;r++)s[r]=n[r].fn;return s},o.prototype.listenerCount=function(A){var e=t?t+A:A,n=this._events[e];return n?n.fn?1:n.length:0},o.prototype.emit=function(A,e,n,r,i,s){var o=t?t+A:A;if(!this._events[o])return!1;var a,l,c=this._events[o],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(A,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,i),!0;case 6:return c.fn.call(c.context,e,n,r,i,s),!0}for(l=1,a=new Array(u-1);l<u;l++)a[l-1]=arguments[l];c.fn.apply(c.context,a)}else{var d,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(A,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,r);break;default:if(!a)for(d=1,a=new Array(u-1);d<u;d++)a[d-1]=arguments[d];c[l].fn.apply(c[l].context,a)}}return!0},o.prototype.on=function(A,e,t){return i(this,A,e,t,!1)},o.prototype.once=function(A,e,t){return i(this,A,e,t,!0)},o.prototype.removeListener=function(A,e,n,r){var i=t?t+A:A;if(!this._events[i])return this;if(!e)return s(this,i),this;var o=this._events[i];if(o.fn)o.fn!==e||r&&!o.once||n&&o.context!==n||s(this,i);else{for(var a=0,l=[],c=o.length;a<c;a++)(o[a].fn!==e||r&&!o[a].once||n&&o[a].context!==n)&&l.push(o[a]);l.length?this._events[i]=1===l.length?l[0]:l:s(this,i)}return this},o.prototype.removeAllListeners=function(A){var e;return A?(e=t?t+A:A,this._events[e]&&s(this,e)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,A.exports=o},3702:A=>{A.exports=function(){this.__data__=[],this.size=0}},3714:(A,e,t)=>{var n=t(3730);A.exports=function(A,e,t){for(var r=-1,i=A.criteria,s=e.criteria,o=i.length,a=t.length;++r<o;){var l=n(i[r],s[r]);if(l)return r>=a?l:l*("desc"==t[r]?-1:1)}return A.index-e.index}},3730:(A,e,t)=>{var n=t(4394);A.exports=function(A,e){if(A!==e){var t=void 0!==A,r=null===A,i=A==A,s=n(A),o=void 0!==e,a=null===e,l=e==e,c=n(e);if(!a&&!c&&!s&&A>e||s&&o&&l&&!a&&!c||r&&o&&l||!t&&l||!i)return 1;if(!r&&!s&&!c&&A<e||c&&t&&i&&!r&&!s||a&&t&&i||!o&&i||!l)return-1}return 0}},3805:A=>{A.exports=function(A){var e=typeof A;return null!=A&&("object"==e||"function"==e)}},3862:A=>{A.exports=function(A){var e=this.has(A)&&delete this.__data__[A];return this.size-=e?1:0,e}},3912:(A,e,t)=>{var n=t(1074),r=t(9698),i=t(2054);A.exports=function(A){return r(A)?i(A):n(A)}},3937:A=>{A.exports=function(A,e){var t=A.length;for(A.sort(e);t--;)A[t]=A[t].value;return A}},3950:A=>{A.exports=function(){}},4051:A=>{var e=Math.floor;A.exports=function(A,t){var n="";if(!A||t<1||t>9007199254740991)return n;do{t%2&&(n+=A),(t=e(t/2))&&(A+=A)}while(t);return n}},4058:(A,e,t)=>{var n=t(4792),r=t(5539)((function(A,e,t){return e=e.toLowerCase(),A+(t?n(e):e)}));A.exports=r},4128:(A,e,t)=>{var n=t(1800),r=/^\s+/;A.exports=function(A){return A?A.slice(0,n(A)+1).replace(r,""):A}},4218:A=>{A.exports=function(A){var e=typeof A;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==A:null===A}},4247:A=>{A.exports=function(A){var e=-1,t=Array(A.size);return A.forEach((function(A){t[++e]=A})),t}},4248:A=>{A.exports=function(A,e){for(var t=-1,n=null==A?0:A.length;++t<n;)if(e(A[t],t,A))return!0;return!1}},4335:A=>{A.exports=function(A,e){return function(t){return A(e(t))}}},4394:(A,e,t)=>{var n=t(2552),r=t(346);A.exports=function(A){return"symbol"==typeof A||r(A)&&"[object Symbol]"==n(A)}},4509:(A,e,t)=>{var n=t(2651);A.exports=function(A){return n(this,A).has(A)}},4517:(A,e,t)=>{var n=t(6545),r=t(3950),i=t(4247),s=n&&1/i(new n([,-0]))[1]==1/0?function(A){return new n(A)}:r;A.exports=s},4528:A=>{A.exports=function(A,e){for(var t=-1,n=e.length,r=A.length;++t<n;)A[r+t]=e[t];return A}},4552:A=>{A.exports=function(A){return function(e){return null==A?void 0:A[e]}}},4647:(A,e,t)=>{var n=t(4552)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});A.exports=n},4664:(A,e,t)=>{var n=t(9770),r=t(3345),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,o=s?function(A){return null==A?[]:(A=Object(A),n(s(A),(function(e){return i.call(A,e)})))}:r;A.exports=o},4739:(A,e,t)=>{var n=t(6025);A.exports=function(A){var e=this.__data__,t=n(e,A);return t<0?void 0:e[t][1]}},4792:(A,e,t)=>{var n=t(3222),r=t(5808);A.exports=function(A){return r(n(A).toLowerCase())}},4840:(A,e,t)=>{var n="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g;A.exports=n},4894:(A,e,t)=>{var n=t(1882),r=t(294);A.exports=function(A){return null!=A&&r(A.length)&&!n(A)}},4901:(A,e,t)=>{var n=t(2552),r=t(294),i=t(346),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,A.exports=function(A){return i(A)&&r(A.length)&&!!s[n(A)]}},4932:A=>{A.exports=function(A,e){for(var t=-1,n=null==A?0:A.length,r=Array(n);++t<n;)r[t]=e(A[t],t,A);return r}},4974:A=>{A.exports=function(A,e){if(("constructor"!==e||"function"!=typeof A[e])&&"__proto__"!=e)return A[e]}},5083:(A,e,t)=>{var n=t(1882),r=t(7296),i=t(3805),s=t(7473),o=/^\[object .+?Constructor\]$/,a=Function.prototype,l=Object.prototype,c=a.toString,u=l.hasOwnProperty,d=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");A.exports=function(A){return!(!i(A)||r(A))&&(n(A)?d:o).test(s(A))}},5128:(A,e,t)=>{var n=t(909),r=t(4894);A.exports=function(A,e){var t=-1,i=r(A)?Array(A.length):[];return n(A,(function(A,n,r){i[++t]=e(A,n,r)})),i}},5160:A=>{A.exports=function(A,e,t){var n=-1,r=A.length;e<0&&(e=-e>r?0:r+e),(t=t>r?r:t)<0&&(t+=r),r=e>t?0:t-e>>>0,e>>>=0;for(var i=Array(r);++n<r;)i[n]=A[n+e];return i}},5250:(A,e,t)=>{var n=t(7217),r=t(7805),i=t(6649),s=t(2824),o=t(3805),a=t(7241),l=t(4974);A.exports=function A(e,t,c,u,d){e!==t&&i(t,(function(i,a){if(d||(d=new n),o(i))s(e,t,a,c,A,u,d);else{var h=u?u(l(e,a),i,a+"",e,t,d):void 0;void 0===h&&(h=i),r(e,a,h)}}),a)}},5288:A=>{A.exports=function(A,e){return A===e||A!=A&&e!=e}},5325:(A,e,t)=>{var n=t(6131);A.exports=function(A,e){return!(null==A||!A.length)&&n(A,e,0)>-1}},5364:(A,e,t)=>{var n=t(5250),r=t(999)((function(A,e,t){n(A,e,t)}));A.exports=r},5389:(A,e,t)=>{var n=t(3663),r=t(7978),i=t(3488),s=t(6449),o=t(583);A.exports=function(A){return"function"==typeof A?A:null==A?i:"object"==typeof A?s(A)?r(A[0],A[1]):n(A):o(A)}},5434:A=>{var e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;A.exports=function(A){return e.test(A)}},5463:A=>{A.exports=function(A){return A!=A}},5481:(A,e,t)=>{var n=t(9325)["__core-js_shared__"];A.exports=n},5508:(A,e,t)=>{var n=t(6151),r=t(6800),i=t(7400);A.exports=function(A){return function(e,t,s){return s&&"number"!=typeof s&&r(e,t,s)&&(t=s=void 0),e=i(e),void 0===t?(t=e,e=0):t=i(t),s=void 0===s?e<t?1:-1:i(s),n(e,t,s,A)}}},5527:A=>{var e=Object.prototype;A.exports=function(A){var t=A&&A.constructor;return A===("function"==typeof t&&t.prototype||e)}},5529:(A,e,t)=>{var n=t(9344),r=t(8879),i=t(5527);A.exports=function(A){return"function"!=typeof A.constructor||i(A)?{}:n(r(A))}},5539:(A,e,t)=>{var n=t(882),r=t(828),i=t(6645),s=RegExp("['’]","g");A.exports=function(A){return function(e){return n(i(r(e).replace(s,"")),A,"")}}},5580:(A,e,t)=>{var n=t(6110)(t(9325),"DataView");A.exports=n},5606:A=>{var e=-1;function t(A,h,g,p,f){if(A===h)return A?[[0,A]]:[];if(null!=g){var m=function(A,e,t){var n="number"==typeof t?{index:t,length:0}:t.oldRange,r="number"==typeof t?null:t.newRange,i=A.length,s=e.length;if(0===n.length&&(null===r||0===r.length)){var o=n.index,a=A.slice(0,o),l=A.slice(o),c=r?r.index:null,u=o+s-i;if((null===c||c===u)&&!(u<0||u>s)){var d=e.slice(0,u);if((p=e.slice(u))===l){var h=Math.min(o,u);if((m=a.slice(0,h))===(v=d.slice(0,h)))return B(m,a.slice(h),d.slice(h),l)}}if(null===c||c===o){var g=o,p=(d=e.slice(0,g),e.slice(g));if(d===a){var f=Math.min(i-g,s-g);if((w=l.slice(l.length-f))===(C=p.slice(p.length-f)))return B(a,l.slice(0,l.length-f),p.slice(0,p.length-f),w)}}}if(n.length>0&&r&&0===r.length){var m=A.slice(0,n.index),w=A.slice(n.index+n.length);if(!(s<(h=m.length)+(f=w.length))){var v=e.slice(0,h),C=e.slice(s-f);if(m===v&&w===C)return B(m,A.slice(h,i-f),e.slice(h,s-f),w)}}return null}(A,h,g);if(m)return m}var w=r(A,h),v=A.substring(0,w);w=s(A=A.substring(w),h=h.substring(w));var C=A.substring(A.length-w),y=function(A,i){var o;if(!A)return[[1,i]];if(!i)return[[e,A]];var a=A.length>i.length?A:i,l=A.length>i.length?i:A,c=a.indexOf(l);if(-1!==c)return o=[[1,a.substring(0,c)],[0,l],[1,a.substring(c+l.length)]],A.length>i.length&&(o[0][0]=o[2][0]=e),o;if(1===l.length)return[[e,A],[1,i]];var u=function(A,e){var t=A.length>e.length?A:e,n=A.length>e.length?e:A;if(t.length<4||2*n.length<t.length)return null;function i(A,e,t){for(var n,i,o,a,l=A.substring(t,t+Math.floor(A.length/4)),c=-1,u="";-1!==(c=e.indexOf(l,c+1));){var d=r(A.substring(t),e.substring(c)),h=s(A.substring(0,t),e.substring(0,c));u.length<h+d&&(u=e.substring(c-h,c)+e.substring(c,c+d),n=A.substring(0,t-h),i=A.substring(t+d),o=e.substring(0,c-h),a=e.substring(c+d))}return 2*u.length>=A.length?[n,i,o,a,u]:null}var o,a,l,c,u,d=i(t,n,Math.ceil(t.length/4)),h=i(t,n,Math.ceil(t.length/2));return d||h?(o=h?d&&d[4].length>h[4].length?d:h:d,A.length>e.length?(a=o[0],l=o[1],c=o[2],u=o[3]):(c=o[0],u=o[1],a=o[2],l=o[3]),[a,l,c,u,o[4]]):null}(A,i);if(u){var d=u[0],h=u[1],g=u[2],p=u[3],f=u[4],B=t(d,g),m=t(h,p);return B.concat([[0,f]],m)}return function(A,t){for(var r=A.length,i=t.length,s=Math.ceil((r+i)/2),o=s,a=2*s,l=new Array(a),c=new Array(a),u=0;u<a;u++)l[u]=-1,c[u]=-1;l[o+1]=0,c[o+1]=0;for(var d=r-i,h=d%2!=0,g=0,p=0,f=0,B=0,m=0;m<s;m++){for(var w=-m+g;w<=m-p;w+=2){for(var v=o+w,C=(E=w===-m||w!==m&&l[v-1]<l[v+1]?l[v+1]:l[v-1]+1)-w;E<r&&C<i&&A.charAt(E)===t.charAt(C);)E++,C++;if(l[v]=E,E>r)p+=2;else if(C>i)g+=2;else if(h&&(Q=o+d-w)>=0&&Q<a&&-1!==c[Q]&&E>=(b=r-c[Q]))return n(A,t,E,C)}for(var y=-m+f;y<=m-B;y+=2){for(var b,Q=o+y,U=(b=y===-m||y!==m&&c[Q-1]<c[Q+1]?c[Q+1]:c[Q-1]+1)-y;b<r&&U<i&&A.charAt(r-b-1)===t.charAt(i-U-1);)b++,U++;if(c[Q]=b,b>r)B+=2;else if(U>i)f+=2;else if(!h){var E;if((v=o+d-y)>=0&&v<a&&-1!==l[v])if(C=o+(E=l[v])-v,E>=(b=r-b))return n(A,t,E,C)}}}return[[e,A],[1,t]]}(A,i)}(A=A.substring(0,A.length-w),h=h.substring(0,h.length-w));return v&&y.unshift([0,v]),C&&y.push([0,C]),d(y,f),p&&function(A){for(var t=!1,n=[],r=0,h=null,g=0,p=0,f=0,B=0,m=0;g<A.length;)0==A[g][0]?(n[r++]=g,p=B,f=m,B=0,m=0,h=A[g][1]):(1==A[g][0]?B+=A[g][1].length:m+=A[g][1].length,h&&h.length<=Math.max(p,f)&&h.length<=Math.max(B,m)&&(A.splice(n[r-1],0,[e,h]),A[n[r-1]+1][0]=1,r--,g=--r>0?n[r-1]:-1,p=0,f=0,B=0,m=0,h=null,t=!0)),g++;for(t&&d(A),function(A){function e(A,e){if(!A||!e)return 6;var t=A.charAt(A.length-1),n=e.charAt(0),r=t.match(o),i=n.match(o),s=r&&t.match(a),d=i&&n.match(a),h=s&&t.match(l),g=d&&n.match(l),p=h&&A.match(c),f=g&&e.match(u);return p||f?5:h||g?4:r&&!s&&d?3:s||d?2:r||i?1:0}for(var t=1;t<A.length-1;){if(0==A[t-1][0]&&0==A[t+1][0]){var n=A[t-1][1],r=A[t][1],i=A[t+1][1],d=s(n,r);if(d){var h=r.substring(r.length-d);n=n.substring(0,n.length-d),r=h+r.substring(0,r.length-d),i=h+i}for(var g=n,p=r,f=i,B=e(n,r)+e(r,i);r.charAt(0)===i.charAt(0);){n+=r.charAt(0),r=r.substring(1)+i.charAt(0),i=i.substring(1);var m=e(n,r)+e(r,i);m>=B&&(B=m,g=n,p=r,f=i)}A[t-1][1]!=g&&(g?A[t-1][1]=g:(A.splice(t-1,1),t--),A[t][1]=p,f?A[t+1][1]=f:(A.splice(t+1,1),t--))}t++}}(A),g=1;g<A.length;){if(A[g-1][0]==e&&1==A[g][0]){var w=A[g-1][1],v=A[g][1],C=i(w,v),y=i(v,w);C>=y?(C>=w.length/2||C>=v.length/2)&&(A.splice(g,0,[0,v.substring(0,C)]),A[g-1][1]=w.substring(0,w.length-C),A[g+1][1]=v.substring(C),g++):(y>=w.length/2||y>=v.length/2)&&(A.splice(g,0,[0,w.substring(0,y)]),A[g-1][0]=1,A[g-1][1]=v.substring(0,v.length-y),A[g+1][0]=e,A[g+1][1]=w.substring(y),g++),g++}g++}}(y),y}function n(A,e,n,r){var i=A.substring(0,n),s=e.substring(0,r),o=A.substring(n),a=e.substring(r),l=t(i,s),c=t(o,a);return l.concat(c)}function r(A,e){if(!A||!e||A.charAt(0)!==e.charAt(0))return 0;for(var t=0,n=Math.min(A.length,e.length),r=n,i=0;t<r;)A.substring(i,r)==e.substring(i,r)?i=t=r:n=r,r=Math.floor((n-t)/2+t);return h(A.charCodeAt(r-1))&&r--,r}function i(A,e){var t=A.length,n=e.length;if(0==t||0==n)return 0;t>n?A=A.substring(t-n):t<n&&(e=e.substring(0,t));var r=Math.min(t,n);if(A==e)return r;for(var i=0,s=1;;){var o=A.substring(r-s),a=e.indexOf(o);if(-1==a)return i;s+=a,0!=a&&A.substring(r-s)!=e.substring(0,s)||(i=s,s++)}}function s(A,e){if(!A||!e||A.slice(-1)!==e.slice(-1))return 0;for(var t=0,n=Math.min(A.length,e.length),r=n,i=0;t<r;)A.substring(A.length-r,A.length-i)==e.substring(e.length-r,e.length-i)?i=t=r:n=r,r=Math.floor((n-t)/2+t);return g(A.charCodeAt(A.length-r))&&r--,r}var o=/[^a-zA-Z0-9]/,a=/\s/,l=/[\r\n]/,c=/\n\r?\n$/,u=/^\r?\n\r?\n/;function d(A,t){A.push([0,""]);for(var n,i=0,o=0,a=0,l="",c="";i<A.length;)if(i<A.length-1&&!A[i][1])A.splice(i,1);else switch(A[i][0]){case 1:a++,c+=A[i][1],i++;break;case e:o++,l+=A[i][1],i++;break;case 0:var u=i-a-o-1;if(t){if(u>=0&&f(A[u][1])){var h=A[u][1].slice(-1);if(A[u][1]=A[u][1].slice(0,-1),l=h+l,c=h+c,!A[u][1]){A.splice(u,1),i--;var g=u-1;A[g]&&1===A[g][0]&&(a++,c=A[g][1]+c,g--),A[g]&&A[g][0]===e&&(o++,l=A[g][1]+l,g--),u=g}}p(A[i][1])&&(h=A[i][1].charAt(0),A[i][1]=A[i][1].slice(1),l+=h,c+=h)}if(i<A.length-1&&!A[i][1]){A.splice(i,1);break}if(l.length>0||c.length>0){l.length>0&&c.length>0&&(0!==(n=r(c,l))&&(u>=0?A[u][1]+=c.substring(0,n):(A.splice(0,0,[0,c.substring(0,n)]),i++),c=c.substring(n),l=l.substring(n)),0!==(n=s(c,l))&&(A[i][1]=c.substring(c.length-n)+A[i][1],c=c.substring(0,c.length-n),l=l.substring(0,l.length-n)));var B=a+o;0===l.length&&0===c.length?(A.splice(i-B,B),i-=B):0===l.length?(A.splice(i-B,B,[1,c]),i=i-B+1):0===c.length?(A.splice(i-B,B,[e,l]),i=i-B+1):(A.splice(i-B,B,[e,l],[1,c]),i=i-B+2)}0!==i&&0===A[i-1][0]?(A[i-1][1]+=A[i][1],A.splice(i,1)):i++,a=0,o=0,l="",c=""}""===A[A.length-1][1]&&A.pop();var m=!1;for(i=1;i<A.length-1;)0===A[i-1][0]&&0===A[i+1][0]&&(A[i][1].substring(A[i][1].length-A[i-1][1].length)===A[i-1][1]?(A[i][1]=A[i-1][1]+A[i][1].substring(0,A[i][1].length-A[i-1][1].length),A[i+1][1]=A[i-1][1]+A[i+1][1],A.splice(i-1,1),m=!0):A[i][1].substring(0,A[i+1][1].length)==A[i+1][1]&&(A[i-1][1]+=A[i+1][1],A[i][1]=A[i][1].substring(A[i+1][1].length)+A[i+1][1],A.splice(i+1,1),m=!0)),i++;m&&d(A,t)}function h(A){return A>=55296&&A<=56319}function g(A){return A>=56320&&A<=57343}function p(A){return g(A.charCodeAt(0))}function f(A){return h(A.charCodeAt(A.length-1))}function B(A,t,n,r){return f(A)||p(r)?null:function(A){for(var e=[],t=0;t<A.length;t++)A[t][1].length>0&&e.push(A[t]);return e}([[0,A],[e,t],[1,n],[0,r]])}function m(A,e,n,r){return t(A,e,n,r,!0)}m.INSERT=1,m.DELETE=e,m.EQUAL=0,A.exports=m},5749:(A,e,t)=>{var n=t(1042);A.exports=function(A,e){var t=this.__data__;return this.size+=this.has(A)?0:1,t[A]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},5759:(A,e)=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),function(A){A.length=function(A){return"number"==typeof A.delete?A.delete:"number"==typeof A.retain?A.retain:"object"==typeof A.retain&&null!==A.retain?1:"string"==typeof A.insert?A.insert.length:1}}(t||(t={})),e.default=t},5765:(A,e,t)=>{var n=t(8859),r=t(5325),i=t(9905),s=t(9219),o=t(4517),a=t(4247);A.exports=function(A,e,t){var l=-1,c=r,u=A.length,d=!0,h=[],g=h;if(t)d=!1,c=i;else if(u>=200){var p=e?null:o(A);if(p)return a(p);d=!1,c=s,g=new n}else g=e?[]:h;A:for(;++l<u;){var f=A[l],B=e?e(f):f;if(f=t||0!==f?f:0,d&&B==B){for(var m=g.length;m--;)if(g[m]===B)continue A;e&&g.push(B),h.push(f)}else c(g,B,t)||(g!==h&&g.push(B),h.push(f))}return h}},5808:(A,e,t)=>{var n=t(2507)("toUpperCase");A.exports=n},5861:(A,e,t)=>{var n=t(5580),r=t(8223),i=t(2804),s=t(6545),o=t(8303),a=t(2552),l=t(7473),c="[object Map]",u="[object Promise]",d="[object Set]",h="[object WeakMap]",g="[object DataView]",p=l(n),f=l(r),B=l(i),m=l(s),w=l(o),v=a;(n&&v(new n(new ArrayBuffer(1)))!=g||r&&v(new r)!=c||i&&v(i.resolve())!=u||s&&v(new s)!=d||o&&v(new o)!=h)&&(v=function(A){var e=a(A),t="[object Object]"==e?A.constructor:void 0,n=t?l(t):"";if(n)switch(n){case p:return g;case f:return c;case B:return u;case m:return d;case w:return h}return e}),A.exports=v},5891:(A,e,t)=>{var n=t(1873),r=t(2428),i=t(6449),s=n?n.isConcatSpreadable:void 0;A.exports=function(A){return i(A)||r(A)||!!(s&&A&&A[s])}},5911:(A,e,t)=>{var n=t(8859),r=t(4248),i=t(9219);A.exports=function(A,e,t,s,o,a){var l=1&t,c=A.length,u=e.length;if(c!=u&&!(l&&u>c))return!1;var d=a.get(A),h=a.get(e);if(d&&h)return d==e&&h==A;var g=-1,p=!0,f=2&t?new n:void 0;for(a.set(A,e),a.set(e,A);++g<c;){var B=A[g],m=e[g];if(s)var w=l?s(m,B,g,e,A,a):s(B,m,g,A,e,a);if(void 0!==w){if(w)continue;p=!1;break}if(f){if(!r(e,(function(A,e){if(!i(f,e)&&(B===A||o(B,A,t,s,a)))return f.push(e)}))){p=!1;break}}else if(B!==m&&!o(B,m,t,s,a)){p=!1;break}}return a.delete(A),a.delete(e),p}},5950:(A,e,t)=>{var n=t(695),r=t(8984),i=t(4894);A.exports=function(A){return i(A)?n(A):r(A)}},6009:(A,e,t)=>{A=t.nmd(A);var n=t(4840),r=e&&!e.nodeType&&e,i=r&&A&&!A.nodeType&&A,s=i&&i.exports===r&&n.process,o=function(){try{return i&&i.require&&i.require("util").types||s&&s.binding&&s.binding("util")}catch(A){}}();A.exports=o},6025:(A,e,t)=>{var n=t(5288);A.exports=function(A,e){for(var t=A.length;t--;)if(n(A[t][0],e))return t;return-1}},6110:(A,e,t)=>{var n=t(5083),r=t(392);A.exports=function(A,e){var t=r(A,e);return n(t)?t:void 0}},6131:(A,e,t)=>{var n=t(2523),r=t(5463),i=t(6959);A.exports=function(A,e,t){return e==e?i(A,e,t):n(A,r,t)}},6151:A=>{var e=Math.ceil,t=Math.max;A.exports=function(A,n,r,i){for(var s=-1,o=t(e((n-A)/(r||1)),0),a=Array(o);o--;)a[i?o:++s]=A,A+=r;return a}},6155:(A,e,t)=>{var n=t(4932),r=t(7422),i=t(5389),s=t(5128),o=t(3937),a=t(7301),l=t(3714),c=t(3488),u=t(6449);A.exports=function(A,e,t){e=e.length?n(e,(function(A){return u(A)?function(e){return r(e,1===A.length?A[0]:A)}:A})):[c];var d=-1;e=n(e,a(i));var h=s(A,(function(A,t,r){return{criteria:n(e,(function(e){return e(A)})),index:++d,value:A}}));return o(h,(function(A,e){return l(A,e,t)}))}},6449:A=>{var e=Array.isArray;A.exports=e},6545:(A,e,t)=>{var n=t(6110)(t(9325),"Set");A.exports=n},6547:(A,e,t)=>{var n=t(3360),r=t(5288),i=Object.prototype.hasOwnProperty;A.exports=function(A,e,t){var s=A[e];i.call(A,e)&&r(s,t)&&(void 0!==t||e in A)||n(A,e,t)}},6645:(A,e,t)=>{var n=t(1733),r=t(5434),i=t(3222),s=t(2225);A.exports=function(A,e,t){return A=i(A),void 0===(e=t?void 0:e)?r(A)?s(A):n(A):A.match(e)||[]}},6649:(A,e,t)=>{var n=t(3221)();A.exports=n},6721:(A,e,t)=>{var n=t(1042),r=Object.prototype.hasOwnProperty;A.exports=function(A){var e=this.__data__;if(n){var t=e[A];return"__lodash_hash_undefined__"===t?void 0:t}return r.call(e,A)?e[A]:void 0}},6757:(A,e,t)=>{var n=t(1033),r=Math.max;A.exports=function(A,e,t){return e=r(void 0===e?A.length-1:e,0),function(){for(var i=arguments,s=-1,o=r(i.length-e,0),a=Array(o);++s<o;)a[s]=i[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=i[s];return l[e]=t(a),n(A,this,l)}}},6800:(A,e,t)=>{var n=t(5288),r=t(4894),i=t(361),s=t(3805);A.exports=function(A,e,t){if(!s(t))return!1;var o=typeof e;return!!("number"==o?r(t)&&i(e,t.length):"string"==o&&e in t)&&n(t[e],A)}},6959:A=>{A.exports=function(A,e,t){for(var n=t-1,r=A.length;++n<r;)if(A[n]===e)return n;return-1}},7068:(A,e,t)=>{var n=t(7217),r=t(5911),i=t(1986),s=t(689),o=t(5861),a=t(6449),l=t(3656),c=t(7167),u="[object Arguments]",d="[object Array]",h="[object Object]",g=Object.prototype.hasOwnProperty;A.exports=function(A,e,t,p,f,B){var m=a(A),w=a(e),v=m?d:o(A),C=w?d:o(e),y=(v=v==u?h:v)==h,b=(C=C==u?h:C)==h,Q=v==C;if(Q&&l(A)){if(!l(e))return!1;m=!0,y=!1}if(Q&&!y)return B||(B=new n),m||c(A)?r(A,e,t,p,f,B):i(A,e,v,t,p,f,B);if(!(1&t)){var U=y&&g.call(A,"__wrapped__"),E=b&&g.call(e,"__wrapped__");if(U||E){var F=U?A.value():A,I=E?e.value():e;return B||(B=new n),f(F,I,t,p,B)}}return!!Q&&(B||(B=new n),s(A,e,t,p,f,B))}},7167:(A,e,t)=>{var n=t(4901),r=t(7301),i=t(6009),s=i&&i.isTypedArray,o=s?r(s):n;A.exports=o},7193:(A,e,t)=>{A=t.nmd(A);var n="__lodash_hash_undefined__",r=9007199254740991,i="[object Arguments]",s="[object Boolean]",o="[object Date]",a="[object Function]",l="[object GeneratorFunction]",c="[object Map]",u="[object Number]",d="[object Object]",h="[object Promise]",g="[object RegExp]",p="[object Set]",f="[object String]",B="[object Symbol]",m="[object WeakMap]",w="[object ArrayBuffer]",v="[object DataView]",C="[object Float32Array]",y="[object Float64Array]",b="[object Int8Array]",Q="[object Int16Array]",U="[object Int32Array]",E="[object Uint8Array]",F="[object Uint8ClampedArray]",I="[object Uint16Array]",x="[object Uint32Array]",T=/\w*$/,L=/^\[object .+?Constructor\]$/,H=/^(?:0|[1-9]\d*)$/,S={};S[i]=S["[object Array]"]=S[w]=S[v]=S[s]=S[o]=S[C]=S[y]=S[b]=S[Q]=S[U]=S[c]=S[u]=S[d]=S[g]=S[p]=S[f]=S[B]=S[E]=S[F]=S[I]=S[x]=!0,S["[object Error]"]=S[a]=S[m]=!1;var N="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,O="object"==typeof self&&self&&self.Object===Object&&self,M=N||O||Function("return this")(),D=e&&!e.nodeType&&e,k=D&&A&&!A.nodeType&&A,P=k&&k.exports===D;function _(A,e){return A.set(e[0],e[1]),A}function K(A,e){return A.add(e),A}function R(A,e,t,n){var r=-1,i=A?A.length:0;for(n&&i&&(t=A[++r]);++r<i;)t=e(t,A[r],r,A);return t}function j(A){var e=!1;if(null!=A&&"function"!=typeof A.toString)try{e=!!(A+"")}catch(A){}return e}function V(A){var e=-1,t=Array(A.size);return A.forEach((function(A,n){t[++e]=[n,A]})),t}function q(A,e){return function(t){return A(e(t))}}function G(A){var e=-1,t=Array(A.size);return A.forEach((function(A){t[++e]=A})),t}var $,J=Array.prototype,W=Function.prototype,Z=Object.prototype,X=M["__core-js_shared__"],z=($=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+$:"",Y=W.toString,AA=Z.hasOwnProperty,eA=Z.toString,tA=RegExp("^"+Y.call(AA).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nA=P?M.Buffer:void 0,rA=M.Symbol,iA=M.Uint8Array,sA=q(Object.getPrototypeOf,Object),oA=Object.create,aA=Z.propertyIsEnumerable,lA=J.splice,cA=Object.getOwnPropertySymbols,uA=nA?nA.isBuffer:void 0,dA=q(Object.keys,Object),hA=MA(M,"DataView"),gA=MA(M,"Map"),pA=MA(M,"Promise"),fA=MA(M,"Set"),BA=MA(M,"WeakMap"),mA=MA(Object,"create"),wA=KA(hA),vA=KA(gA),CA=KA(pA),yA=KA(fA),bA=KA(BA),QA=rA?rA.prototype:void 0,UA=QA?QA.valueOf:void 0;function EA(A){var e=-1,t=A?A.length:0;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}function FA(A){var e=-1,t=A?A.length:0;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}function IA(A){var e=-1,t=A?A.length:0;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}function xA(A){this.__data__=new FA(A)}function TA(A,e,t){var n=A[e];AA.call(A,e)&&RA(n,t)&&(void 0!==t||e in A)||(A[e]=t)}function LA(A,e){for(var t=A.length;t--;)if(RA(A[t][0],e))return t;return-1}function HA(A,e,t,n,r,h,m){var L;if(n&&(L=h?n(A,r,h,m):n(A)),void 0!==L)return L;if(!$A(A))return A;var H=jA(A);if(H){if(L=function(A){var e=A.length,t=A.constructor(e);return e&&"string"==typeof A[0]&&AA.call(A,"index")&&(t.index=A.index,t.input=A.input),t}(A),!e)return function(A,e){var t=-1,n=A.length;for(e||(e=Array(n));++t<n;)e[t]=A[t];return e}(A,L)}else{var N=kA(A),O=N==a||N==l;if(qA(A))return function(A,e){if(e)return A.slice();var t=new A.constructor(A.length);return A.copy(t),t}(A,e);if(N==d||N==i||O&&!h){if(j(A))return h?A:{};if(L=function(A){return"function"!=typeof A.constructor||_A(A)?{}:$A(e=sA(A))?oA(e):{};var e}(O?{}:A),!e)return function(A,e){return NA(A,DA(A),e)}(A,function(A,e){return A&&NA(e,JA(e),A)}(L,A))}else{if(!S[N])return h?A:{};L=function(A,e,t,n){var r,i=A.constructor;switch(e){case w:return SA(A);case s:case o:return new i(+A);case v:return function(A,e){var t=e?SA(A.buffer):A.buffer;return new A.constructor(t,A.byteOffset,A.byteLength)}(A,n);case C:case y:case b:case Q:case U:case E:case F:case I:case x:return function(A,e){var t=e?SA(A.buffer):A.buffer;return new A.constructor(t,A.byteOffset,A.length)}(A,n);case c:return function(A,e,t){return R(e?t(V(A),!0):V(A),_,new A.constructor)}(A,n,t);case u:case f:return new i(A);case g:return function(A){var e=new A.constructor(A.source,T.exec(A));return e.lastIndex=A.lastIndex,e}(A);case p:return function(A,e,t){return R(e?t(G(A),!0):G(A),K,new A.constructor)}(A,n,t);case B:return r=A,UA?Object(UA.call(r)):{}}}(A,N,HA,e)}}m||(m=new xA);var M=m.get(A);if(M)return M;if(m.set(A,L),!H)var D=t?function(A){return function(A,e,t){var n=e(A);return jA(A)?n:function(A,e){for(var t=-1,n=e.length,r=A.length;++t<n;)A[r+t]=e[t];return A}(n,t(A))}(A,JA,DA)}(A):JA(A);return function(A,e){for(var t=-1,n=A?A.length:0;++t<n&&!1!==e(A[t],t););}(D||A,(function(r,i){D&&(r=A[i=r]),TA(L,i,HA(r,e,t,n,i,A,m))})),L}function SA(A){var e=new A.constructor(A.byteLength);return new iA(e).set(new iA(A)),e}function NA(A,e,t,n){t||(t={});for(var r=-1,i=e.length;++r<i;){var s=e[r],o=n?n(t[s],A[s],s,t,A):void 0;TA(t,s,void 0===o?A[s]:o)}return t}function OA(A,e){var t,n,r=A.__data__;return("string"==(n=typeof(t=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?r["string"==typeof e?"string":"hash"]:r.map}function MA(A,e){var t=function(A,e){return null==A?void 0:A[e]}(A,e);return function(A){return!(!$A(A)||(e=A,z&&z in e))&&(GA(A)||j(A)?tA:L).test(KA(A));var e}(t)?t:void 0}EA.prototype.clear=function(){this.__data__=mA?mA(null):{}},EA.prototype.delete=function(A){return this.has(A)&&delete this.__data__[A]},EA.prototype.get=function(A){var e=this.__data__;if(mA){var t=e[A];return t===n?void 0:t}return AA.call(e,A)?e[A]:void 0},EA.prototype.has=function(A){var e=this.__data__;return mA?void 0!==e[A]:AA.call(e,A)},EA.prototype.set=function(A,e){return this.__data__[A]=mA&&void 0===e?n:e,this},FA.prototype.clear=function(){this.__data__=[]},FA.prototype.delete=function(A){var e=this.__data__,t=LA(e,A);return!(t<0||(t==e.length-1?e.pop():lA.call(e,t,1),0))},FA.prototype.get=function(A){var e=this.__data__,t=LA(e,A);return t<0?void 0:e[t][1]},FA.prototype.has=function(A){return LA(this.__data__,A)>-1},FA.prototype.set=function(A,e){var t=this.__data__,n=LA(t,A);return n<0?t.push([A,e]):t[n][1]=e,this},IA.prototype.clear=function(){this.__data__={hash:new EA,map:new(gA||FA),string:new EA}},IA.prototype.delete=function(A){return OA(this,A).delete(A)},IA.prototype.get=function(A){return OA(this,A).get(A)},IA.prototype.has=function(A){return OA(this,A).has(A)},IA.prototype.set=function(A,e){return OA(this,A).set(A,e),this},xA.prototype.clear=function(){this.__data__=new FA},xA.prototype.delete=function(A){return this.__data__.delete(A)},xA.prototype.get=function(A){return this.__data__.get(A)},xA.prototype.has=function(A){return this.__data__.has(A)},xA.prototype.set=function(A,e){var t=this.__data__;if(t instanceof FA){var n=t.__data__;if(!gA||n.length<199)return n.push([A,e]),this;t=this.__data__=new IA(n)}return t.set(A,e),this};var DA=cA?q(cA,Object):function(){return[]},kA=function(A){return eA.call(A)};function PA(A,e){return!!(e=null==e?r:e)&&("number"==typeof A||H.test(A))&&A>-1&&A%1==0&&A<e}function _A(A){var e=A&&A.constructor;return A===("function"==typeof e&&e.prototype||Z)}function KA(A){if(null!=A){try{return Y.call(A)}catch(A){}try{return A+""}catch(A){}}return""}function RA(A,e){return A===e||A!=A&&e!=e}(hA&&kA(new hA(new ArrayBuffer(1)))!=v||gA&&kA(new gA)!=c||pA&&kA(pA.resolve())!=h||fA&&kA(new fA)!=p||BA&&kA(new BA)!=m)&&(kA=function(A){var e=eA.call(A),t=e==d?A.constructor:void 0,n=t?KA(t):void 0;if(n)switch(n){case wA:return v;case vA:return c;case CA:return h;case yA:return p;case bA:return m}return e});var jA=Array.isArray;function VA(A){return null!=A&&function(A){return"number"==typeof A&&A>-1&&A%1==0&&A<=r}(A.length)&&!GA(A)}var qA=uA||function(){return!1};function GA(A){var e=$A(A)?eA.call(A):"";return e==a||e==l}function $A(A){var e=typeof A;return!!A&&("object"==e||"function"==e)}function JA(A){return VA(A)?function(A,e){var t=jA(A)||function(A){return function(A){return function(A){return!!A&&"object"==typeof A}(A)&&VA(A)}(A)&&AA.call(A,"callee")&&(!aA.call(A,"callee")||eA.call(A)==i)}(A)?function(A,e){for(var t=-1,n=Array(A);++t<A;)n[t]=e(t);return n}(A.length,String):[],n=t.length,r=!!n;for(var s in A)!e&&!AA.call(A,s)||r&&("length"==s||PA(s,n))||t.push(s);return t}(A):function(A){if(!_A(A))return dA(A);var e=[];for(var t in Object(A))AA.call(A,t)&&"constructor"!=t&&e.push(t);return e}(A)}A.exports=function(A){return HA(A,!0,!0)}},7197:A=>{A.exports=function(A,e){return function(t){return null!=t&&t[A]===e&&(void 0!==e||A in Object(t))}}},7217:(A,e,t)=>{var n=t(79),r=t(1420),i=t(938),s=t(3605),o=t(9817),a=t(945);function l(A){var e=this.__data__=new n(A);this.size=e.size}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,A.exports=l},7237:A=>{A.exports=function(A){return function(e){return null==e?void 0:e[A]}}},7241:(A,e,t)=>{var n=t(695),r=t(2903),i=t(4894);A.exports=function(A){return i(A)?n(A,!0):r(A)}},7248:(A,e,t)=>{var n=t(6547),r=t(1234);A.exports=function(A,e){return r(A||[],e||[],n)}},7255:(A,e,t)=>{var n=t(7422);A.exports=function(A){return function(e){return n(e,A)}}},7296:(A,e,t)=>{var n,r=t(5481),i=(n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";A.exports=function(A){return!!i&&i in A}},7301:A=>{A.exports=function(A){return function(e){return A(e)}}},7334:A=>{A.exports=function(A){return function(){return A}}},7400:(A,e,t)=>{var n=t(9374),r=1/0;A.exports=function(A){return A?(A=n(A))===r||A===-1/0?17976931348623157e292*(A<0?-1:1):A==A?A:0:0===A?A:0}},7422:(A,e,t)=>{var n=t(1769),r=t(7797);A.exports=function(A,e){for(var t=0,i=(e=n(e,A)).length;null!=A&&t<i;)A=A[r(e[t++])];return t&&t==i?A:void 0}},7473:A=>{var e=Function.prototype.toString;A.exports=function(A){if(null!=A){try{return e.call(A)}catch(A){}try{return A+""}catch(A){}}return""}},7534:(A,e,t)=>{var n=t(2552),r=t(346);A.exports=function(A){return r(A)&&"[object Arguments]"==n(A)}},7556:(A,e,t)=>{var n=t(1873),r=t(4932),i=t(6449),s=t(4394),o=n?n.prototype:void 0,a=o?o.toString:void 0;A.exports=function A(e){if("string"==typeof e)return e;if(i(e))return r(e,A)+"";if(s(e))return a?a.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},7670:(A,e,t)=>{var n=t(2651);A.exports=function(A){var e=n(this,A).delete(A);return this.size-=e?1:0,e}},7797:(A,e,t)=>{var n=t(4394);A.exports=function(A){if("string"==typeof A||n(A))return A;var e=A+"";return"0"==e&&1/A==-1/0?"-0":e}},7805:(A,e,t)=>{var n=t(3360),r=t(5288);A.exports=function(A,e,t){(void 0!==t&&!r(A[e],t)||void 0===t&&!(e in A))&&n(A,e,t)}},7828:(A,e,t)=>{var n=t(9325).Uint8Array;A.exports=n},7978:(A,e,t)=>{var n=t(270),r=t(8156),i=t(631),s=t(8586),o=t(756),a=t(7197),l=t(7797);A.exports=function(A,e){return s(A)&&o(e)?a(l(A),e):function(t){var s=r(t,A);return void 0===s&&s===e?i(t,A):n(e,s,3)}}},8077:A=>{A.exports=function(A,e){return null!=A&&e in Object(A)}},8096:A=>{A.exports=function(A,e){for(var t=-1,n=Array(A);++t<A;)n[t]=e(t);return n}},8142:(A,e,t)=>{A=t.nmd(A);var n="__lodash_hash_undefined__",r=9007199254740991,i="[object Arguments]",s="[object Array]",o="[object Boolean]",a="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",h="[object Object]",g="[object Promise]",p="[object RegExp]",f="[object Set]",B="[object String]",m="[object WeakMap]",w="[object ArrayBuffer]",v="[object DataView]",C=/^\[object .+?Constructor\]$/,y=/^(?:0|[1-9]\d*)$/,b={};b["[object Float32Array]"]=b["[object Float64Array]"]=b["[object Int8Array]"]=b["[object Int16Array]"]=b["[object Int32Array]"]=b["[object Uint8Array]"]=b["[object Uint8ClampedArray]"]=b["[object Uint16Array]"]=b["[object Uint32Array]"]=!0,b[i]=b[s]=b[w]=b[o]=b[v]=b[a]=b[l]=b[c]=b[u]=b[d]=b[h]=b[p]=b[f]=b[B]=b[m]=!1;var Q="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,U="object"==typeof self&&self&&self.Object===Object&&self,E=Q||U||Function("return this")(),F=e&&!e.nodeType&&e,I=F&&A&&!A.nodeType&&A,x=I&&I.exports===F,T=x&&Q.process,L=function(){try{return T&&T.binding&&T.binding("util")}catch(A){}}(),H=L&&L.isTypedArray;function S(A,e){for(var t=-1,n=null==A?0:A.length;++t<n;)if(e(A[t],t,A))return!0;return!1}function N(A){var e=-1,t=Array(A.size);return A.forEach((function(A,n){t[++e]=[n,A]})),t}function O(A){var e=-1,t=Array(A.size);return A.forEach((function(A){t[++e]=A})),t}var M,D,k,P=Array.prototype,_=Function.prototype,K=Object.prototype,R=E["__core-js_shared__"],j=_.toString,V=K.hasOwnProperty,q=(M=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"",G=K.toString,$=RegExp("^"+j.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=x?E.Buffer:void 0,W=E.Symbol,Z=E.Uint8Array,X=K.propertyIsEnumerable,z=P.splice,Y=W?W.toStringTag:void 0,AA=Object.getOwnPropertySymbols,eA=J?J.isBuffer:void 0,tA=(D=Object.keys,k=Object,function(A){return D(k(A))}),nA=IA(E,"DataView"),rA=IA(E,"Map"),iA=IA(E,"Promise"),sA=IA(E,"Set"),oA=IA(E,"WeakMap"),aA=IA(Object,"create"),lA=HA(nA),cA=HA(rA),uA=HA(iA),dA=HA(sA),hA=HA(oA),gA=W?W.prototype:void 0,pA=gA?gA.valueOf:void 0;function fA(A){var e=-1,t=null==A?0:A.length;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}function BA(A){var e=-1,t=null==A?0:A.length;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}function mA(A){var e=-1,t=null==A?0:A.length;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}function wA(A){var e=-1,t=null==A?0:A.length;for(this.__data__=new mA;++e<t;)this.add(A[e])}function vA(A){var e=this.__data__=new BA(A);this.size=e.size}function CA(A,e){for(var t=A.length;t--;)if(SA(A[t][0],e))return t;return-1}function yA(A){return null==A?void 0===A?"[object Undefined]":"[object Null]":Y&&Y in Object(A)?function(A){var e=V.call(A,Y),t=A[Y];try{A[Y]=void 0;var n=!0}catch(A){}var r=G.call(A);return n&&(e?A[Y]=t:delete A[Y]),r}(A):function(A){return G.call(A)}(A)}function bA(A){return _A(A)&&yA(A)==i}function QA(A,e,t,n,r){return A===e||(null==A||null==e||!_A(A)&&!_A(e)?A!=A&&e!=e:function(A,e,t,n,r,c){var g=OA(A),m=OA(e),C=g?s:TA(A),y=m?s:TA(e),b=(C=C==i?h:C)==h,Q=(y=y==i?h:y)==h,U=C==y;if(U&&MA(A)){if(!MA(e))return!1;g=!0,b=!1}if(U&&!b)return c||(c=new vA),g||KA(A)?UA(A,e,t,n,r,c):function(A,e,t,n,r,i,s){switch(t){case v:if(A.byteLength!=e.byteLength||A.byteOffset!=e.byteOffset)return!1;A=A.buffer,e=e.buffer;case w:return!(A.byteLength!=e.byteLength||!i(new Z(A),new Z(e)));case o:case a:case d:return SA(+A,+e);case l:return A.name==e.name&&A.message==e.message;case p:case B:return A==e+"";case u:var c=N;case f:var h=1&n;if(c||(c=O),A.size!=e.size&&!h)return!1;var g=s.get(A);if(g)return g==e;n|=2,s.set(A,e);var m=UA(c(A),c(e),n,r,i,s);return s.delete(A),m;case"[object Symbol]":if(pA)return pA.call(A)==pA.call(e)}return!1}(A,e,C,t,n,r,c);if(!(1&t)){var E=b&&V.call(A,"__wrapped__"),F=Q&&V.call(e,"__wrapped__");if(E||F){var I=E?A.value():A,x=F?e.value():e;return c||(c=new vA),r(I,x,t,n,c)}}return!!U&&(c||(c=new vA),function(A,e,t,n,r,i){var s=1&t,o=EA(A),a=o.length;if(a!=EA(e).length&&!s)return!1;for(var l=a;l--;){var c=o[l];if(!(s?c in e:V.call(e,c)))return!1}var u=i.get(A);if(u&&i.get(e))return u==e;var d=!0;i.set(A,e),i.set(e,A);for(var h=s;++l<a;){var g=A[c=o[l]],p=e[c];if(n)var f=s?n(p,g,c,e,A,i):n(g,p,c,A,e,i);if(!(void 0===f?g===p||r(g,p,t,n,i):f)){d=!1;break}h||(h="constructor"==c)}if(d&&!h){var B=A.constructor,m=e.constructor;B==m||!("constructor"in A)||!("constructor"in e)||"function"==typeof B&&B instanceof B&&"function"==typeof m&&m instanceof m||(d=!1)}return i.delete(A),i.delete(e),d}(A,e,t,n,r,c))}(A,e,t,n,QA,r))}function UA(A,e,t,n,r,i){var s=1&t,o=A.length,a=e.length;if(o!=a&&!(s&&a>o))return!1;var l=i.get(A);if(l&&i.get(e))return l==e;var c=-1,u=!0,d=2&t?new wA:void 0;for(i.set(A,e),i.set(e,A);++c<o;){var h=A[c],g=e[c];if(n)var p=s?n(g,h,c,e,A,i):n(h,g,c,A,e,i);if(void 0!==p){if(p)continue;u=!1;break}if(d){if(!S(e,(function(A,e){if(s=e,!d.has(s)&&(h===A||r(h,A,t,n,i)))return d.push(e);var s}))){u=!1;break}}else if(h!==g&&!r(h,g,t,n,i)){u=!1;break}}return i.delete(A),i.delete(e),u}function EA(A){return function(A,e,t){var n=e(A);return OA(A)?n:function(A,e){for(var t=-1,n=e.length,r=A.length;++t<n;)A[r+t]=e[t];return A}(n,t(A))}(A,RA,xA)}function FA(A,e){var t,n,r=A.__data__;return("string"==(n=typeof(t=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?r["string"==typeof e?"string":"hash"]:r.map}function IA(A,e){var t=function(A,e){return null==A?void 0:A[e]}(A,e);return function(A){return!(!PA(A)||function(A){return!!q&&q in A}(A))&&(DA(A)?$:C).test(HA(A))}(t)?t:void 0}fA.prototype.clear=function(){this.__data__=aA?aA(null):{},this.size=0},fA.prototype.delete=function(A){var e=this.has(A)&&delete this.__data__[A];return this.size-=e?1:0,e},fA.prototype.get=function(A){var e=this.__data__;if(aA){var t=e[A];return t===n?void 0:t}return V.call(e,A)?e[A]:void 0},fA.prototype.has=function(A){var e=this.__data__;return aA?void 0!==e[A]:V.call(e,A)},fA.prototype.set=function(A,e){var t=this.__data__;return this.size+=this.has(A)?0:1,t[A]=aA&&void 0===e?n:e,this},BA.prototype.clear=function(){this.__data__=[],this.size=0},BA.prototype.delete=function(A){var e=this.__data__,t=CA(e,A);return!(t<0||(t==e.length-1?e.pop():z.call(e,t,1),--this.size,0))},BA.prototype.get=function(A){var e=this.__data__,t=CA(e,A);return t<0?void 0:e[t][1]},BA.prototype.has=function(A){return CA(this.__data__,A)>-1},BA.prototype.set=function(A,e){var t=this.__data__,n=CA(t,A);return n<0?(++this.size,t.push([A,e])):t[n][1]=e,this},mA.prototype.clear=function(){this.size=0,this.__data__={hash:new fA,map:new(rA||BA),string:new fA}},mA.prototype.delete=function(A){var e=FA(this,A).delete(A);return this.size-=e?1:0,e},mA.prototype.get=function(A){return FA(this,A).get(A)},mA.prototype.has=function(A){return FA(this,A).has(A)},mA.prototype.set=function(A,e){var t=FA(this,A),n=t.size;return t.set(A,e),this.size+=t.size==n?0:1,this},wA.prototype.add=wA.prototype.push=function(A){return this.__data__.set(A,n),this},wA.prototype.has=function(A){return this.__data__.has(A)},vA.prototype.clear=function(){this.__data__=new BA,this.size=0},vA.prototype.delete=function(A){var e=this.__data__,t=e.delete(A);return this.size=e.size,t},vA.prototype.get=function(A){return this.__data__.get(A)},vA.prototype.has=function(A){return this.__data__.has(A)},vA.prototype.set=function(A,e){var t=this.__data__;if(t instanceof BA){var n=t.__data__;if(!rA||n.length<199)return n.push([A,e]),this.size=++t.size,this;t=this.__data__=new mA(n)}return t.set(A,e),this.size=t.size,this};var xA=AA?function(A){return null==A?[]:(A=Object(A),function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var s=e[t];o=s,X.call(A,o)&&(i[r++]=s)}var o;return i}(AA(A)))}:function(){return[]},TA=yA;function LA(A,e){return!!(e=null==e?r:e)&&("number"==typeof A||y.test(A))&&A>-1&&A%1==0&&A<e}function HA(A){if(null!=A){try{return j.call(A)}catch(A){}try{return A+""}catch(A){}}return""}function SA(A,e){return A===e||A!=A&&e!=e}(nA&&TA(new nA(new ArrayBuffer(1)))!=v||rA&&TA(new rA)!=u||iA&&TA(iA.resolve())!=g||sA&&TA(new sA)!=f||oA&&TA(new oA)!=m)&&(TA=function(A){var e=yA(A),t=e==h?A.constructor:void 0,n=t?HA(t):"";if(n)switch(n){case lA:return v;case cA:return u;case uA:return g;case dA:return f;case hA:return m}return e});var NA=bA(function(){return arguments}())?bA:function(A){return _A(A)&&V.call(A,"callee")&&!X.call(A,"callee")},OA=Array.isArray,MA=eA||function(){return!1};function DA(A){if(!PA(A))return!1;var e=yA(A);return e==c||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function kA(A){return"number"==typeof A&&A>-1&&A%1==0&&A<=r}function PA(A){var e=typeof A;return null!=A&&("object"==e||"function"==e)}function _A(A){return null!=A&&"object"==typeof A}var KA=H?function(A){return function(e){return A(e)}}(H):function(A){return _A(A)&&kA(A.length)&&!!b[yA(A)]};function RA(A){return null!=(e=A)&&kA(e.length)&&!DA(e)?function(A,e){var t=OA(A),n=!t&&NA(A),r=!t&&!n&&MA(A),i=!t&&!n&&!r&&KA(A),s=t||n||r||i,o=s?function(A,e){for(var t=-1,n=Array(A);++t<A;)n[t]=e(t);return n}(A.length,String):[],a=o.length;for(var l in A)!e&&!V.call(A,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||LA(l,a))||o.push(l);return o}(A):function(A){if(t=(e=A)&&e.constructor,e!==("function"==typeof t&&t.prototype||K))return tA(A);var e,t,n=[];for(var r in Object(A))V.call(A,r)&&"constructor"!=r&&n.push(r);return n}(A);var e}A.exports=function(A,e){return QA(A,e)}},8156:(A,e,t)=>{var n=t(7422);A.exports=function(A,e,t){var r=null==A?void 0:n(A,e);return void 0===r?t:r}},8223:(A,e,t)=>{var n=t(6110)(t(9325),"Map");A.exports=n},8303:(A,e,t)=>{var n=t(6110)(t(9325),"WeakMap");A.exports=n},8317:(A,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=t(5759);e.default=class{constructor(A){this.ops=A,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(A){A||(A=1/0);const e=this.ops[this.index];if(e){const t=this.offset,r=n.default.length(e);if(A>=r-t?(A=r-t,this.index+=1,this.offset=0):this.offset+=A,"number"==typeof e.delete)return{delete:A};{const n={};return e.attributes&&(n.attributes=e.attributes),"number"==typeof e.retain?n.retain=A:"object"==typeof e.retain&&null!==e.retain?n.retain=e.retain:"string"==typeof e.insert?n.insert=e.insert.substr(t,A):n.insert=e.insert,n}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?n.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const A=this.ops[this.index];return A?"number"==typeof A.delete?"delete":"number"==typeof A.retain||"object"==typeof A.retain&&null!==A.retain?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);{const A=this.offset,e=this.index,t=this.next(),n=this.ops.slice(this.index);return this.offset=A,this.index=e,[t].concat(n)}}return[]}}},8329:(A,e,t)=>{var n=t(4894);A.exports=function(A,e){return function(t,r){if(null==t)return t;if(!n(t))return A(t,r);for(var i=t.length,s=e?i:-1,o=Object(t);(e?s--:++s<i)&&!1!==r(o[s],s,o););return t}}},8586:(A,e,t)=>{var n=t(6449),r=t(4394),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;A.exports=function(A,e){if(n(A))return!1;var t=typeof A;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=A&&!r(A))||s.test(A)||!i.test(A)||null!=e&&A in Object(e)}},8655:(A,e,t)=>{var n=t(6025);A.exports=function(A){return n(this.__data__,A)>-1}},8754:(A,e,t)=>{var n=t(5160);A.exports=function(A,e,t){var r=A.length;return t=void 0===t?r:t,!e&&t>=r?A:n(A,e,t)}},8859:(A,e,t)=>{var n=t(3661),r=t(1380),i=t(1459);function s(A){var e=-1,t=null==A?0:A.length;for(this.__data__=new n;++e<t;)this.add(A[e])}s.prototype.add=s.prototype.push=r,s.prototype.has=i,A.exports=s},8879:(A,e,t)=>{var n=t(4335)(Object.getPrototypeOf,Object);A.exports=n},8984:(A,e,t)=>{var n=t(5527),r=t(3650),i=Object.prototype.hasOwnProperty;A.exports=function(A){if(!n(A))return r(A);var e=[];for(var t in Object(A))i.call(A,t)&&"constructor"!=t&&e.push(t);return e}},9106:(A,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=t(7193),r=t(8142);var i;!function(A){A.compose=function(A={},e={},t=!1){"object"!=typeof A&&(A={}),"object"!=typeof e&&(e={});let r=n(e);t||(r=Object.keys(r).reduce(((A,e)=>(null!=r[e]&&(A[e]=r[e]),A)),{}));for(const t in A)void 0!==A[t]&&void 0===e[t]&&(r[t]=A[t]);return Object.keys(r).length>0?r:void 0},A.diff=function(A={},e={}){"object"!=typeof A&&(A={}),"object"!=typeof e&&(e={});const t=Object.keys(A).concat(Object.keys(e)).reduce(((t,n)=>(r(A[n],e[n])||(t[n]=void 0===e[n]?null:e[n]),t)),{});return Object.keys(t).length>0?t:void 0},A.invert=function(A={},e={}){A=A||{};const t=Object.keys(e).reduce(((t,n)=>(e[n]!==A[n]&&void 0!==A[n]&&(t[n]=e[n]),t)),{});return Object.keys(A).reduce(((t,n)=>(A[n]!==e[n]&&void 0===e[n]&&(t[n]=null),t)),t)},A.transform=function(A,e,t=!1){if("object"!=typeof A)return e;if("object"!=typeof e)return;if(!t)return e;const n=Object.keys(e).reduce(((t,n)=>(void 0===A[n]&&(t[n]=e[n]),t)),{});return Object.keys(n).length>0?n:void 0}}(i||(i={})),e.default=i},9219:A=>{A.exports=function(A,e){return A.has(e)}},9302:(A,e,t)=>{var n=t(3488),r=t(6757),i=t(2865);A.exports=function(A,e){return i(r(A,e,n),A+"")}},9325:(A,e,t)=>{var n=t(4840),r="object"==typeof self&&self&&self.Object===Object&&self,i=n||r||Function("return this")();A.exports=i},9326:(A,e,t)=>{var n=t(1769),r=t(2428),i=t(6449),s=t(361),o=t(294),a=t(7797);A.exports=function(A,e,t){for(var l=-1,c=(e=n(e,A)).length,u=!1;++l<c;){var d=a(e[l]);if(!(u=null!=A&&t(A,d)))break;A=A[d]}return u||++l!=c?u:!!(c=null==A?0:A.length)&&o(c)&&s(d,c)&&(i(A)||r(A))}},9344:(A,e,t)=>{var n=t(3805),r=Object.create,i=function(){function A(){}return function(e){if(!n(e))return{};if(r)return r(e);A.prototype=e;var t=new A;return A.prototype=void 0,t}}();A.exports=i},9350:A=>{var e=Object.prototype.toString;A.exports=function(A){return e.call(A)}},9374:(A,e,t)=>{var n=t(4128),r=t(3805),i=t(4394),s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=parseInt;A.exports=function(A){if("number"==typeof A)return A;if(i(A))return NaN;if(r(A)){var e="function"==typeof A.valueOf?A.valueOf():A;A=r(e)?e+"":e}if("string"!=typeof A)return 0===A?A:+A;A=n(A);var t=o.test(A);return t||a.test(A)?l(A.slice(2),t?2:8):s.test(A)?NaN:+A}},9570:(A,e,t)=>{var n=t(7334),r=t(3243),i=t(3488),s=r?function(A,e){return r(A,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:i;A.exports=s},9653:(A,e,t)=>{var n=t(7828);A.exports=function(A){var e=new A.constructor(A.byteLength);return new n(e).set(new n(A)),e}},9698:A=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");A.exports=function(A){return e.test(A)}},9770:A=>{A.exports=function(A,e){for(var t=-1,n=null==A?0:A.length,r=0,i=[];++t<n;){var s=A[t];e(s,t,A)&&(i[r++]=s)}return i}},9817:A=>{A.exports=function(A){return this.__data__.has(A)}},9884:(A,e,t)=>{var n=t(1791),r=t(7241);A.exports=function(A){return n(A,r(A))}},9905:A=>{A.exports=function(A,e,t){for(var n=-1,r=null==A?0:A.length;++n<r;)if(t(e,A[n]))return!0;return!1}},9935:A=>{A.exports=function(){return!1}}},e={};function t(n){var r=e[n];if(void 0!==r)return r.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return A[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}t.n=A=>{var e=A&&A.__esModule?()=>A.default:()=>A;return t.d(e,{a:e}),e},t.d=(A,e)=>{for(var n in e)t.o(e,n)&&!t.o(A,n)&&Object.defineProperty(A,n,{enumerable:!0,get:e[n]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(A){if("object"==typeof window)return window}}(),t.o=(A,e)=>Object.prototype.hasOwnProperty.call(A,e),t.r=A=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},t.nmd=A=>(A.paths=[],A.children||(A.children=[]),A),(()=>{"use strict";var A={};t.r(A),t.d(A,{Attributor:()=>yr,AttributorStore:()=>Tr,BlockBlot:()=>Rr,ClassAttributor:()=>Fr,ContainerBlot:()=>Vr,EmbedBlot:()=>qr,InlineBlot:()=>_r,LeafBlot:()=>Nr,ParentBlot:()=>kr,Registry:()=>Ur,Scope:()=>Cr,ScrollBlot:()=>Jr,StyleAttributor:()=>xr,TextBlot:()=>Zr});class e{constructor(){this._themes=[],this._services=[],this._forms=[],this._media=[],this._currentThemeId=null,this._organisationLogo=null,this.currentLanguage="en",this._isInitialized=!1}static getInstance(){return e.instance||(e.instance=new e),e.instance}init(A,e,t,n,r,i,s,o,a){this._isInitialized?console.warn("AppConfig already initialized - ignoring new data"):(this.UC=A,this._themes=e,this._services=t,this._forms=n,this._media=r,this._currentThemeId=i,this._organisationLogo=s,this.addServiceButtonEvent=a,this.currentLanguage=o,this._isInitialized=!0)}get themes(){return this._themes}get services(){return this._services}get forms(){return this._forms}get media(){return this._media}set media(A){this._media=A}get currentThemeId(){return this._currentThemeId}set currentThemeId(A){this._currentThemeId=A}get organisationLogo(){return this._organisationLogo}get isInitialized(){return this._isInitialized}}e.instance=null;class n{constructor(A,e=300){this.preloaderElement=A,this.minDuration=e,this._loading=!1,this._startTime=0,this.transitionDuration=200}get loading(){return this._loading}set loading(A){this._loading=A,A?(this._startTime=performance.now(),this.showPreloader()):this.hidePreloader()}showPreloader(){this.preloaderElement.style.display="flex",requestAnimationFrame((()=>{this.preloaderElement.style.transform=`opacity ${this.transitionDuration}ms ease-in-out 0s`,this.preloaderElement.style.opacity="1"}))}hidePreloader(){const A=performance.now()-this._startTime;A>=this.minDuration?(this.preloaderElement.style.transition=`opacity ${this.transitionDuration}ms ease-in-out`,this.preloaderElement.style.opacity="0",setTimeout((()=>{this.preloaderElement.style.display="none"}),this.transitionDuration)):setTimeout((()=>{this.hidePreloader()}),this.minDuration-A)}}var r=function(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))};const i=window.location.origin+(window.location.origin.startsWith("http://localhost")?"/ComfortaKBDevelopmentNETSQLServer":"");class s{constructor(){this.services=[],this.forms=[],this.preloaderEl=document.getElementById("preloader"),this.config=e.getInstance(),this.init()}init(){this.services=this.config.services,this.forms=this.config.forms,this.loadingManager=new n(this.preloaderEl)}fetchAPI(A){return r(this,arguments,void 0,(function*(A,e={},t=!1){const n={headers:{"Content-Type":"application/json"}};try{t||(this.loadingManager.loading=!0);const r=yield fetch(`${i}${A}`,Object.assign(Object.assign({},n),e));if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return yield r.json()}catch(e){throw console.error(`API Error (${A}):`,e),e}finally{t||(this.loadingManager.loading=!1)}}))}debugApp(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/debug",{method:"POST",body:JSON.stringify({PageUrlList:A})},!0)}))}getVersions(){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/appversions",{},!0)}))}createVersion(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/create-appversion",{method:"POST",body:JSON.stringify({AppVersionName:A})})}))}duplicateVersion(A,e){return r(this,void 0,void 0,(function*(){return console.log("AppVersionId:",A,"versionName: ",e),yield this.fetchAPI("/api/toolbox/v2/copy-appversion",{method:"POST",body:JSON.stringify({AppVersionId:A,AppVersionName:e})})}))}activateVersion(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/activate-appversion",{method:"POST",body:JSON.stringify({AppVersionId:A})})}))}deleteVersion(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/delete-version",{method:"POST",body:JSON.stringify({AppVersionId:A})})}))}createMenuPage(A,e){return r(this,void 0,void 0,(function*(){return console.log({appVersionId:A,pageName:e}),yield this.fetchAPI("/api/toolbox/v2/create-menu-page",{method:"POST",body:JSON.stringify({appVersionId:A,pageName:e})})}))}createServicePage(A,e){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/create-service-page",{method:"POST",body:JSON.stringify({appVersionId:A,ProductServiceId:e})})}))}createContentPage(A,e){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/create-content-page",{method:"POST",body:JSON.stringify({appVersionId:A,PageName:e})})}))}createServiceCTA(A){return r(this,void 0,void 0,(function*(){const e=yield this.fetchAPI("/api/toolbox/v2/create-service-cta",{method:"POST",body:JSON.stringify(A)});return console.log(e),e}))}autoSavePage(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/save-page",{method:"POST",body:JSON.stringify(A)},!0)}))}updatePageTitle(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/update-page-title",{method:"POST",body:JSON.stringify(A)},!0)}))}publishAppVersion(A){return r(this,arguments,void 0,(function*(A,e=!1){return yield this.fetchAPI("/api/toolbox/v2/publish-appversion",{method:"POST",body:JSON.stringify({AppVersionId:A,Notify:e})},!0)}))}getPages(){return r(this,void 0,void 0,(function*(){return(yield this.fetchAPI("/api/toolbox/pages/list",{},!0)).SDT_PageCollection}))}getServices(){return r(this,void 0,void 0,(function*(){const A=yield this.fetchAPI("/api/toolbox/services",{},!0);return this.services=A.SDT_ProductServiceCollection,this.services}))}getSinglePage(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI(`/api/toolbox/singlepage?Pageid=${A}`)}))}deletePage(A,e){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/V2/delete-page",{method:"POST",body:JSON.stringify({AppVersionId:A,PageId:e})})}))}getPagesService(){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/pages/tree")}))}createNewPage(A,e){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/create-page",{method:"POST",body:JSON.stringify({PageName:A,PageJsonContent:JSON.stringify({})})})}))}updatePage(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/update-page",{method:"POST",body:JSON.stringify(A)},!0)}))}updatePagesBatch(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/update-pages-batch",{method:"POST",body:JSON.stringify(A)})}))}addPageChild(A,e){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/add-page-children",{method:"POST",body:JSON.stringify({ParentPageId:e,ChildPageId:A})})}))}createDynamicFormPage(A,e){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/create-dynamic-form-page",{method:"POST",body:JSON.stringify({FormId:A,PageName:e})})}))}getLocationTheme(){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/location-theme")}))}updateLocationTheme(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/update-location-theme",{method:"POST",body:JSON.stringify({ThemeId:A})})}))}getMediaFiles(){return r(this,void 0,void 0,(function*(){return(yield this.fetchAPI("/api/toolbox/media",{},!0)).SDT_MediaCollection}))}deleteMedia(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI(`/api/media/delete?MediaId=${A}`)}))}uploadFile(A,e,t,n){return r(this,void 0,void 0,(function*(){if(!A)throw new Error("Please select a file!");return yield this.fetchAPI("/api/media/upload",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({MediaName:e,MediaImageData:A,MediaSize:t,MediaType:n})},!0)}))}uploadLogo(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/media/upload/logo",{method:"POST",body:JSON.stringify({LogoUrl:A})})}))}uploadProfileImage(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/media/upload/profile",{method:"POST",body:JSON.stringify({ProfileImageUrl:A})})}))}getContentPageData(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI(`/api/productservice?Productserviceid=${A}`,{},!0)}))}updateDescription(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/update-service",{method:"POST",body:JSON.stringify(A)})}))}updateContentImage(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/update-service",{method:"POST",body:JSON.stringify(A)})}))}deleteContentImage(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/delete-service-image",{method:"POST",body:JSON.stringify(A)})}))}getLocationData(){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/get-location",{},!0)}))}updateLocationInfo(A){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/update-location",{method:"POST",body:JSON.stringify(A)})}))}}class o{constructor(A){this.pageId=A}updateTime(){const A=new Date;let e=A.getHours();const t=e>=12?"PM":"AM";return e%=12,e=e||12,`${e}:${A.getMinutes().toString().padStart(2,"0")} ${t}`}}class a{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("header");const A=new o("clock"),e=document.createElement("span");e.id="clock",e.textContent=A.updateTime();const t=document.createElement("span");t.classList.add("icons");const n=document.createElement("i");n.classList.add("fas","fa-signal");const r=document.createElement("i");r.classList.add("fas","fa-wifi");const i=document.createElement("i");i.classList.add("fas","fa-battery"),t.appendChild(n),t.appendChild(r),t.appendChild(i),this.container.appendChild(e),this.container.appendChild(t)}render(A){A.appendChild(this.container)}}class l{constructor(){this.container=document.createElement("div"),this.editor=new hl,this.init()}init(){this.container.classList.add("home-app-bar");const A=document.createElement("div");A.classList.add("logo-added");const e=document.createElement("img");e.src=this.editor.organisationLogo||"/Resources/ComfortaLogo1.png",e.style.height="35px",A.appendChild(e);const t=document.createElement("div");t.classList.add("profile-section"),t.style.display="flex",t.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="18" viewBox="0 0 19.422 21.363">\n                <path id="Path_1327" data-name="Path 1327" d="M15.711,5a6.8,6.8,0,0,0-3.793,12.442A9.739,9.739,0,0,0,6,26.364H7.942a7.769,7.769,0,1,1,15.537,0h1.942A9.739,9.739,0,0,0,19.5,17.442,6.8,6.8,0,0,0,15.711,5Zm0,1.942A4.855,4.855,0,1,1,10.855,11.8,4.841,4.841,0,0,1,15.711,6.942Z" transform="translate(-6 -5)" fill="#fff"></path>\n            </svg>\n        ',this.container.appendChild(A),this.container.appendChild(t)}render(A){A.appendChild(this.container)}}var c=t(354),u=t.n(c);class d{constructor(A,e,t,n,r=!1){this.frameId=A,this.editor=t,this.pageId=e,this.pageData=n,this.isHome=r,this.thumbnailWrapper=document.createElement("div"),this.container=document.getElementById("editor-thumbs-list"),this.init()}init(){const A=document.getElementById(`${this.frameId}-frame`),e=this.captureMiniature(A);e.style.cursor="pointer",e.addEventListener("click",(e=>{const t=document.getElementById("child-container");if(t&&A){const e=Array.from(t.children),n=e[0]===A,r=e[e.length-1]===A;if(n)t.scrollLeft=0,t.children.length>2&&(t.style.justifyContent="start");else if(r)t.scrollLeft=t.scrollWidth-t.clientWidth;else{const e=A.offsetLeft,n=A.offsetWidth,r=e-t.offsetWidth/2+n/2;t.scrollLeft=r}}(new sl).setPageFocus(this.editor,this.frameId,this.pageId,this.pageData)})),this.container.appendChild(e)}captureMiniature(A){const e=()=>{return e=this,s=void 0,a=function*(){var e;const s=A.querySelector(".gjs-cv-canvas");if(!s)return;const o=r(A),a=s.querySelector("iframe");if(a)try{if(yield t(a),a.contentWindow&&(null===(e=a.contentDocument)||void 0===e?void 0:e.body)){yield n(a);const A=yield u()(a.contentDocument.body,{allowTaint:!0,useCORS:!0,logging:!1}),e=document.createElement("img");e.src=A.toDataURL("image/png"),e.style.width=a.offsetWidth+"px",e.style.height=a.offsetHeight+"px",e.style.display="block";const t=o.querySelector("iframe");(null==t?void 0:t.parentNode)&&t.parentNode.replaceChild(e,t)}}catch(A){console.warn("Failed to render iframe with html2canvas:",A)}const l=document.createElement("div");l.style.position="relative",l.style.width=`${Math.ceil(.15*s.offsetWidth)}px`,l.style.height=`${Math.ceil(.15*s.offsetHeight)+6}px`,l.style.display="flex",l.style.flexDirection="column",o.style.transform="scale(0.15)",o.style.transformOrigin="top left",o.style.width=`${s.offsetWidth}px`,o.style.height=`${s.offsetHeight}px`,o.style.overflow="hidden";const c=document.createElement("div");c.style.flex="1",c.style.overflow="hidden",c.appendChild(o),l.appendChild(c);const d=document.createElement("div");d.style.height="3px",l.appendChild(d);const h=document.createElement("div");h.classList.add("tb-highlighter"),h.id="tb-highlighter",h.style.height="1px",h.style.width="100%",h.style.display=this.isHome?"block":"none",h.style.backgroundColor="#FFFFFF",l.appendChild(h),this.thumbnailWrapper.innerHTML="",this.thumbnailWrapper.appendChild(l),i.disconnect()},new((o=void 0)||(o=Promise))((function(A,t){function n(A){try{i(a.next(A))}catch(A){t(A)}}function r(A){try{i(a.throw(A))}catch(A){t(A)}}function i(e){var t;e.done?A(e.value):(t=e.value,t instanceof o?t:new o((function(A){A(t)}))).then(n,r)}i((a=a.apply(e,s||[])).next())}));var e,s,o,a},t=A=>new Promise((e=>{var t;"complete"===(null===(t=A.contentDocument)||void 0===t?void 0:t.readyState)?e():(A.onload=()=>e(),setTimeout((()=>{e()}),2e3))})),n=A=>new Promise((e=>{A.contentDocument&&A.contentWindow?"complete"!==A.contentDocument.readyState?(A.contentWindow.addEventListener("load",(()=>{setTimeout(e,500)}),{once:!0}),setTimeout(e,3e3)):setTimeout(e,500):e()})),r=A=>{const e=A.cloneNode(!1);return A.childNodes.forEach((A=>{A.nodeType===Node.ELEMENT_NODE?e.appendChild(r(A)):e.appendChild(A.cloneNode(!0))})),["INPUT","TEXTAREA","SELECT","BUTTON"].includes(e.tagName)&&(e.disabled=!0),e.style.pointerEvents="none",e.tabIndex=-1,e},i=new MutationObserver((()=>{s&&clearTimeout(s),s=setTimeout(e,300)}));let s=null;return i.observe(A,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),e(),this.thumbnailWrapper}}const h='\n    data-gjs-draggable="false"\n    data-gjs-selectable="true"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n',g='\n    data-gjs-draggable="true"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n    data-gjs-type="tile-wrapper"\n',p='\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n',f='\n    data-gjs-type="template-wrapper"\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="true"\n    data-gjs-droppable="[data-gjs-type=\'tile-wrapper\']"\n',B='\n    data-gjs-draggable="true"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-droppable="false"\n    data-gjs-highlightable="false"\n    data-gjs-hoverable="false"\n',m='\n    data-gjs-draggable="true"\n    data-gjs-selectable="true"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n',w='\n    data-gjs-type="template-wrapper"\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="true"\n    data-gjs-droppable="[data-gjs-type=\'cta-buttons\']"\n';const v=A=>{let e="";for(let t=0;t<A;t++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(Math.floor(52*Math.random()));return e+(new Date).toISOString().replace(/[-:.TZ]/g,"")};function C(A){return e=this,t=void 0,r=function*(){const e=yield fetch(A),t=yield e.blob();return new Promise(((A,e)=>{const n=new FileReader;n.onloadend=()=>A(n.result),n.onerror=e,n.readAsDataURL(t)}))},new((n=void 0)||(n=Promise))((function(A,i){function s(A){try{a(r.next(A))}catch(A){i(A)}}function o(A){try{a(r.throw(A))}catch(A){i(A)}}function a(e){var t;e.done?A(e.value):(t=e.value,t instanceof n?t:new n((function(A){A(t)}))).then(s,o)}a((r=r.apply(e,t||[])).next())}));var e,t,n,r}function y(A,e){return A.length>e?A.slice(0,e)+"...":A}class b{constructor(A,e){this.containerId=e,this.paletteContainer=document.createElement("div"),this.paletteContainer.className="color-palette",this.paletteContainer.id=e,Object.entries(A).forEach((([A,e])=>{const t=document.createElement("div");t.className="color-item";const n=document.createElement("input");n.type="radio",n.id=`color-${A}`,n.name="theme-color",n.value=e;const r=document.createElement("label");r.htmlFor=`color-${A}`,r.className="color-box",r.setAttribute("data-tile-bgcolor",e),r.style.backgroundColor=e,t.appendChild(n),t.appendChild(r),t.addEventListener("click",(t=>{t.preventDefault();const r=globalThis.selectedComponent;if(!r)return;const i=r.parent(),s=i.parent(),o=globalThis.tileMapper.getTile(s.getId(),i.getId());if(null==o?void 0:o.BGImageUrl)return;const a=r.getStyle()["background-color"];r.addStyle({"background-color":a===e?"transparent":e}),console.log("Tile Attributes",e),r.getEl().style.backgroundColor=a===e?"transparent":e,globalThis.tileMapper.updateTile(r.parent().getId(),"BGColor",A),n.checked=a!==e})),this.paletteContainer.appendChild(t)}))}render(A){A.appendChild(this.paletteContainer)}refresh(A){const e=document.getElementById(this.containerId);e?e.replaceWith(this.paletteContainer):A.appendChild(this.paletteContainer)}}class Q{constructor(A){this.pageId=A}contentRow(A){return JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),{ContentType:A.ContentType,ContentValue:A.Content}}moveContentRow(A,e){var t;const n=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(t=null==n?void 0:n.PageContentStructure)||void 0===t?void 0:t.Content))return;const r=n.PageContentStructure.Content,i=r.findIndex((e=>e.ContentId===A));if(-1===i||e<0||e>=r.length)return;const[s]=r.splice(i,1);r.splice(e,0,s),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(n))}updateContentDescription(A,e){var t;const n=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(t=null==n?void 0:n.PageContentStructure)||void 0===t?void 0:t.Content))return!1;const r=n.PageContentStructure.Content.find((e=>e.ContentId===A));return!!r&&(r.ContentValue=e,localStorage.setItem(`data-${this.pageId}`,JSON.stringify(n)),!0)}updateContentImage(A,e){var t;const n=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(t=null==n?void 0:n.PageContentStructure)||void 0===t?void 0:t.Content))return!1;const r=n.PageContentStructure.Content.find((e=>e.ContentId===A));return!!r&&(r.ContentValue=e,localStorage.setItem(`data-${this.pageId}`,JSON.stringify(n)),!0)}moveCta(A,e){var t;const n=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(t=null==n?void 0:n.PageContentStructure)||void 0===t?void 0:t.Cta))return;const r=n.PageContentStructure.Cta,i=r.findIndex((e=>e.CtaId===A));if(-1===i||e<0||e>=r.length)return;const[s]=r.splice(i,1);r.splice(e,0,s),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(n))}addContentCta(A){var e;const t=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),n={CtaId:A.CtaId,CtaType:A.CtaType,CtaLabel:A.CtaLabel,CtaAction:A.CtaAction,CtaBGColor:A.CtaBGColor,CtaButtonType:A.CtaButtonType,CtaButtonImgUrl:A.CtaButtonImgUrl||""};console.log(n),t.PageContentStructure.Cta||(t.PageContentStructure.Cta=[]),null===(e=null==t?void 0:t.PageContentStructure)||void 0===e||e.Cta.push(n),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(t))}removeContentCta(A){const e=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(e&&e.PageContentStructure&&e.PageContentStructure.Cta){const t=e.PageContentStructure.Cta.findIndex((e=>e.CtaId===A));if(-1!==t&&e.PageContentStructure.Cta[t])return e.PageContentStructure.Cta.splice(t,1),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(e)),!0}}updateContentCtaBGColor(A,e){const t=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(t&&t.PageContentStructure&&t.PageContentStructure.Cta){const n=t.PageContentStructure.Cta.findIndex((e=>e.CtaId===A));if(-1!==n&&t.PageContentStructure.Cta[n])return t.PageContentStructure.Cta[n].CtaBGColor=e,localStorage.setItem(`data-${this.pageId}`,JSON.stringify(t)),!0}}updateContentButtonType(A,e,t){const n=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(n&&n.PageContentStructure&&n.PageContentStructure.Cta){const r=n.PageContentStructure.Cta.findIndex((e=>e.CtaId===A));if(-1!==r&&n.PageContentStructure.Cta[r])return n.PageContentStructure.Cta[r].CtaButtonType=e,t&&(n.PageContentStructure.Cta[r].CtaButtonImgUrl=t),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(n)),!0}}updateContentCtaLabel(A,e){const t=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(t&&t.PageContentStructure&&t.PageContentStructure.Cta){const n=t.PageContentStructure.Cta.findIndex((e=>e.CtaId===A));if(-1!==n&&t.PageContentStructure.Cta[n])return t.PageContentStructure.Cta[n].CtaLabel=e,localStorage.setItem(`data-${this.pageId}`,JSON.stringify(t)),!0}}getContentCta(A){const e=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(e&&e.PageContentStructure&&e.PageContentStructure.Cta)return e.PageContentStructure.Cta.find((e=>e.CtaId===A))}}class U{constructor(A,e){this.value=A,this.ctaAttributes=e,this.input=document.createElement("input"),this.init()}init(){this.input.type="text",this.input.placeholder="Action",this.input.classList.add("tb-form-control"),this.input.id="cta-action-title",this.input.style.marginTop="10px",this.input.value=this.value,this.input.addEventListener("input",(A=>{const e=globalThis.selectedComponent;if(!e)return;const t=this.ctaAttributes.CtaButtonType,n=e.find(".cta-styled-btn")[0],r=e.find(".label")[0];if(r){const A="Round"===t?this.truncate(5):this.truncate(14);r.components(A),r.addAttributes({title:this.input.value})}const i=n.parent(),s=globalThis.currentPageId;new Q(s).updateContentCtaLabel(i.getId(),this.input.value.trim())}))}truncate(A){return this.input.value.length>A?this.input.value.substring(0,A)+"..":this.input.value}render(A){const e=A.querySelector("#cta-action-title");e&&e.remove(),A.appendChild(this.input)}}class E{constructor(A,e){this.selectedComponent=A,this.ctaAttributes=e,this.themeManager=new JA}setctaAttributes(){this.displayButtonLayouts(),this.ctaColorAttributes(),this.ctaActionDisplay(),this.selectedButtonLayout()}displayButtonLayouts(){const A=document.querySelector(".cta-button-layout-container");this.selectedComponent.parent().getClasses().includes("cta-button-container")?A&&(A.style.display="flex"):A&&(A.style.display="none")}selectedButtonLayout(){this.ctaAttributes&&document.querySelectorAll(".cta-button-layout").forEach((A=>{"FullWidth"===this.ctaAttributes.CtaButtonType&&"plain-button-layout"===A.id||"Icon"===this.ctaAttributes.CtaButtonType&&"icon-button-layout"===A.id||"Image"===this.ctaAttributes.CtaButtonType&&"image-button-layout"===A.id?A.style.border="2px solid #5068a8":A.style.border=""}))}ctaColorAttributes(){const A=document.querySelector("#content-page-section"),e=null==A?void 0:A.querySelectorAll(".color-item > input");let t=this.themeManager.getThemeCtaColor(this.ctaAttributes.CtaBGColor);null==e||e.forEach((A=>{A.value===t&&(A.checked=!0)}))}ctaActionDisplay(){const A=document.querySelector("#content-page-section"),e=this.ctaAttributes.CtaLabel;new U(e,this.ctaAttributes).render(A)}}class F{constructor(){this.themeManager=new JA}getTypeSVG(A){let e;switch(A){case"Phone":e=`\n            <svg ${p} id="ixdtl" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="32"\n                        viewBox="0 0 49.417 49.418">\n                <path ${p} id="call" data-gjs-type="svg-in"\n                    d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z"\n                    transform="translate(-4 -3)" fill="#fff"></path>\n            </svg>\n            `;break;case"Email":e=`\n            <svg ${p} id="inavf" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32"\n                height="28" viewBox="0 0 41 32.8">\n                <path ${p} id="Path_1218" data-gjs-type="svg-in" data-name="Path 1218"\n                    d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z"\n                    transform="translate(-2 -4)" fill="#fff"></path>\n            </svg>\n            `;break;case"SiteUrl":e=`\n            <svg ${p} xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16">\n                <path${p} id="Path_1213" data-name="Path 1213" d="M15.833,4a4.163,4.163,0,0,0-2.958,1.229l-.979.979a4.168,4.168,0,0,0-1.229,2.958,4.1,4.1,0,0,0,.292,1.521L12.042,9.6a2.857,2.857,0,0,1,.792-2.458l.979-.979a2.853,2.853,0,0,1,2.021-.833,2.805,2.805,0,0,1,2,.833,2.85,2.85,0,0,1,0,4.021l-.979.979A2.853,2.853,0,0,1,14.833,12a2.439,2.439,0,0,1-.437-.042l-1.083,1.083a4.1,4.1,0,0,0,1.521.292A4.163,4.163,0,0,0,17.792,12.1l.979-.979A4.168,4.168,0,0,0,20,8.167,4.2,4.2,0,0,0,15.833,4ZM14.188,8.854,8.854,14.188l.958.958,5.333-5.333ZM9.167,10.667A4.163,4.163,0,0,0,6.208,11.9l-.979.979A4.168,4.168,0,0,0,4,15.833,4.2,4.2,0,0,0,8.167,20a4.163,4.163,0,0,0,2.958-1.229l.979-.979a4.168,4.168,0,0,0,1.229-2.958,4.1,4.1,0,0,0-.292-1.521L11.958,14.4a2.857,2.857,0,0,1-.792,2.458l-.979.979a2.853,2.853,0,0,1-2.021.833,2.805,2.805,0,0,1-2-.833,2.85,2.85,0,0,1,0-4.021l.979-.979A2.853,2.853,0,0,1,9.167,12a2.44,2.44,0,0,1,.438.042l1.083-1.083A4.1,4.1,0,0,0,9.167,10.667Z" transform="translate(-4 -4)" fill="#fff"></path>\n            </svg>\n            `;break;case"Form":e=`\n            <svg ${p} id="igqdh" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="26" height="30"\n                  viewBox="0 0 13 16">\n                  <path ${p} id="Path_1209" data-gjs-type="svg-in" data-name="Path 1209"\n                      d="M9.828,4A1.823,1.823,0,0,0,8,5.8V18.2A1.823,1.823,0,0,0,9.828,20h9.344A1.823,1.823,0,0,0,21,18.2V9.8a.6.6,0,0,0-.179-.424l-.006-.006L15.54,4.176A.614.614,0,0,0,15.109,4Zm0,1.2H14.5V8.6a1.823,1.823,0,0,0,1.828,1.8h3.453v7.8a.6.6,0,0,1-.609.6H9.828a.6.6,0,0,1-.609-.6V5.8A.6.6,0,0,1,9.828,5.2Zm5.891.848L18.92,9.2H16.328a.6.6,0,0,1-.609-.6Z"\n                      transform="translate(-8 -4)" fill="#fff"></path>\n              </svg>\n            `}return e}phoneCta(A,e){return`\n        <div ${m} data-gjs-type="cta-buttons" button-type="${A.CallToActionType}" class="cta-container-child cta-child" id="${e}">\n                    <div ${p} data-gjs-type="default" class="cta-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor("CtaColorOne")}">\n                        <svg ${p} id="ixdtl" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="32"\n                            viewBox="0 0 49.417 49.418">\n                            <path ${p} id="call" data-gjs-type="svg-in"\n                                d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z"\n                                transform="translate(-4 -3)" fill="#fff"></path>\n                        </svg>\n                        <div ${p} id="it1cq" data-gjs-type="default" class="cta-badge">\n                            <i ${p} id="ityrb" data-gjs-type="default" class="fa fa-minus"></i>\n                        </div>\n                    </div>\n                    <div ${p} id="irtak" data-gjs-type="text" class="cta-label label">${A.CallToActionName}</div>\n        </div>\n        `}emailCta(A,e){return`\n        <div ${m} data-gjs-type="cta-buttons"  button-type="${A.CallToActionType}" class="cta-container-child cta-child" id="${e}">\n                    <div ${p} id="i4iaf" data-gjs-type="default" class="cta-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor("CtaColorOne")}">\n                        <svg ${p} id="inavf" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32"\n                            height="28" viewBox="0 0 41 32.8">\n                            <path ${p} id="Path_1218" data-gjs-type="svg-in" data-name="Path 1218"\n                                d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z"\n                                transform="translate(-2 -4)" fill="#fff"></path>\n                        </svg>\n                        <div ${p} id="i2knu" data-gjs-type="default" class="cta-badge">\n                            <i ${p} id="idkak" data-gjs-type="default" class="fa fa-minus"></i>\n                        </div>\n                    </div>\n                    <div ${p} id="irtak" data-gjs-type="text" class="cta-label label">${A.CallToActionName}</div>\n        </div>\n        `}formCta(A,e){return`\n        <div ${m} data-gjs-type="cta-buttons"  button-type="${A.CallToActionType}" class="cta-container-child cta-child" id="${e}">\n                    <div ${p} id="i9rww" data-gjs-type="default" class="cta-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor("CtaColorOne")}">\n                        <svg ${p} id="igqdh" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="26" height="30"\n                            viewBox="0 0 13 16">\n                            <path ${p} id="Path_1209" data-gjs-type="svg-in" data-name="Path 1209"\n                                d="M9.828,4A1.823,1.823,0,0,0,8,5.8V18.2A1.823,1.823,0,0,0,9.828,20h9.344A1.823,1.823,0,0,0,21,18.2V9.8a.6.6,0,0,0-.179-.424l-.006-.006L15.54,4.176A.614.614,0,0,0,15.109,4Zm0,1.2H14.5V8.6a1.823,1.823,0,0,0,1.828,1.8h3.453v7.8a.6.6,0,0,1-.609.6H9.828a.6.6,0,0,1-.609-.6V5.8A.6.6,0,0,1,9.828,5.2Zm5.891.848L18.92,9.2H16.328a.6.6,0,0,1-.609-.6Z"\n                                transform="translate(-8 -4)" fill="#fff"></path>\n                        </svg>\n                        <div ${p} id="iina3" data-gjs-type="default" class="cta-badge">\n                            <i ${p} id="iw1yc" data-gjs-type="default" class="fa fa-minus"></i>\n                        </div>\n                    </div>\n                    <div ${p} id="irtak" data-gjs-type="text" class="cta-label label">${A.CallToActionName}</div>\n        </div>\n        `}urlCta(A,e){return`\n        <div ${m} data-gjs-type="cta-buttons"  button-type="${A.CallToActionType}" class="cta-container-child cta-child" id="${e}">\n            <div ${p} id="i4iaf" data-gjs-type="default" class="cta-button cta-styled-btn"\n                style="background-color: ${this.themeManager.getThemeCtaColor("CtaColorOne")}">\n                <svg ${p} xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16">\n                    <path${p} id="Path_1213" data-name="Path 1213" d="M15.833,4a4.163,4.163,0,0,0-2.958,1.229l-.979.979a4.168,4.168,0,0,0-1.229,2.958,4.1,4.1,0,0,0,.292,1.521L12.042,9.6a2.857,2.857,0,0,1,.792-2.458l.979-.979a2.853,2.853,0,0,1,2.021-.833,2.805,2.805,0,0,1,2,.833,2.85,2.85,0,0,1,0,4.021l-.979.979A2.853,2.853,0,0,1,14.833,12a2.439,2.439,0,0,1-.437-.042l-1.083,1.083a4.1,4.1,0,0,0,1.521.292A4.163,4.163,0,0,0,17.792,12.1l.979-.979A4.168,4.168,0,0,0,20,8.167,4.2,4.2,0,0,0,15.833,4ZM14.188,8.854,8.854,14.188l.958.958,5.333-5.333ZM9.167,10.667A4.163,4.163,0,0,0,6.208,11.9l-.979.979A4.168,4.168,0,0,0,4,15.833,4.2,4.2,0,0,0,8.167,20a4.163,4.163,0,0,0,2.958-1.229l.979-.979a4.168,4.168,0,0,0,1.229-2.958,4.1,4.1,0,0,0-.292-1.521L11.958,14.4a2.857,2.857,0,0,1-.792,2.458l-.979.979a2.853,2.853,0,0,1-2.021.833,2.805,2.805,0,0,1-2-.833,2.85,2.85,0,0,1,0-4.021l.979-.979A2.853,2.853,0,0,1,9.167,12a2.44,2.44,0,0,1,.438.042l1.083-1.083A4.1,4.1,0,0,0,9.167,10.667Z" transform="translate(-4 -4)" fill="#fff"></path>\n                </svg>\n                <div ${p} id="i2knu" data-gjs-type="default" class="cta-badge">\n                    <i ${p} id="idkak" data-gjs-type="default" class="fa fa-minus"></i>\n                </div>\n            </div>\n            <div ${p} id="irtak" data-gjs-type="text" class="cta-label label">${A.CallToActionName}</div>\n        </div>\n        `}}class I{constructor(){this.editor=globalThis.activeEditor;const A=globalThis.currentPageId;this.contentMapper=new Q(A),this.themeManager=new JA,this.ctaSvgManager=new F}addCtaButton(A){const e=this.editor.Components.getWrapper().find(".cta-button-container")[0];if(e){const t=v(12),{ctaButtonEl:n,ctaAction:r}=this.getIconAndAction(A,t),i={CtaId:t,CtaLabel:A.CallToActionName,CtaType:A.CallToActionType,CtaButtonType:"Round",CtaBGColor:"CtaColorOne",CtaAction:r};if(this.checkIfExisting(n)){const A=globalThis.selectedComponent;return void(A&&A.parent().getClasses().includes("cta-button-container")&&(this.contentMapper.removeContentCta(A.getId()),A.replaceWith(n),this.contentMapper.addContentCta(i)))}e.append(n),this.contentMapper.addContentCta(i)}}checkIfExisting(A){const e=document.createElement("div");e.innerHTML=A;const t=e.querySelector("[button-type]");if(!t)return!1;const n=t.getAttribute("button-type"),r=this.editor.Components.getWrapper().getEl().querySelectorAll(".cta-button-container [button-type]");return Array.from(r).some((A=>A.getAttribute("button-type")===n))}changeCtaColor(A){const e=globalThis.selectedComponent;if(!e)return;const t=e.find(".cta-styled-btn")[0];if(t){t.addStyle({"background-color":A.CtaColorCode}),t.getEl().style.backgroundColor=A.CtaColorCode;const e=t.parent();this.contentMapper.updateContentCtaBGColor(e.getId(),A.CtaColorName)}}changeToPlainButton(){const A=globalThis.selectedComponent;if(!A)return;const e=this.contentMapper.getContentCta(A.getId());if(e&&A){const t=`\n                <div id="${e.CtaId}" \n                    button-type="${e.CtaType}"\n                    class="plain-button-container"\n                     ${m}>\n                    <button ${p} class="plain-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor(e.CtaBGColor)}">\n                        <div ${p} id="ihd0f" class="cta-badge">\n                                <i ${p} id="i7o62" data-gjs-type="default" class="fa fa-minus"></i>\n                        </div>\n                        <span ${p} class="label">${e.CtaLabel}</span> \n                    </button>\n                </div>\n            `;this.selectComponentAfterAdd(e.CtaId,A,t),this.contentMapper.updateContentButtonType(e.CtaId,"FullWidth"),this.updateProperties()}}changeToIconButton(){const A=globalThis.selectedComponent;if(!A)return;const e=this.contentMapper.getContentCta(A.getId()),t=this.ctaSvgManager.getTypeSVG(null==e?void 0:e.CtaType);if(e&&A){const n=`\n                <div id="${e.CtaId}" \n                    button-type="${e.CtaType}"\n                    ${m} \n                    data-gjs-type="cta-buttons" \n                    class="img-button-container">\n                    <div ${p} class="img-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor(e.CtaBGColor)}">\n                        <span ${p} class="img-button-icon">\n                            ${t} \n                        </span>\n                        <div${p} class="cta-badge">\n                            <i ${p} class="fa fa-minus"></i>\n                        </div>\n                        <span ${p} class="img-button-label label">${e.CtaLabel}</span>\n                        <i ${p} class="fa fa-angle-right img-button-arrow"></i>\n                    </div>\n                </div>\n            `;this.selectComponentAfterAdd(e.CtaId,A,n),this.contentMapper.updateContentButtonType(e.CtaId,"Icon"),this.updateProperties()}}changeToImgButton(){const A=globalThis.selectedComponent;if(!A)return;const e=this.contentMapper.getContentCta(A.getId());if(e&&A){const t=`\n                <div id="${e.CtaId}" \n                    button-type="${e.CtaType}"\n                    ${m} \n                    data-gjs-type="cta-buttons" \n                    class="img-button-container">\n                    <div ${p} class="img-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor(e.CtaBGColor)}">\n                        <span ${p} class="img-button-section">\n                            <img ${p} \n                                src="${e.CtaButtonImgUrl?e.CtaButtonImgUrl:"/Resources/UCGrapes1/src/images/image.png"}" \n                            />\n                            <span ${p} class="edit-cta-image">\n                                ${e.CtaButtonImgUrl?`\n                                  <svg ${p} xmlns="http://www.w3.org/2000/svg" id="Component_57_1" data-name="Component 57 – 1" width="22" height="22" viewBox="0 0 33 33">\n                                        <g ${p} id="Ellipse_532" data-name="Ellipse 532" fill="#fff" stroke="#5068a8" stroke-width="2">\n                                            <circle ${p} cx="16.5" cy="16.5" r="16.5" stroke="none"/>\n                                            <circle ${p} cx="16.5" cy="16.5" r="16" fill="none"/>\n                                        </g>\n                                        <path ${p} id="Icon_feather-edit-2" data-name="Icon feather-edit-2" d="M12.834,3.8a1.854,1.854,0,0,1,2.622,2.622L6.606,15.274,3,16.257l.983-3.606Z" transform="translate(7 6.742)" fill="#5068a8" stroke="#5068a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>\n                                    </svg>\n                                    `:`\n                                    <svg ${p} xmlns="http://www.w3.org/2000/svg" id="Component_53_4" data-name="Component 53 – 4" width="22" height="22" viewBox="0 0 22 22">\n                                        <g ${p} id="Group_2309" data-name="Group 2309">\n                                            <g ${p} id="Group_2307" data-name="Group 2307">\n                                            <g ${p} id="Ellipse_6" data-name="Ellipse 6" fill="#fdfdfd" stroke="#5068a8" stroke-width="1">\n                                                <circle ${p} cx="11" cy="11" r="11" stroke="none"/>\n                                                <circle ${p} cx="11" cy="11" r="10.5" fill="none"/>\n                                            </g>\n                                            </g>\n                                        </g>\n                                        <path ${p} id="Icon_ionic-ios-add" data-name="Icon ionic-ios-add" d="M18.342,13.342H14.587V9.587a.623.623,0,1,0-1.245,0v3.755H9.587a.623.623,0,0,0,0,1.245h3.755v3.755a.623.623,0,1,0,1.245,0V14.587h3.755a.623.623,0,1,0,0-1.245Z" transform="translate(-2.965 -2.965)" fill="#5068a8"/>\n                                    </svg>\n                                `}\n                            </span>\n                        </span>\n                        <div${p} class="cta-badge">\n                            <i ${p} class="fa fa-minus"></i>\n                        </div>\n                        <span ${p} class="img-button-label label">${e.CtaLabel}</span>\n                        <i ${p} class="fa fa-angle-right img-button-arrow"></i>\n                    </div>\n                </div>\n            `;this.selectComponentAfterAdd(e.CtaId,A,t),this.contentMapper.updateContentButtonType(e.CtaId,"Image","/Resources/UCGrapes1/src/images/image.png"),this.updateProperties()}}selectComponentAfterAdd(A,e,t){this.editor.once("component:add",(()=>{const e=this.editor.getWrapper().find(`#${A}`)[0];e&&this.editor.select(e)})),e.replaceWith(t)}removeCta(A){const e=A.parentElement,t=this.editor.Components.getWrapper().find("#"+(null==e?void 0:e.id))[0];if(t){const A=t.parent();null==A||A.remove(),this.contentMapper.removeContentCta(A.getId())}}getIconAndAction(A,e){let t,n;switch(null==A?void 0:A.CallToActionType){case"Phone":t=this.ctaSvgManager.phoneCta(A,e),n=null==A?void 0:A.CallToActionPhoneNumber;break;case"Email":t=this.ctaSvgManager.emailCta(A,e),n=null==A?void 0:A.CallToActionEmail;break;case"SiteUrl":t=this.ctaSvgManager.urlCta(A,e),n=null==A?void 0:A.CallToActionUrl;break;case"Form":t=this.ctaSvgManager.formCta(A,e),n=null==A?void 0:A.CallToActionUrl}return{ctaButtonEl:t,ctaAction:n}}updateProperties(){const A=globalThis.selectedComponent,e=this.contentMapper.getContentCta(A.getId());e&&A&&new E(A,e).setctaAttributes()}}class x{constructor(A){this.colorList=A,this.ctaManager=new I,this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("cta-style"),this.container.id="cta-style",this.container.style.display="flex";const A=document.createElement("div");A.classList.add("text-color-palette"),A.classList.add("text-colors"),A.id="cta-color-palette",this.colorList.forEach((e=>{const t=document.createElement("div");t.classList.add("color-item");const n=document.createElement("input");n.type="radio",n.name="cta-color",n.value=e.CtaColorCode,n.id=e.CtaColorCode;const r=document.createElement("label");r.setAttribute("for",e.CtaColorCode),r.classList.add("color-box"),r.style.backgroundColor=e.CtaColorCode,t.appendChild(n),t.appendChild(r),A.appendChild(t),t.addEventListener("click",(()=>{this.ctaManager.changeCtaColor(e)})),A.appendChild(t)})),this.container.appendChild(A)}render(A){A.appendChild(this.container)}refresh(A){const e=document.getElementById("cta-style");e?e.replaceWith(this.container):A.appendChild(this.container)}}var T=t(8156),L=t.n(T),H=t(1448),S=t.n(H),N=t(5364),O=t.n(N),M=t(3375),D=t.n(M);const k=(A,e)=>{const t=[],n=[];return t.push(e),e||t.push(A.locale),A.enableFallback&&t.push(A.defaultLocale),t.filter(Boolean).map((A=>A.toString())).forEach((function(e){if(n.includes(e)||n.push(e),!A.enableFallback)return;const t=e.split("-");3===t.length&&n.push(`${t[0]}-${t[1]}`),n.push(t[0])})),D()(n)};class P{constructor(A){this.i18n=A,this.registry={},this.register("default",k)}register(A,e){if("function"!=typeof e){const A=e;e=()=>A}this.registry[A]=e}get(A){let e=this.registry[A]||this.registry[this.i18n.locale]||this.registry.default;return"function"==typeof e&&(e=e(this.i18n,A)),e instanceof Array||(e=[e]),e}}const _=function({pluralizer:A,includeZero:e=!0,ordinal:t=!1}){return function(n,r){return[e&&0===r?"zero":"",A(r,t)].filter(Boolean)}}({pluralizer:(A,e)=>{const t=String(A).split("."),n=!t[1],r=Number(t[0])==A,i=r&&t[0].slice(-1),s=r&&t[0].slice(-2);return e?1==i&&11!=s?"one":2==i&&12!=s?"two":3==i&&13!=s?"few":"other":1==A&&n?"one":"other"},includeZero:!0});class K{constructor(A){this.i18n=A,this.registry={},this.register("default",_)}register(A,e){this.registry[A]=e}get(A){return this.registry[A]||this.registry[this.i18n.locale]||this.registry.default}}var R=t(4058),j=t.n(R);function V(A){return A?Object.keys(A).reduce(((e,t)=>(e[j()(t)]=A[t],e)),{}):{}}function q(A){return null!=A}var G=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,$=Math.ceil,J=Math.floor,W="[BigNumber Error] ",Z=W+"Number primitive has more than 15 significant digits: ",X=1e14,z=14,Y=9007199254740991,AA=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],eA=1e7,tA=1e9;function nA(A){var e=0|A;return A>0||A===e?e:e-1}function rA(A){for(var e,t,n=1,r=A.length,i=A[0]+"";n<r;){for(e=A[n++]+"",t=z-e.length;t--;e="0"+e);i+=e}for(r=i.length;48===i.charCodeAt(--r););return i.slice(0,r+1||1)}function iA(A,e){var t,n,r=A.c,i=e.c,s=A.s,o=e.s,a=A.e,l=e.e;if(!s||!o)return null;if(t=r&&!r[0],n=i&&!i[0],t||n)return t?n?0:-o:s;if(s!=o)return s;if(t=s<0,n=a==l,!r||!i)return n?0:!r^t?1:-1;if(!n)return a>l^t?1:-1;for(o=(a=r.length)<(l=i.length)?a:l,s=0;s<o;s++)if(r[s]!=i[s])return r[s]>i[s]^t?1:-1;return a==l?0:a>l^t?1:-1}function sA(A,e,t,n){if(A<e||A>t||A!==J(A))throw Error(W+(n||"Argument")+("number"==typeof A?A<e||A>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(A))}function oA(A){var e=A.c.length-1;return nA(A.e/z)==e&&A.c[e]%2!=0}function aA(A,e){return(A.length>1?A.charAt(0)+"."+A.slice(1):A)+(e<0?"e":"e+")+e}function lA(A,e,t){var n,r;if(e<0){for(r=t+".";++e;r+=t);A=r+A}else if(++e>(n=A.length)){for(r=t,e-=n;--e;r+=t);A+=r}else e<n&&(A=A.slice(0,e)+"."+A.slice(e));return A}var cA,uA,dA=function A(e){var t,n,r,i,s,o,a,l,c,u,d=E.prototype={constructor:E,toString:null,valueOf:null},h=new E(1),g=20,p=4,f=-7,B=21,m=-1e7,w=1e7,v=!1,C=1,y=0,b={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Q="0123456789abcdefghijklmnopqrstuvwxyz",U=!0;function E(A,e){var t,i,s,o,a,l,c,u,d=this;if(!(d instanceof E))return new E(A,e);if(null==e){if(A&&!0===A._isBigNumber)return d.s=A.s,void(!A.c||A.e>w?d.c=d.e=null:A.e<m?d.c=[d.e=0]:(d.e=A.e,d.c=A.c.slice()));if((l="number"==typeof A)&&0*A==0){if(d.s=1/A<0?(A=-A,-1):1,A===~~A){for(o=0,a=A;a>=10;a/=10,o++);return void(o>w?d.c=d.e=null:(d.e=o,d.c=[A]))}u=String(A)}else{if(!G.test(u=String(A)))return r(d,u,l);d.s=45==u.charCodeAt(0)?(u=u.slice(1),-1):1}(o=u.indexOf("."))>-1&&(u=u.replace(".","")),(a=u.search(/e/i))>0?(o<0&&(o=a),o+=+u.slice(a+1),u=u.substring(0,a)):o<0&&(o=u.length)}else{if(sA(e,2,Q.length,"Base"),10==e&&U)return T(d=new E(A),g+d.e+1,p);if(u=String(A),l="number"==typeof A){if(0*A!=0)return r(d,u,l,e);if(d.s=1/A<0?(u=u.slice(1),-1):1,E.DEBUG&&u.replace(/^0\.0*|\./,"").length>15)throw Error(Z+A)}else d.s=45===u.charCodeAt(0)?(u=u.slice(1),-1):1;for(t=Q.slice(0,e),o=a=0,c=u.length;a<c;a++)if(t.indexOf(i=u.charAt(a))<0){if("."==i){if(a>o){o=c;continue}}else if(!s&&(u==u.toUpperCase()&&(u=u.toLowerCase())||u==u.toLowerCase()&&(u=u.toUpperCase()))){s=!0,a=-1,o=0;continue}return r(d,String(A),l,e)}l=!1,(o=(u=n(u,e,10,d.s)).indexOf("."))>-1?u=u.replace(".",""):o=u.length}for(a=0;48===u.charCodeAt(a);a++);for(c=u.length;48===u.charCodeAt(--c););if(u=u.slice(a,++c)){if(c-=a,l&&E.DEBUG&&c>15&&(A>Y||A!==J(A)))throw Error(Z+d.s*A);if((o=o-a-1)>w)d.c=d.e=null;else if(o<m)d.c=[d.e=0];else{if(d.e=o,d.c=[],a=(o+1)%z,o<0&&(a+=z),a<c){for(a&&d.c.push(+u.slice(0,a)),c-=z;a<c;)d.c.push(+u.slice(a,a+=z));a=z-(u=u.slice(a)).length}else a-=c;for(;a--;u+="0");d.c.push(+u)}}else d.c=[d.e=0]}function F(A,e,t,n){var r,i,s,o,a;if(null==t?t=p:sA(t,0,8),!A.c)return A.toString();if(r=A.c[0],s=A.e,null==e)a=rA(A.c),a=1==n||2==n&&(s<=f||s>=B)?aA(a,s):lA(a,s,"0");else if(i=(A=T(new E(A),e,t)).e,o=(a=rA(A.c)).length,1==n||2==n&&(e<=i||i<=f)){for(;o<e;a+="0",o++);a=aA(a,i)}else if(e-=s,a=lA(a,i,"0"),i+1>o){if(--e>0)for(a+=".";e--;a+="0");}else if((e+=i-o)>0)for(i+1==o&&(a+=".");e--;a+="0");return A.s<0&&r?"-"+a:a}function I(A,e){for(var t,n,r=1,i=new E(A[0]);r<A.length;r++)(!(n=new E(A[r])).s||(t=iA(i,n))===e||0===t&&i.s===e)&&(i=n);return i}function x(A,e,t){for(var n=1,r=e.length;!e[--r];e.pop());for(r=e[0];r>=10;r/=10,n++);return(t=n+t*z-1)>w?A.c=A.e=null:t<m?A.c=[A.e=0]:(A.e=t,A.c=e),A}function T(A,e,t,n){var r,i,s,o,a,l,c,u=A.c,d=AA;if(u){A:{for(r=1,o=u[0];o>=10;o/=10,r++);if((i=e-r)<0)i+=z,s=e,a=u[l=0],c=J(a/d[r-s-1]%10);else if((l=$((i+1)/z))>=u.length){if(!n)break A;for(;u.length<=l;u.push(0));a=c=0,r=1,s=(i%=z)-z+1}else{for(a=o=u[l],r=1;o>=10;o/=10,r++);c=(s=(i%=z)-z+r)<0?0:J(a/d[r-s-1]%10)}if(n=n||e<0||null!=u[l+1]||(s<0?a:a%d[r-s-1]),n=t<4?(c||n)&&(0==t||t==(A.s<0?3:2)):c>5||5==c&&(4==t||n||6==t&&(i>0?s>0?a/d[r-s]:0:u[l-1])%10&1||t==(A.s<0?8:7)),e<1||!u[0])return u.length=0,n?(e-=A.e+1,u[0]=d[(z-e%z)%z],A.e=-e||0):u[0]=A.e=0,A;if(0==i?(u.length=l,o=1,l--):(u.length=l+1,o=d[z-i],u[l]=s>0?J(a/d[r-s]%d[s])*o:0),n)for(;;){if(0==l){for(i=1,s=u[0];s>=10;s/=10,i++);for(s=u[0]+=o,o=1;s>=10;s/=10,o++);i!=o&&(A.e++,u[0]==X&&(u[0]=1));break}if(u[l]+=o,u[l]!=X)break;u[l--]=0,o=1}for(i=u.length;0===u[--i];u.pop());}A.e>w?A.c=A.e=null:A.e<m&&(A.c=[A.e=0])}return A}function L(A){var e,t=A.e;return null===t?A.toString():(e=rA(A.c),e=t<=f||t>=B?aA(e,t):lA(e,t,"0"),A.s<0?"-"+e:e)}return E.clone=A,E.ROUND_UP=0,E.ROUND_DOWN=1,E.ROUND_CEIL=2,E.ROUND_FLOOR=3,E.ROUND_HALF_UP=4,E.ROUND_HALF_DOWN=5,E.ROUND_HALF_EVEN=6,E.ROUND_HALF_CEIL=7,E.ROUND_HALF_FLOOR=8,E.EUCLID=9,E.config=E.set=function(A){var e,t;if(null!=A){if("object"!=typeof A)throw Error(W+"Object expected: "+A);if(A.hasOwnProperty(e="DECIMAL_PLACES")&&(sA(t=A[e],0,tA,e),g=t),A.hasOwnProperty(e="ROUNDING_MODE")&&(sA(t=A[e],0,8,e),p=t),A.hasOwnProperty(e="EXPONENTIAL_AT")&&((t=A[e])&&t.pop?(sA(t[0],-tA,0,e),sA(t[1],0,tA,e),f=t[0],B=t[1]):(sA(t,-tA,tA,e),f=-(B=t<0?-t:t))),A.hasOwnProperty(e="RANGE"))if((t=A[e])&&t.pop)sA(t[0],-tA,-1,e),sA(t[1],1,tA,e),m=t[0],w=t[1];else{if(sA(t,-tA,tA,e),!t)throw Error(W+e+" cannot be zero: "+t);m=-(w=t<0?-t:t)}if(A.hasOwnProperty(e="CRYPTO")){if((t=A[e])!==!!t)throw Error(W+e+" not true or false: "+t);if(t){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw v=!t,Error(W+"crypto unavailable");v=t}else v=t}if(A.hasOwnProperty(e="MODULO_MODE")&&(sA(t=A[e],0,9,e),C=t),A.hasOwnProperty(e="POW_PRECISION")&&(sA(t=A[e],0,tA,e),y=t),A.hasOwnProperty(e="FORMAT")){if("object"!=typeof(t=A[e]))throw Error(W+e+" not an object: "+t);b=t}if(A.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(t=A[e])||/^.?$|[+\-.\s]|(.).*\1/.test(t))throw Error(W+e+" invalid: "+t);U="0123456789"==t.slice(0,10),Q=t}}return{DECIMAL_PLACES:g,ROUNDING_MODE:p,EXPONENTIAL_AT:[f,B],RANGE:[m,w],CRYPTO:v,MODULO_MODE:C,POW_PRECISION:y,FORMAT:b,ALPHABET:Q}},E.isBigNumber=function(A){if(!A||!0!==A._isBigNumber)return!1;if(!E.DEBUG)return!0;var e,t,n=A.c,r=A.e,i=A.s;A:if("[object Array]"=={}.toString.call(n)){if((1===i||-1===i)&&r>=-tA&&r<=tA&&r===J(r)){if(0===n[0]){if(0===r&&1===n.length)return!0;break A}if((e=(r+1)%z)<1&&(e+=z),String(n[0]).length==e){for(e=0;e<n.length;e++)if((t=n[e])<0||t>=X||t!==J(t))break A;if(0!==t)return!0}}}else if(null===n&&null===r&&(null===i||1===i||-1===i))return!0;throw Error(W+"Invalid BigNumber: "+A)},E.maximum=E.max=function(){return I(arguments,-1)},E.minimum=E.min=function(){return I(arguments,1)},E.random=(i=9007199254740992,s=Math.random()*i&2097151?function(){return J(Math.random()*i)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(A){var e,t,n,r,i,o=0,a=[],l=new E(h);if(null==A?A=g:sA(A,0,tA),r=$(A/z),v)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(r*=2));o<r;)(i=131072*e[o]+(e[o+1]>>>11))>=9e15?(t=crypto.getRandomValues(new Uint32Array(2)),e[o]=t[0],e[o+1]=t[1]):(a.push(i%1e14),o+=2);o=r/2}else{if(!crypto.randomBytes)throw v=!1,Error(W+"crypto unavailable");for(e=crypto.randomBytes(r*=7);o<r;)(i=281474976710656*(31&e[o])+1099511627776*e[o+1]+4294967296*e[o+2]+16777216*e[o+3]+(e[o+4]<<16)+(e[o+5]<<8)+e[o+6])>=9e15?crypto.randomBytes(7).copy(e,o):(a.push(i%1e14),o+=7);o=r/7}if(!v)for(;o<r;)(i=s())<9e15&&(a[o++]=i%1e14);for(r=a[--o],A%=z,r&&A&&(i=AA[z-A],a[o]=J(r/i)*i);0===a[o];a.pop(),o--);if(o<0)a=[n=0];else{for(n=-1;0===a[0];a.splice(0,1),n-=z);for(o=1,i=a[0];i>=10;i/=10,o++);o<z&&(n-=z-o)}return l.e=n,l.c=a,l}),E.sum=function(){for(var A=1,e=arguments,t=new E(e[0]);A<e.length;)t=t.plus(e[A++]);return t},n=function(){var A="0123456789";function e(A,e,t,n){for(var r,i,s=[0],o=0,a=A.length;o<a;){for(i=s.length;i--;s[i]*=e);for(s[0]+=n.indexOf(A.charAt(o++)),r=0;r<s.length;r++)s[r]>t-1&&(null==s[r+1]&&(s[r+1]=0),s[r+1]+=s[r]/t|0,s[r]%=t)}return s.reverse()}return function(n,r,i,s,o){var a,l,c,u,d,h,f,B,m=n.indexOf("."),w=g,v=p;for(m>=0&&(u=y,y=0,n=n.replace(".",""),h=(B=new E(r)).pow(n.length-m),y=u,B.c=e(lA(rA(h.c),h.e,"0"),10,i,A),B.e=B.c.length),c=u=(f=e(n,r,i,o?(a=Q,A):(a=A,Q))).length;0==f[--u];f.pop());if(!f[0])return a.charAt(0);if(m<0?--c:(h.c=f,h.e=c,h.s=s,f=(h=t(h,B,w,v,i)).c,d=h.r,c=h.e),m=f[l=c+w+1],u=i/2,d=d||l<0||null!=f[l+1],d=v<4?(null!=m||d)&&(0==v||v==(h.s<0?3:2)):m>u||m==u&&(4==v||d||6==v&&1&f[l-1]||v==(h.s<0?8:7)),l<1||!f[0])n=d?lA(a.charAt(1),-w,a.charAt(0)):a.charAt(0);else{if(f.length=l,d)for(--i;++f[--l]>i;)f[l]=0,l||(++c,f=[1].concat(f));for(u=f.length;!f[--u];);for(m=0,n="";m<=u;n+=a.charAt(f[m++]));n=lA(n,c,a.charAt(0))}return n}}(),t=function(){function A(A,e,t){var n,r,i,s,o=0,a=A.length,l=e%eA,c=e/eA|0;for(A=A.slice();a--;)o=((r=l*(i=A[a]%eA)+(n=c*i+(s=A[a]/eA|0)*l)%eA*eA+o)/t|0)+(n/eA|0)+c*s,A[a]=r%t;return o&&(A=[o].concat(A)),A}function e(A,e,t,n){var r,i;if(t!=n)i=t>n?1:-1;else for(r=i=0;r<t;r++)if(A[r]!=e[r]){i=A[r]>e[r]?1:-1;break}return i}function t(A,e,t,n){for(var r=0;t--;)A[t]-=r,r=A[t]<e[t]?1:0,A[t]=r*n+A[t]-e[t];for(;!A[0]&&A.length>1;A.splice(0,1));}return function(n,r,i,s,o){var a,l,c,u,d,h,g,p,f,B,m,w,v,C,y,b,Q,U=n.s==r.s?1:-1,F=n.c,I=r.c;if(!(F&&F[0]&&I&&I[0]))return new E(n.s&&r.s&&(F?!I||F[0]!=I[0]:I)?F&&0==F[0]||!I?0*U:U/0:NaN);for(f=(p=new E(U)).c=[],U=i+(l=n.e-r.e)+1,o||(o=X,l=nA(n.e/z)-nA(r.e/z),U=U/z|0),c=0;I[c]==(F[c]||0);c++);if(I[c]>(F[c]||0)&&l--,U<0)f.push(1),u=!0;else{for(C=F.length,b=I.length,c=0,U+=2,(d=J(o/(I[0]+1)))>1&&(I=A(I,d,o),F=A(F,d,o),b=I.length,C=F.length),v=b,m=(B=F.slice(0,b)).length;m<b;B[m++]=0);Q=I.slice(),Q=[0].concat(Q),y=I[0],I[1]>=o/2&&y++;do{if(d=0,(a=e(I,B,b,m))<0){if(w=B[0],b!=m&&(w=w*o+(B[1]||0)),(d=J(w/y))>1)for(d>=o&&(d=o-1),g=(h=A(I,d,o)).length,m=B.length;1==e(h,B,g,m);)d--,t(h,b<g?Q:I,g,o),g=h.length,a=1;else 0==d&&(a=d=1),g=(h=I.slice()).length;if(g<m&&(h=[0].concat(h)),t(B,h,m,o),m=B.length,-1==a)for(;e(I,B,b,m)<1;)d++,t(B,b<m?Q:I,m,o),m=B.length}else 0===a&&(d++,B=[0]);f[c++]=d,B[0]?B[m++]=F[v]||0:(B=[F[v]],m=1)}while((v++<C||null!=B[0])&&U--);u=null!=B[0],f[0]||f.splice(0,1)}if(o==X){for(c=1,U=f[0];U>=10;U/=10,c++);T(p,i+(p.e=c+l*z-1)+1,s,u)}else p.e=l,p.r=+u;return p}}(),o=/^(-?)0([xbo])(?=\w[\w.]*$)/i,a=/^([^.]+)\.$/,l=/^\.([^.]+)$/,c=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g,r=function(A,e,t,n){var r,i=t?e:e.replace(u,"");if(c.test(i))A.s=isNaN(i)?null:i<0?-1:1;else{if(!t&&(i=i.replace(o,(function(A,e,t){return r="x"==(t=t.toLowerCase())?16:"b"==t?2:8,n&&n!=r?A:e})),n&&(r=n,i=i.replace(a,"$1").replace(l,"0.$1")),e!=i))return new E(i,r);if(E.DEBUG)throw Error(W+"Not a"+(n?" base "+n:"")+" number: "+e);A.s=null}A.c=A.e=null},d.absoluteValue=d.abs=function(){var A=new E(this);return A.s<0&&(A.s=1),A},d.comparedTo=function(A,e){return iA(this,new E(A,e))},d.decimalPlaces=d.dp=function(A,e){var t,n,r,i=this;if(null!=A)return sA(A,0,tA),null==e?e=p:sA(e,0,8),T(new E(i),A+i.e+1,e);if(!(t=i.c))return null;if(n=((r=t.length-1)-nA(this.e/z))*z,r=t[r])for(;r%10==0;r/=10,n--);return n<0&&(n=0),n},d.dividedBy=d.div=function(A,e){return t(this,new E(A,e),g,p)},d.dividedToIntegerBy=d.idiv=function(A,e){return t(this,new E(A,e),0,1)},d.exponentiatedBy=d.pow=function(A,e){var t,n,r,i,s,o,a,l,c=this;if((A=new E(A)).c&&!A.isInteger())throw Error(W+"Exponent not an integer: "+L(A));if(null!=e&&(e=new E(e)),s=A.e>14,!c.c||!c.c[0]||1==c.c[0]&&!c.e&&1==c.c.length||!A.c||!A.c[0])return l=new E(Math.pow(+L(c),s?A.s*(2-oA(A)):+L(A))),e?l.mod(e):l;if(o=A.s<0,e){if(e.c?!e.c[0]:!e.s)return new E(NaN);(n=!o&&c.isInteger()&&e.isInteger())&&(c=c.mod(e))}else{if(A.e>9&&(c.e>0||c.e<-1||(0==c.e?c.c[0]>1||s&&c.c[1]>=24e7:c.c[0]<8e13||s&&c.c[0]<=9999975e7)))return i=c.s<0&&oA(A)?-0:0,c.e>-1&&(i=1/i),new E(o?1/i:i);y&&(i=$(y/z+2))}for(s?(t=new E(.5),o&&(A.s=1),a=oA(A)):a=(r=Math.abs(+L(A)))%2,l=new E(h);;){if(a){if(!(l=l.times(c)).c)break;i?l.c.length>i&&(l.c.length=i):n&&(l=l.mod(e))}if(r){if(0===(r=J(r/2)))break;a=r%2}else if(T(A=A.times(t),A.e+1,1),A.e>14)a=oA(A);else{if(0==(r=+L(A)))break;a=r%2}c=c.times(c),i?c.c&&c.c.length>i&&(c.c.length=i):n&&(c=c.mod(e))}return n?l:(o&&(l=h.div(l)),e?l.mod(e):i?T(l,y,p,void 0):l)},d.integerValue=function(A){var e=new E(this);return null==A?A=p:sA(A,0,8),T(e,e.e+1,A)},d.isEqualTo=d.eq=function(A,e){return 0===iA(this,new E(A,e))},d.isFinite=function(){return!!this.c},d.isGreaterThan=d.gt=function(A,e){return iA(this,new E(A,e))>0},d.isGreaterThanOrEqualTo=d.gte=function(A,e){return 1===(e=iA(this,new E(A,e)))||0===e},d.isInteger=function(){return!!this.c&&nA(this.e/z)>this.c.length-2},d.isLessThan=d.lt=function(A,e){return iA(this,new E(A,e))<0},d.isLessThanOrEqualTo=d.lte=function(A,e){return-1===(e=iA(this,new E(A,e)))||0===e},d.isNaN=function(){return!this.s},d.isNegative=function(){return this.s<0},d.isPositive=function(){return this.s>0},d.isZero=function(){return!!this.c&&0==this.c[0]},d.minus=function(A,e){var t,n,r,i,s=this,o=s.s;if(e=(A=new E(A,e)).s,!o||!e)return new E(NaN);if(o!=e)return A.s=-e,s.plus(A);var a=s.e/z,l=A.e/z,c=s.c,u=A.c;if(!a||!l){if(!c||!u)return c?(A.s=-e,A):new E(u?s:NaN);if(!c[0]||!u[0])return u[0]?(A.s=-e,A):new E(c[0]?s:3==p?-0:0)}if(a=nA(a),l=nA(l),c=c.slice(),o=a-l){for((i=o<0)?(o=-o,r=c):(l=a,r=u),r.reverse(),e=o;e--;r.push(0));r.reverse()}else for(n=(i=(o=c.length)<(e=u.length))?o:e,o=e=0;e<n;e++)if(c[e]!=u[e]){i=c[e]<u[e];break}if(i&&(r=c,c=u,u=r,A.s=-A.s),(e=(n=u.length)-(t=c.length))>0)for(;e--;c[t++]=0);for(e=X-1;n>o;){if(c[--n]<u[n]){for(t=n;t&&!c[--t];c[t]=e);--c[t],c[n]+=X}c[n]-=u[n]}for(;0==c[0];c.splice(0,1),--l);return c[0]?x(A,c,l):(A.s=3==p?-1:1,A.c=[A.e=0],A)},d.modulo=d.mod=function(A,e){var n,r,i=this;return A=new E(A,e),!i.c||!A.s||A.c&&!A.c[0]?new E(NaN):!A.c||i.c&&!i.c[0]?new E(i):(9==C?(r=A.s,A.s=1,n=t(i,A,0,3),A.s=r,n.s*=r):n=t(i,A,0,C),(A=i.minus(n.times(A))).c[0]||1!=C||(A.s=i.s),A)},d.multipliedBy=d.times=function(A,e){var t,n,r,i,s,o,a,l,c,u,d,h,g,p,f,B=this,m=B.c,w=(A=new E(A,e)).c;if(!(m&&w&&m[0]&&w[0]))return!B.s||!A.s||m&&!m[0]&&!w||w&&!w[0]&&!m?A.c=A.e=A.s=null:(A.s*=B.s,m&&w?(A.c=[0],A.e=0):A.c=A.e=null),A;for(n=nA(B.e/z)+nA(A.e/z),A.s*=B.s,(a=m.length)<(u=w.length)&&(g=m,m=w,w=g,r=a,a=u,u=r),r=a+u,g=[];r--;g.push(0));for(p=X,f=eA,r=u;--r>=0;){for(t=0,d=w[r]%f,h=w[r]/f|0,i=r+(s=a);i>r;)t=((l=d*(l=m[--s]%f)+(o=h*l+(c=m[s]/f|0)*d)%f*f+g[i]+t)/p|0)+(o/f|0)+h*c,g[i--]=l%p;g[i]=t}return t?++n:g.splice(0,1),x(A,g,n)},d.negated=function(){var A=new E(this);return A.s=-A.s||null,A},d.plus=function(A,e){var t,n=this,r=n.s;if(e=(A=new E(A,e)).s,!r||!e)return new E(NaN);if(r!=e)return A.s=-e,n.minus(A);var i=n.e/z,s=A.e/z,o=n.c,a=A.c;if(!i||!s){if(!o||!a)return new E(r/0);if(!o[0]||!a[0])return a[0]?A:new E(o[0]?n:0*r)}if(i=nA(i),s=nA(s),o=o.slice(),r=i-s){for(r>0?(s=i,t=a):(r=-r,t=o),t.reverse();r--;t.push(0));t.reverse()}for((r=o.length)-(e=a.length)<0&&(t=a,a=o,o=t,e=r),r=0;e;)r=(o[--e]=o[e]+a[e]+r)/X|0,o[e]=X===o[e]?0:o[e]%X;return r&&(o=[r].concat(o),++s),x(A,o,s)},d.precision=d.sd=function(A,e){var t,n,r,i=this;if(null!=A&&A!==!!A)return sA(A,1,tA),null==e?e=p:sA(e,0,8),T(new E(i),A,e);if(!(t=i.c))return null;if(n=(r=t.length-1)*z+1,r=t[r]){for(;r%10==0;r/=10,n--);for(r=t[0];r>=10;r/=10,n++);}return A&&i.e+1>n&&(n=i.e+1),n},d.shiftedBy=function(A){return sA(A,-9007199254740991,Y),this.times("1e"+A)},d.squareRoot=d.sqrt=function(){var A,e,n,r,i,s=this,o=s.c,a=s.s,l=s.e,c=g+4,u=new E("0.5");if(1!==a||!o||!o[0])return new E(!a||a<0&&(!o||o[0])?NaN:o?s:1/0);if(0==(a=Math.sqrt(+L(s)))||a==1/0?(((e=rA(o)).length+l)%2==0&&(e+="0"),a=Math.sqrt(+e),l=nA((l+1)/2)-(l<0||l%2),n=new E(e=a==1/0?"5e"+l:(e=a.toExponential()).slice(0,e.indexOf("e")+1)+l)):n=new E(a+""),n.c[0])for((a=(l=n.e)+c)<3&&(a=0);;)if(i=n,n=u.times(i.plus(t(s,i,c,1))),rA(i.c).slice(0,a)===(e=rA(n.c)).slice(0,a)){if(n.e<l&&--a,"9999"!=(e=e.slice(a-3,a+1))&&(r||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(T(n,n.e+g+2,1),A=!n.times(n).eq(s));break}if(!r&&(T(i,i.e+g+2,0),i.times(i).eq(s))){n=i;break}c+=4,a+=4,r=1}return T(n,n.e+g+1,p,A)},d.toExponential=function(A,e){return null!=A&&(sA(A,0,tA),A++),F(this,A,e,1)},d.toFixed=function(A,e){return null!=A&&(sA(A,0,tA),A=A+this.e+1),F(this,A,e)},d.toFormat=function(A,e,t){var n,r=this;if(null==t)null!=A&&e&&"object"==typeof e?(t=e,e=null):A&&"object"==typeof A?(t=A,A=e=null):t=b;else if("object"!=typeof t)throw Error(W+"Argument not an object: "+t);if(n=r.toFixed(A,e),r.c){var i,s=n.split("."),o=+t.groupSize,a=+t.secondaryGroupSize,l=t.groupSeparator||"",c=s[0],u=s[1],d=r.s<0,h=d?c.slice(1):c,g=h.length;if(a&&(i=o,o=a,a=i,g-=i),o>0&&g>0){for(i=g%o||o,c=h.substr(0,i);i<g;i+=o)c+=l+h.substr(i,o);a>0&&(c+=l+h.slice(i)),d&&(c="-"+c)}n=u?c+(t.decimalSeparator||"")+((a=+t.fractionGroupSize)?u.replace(new RegExp("\\d{"+a+"}\\B","g"),"$&"+(t.fractionGroupSeparator||"")):u):c}return(t.prefix||"")+n+(t.suffix||"")},d.toFraction=function(A){var e,n,r,i,s,o,a,l,c,u,d,g,f=this,B=f.c;if(null!=A&&(!(a=new E(A)).isInteger()&&(a.c||1!==a.s)||a.lt(h)))throw Error(W+"Argument "+(a.isInteger()?"out of range: ":"not an integer: ")+L(a));if(!B)return new E(f);for(e=new E(h),c=n=new E(h),r=l=new E(h),g=rA(B),s=e.e=g.length-f.e-1,e.c[0]=AA[(o=s%z)<0?z+o:o],A=!A||a.comparedTo(e)>0?s>0?e:c:a,o=w,w=1/0,a=new E(g),l.c[0]=0;u=t(a,e,0,1),1!=(i=n.plus(u.times(r))).comparedTo(A);)n=r,r=i,c=l.plus(u.times(i=c)),l=i,e=a.minus(u.times(i=e)),a=i;return i=t(A.minus(n),r,0,1),l=l.plus(i.times(c)),n=n.plus(i.times(r)),l.s=c.s=f.s,d=t(c,r,s*=2,p).minus(f).abs().comparedTo(t(l,n,s,p).minus(f).abs())<1?[c,r]:[l,n],w=o,d},d.toNumber=function(){return+L(this)},d.toPrecision=function(A,e){return null!=A&&sA(A,1,tA),F(this,A,e,2)},d.toString=function(A){var e,t=this,r=t.s,i=t.e;return null===i?r?(e="Infinity",r<0&&(e="-"+e)):e="NaN":(null==A?e=i<=f||i>=B?aA(rA(t.c),i):lA(rA(t.c),i,"0"):10===A&&U?e=lA(rA((t=T(new E(t),g+i+1,p)).c),t.e,"0"):(sA(A,2,Q.length,"Base"),e=n(lA(rA(t.c),i,"0"),10,A,r,!0)),r<0&&t.c[0]&&(e="-"+e)),e},d.valueOf=d.toJSON=function(){return L(this)},d._isBigNumber=!0,d[Symbol.toStringTag]="BigNumber",d[Symbol.for("nodejs.util.inspect.custom")]=d.valueOf,null!=e&&E.set(e),E}();function hA(A){var e;return null!==(e=cA[A])&&void 0!==e?e:cA.default}(uA=cA||(cA={}))[uA.up=dA.ROUND_UP]="up",uA[uA.down=dA.ROUND_DOWN]="down",uA[uA.truncate=dA.ROUND_DOWN]="truncate",uA[uA.halfUp=dA.ROUND_HALF_UP]="halfUp",uA[uA.default=dA.ROUND_HALF_UP]="default",uA[uA.halfDown=dA.ROUND_HALF_DOWN]="halfDown",uA[uA.halfEven=dA.ROUND_HALF_EVEN]="halfEven",uA[uA.banker=dA.ROUND_HALF_EVEN]="banker",uA[uA.ceiling=dA.ROUND_CEIL]="ceiling",uA[uA.ceil=dA.ROUND_CEIL]="ceil",uA[uA.floor=dA.ROUND_FLOOR]="floor";var gA=t(2493),pA=t.n(gA);function fA(A,e){const t=function(A,{precision:e,significant:t}){return t&&null!==e&&e>0?e-function(A){return A.isZero()?1:Math.floor(Math.log10(A.abs().toNumber())+1)}(A):e}(A,e);if(null===t)return A.toString();const n=hA(e.roundMode);if(t>=0)return A.toFixed(t,n);const r=Math.pow(10,Math.abs(t));return(A=new dA(A.div(r).toFixed(0,n)).times(r)).toString()}function BA(A,e){var t,n,r;const i=new dA(A);if(e.raise&&!i.isFinite())throw new Error(`"${A}" is not a valid numeric value`);const s=fA(i,e),o=new dA(s),a=o.lt(0),l=o.isZero();let[c,u]=s.split(".");const d=[];let h;const g=null!==(t=e.format)&&void 0!==t?t:"%n",p=null!==(n=e.negativeFormat)&&void 0!==n?n:`-${g}`,f=a&&!l?p:g;for(c=c.replace("-","");c.length>0;)d.unshift(c.substr(Math.max(0,c.length-3),3)),c=c.substr(0,c.length-3);return c=d.join(""),h=d.join(e.delimiter),u=e.significant?function({significand:A,whole:e,precision:t}){if("0"===e||null===t)return A;const n=Math.max(0,t-e.length);return(null!=A?A:"").substr(0,n)}({whole:c,significand:u,precision:e.precision}):null!=u?u:pA()("0",null!==(r=e.precision)&&void 0!==r?r:0),e.stripInsignificantZeros&&u&&(u=u.replace(/0+$/,"")),i.isNaN()&&(h=A.toString()),u&&i.isFinite()&&(h+=(e.separator||".")+u),function(A,{formattedNumber:e,unit:t}){return A.replace("%n",e).replace("%u",t)}(f,{formattedNumber:h,unit:e.unit})}function mA(A,e,t){let n="";return(e instanceof String||"string"==typeof e)&&(n=e),e instanceof Array&&(n=e.join(A.defaultSeparator)),t.scope&&(n=[t.scope,n].join(A.defaultSeparator)),n}function wA(A){var e,t;if(null===A)return"null";const n=typeof A;return"object"!==n?n:(null===(t=null===(e=null==A?void 0:A.constructor)||void 0===e?void 0:e.name)||void 0===t?void 0:t.toLowerCase())||"object"}function vA(A,e,t){t=Object.keys(t).reduce(((e,n)=>(e[A.transformKey(n)]=t[n],e)),{});const n=e.match(A.placeholder);if(!n)return e;for(;n.length;){let r;const i=n.shift(),s=i.replace(A.placeholder,"$1");r=q(t[s])?t[s].toString().replace(/\$/gm,"_#$#_"):s in t?A.nullPlaceholder(A,i,e,t):A.missingPlaceholder(A,i,e,t);const o=new RegExp(i.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}"),"g");e=e.replace(o,r)}return e.replace(/_#\$#_/g,"$")}function CA(A,e,t={}){const n="locale"in(t=Object.assign({},t))?t.locale:A.locale,r=wA(n),i=A.locales.get("string"===r?n:typeof n).slice(),s=mA(A,e,t).split(A.defaultSeparator).map((e=>A.transformKey(e))),o=i.map((e=>s.reduce(((A,e)=>A&&A[e]),A.translations[e])));return o.push(t.defaultValue),o.find((A=>q(A)))}var yA=t(3031),bA=t.n(yA),QA=t(7248);const UA={0:"unit",1:"ten",2:"hundred",3:"thousand",6:"million",9:"billion",12:"trillion",15:"quadrillion","-1":"deci","-2":"centi","-3":"mili","-6":"micro","-9":"nano","-12":"pico","-15":"femto"},EA=t.n(QA)()(Object.values(UA),Object.keys(UA).map((A=>parseInt(A,10))));const FA=["byte","kb","mb","gb","tb","pb","eb"];function IA(A){if(A instanceof Date)return A;if("number"==typeof A){const e=new Date;return e.setTime(A),e}const e=new String(A).match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})(?:[.,](\d{1,3}))?)?(Z|\+00:?00)?/);if(e){const A=e.slice(1,8).map((A=>parseInt(A,10)||0));A[1]-=1;const[t,n,r,i,s,o,a]=A;return e[8]?new Date(Date.UTC(t,n,r,i,s,o,a)):new Date(t,n,r,i,s,o,a)}A.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)&&(new Date).setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" ")));const t=new Date;return t.setTime(Date.parse(A)),t}function xA({i18n:A,count:e,scope:t,options:n,baseScope:r}){let i,s;if(n=Object.assign({},n),i="object"==typeof t&&t?t:CA(A,t,n),!i)return A.missingTranslation.get(t,n);const o=A.pluralization.get(n.locale)(A,e),a=[];for(;o.length;){const A=o.shift();if(q(i[A])){s=i[A];break}a.push(A)}return q(s)?(n.count=e,A.interpolate(A,s,n)):A.missingTranslation.get(r.split(A.defaultSeparator).concat([a[0]]),n)}const TA={meridian:{am:"AM",pm:"PM"},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbrDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbrMonthNames:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};var LA=t(3181),HA=t.n(LA);const SA=(A,e,t)=>t>=A&&t<=e,NA=function(A,e){e instanceof Array&&(e=e.join(A.defaultSeparator));const t=e.split(A.defaultSeparator).slice(-1)[0];return A.missingTranslationPrefix+t.replace("_"," ").replace(/([a-z])([A-Z])/g,((A,e,t)=>`${e} ${t.toLowerCase()}`))},OA=(A,e,t)=>{const n=mA(A,e,t),r="locale"in t?t.locale:A.locale,i=wA(r);return`[missing "${["string"==i?r:i,n].join(A.defaultSeparator)}" translation]`},MA=(A,e,t)=>{const n=mA(A,e,t),r=[A.locale,n].join(A.defaultSeparator);throw new Error(`Missing translation: ${r}`)};class DA{constructor(A){this.i18n=A,this.registry={},this.register("guess",NA),this.register("message",OA),this.register("error",MA)}register(A,e){this.registry[A]=e}get(A,e){var t;return this.registry[null!==(t=e.missingBehavior)&&void 0!==t?t:this.i18n.missingBehavior](this.i18n,A,e)}}const kA={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,enableFallback:!1,missingBehavior:"message",missingTranslationPrefix:"",missingPlaceholder:(A,e)=>`[missing "${e}" value]`,nullPlaceholder:(A,e,t,n)=>A.missingPlaceholder(A,e,t,n),transformKey:A=>A},PA=new class{constructor(A={},e={}){this._locale=kA.locale,this._defaultLocale=kA.defaultLocale,this._version=0,this.onChangeHandlers=[],this.translations={},this.t=this.translate,this.p=this.pluralize,this.l=this.localize,this.distanceOfTimeInWords=this.timeAgoInWords;const{locale:t,enableFallback:n,missingBehavior:r,missingTranslationPrefix:i,missingPlaceholder:s,nullPlaceholder:o,defaultLocale:a,defaultSeparator:l,placeholder:c,transformKey:u}=Object.assign(Object.assign({},kA),e);this.locale=t,this.defaultLocale=a,this.defaultSeparator=l,this.enableFallback=n,this.locale=t,this.missingBehavior=r,this.missingTranslationPrefix=i,this.missingPlaceholder=s,this.nullPlaceholder=o,this.placeholder=c,this.pluralization=new K(this),this.locales=new P(this),this.missingTranslation=new DA(this),this.transformKey=u,this.interpolate=vA,this.store(A)}store(A){O()(this.translations,A),this.hasChanged()}get locale(){return this._locale||this.defaultLocale||"en"}set locale(A){if("string"!=typeof A)throw new Error(`Expected newLocale to be a string; got ${wA(A)}`);const e=this._locale!==A;this._locale=A,e&&this.hasChanged()}get defaultLocale(){return this._defaultLocale||"en"}set defaultLocale(A){if("string"!=typeof A)throw new Error(`Expected newLocale to be a string; got ${wA(A)}`);const e=this._defaultLocale!==A;this._defaultLocale=A,e&&this.hasChanged()}translate(A,e){const t=function(A,e,t){let n=[{scope:e}];if(q(t.defaults)&&(n=n.concat(t.defaults)),q(t.defaultValue)){const r="function"==typeof t.defaultValue?t.defaultValue(A,e,t):t.defaultValue;n.push({message:r}),delete t.defaultValue}return n}(this,A,e=Object.assign({},e));let n;return t.some((A=>(q(A.scope)?n=CA(this,A.scope,e):q(A.message)&&(n=A.message),null!=n)))?("string"==typeof n?n=this.interpolate(this,n,e):"object"==typeof n&&n&&q(e.count)&&(n=xA({i18n:this,count:e.count||0,scope:n,options:e,baseScope:mA(this,A,e)})),e&&n instanceof Array&&(n=n.map((A=>"string"==typeof A?vA(this,A,e):A))),n):this.missingTranslation.get(A,e)}pluralize(A,e,t){return xA({i18n:this,count:A,scope:e,options:Object.assign({},t),baseScope:mA(this,e,null!=t?t:{})})}localize(A,e,t){if(t=Object.assign({},t),null==e)return"";switch(A){case"currency":return this.numberToCurrency(e);case"number":return BA(e,Object.assign({delimiter:",",precision:3,separator:".",significant:!1,stripInsignificantZeros:!1},CA(this,"number.format")));case"percentage":return this.numberToPercentage(e);default:{let n;return n=A.match(/^(date|time)/)?this.toTime(A,e):e.toString(),vA(this,n,t)}}}toTime(A,e){const t=IA(e),n=CA(this,A);return t.toString().match(/invalid/i)?t.toString():n?this.strftime(t,n):t.toString()}numberToCurrency(A,e={}){return BA(A,Object.assign(Object.assign(Object.assign({delimiter:",",format:"%u%n",precision:2,separator:".",significant:!1,stripInsignificantZeros:!1,unit:"$"},V(this.get("number.format"))),V(this.get("number.currency.format"))),e))}numberToPercentage(A,e={}){return BA(A,Object.assign(Object.assign(Object.assign({delimiter:"",format:"%n%",precision:3,stripInsignificantZeros:!1,separator:".",significant:!1},V(this.get("number.format"))),V(this.get("number.percentage.format"))),e))}numberToHumanSize(A,e={}){return function(A,e,t){const n=hA(t.roundMode),r=1024,i=new dA(e).abs(),s=i.lt(r);let o;const a=((A,e)=>{const t=e.length-1,n=new dA(Math.log(A.toNumber())).div(Math.log(r)).integerValue(dA.ROUND_DOWN).toNumber();return Math.min(t,n)})(i,FA);o=s?i.integerValue():new dA(fA(i.div(Math.pow(r,a)),{significant:t.significant,precision:t.precision,roundMode:t.roundMode}));const l=A.translate("number.human.storage_units.format",{defaultValue:"%n %u"}),c=A.translate(`number.human.storage_units.units.${s?"byte":FA[a]}`,{count:i.integerValue().toNumber()});let u=o.toFixed(t.precision,n);return t.stripInsignificantZeros&&(u=u.replace(/(\..*?)0+$/,"$1").replace(/\.$/,"")),l.replace("%n",u).replace("%u",c)}(this,A,Object.assign(Object.assign(Object.assign({delimiter:"",precision:3,significant:!0,stripInsignificantZeros:!0,units:{billion:"Billion",million:"Million",quadrillion:"Quadrillion",thousand:"Thousand",trillion:"Trillion",unit:""}},V(this.get("number.human.format"))),V(this.get("number.human.storage_units"))),e))}numberToHuman(A,e={}){return function(A,e,t){const n={roundMode:t.roundMode,precision:t.precision,significant:t.significant};let r;if("string"===wA(t.units)){const e=t.units;if(r=CA(A,e),!r)throw new Error(`The scope "${A.locale}${A.defaultSeparator}${mA(A,e,{})}" couldn't be found`)}else r=t.units;let i=fA(new dA(e),n);const s=((A,e)=>{const t=A.isZero()?0:Math.floor(Math.log10(A.abs().toNumber()));return(A=>bA()(Object.keys(A).map((A=>EA[A])),(A=>-1*A)))(e).find((A=>t>=A))||0})(new dA(i),r),o=((A,e)=>A[UA[e.toString()]]||"")(r,s);if(i=fA(new dA(i).div(Math.pow(10,s)),n),t.stripInsignificantZeros){let[A,e]=i.split(".");e=(e||"").replace(/0+$/,""),i=A,e&&(i+=`${t.separator}${e}`)}return t.format.replace("%n",i||"0").replace("%u",o).trim()}(this,A,Object.assign(Object.assign(Object.assign({delimiter:"",separator:".",precision:3,significant:!0,stripInsignificantZeros:!0,format:"%n %u",roundMode:"default",units:{billion:"Billion",million:"Million",quadrillion:"Quadrillion",thousand:"Thousand",trillion:"Trillion",unit:""}},V(this.get("number.human.format"))),V(this.get("number.human.decimal_units"))),e))}numberToRounded(A,e){return BA(A,Object.assign({unit:"",precision:3,significant:!1,separator:".",delimiter:"",stripInsignificantZeros:!1},e))}numberToDelimited(A,e={}){return function(A,e){const t=new dA(A);if(!t.isFinite())return A.toString();if(!e.delimiterPattern.global)throw new Error(`options.delimiterPattern must be a global regular expression; received ${e.delimiterPattern}`);let[n,r]=t.toString().split(".");return n=n.replace(e.delimiterPattern,(A=>`${A}${e.delimiter}`)),[n,r].filter(Boolean).join(e.separator)}(A,Object.assign({delimiterPattern:/(\d)(?=(\d\d\d)+(?!\d))/g,delimiter:",",separator:"."},e))}withLocale(A,e){return t=this,n=void 0,i=function*(){const t=this.locale;try{this.locale=A,yield e()}finally{this.locale=t}},new((r=void 0)||(r=Promise))((function(A,e){function s(A){try{a(i.next(A))}catch(A){e(A)}}function o(A){try{a(i.throw(A))}catch(A){e(A)}}function a(e){var t;e.done?A(e.value):(t=e.value,t instanceof r?t:new r((function(A){A(t)}))).then(s,o)}a((i=i.apply(t,n||[])).next())}));var t,n,r,i}strftime(A,e,t={}){return function(A,e,t={}){const{abbrDayNames:n,dayNames:r,abbrMonthNames:i,monthNames:s,meridian:o,utc:a}=Object.assign(Object.assign({},TA),t);if(isNaN(A.getTime()))throw new Error("strftime() requires a valid date object, but received an invalid date.");const l=a?A.getUTCDay():A.getDay(),c=a?A.getUTCDate():A.getDate(),u=a?A.getUTCFullYear():A.getFullYear(),d=(a?A.getUTCMonth():A.getMonth())+1,h=a?A.getUTCHours():A.getHours();let g=h;const p=h>11?"pm":"am",f=a?A.getUTCSeconds():A.getSeconds(),B=a?A.getUTCMinutes():A.getMinutes(),m=a?0:A.getTimezoneOffset(),w=Math.floor(Math.abs(m/60)),v=Math.abs(m)-60*w,C=(m>0?"-":"+")+(w.toString().length<2?"0"+w:w)+(v.toString().length<2?"0"+v:v);return g>12?g-=12:0===g&&(g=12),(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("%a",n[l])).replace("%A",r[l])).replace("%b",i[d])).replace("%B",s[d])).replace("%d",c.toString().padStart(2,"0"))).replace("%e",c.toString())).replace("%-d",c.toString())).replace("%H",h.toString().padStart(2,"0"))).replace("%-H",h.toString())).replace("%k",h.toString())).replace("%I",g.toString().padStart(2,"0"))).replace("%-I",g.toString())).replace("%l",g.toString())).replace("%m",d.toString().padStart(2,"0"))).replace("%-m",d.toString())).replace("%M",B.toString().padStart(2,"0"))).replace("%-M",B.toString())).replace("%p",o[p])).replace("%P",o[p].toLowerCase())).replace("%S",f.toString().padStart(2,"0"))).replace("%-S",f.toString())).replace("%w",l.toString())).replace("%y",u.toString().padStart(2,"0").substr(-2))).replace("%-y",u.toString().padStart(2,"0").substr(-2).replace(/^0+/,""))).replace("%Y",u.toString())).replace(/%z/i,C)}(A,e,Object.assign(Object.assign(Object.assign({},V(CA(this,"date"))),{meridian:{am:CA(this,"time.am")||"AM",pm:CA(this,"time.pm")||"PM"}}),t))}update(A,e,t={strict:!1}){if(t.strict&&!S()(this.translations,A))throw new Error(`The path "${A}" is not currently defined`);const n=L()(this.translations,A),r=wA(n),i=wA(e);if(t.strict&&r!==i)throw new Error(`The current type for "${A}" is "${r}", but you're trying to override it with "${i}"`);let s;s="object"===i?Object.assign(Object.assign({},n),e):e;const o=A.split(this.defaultSeparator),a=o.pop();let l=this.translations;for(const A of o)l[A]||(l[A]={}),l=l[A];l[a]=s,this.hasChanged()}toSentence(A,e={}){const{wordsConnector:t,twoWordsConnector:n,lastWordConnector:r}=Object.assign(Object.assign({wordsConnector:", ",twoWordsConnector:" and ",lastWordConnector:", and "},V(CA(this,"support.array"))),e),i=A.length;switch(i){case 0:return"";case 1:return`${A[0]}`;case 2:return A.join(n);default:return[A.slice(0,i-1).join(t),r,A[i-1]].join("")}}timeAgoInWords(A,e,t={}){return function(A,e,t,n={}){const r=n.scope||"datetime.distance_in_words",i=(e,t=0)=>A.t(e,{count:t,scope:r});e=IA(e),t=IA(t);let s=e.getTime()/1e3,o=t.getTime()/1e3;s>o&&([e,t,s,o]=[t,e,o,s]);const a=Math.round(o-s),l=Math.round((o-s)/60),c=l/60/24,u=Math.round(l/60),d=Math.round(c),h=Math.round(d/30);if(SA(0,1,l))return n.includeSeconds?SA(0,4,a)?i("less_than_x_seconds",5):SA(5,9,a)?i("less_than_x_seconds",10):SA(10,19,a)?i("less_than_x_seconds",20):SA(20,39,a)?i("half_a_minute"):SA(40,59,a)?i("less_than_x_minutes",1):i("x_minutes",1):0===l?i("less_than_x_minutes",1):i("x_minutes",l);if(SA(2,44,l))return i("x_minutes",l);if(SA(45,89,l))return i("about_x_hours",1);if(SA(90,1439,l))return i("about_x_hours",u);if(SA(1440,2519,l))return i("x_days",1);if(SA(2520,43199,l))return i("x_days",d);if(SA(43200,86399,l))return i("about_x_months",Math.round(l/43200));if(SA(86400,525599,l))return i("x_months",h);let g=e.getFullYear();e.getMonth()+1>=3&&(g+=1);let p=t.getFullYear();t.getMonth()+1<3&&(p-=1);const f=525600,B=l-1440*(g>p?0:HA()(g,p).filter((A=>1==new Date(A,1,29).getMonth())).length),m=Math.trunc(B/f),w=parseFloat((B/f-m).toPrecision(3));return w<.25?i("about_x_years",m):w<.75?i("over_x_years",m):i("almost_x_years",m+1)}(this,A,e,t)}onChange(A){return this.onChangeHandlers.push(A),()=>{this.onChangeHandlers.splice(this.onChangeHandlers.indexOf(A),1)}}get version(){return this._version}formatNumber(A,e={}){return BA(A,e=Object.assign(Object.assign({delimiter:",",precision:3,separator:".",unit:"",format:"%u%n",significant:!1,stripInsignificantZeros:!1},V(this.get("number.format"))),e))}get(A){return CA(this,A)}runCallbacks(){this.onChangeHandlers.forEach((A=>A(this)))}hasChanged(){this._version+=1,this.runCallbacks()}}({en:{navbar:{tree:"Tree",publish:{label:"Publish",modal_title:"Publish",modal_description:"Are you sure you want to publish? Once published, all currently visible pages will be finalized and visible to residents. This action cannot be undone.",notify_residents:"Notify residents about the updates made",modal_confirm:"Publish",modal_cancel:"Cancel"},debug:{label:"Debug",modal_title:"App Debugging",total_urls:"Total URLs",total_successful:"Successful",total_failed:"Failed",full_url:"Full URL",status_code:"Status Code",status_message:"Status Message",affected_tile:"Affected Tile",affected_content:"Affected Content",affected_cta:"Affected CTA"},share:{label:"Share",modal_title:"Share link for a preview",modal_description:"A shareable link has been generated for you. Copy it and share for previews!",copy:"Copy",close:"Close",copied:"Linked copied to clipboard"},appversion:{create_new:"Create new version",duplicate:"Duplicate version",duplicate_button:"Duplicate",save:"Save",cancel:"Cancel",delete:"Delete"}},undo:"Undo",redo:"Redo",sidebar:{pages:"Pages",templates:{label:"Templates",click_to_add_template:"Click to add template",confirmation_title:"Confirmation",confirmation_message:"When you continue, all the changes you have made will be cleared."},confirmation_accept:"Confirm",confirmation_cancel:"Cancel",image_upload:{modal_title:"Upload",cancel:"Cancel",save:"Save",upload_message:"<p>Drag and drop or <a href='#' id='browseLink'>browse</a></p>"},icon_category:{general:"General",services:"Services",health:"Health",living:"Living"},action_list:{page:"Pages",services:"Services",forms:"Forms",weblink:"Web link",module:"Modules",content:"Content"}},default:{reception:"Reception",mycare:"My Care",myliving:"My Living",myservice:"My Service",location:"Location",map:"Map",myactivity:"My Activity",calendar:"Calendar"},tile:{add_template_right:"Add tile right",add_template_bottom:"Add tile below",delete_tile:"Delete tile",title:"Title"},messages:{success:{published:"App published successfully",page_created:"Page created successfully"},error:{page_linking:"Page cannot be linked to itself",select_tile:"Select a tile to continue",empty_page_name:"Enter page name",templates_on_menu_pages:"Templates can only be added to menu pages",no_active_page:"No active page"}},Messages:"Messages",Requests:"Requests",NoMessagesYet:"No Messages Yet"},nl:{navbar:{tree:"Boom",publish:{label:"Publiceren",modal_title:"Publiceren",modal_description:"Weet je zeker dat je wilt publiceren? Zodra gepubliceerd, worden alle momenteel zichtbare pagina's afgerond en zichtbaar voor bewoners. Deze actie kan niet ongedaan worden gemaakt.",notify_residents:"Bewoners op de hoogte stellen van de gemaakte updates",modal_confirm:"Publiceren",modal_cancel:"Annuleren"},debug:{label:"Debug",modal_title:"App Debugging",total_urls:"Totaal aantal URL's",total_successful:"Succesvol",total_failed:"Mislukt",full_url:"Volledige URL",status_code:"Statuscode",status_message:"Statusbericht",affected_tile:"Beïnvloede tegel",affected_content:"Beïnvloede inhoud",affected_cta:"Beïnvloede CTA"},share:{label:"Delen",modal_title:"Deel link voor een voorbeeldweergave",modal_description:"Er is een deelbare link gegenereerd voor jou. Kopieer deze en deel hem voor previews!",copy:"Kopiëren",close:"Sluiten",copied:"Link gekopieerd naar klembord"},appversion:{create_new:"Nieuwe versie maken",duplicate:"Versie dupliceren"}},undo:"Ongedaan maken",redo:"Opnieuw",sidebar:{pages:"Pagina's",templates:{label:"Sjablonen",click_to_add_template:"Klik om een sjabloon toe te voegen",confirmation_title:"Bevestiging",confirmation_message:"Als je doorgaat, worden alle wijzigingen die je hebt gemaakt gewist."},confirmation_accept:"Bevestigen",confirmation_cancel:"Annuleren",image_upload:{modal_title:"Uploaden",cancel:"Annuleren",save:"Opslaan",upload_message:"<p>Sleep en plaats of <a href='#' id='browseLink'>blader</a></p>"},icon_category:{general:"Algemeen",services:"Diensten",health:"Gezondheid",living:"Wonen"},action_list:{page:"Pagina's",services:"Diensten",forms:"Formulieren",weblink:"Weblink",module:"Modules",content:"Inhoud"}},default:{reception:"Receptie",mycare:"Mijn Zorg",myliving:"Mijn Wonen",myservice:"Mijn Dienst",location:"Locatie",map:"Kaart",myactivity:"Mijn Activiteit",calendar:"Kalender"},tile:{add_template_right:"Tegel rechts toevoegen",add_template_bottom:"Tegel hieronder toevoegen",delete_tile:"Tegel verwijderen",title:"Titel"},messages:{success:{published:"App succesvol gepubliceerd",page_created:"Pagina succesvol aangemaakt"},error:{page_linking:"Pagina kan niet aan zichzelf worden gekoppeld",select_tile:"Selecteer een tegel om door te gaan",empty_page_name:"Voer een paginanaam in",templates_on_menu_pages:"Sjablonen kunnen alleen aan menupagina's worden toegevoegd",no_active_page:"Geen actieve pagina"}},Messages:"Berichten",Requests:"Verzoeken",NoMessagesYet:"Nog geen berichten"}});class _A{constructor(A,e){this.tileAttributes=e,this.selectedComponent=A,this.themeManager=new JA}setTileAttributes(){this.setBgColorProperties(),this.setOpacityProperties(),this.setTitleStyleProperties(),this.setTileActionProperties(),this.setActionProperties(),this.setTileIconProperties()}setBgColorProperties(){var A;const e=document.getElementById("theme-color-palette"),t=function(A){if(!A)return"";const e=A.match(/\d+/g);return e&&3===e.length?`#${e.map((A=>Number(A).toString(16).padStart(2,"0"))).join("")}`:""}(this.selectedComponent.getEl().style.backgroundColor),n=null===(A=this.selectedComponent.getStyle())||void 0===A?void 0:A["background-image"],r=this.themeManager.getThemeColor(this.tileAttributes.BGColor),i=null==e?void 0:e.children;for(let A=0;A<i.length;A++){const e=i[A].querySelector("input");n||t!==r||t!==e.value?e.checked=!1:e.checked=!0}}setOpacityProperties(){var A;const e=this.tileAttributes.BGImageUrl,t=this.tileAttributes.Opacity,n=null===(A=this.selectedComponent.getStyle())||void 0===A?void 0:A["background-image"];let r="";if(n&&n.startsWith("url(")&&(r=n.replace(/^url\(["']?/,"").replace(/["']?\)$/,"")),r&&e){if(r===e){const A=document.querySelector(".tile-img-section");if(A){A.querySelector("#slider-wrapper").style.display="flex",A.querySelector("#bg-opacity").value=t,A.querySelector("#valueDisplay").textContent=t+"%";const n=A.querySelector("#tile-img-container");n.style.display="block";const r=n.querySelector(".tile-img-thumbnail");r&&(r.src=e),this.selectedComponent.addStyle({"background-color":`rgba(0, 0, 0, ${t/100})`})}}}else{const A=document.querySelector("#slider-wrapper"),e=document.querySelector("#tile-img-container");A.style.display="none",e.style.display="none"}}setTitleStyleProperties(){const A=document.querySelector("#tile-title"),e=this.tileAttributes.Text;A.value=e;const t=this.tileAttributes.Color,n=document.querySelector("#text-color-palette"),r=null==n?void 0:n.querySelectorAll("input");null==r||r.forEach((A=>{A.value===t?A.checked=!0:A.checked=!1}))}setTileActionProperties(){const A=this.tileAttributes.Align,e=document.querySelector(".text-alignment"),t=null==e?void 0:e.querySelectorAll("input");null==t||t.forEach((e=>{e.value===A?e.checked=!0:e.checked=!1}))}setTileIconProperties(){var A;const e=this.tileAttributes.Icon;if(e){const A=this.themeManager.getIconCategory(e);this.themeManager.updateThemeIcons(A),console.log("tileIcon",e),console.log("categoryTitle",A);const t=document.querySelector("#icon-categories-list");t.querySelectorAll(".category-option").forEach((e=>{if(e.classList.remove("selected"),e.getAttribute("data-value")===A){e.classList.add("selected");const n=t.querySelector(".selected-category-value");n&&(n.textContent=PA.t(`sidebar.icon_category.${A.toLowerCase()}`))}}))}const t=this.selectedComponent.getEl().querySelector(".tile-icon"),n=null!==(A=null==t?void 0:t.getAttribute("title"))&&void 0!==A?A:"";document.querySelector("#icons-list").querySelectorAll(".icon").forEach((A=>{var t;const r=A,i=null!==(t=r.getAttribute("title"))&&void 0!==t?t:"";if(e&&i===e&&i===n){r.style.border="2px solid #5068A8";const A=r.querySelector("svg path");A&&A.setAttribute("fill","#5068A8")}else{r.style.border="";const A=r.querySelector("svg path");A&&A.setAttribute("fill","#7c8791")}}))}setActionProperties(){var A,e;const t=null===(A=this.tileAttributes.Action)||void 0===A?void 0:A.ObjectType,n=null===(e=this.tileAttributes)||void 0===e?void 0:e.Text,r=document.querySelector(".tb-dropdown-header").querySelector("#sidebar_select_action_label");r&&(r.innerText=t?`${n.length>10?n.substring(0,14)+"":n}, ${n.length>10?n.substring(0,14)+"...":n}`:"Select Action")}}class KA{constructor(A,e){this.icons=[],this.iconsCategory="General",this.themeManager=A,this.iconsCategory=e,this.init()}init(){this.icons=[],this.themeManager.getActiveThemeIcons().filter((A=>A.IconCategory===this.iconsCategory)).forEach((A=>{const e=document.createElement("div");e.classList.add("icon"),e.title=A.IconName,e.innerHTML=`${A.IconSVG}`,e.addEventListener("click",(e=>{var t;e.preventDefault();const n=globalThis.selectedComponent;if(!n)return;const r=n.find(".tile-icon")[0];if(!r)return;const i=null===(t=n.getStyle())||void 0===t?void 0:t.color,s=A.IconSVG.replace(/fill="#[^"]*"/g,`fill="${i||"white"}"`).replace("<svg",`<svg ${p}`);r.components(s),r.addAttributes({title:A.IconName}),r.parent().addStyle({display:"block"}),globalThis.tileMapper.updateTile(n.parent().getId(),"Icon",A.IconName);const o=n.parent(),a=o.parent(),l=globalThis.tileMapper.getTile(a.getId(),o.getId());new _A(n,l).setTileAttributes()})),this.icons.push(e)}))}render(A){this.icons.forEach((e=>A.appendChild(e)))}}class RA{constructor(A="General"){this.categoryTitle=A,this.container=document.createElement("div"),this.selectionDiv=document.createElement("div"),this.categoryOptions=document.createElement("div"),this.selectedCategory=document.createElement("span"),this.themeManager=new JA,this.init(),document.addEventListener("click",this.handleOutsideClick.bind(this))}init(){this.container.className="sidebar-section services-section",this.container.id="icon-categories-list",this.selectionDiv.className="tb-custom-category-selection";const A=document.createElement("button");A.className="category-select-button",A.setAttribute("aria-haspopup","listbox"),A.setAttribute("aria-expanded","false"),this.selectedCategory.className="selected-category-value",this.selectedCategory.textContent=PA.t("sidebar.icon_category.general"),A.appendChild(this.selectedCategory),A.onclick=e=>{e.preventDefault(),A.classList.contains("open")?this.closeSelection():(this.categoryOptions.classList.toggle("show"),A.classList.toggle("open"),A.setAttribute("aria-expanded","true"))},this.selectionDiv.appendChild(A),this.container.appendChild(this.selectionDiv),this.initializeCategoryOptions(),this.loadThemeIcons(this.categoryTitle)}initializeCategoryOptions(){this.categoryOptions.className="category-options-list",this.categoryOptions.setAttribute("role","listbox"),[{name:"General",label:PA.t("sidebar.icon_category.general")},{name:"Services",label:PA.t("sidebar.icon_category.services")},{name:"Health",label:PA.t("sidebar.icon_category.health")},{name:"Living",label:PA.t("sidebar.icon_category.living")}].forEach((A=>{const e=document.createElement("div");e.className="category-option",e.role="option",e.setAttribute("data-value",A.name),e.textContent=A.label,e.onclick=()=>{this.categoryOptions.querySelectorAll(".category-option").forEach((A=>A.classList.remove("selected"))),e.classList.add("selected"),this.selectedCategory.textContent=A.label,this.loadThemeIcons(A.name),this.closeSelection()},this.categoryOptions.appendChild(e)})),this.selectionDiv.appendChild(this.categoryOptions)}closeSelection(){if(this.categoryOptions.classList.contains("show")){this.categoryOptions.classList.remove("show");const A=this.container.querySelector(".category-select-button");A.setAttribute("aria-expanded","false"),A.classList.toggle("open")}}loadThemeIcons(A){document.querySelectorAll("#icons-list").forEach((A=>A.remove()));const e=document.createElement("div");e.classList.add("icons-list"),e.id="icons-list",new KA(this.themeManager,A||this.categoryTitle).render(e),this.container.appendChild(e)}handleOutsideClick(A){this.categoryOptions.classList.contains("show")&&!this.container.contains(A.target)&&this.closeSelection()}render(A){const e=A.querySelector("#icon-categories-list");e?e.replaceWith(this.container):A.appendChild(this.container)}}var jA=function(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))};class VA{constructor(){this.themes=[],this.appVersion=globalThis.activeVersion,this.config=e.getInstance()}getActiveVersion(){return jA(this,void 0,void 0,(function*(){var A;const e=new s,t=yield e.getVersions();return globalThis.activeVersion=(null===(A=null==t?void 0:t.AppVersions)||void 0===A?void 0:A.find((A=>A.IsActive)))||null,globalThis.activeVersion}))}getPages(){var A;return(null===(A=globalThis.activeVersion)||void 0===A?void 0:A.Pages)||null}preDefinedPages(){return jA(this,void 0,void 0,(function*(){return(this.getPages()||[]).filter((A=>"Maps"==A.PageType||"MyActivity"==A.PageType||"Calendar"==A.PageType&&"Home"!==A.PageName))}))}getActiveVersionId(){return jA(this,void 0,void 0,(function*(){return globalThis.activeVersion.AppVersionId}))}updatePageTitle(A){return jA(this,void 0,void 0,(function*(){const e=globalThis.currentPageId,t=globalThis.tileMapper,n=globalThis.selectedComponent;if(!e)return;const r=new s;if(n&&t){const i=n.parent().getId(),s=n.find(".tile-title")[0];if(!s)return;s.setAttributes({title:A}),s.empty(),s.append(A,{at:0});const o={AppVersionId:yield this.getActiveVersionId(),PageId:e,PageName:A};yield r.updatePageTitle(o),t.updateTile(i,"Name",A),t.updateTile(i,"Text",A)}}))}}var qA,GA,$A=function(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))};class JA{constructor(){this.themes=[],this.config=e.getInstance(),this.appVersionManager=new VA,this.setThemes(this.config.themes)}setThemes(A){this.themes=A,this.currentTheme=this.getThemes().find((A=>A.ThemeId===this.config.currentThemeId))}getThemes(){return this.themes}getActiveThemeIcons(){return this.currentTheme?this.currentTheme.ThemeIcons:[]}getActiveThemeColors(){return this.currentTheme?this.currentTheme.ThemeColors:{}}getActiveThemeCtaColors(){return this.currentTheme?this.currentTheme.ThemeCtaColors:{}}setTheme(A){this.currentTheme=A,this.config.currentThemeId=A.ThemeId,this.updateColorPallete(A.ThemeColors),this.updateCtaColorPallete(A.ThemeCtaColors),this.updateThemeIcons(),this.applyTheme(A)}updateColorPallete(A){const e=new b(A,"theme-color-palette"),t=document.querySelector(".sidebar-section .theme-section");e&&e.refresh(t)}updateCtaColorPallete(A){const e=new x(A),t=document.getElementById("content-page-section");t&&e.refresh(t)}updateThemeIcons(A="General"){const e=document.getElementById("menu-page-section");new RA(A).render(e)}getThemeColor(A){return this.currentTheme&&this.currentTheme.ThemeColors?this.currentTheme.ThemeColors[A]||"transparent":(console.error("ThemeColors is undefined or invalid:",this.currentTheme),null)}getThemeCtaColor(A){var e;return A||(A="CtaColorOne"),this.currentTheme&&this.currentTheme.ThemeCtaColors?(null===(e=this.currentTheme.ThemeCtaColors.find((e=>e.CtaColorName===A)))||void 0===e?void 0:e.CtaColorCode)||"#5068a8":(console.error("ThemeColors is undefined or invalid:",this.currentTheme),null)}getThemeIcon(A){var e,t;return(null===(t=null===(e=this.getActiveThemeIcons())||void 0===e?void 0:e.find((e=>e.IconName===A)))||void 0===t?void 0:t.IconSVG)||null}getIconCategory(A){var e,t;return(null===(t=null===(e=this.getActiveThemeIcons())||void 0===e?void 0:e.find((e=>e.IconName===A)))||void 0===t?void 0:t.IconCategory)||null}applyTheme(A){return $A(this,void 0,void 0,(function*(){const e=document.querySelectorAll(".mobile-frame iframe");if(!e.length)return;const t=globalThis.activeVersion;t&&t.Pages.forEach((t=>$A(this,void 0,void 0,(function*(){var n,r;const i=`data-${t.PageId}`,s=JSON.parse(localStorage.getItem(i)||"{}");if(s.PageMenuStructure&&(null===(n=s.PageMenuStructure)||void 0===n?void 0:n.Rows).forEach((t=>{t.Tiles.forEach((t=>{t.BGColor&&e.forEach((e=>{var n,r;const i=e.contentDocument||(null===(n=e.contentWindow)||void 0===n?void 0:n.document);if(i){this.updateFontFamily(i,A.ThemeFontFamily);const e=i.getElementById(t.Id);if(e){const n=e.querySelector(".template-block");n&&(n.style.backgroundColor=null===(r=null==A?void 0:A.ThemeColors)||void 0===r?void 0:r[t.BGColor]),this.updateTileIcon(t,e)}this.updateFrameColor(i)}}))}))})),s.PageContentStructure){const A=null===(r=s.PageContentStructure)||void 0===r?void 0:r.Cta;null==A||A.forEach(((A,t)=>{e.forEach((e=>{var t;const n=e.contentDocument||(null===(t=e.contentWindow)||void 0===t?void 0:t.document);if(n){const e=n.querySelector(`#${A.CtaId}`);e&&(e.querySelector(".cta-styled-btn").style.backgroundColor=this.getThemeCtaColor(A.CtaBGColor)),this.updateFrameColor(n)}}))}))}}))))}))}updateTileIcon(A,e){if(A&&e){const t=e.querySelector(".tile-icon");if(t){const e=t.querySelector("svg");if(e){let n=this.getThemeIcon(A.Icon);if(n){n=n.replace('fill="#7c8791"',`fill="${A.Color}"`);const r=document.createElement("div");r.innerHTML=n.trim();const i=r.firstChild;i&&(e.remove(),t.appendChild(i))}}}}}updateFontFamily(A,e="Comic Sans MS"){try{A.documentElement.style.setProperty("--font-family",e)}catch(A){console.error("Error updating font family:",A)}}updateFrameColor(A){var e;const t=null===(e=A.querySelector(".tb-toggle-buttons"))||void 0===e?void 0:e.children[0];null==t||t.style.setProperty("background-color",this.getThemeColor("backgroundColor"));const n=A.querySelector(".tb-date-selector");null==n||n.style.setProperty("background-color",this.getThemeColor("backgroundColor"))}}(GA=qA||(qA={})).ADD_ROW="ADD_ROW",GA.REMOVE_ROW="REMOVE_ROW",GA.ADD_TILE="ADD_TILE",GA.REMOVE_TILE="REMOVE_TILE",GA.MODIFY_TILE="MODIFY_TILE",GA.MOVE_TILE="MOVE_TILE",GA.BATCH="BATCH";class WA{constructor(A){this.undoStack=[],this.redoStack=[],this.maxStackSize=100,this.isUndoing=!1,this.isRedoing=!1,this.subscribers=[],this.batchActions=null,this.pageId=A,this.setupKeyboardShortcuts()}subscribe(A){return this.subscribers.push(A),()=>{this.subscribers=this.subscribers.filter((e=>e!==A))}}startBatch(){this.batchActions||(this.batchActions=[])}endBatch(){this.batchActions&&this.batchActions.length>0&&this.addToUndoStack({type:qA.BATCH,pageId:this.pageId,data:[...this.batchActions],timestamp:Date.now()}),this.batchActions=null}addRow(A){const e={type:qA.ADD_ROW,pageId:this.pageId,rowId:A.Id,data:A,timestamp:Date.now()};this.batchActions?this.batchActions.push(e):this.addToUndoStack(e)}removeRow(A,e){const t={type:qA.REMOVE_ROW,pageId:this.pageId,rowId:A,data:e,timestamp:Date.now()};this.batchActions?this.batchActions.push(t):this.addToUndoStack(t)}addTile(A,e){const t={type:qA.ADD_TILE,pageId:this.pageId,rowId:A,tileId:e.Id,data:e,timestamp:Date.now()};this.batchActions?this.batchActions.push(t):this.addToUndoStack(t)}removeTile(A,e,t){var n,r;e&&t||null===(r=null===(n=this.getPageData().PageMenuStructure)||void 0===n?void 0:n.Rows)||void 0===r||r.forEach((n=>{const r=n.Tiles.find((e=>e.Id===A));r&&(e=n.Id,t=r)}));const i={type:qA.REMOVE_TILE,pageId:this.pageId,rowId:e,tileId:A,data:t,timestamp:Date.now()};this.batchActions?this.batchActions.push(i):this.addToUndoStack(i)}modifyTile(A,e,t){const n={type:qA.MODIFY_TILE,pageId:this.pageId,tileId:A,data:{oldValues:e,newValues:t},timestamp:Date.now()};this.batchActions?this.batchActions.push(n):this.addToUndoStack(n)}moveTile(A,e,t,n,r){const i={type:qA.MOVE_TILE,pageId:this.pageId,tileId:A,rowId:e,data:{sourceRowId:e,targetRowId:t,targetIndex:n,originalIndex:r},timestamp:Date.now()};this.batchActions?this.batchActions.push(i):this.addToUndoStack(i)}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undo(){if(!this.canUndo())return!1;this.isUndoing=!0;const A=this.undoStack.pop();try{if(A.type===qA.BATCH){const e=A.data;for(let A=e.length-1;A>=0;A--)this.applyAction(e[A],!0)}else this.applyAction(A,!0);return this.redoStack.push(A),this.notifySubscribers(A),!0}catch(e){return console.error("Undo failed:",e),this.undoStack.push(A),!1}finally{this.isUndoing=!1}}redo(){if(!this.canRedo())return!1;this.isRedoing=!0;const A=this.redoStack.pop();try{return A.type===qA.BATCH?A.data.forEach((A=>this.applyAction(A,!1))):this.applyAction(A,!1),this.undoStack.push(A),this.notifySubscribers(A),!0}catch(e){return console.error("Redo failed:",e),this.redoStack.push(A),!1}finally{this.isRedoing=!1}}clearHistory(){this.undoStack=[],this.redoStack=[],this.notifySubscribers({type:qA.MODIFY_TILE,pageId:this.pageId,timestamp:Date.now()})}getStackSizes(){return{undoSize:this.undoStack.length,redoSize:this.redoStack.length}}addToUndoStack(A){this.isUndoing||this.isRedoing||(this.shouldCoalesceWithLastAction(A)&&this.undoStack.pop(),this.undoStack.length>=this.maxStackSize&&this.undoStack.shift(),this.undoStack.push(A),this.redoStack=[],this.notifySubscribers(A))}applyAction(A,e){const t=this.getPageData();switch(A.type){case qA.ADD_ROW:e?this.undoAddRow(t,A):this.redoAddRow(t,A);break;case qA.REMOVE_ROW:e?this.undoRemoveRow(t,A):this.redoRemoveRow(t,A);break;case qA.ADD_TILE:e?this.undoAddTile(t,A):this.redoAddTile(t,A);break;case qA.REMOVE_TILE:e?this.undoRemoveTile(t,A):this.redoRemoveTile(t,A);break;case qA.MODIFY_TILE:const n=e?A.data.oldValues:A.data.newValues;this.applyTileChanges(t,A.tileId,n);break;case qA.MOVE_TILE:e?this.undoMoveTile(t,A):this.redoMoveTile(t,A)}this.savePageData(t)}setupKeyboardShortcuts(){document.addEventListener("keydown",(A=>{(A.ctrlKey||A.metaKey)&&("z"!==A.key||A.shiftKey?("y"===A.key||"z"===A.key&&A.shiftKey)&&(A.preventDefault(),this.redo()):(A.preventDefault(),this.undo()))}))}shouldCoalesceWithLastAction(A){if(0===this.undoStack.length)return!1;const e=this.undoStack[this.undoStack.length-1];return A.type===qA.MODIFY_TILE&&e.type===qA.MODIFY_TILE&&A.tileId===e.tileId&&Date.now()-e.timestamp<1e3}getPageData(){return JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}")}savePageData(A){localStorage.setItem(`data-${this.pageId}`,JSON.stringify(A))}notifySubscribers(A){this.subscribers.forEach((e=>e(A)))}undoAddRow(A,e){A.PageMenuStructure.Rows=A.PageMenuStructure.Rows.filter((A=>A.Id!==e.rowId))}redoAddRow(A,e){A.PageMenuStructure||(A.PageMenuStructure={Rows:[]}),A.PageMenuStructure.Rows.push(e.data)}undoRemoveRow(A,e){A.PageMenuStructure||(A.PageMenuStructure={Rows:[]}),A.PageMenuStructure.Rows.push(e.data)}redoRemoveRow(A,e){A.PageMenuStructure.Rows=A.PageMenuStructure.Rows.filter((A=>A.Id!==e.rowId))}undoAddTile(A,e){const t=A.PageMenuStructure.Rows.find((A=>A.Id===e.rowId));t&&(t.Tiles=t.Tiles.filter((A=>A.Id!==e.tileId)),0===t.Tiles.length&&(A.PageMenuStructure.Rows=A.PageMenuStructure.Rows.filter((A=>A.Id!==e.rowId))))}redoAddTile(A,e){let t=A.PageMenuStructure.Rows.find((A=>A.Id===e.rowId));t||(t={Id:e.rowId,Tiles:[]},A.PageMenuStructure.Rows.push(t)),t.Tiles.push(e.data),3===t.Tiles.length&&t.Tiles.forEach((A=>{A.Align="center"}))}undoRemoveTile(A,e){let t=A.PageMenuStructure.Rows.find((A=>A.Id===e.rowId));t||(t={Id:e.rowId,Tiles:[]},A.PageMenuStructure.Rows.push(t)),t.Tiles.push(e.data)}redoRemoveTile(A,e){const t=A.PageMenuStructure.Rows.find((A=>A.Id===e.rowId));t&&(t.Tiles=t.Tiles.filter((A=>A.Id!==e.tileId)),0===t.Tiles.length&&(A.PageMenuStructure.Rows=A.PageMenuStructure.Rows.filter((A=>A.Id!==e.rowId))))}applyTileChanges(A,e,t){var n,r;null===(r=null===(n=A.PageMenuStructure)||void 0===n?void 0:n.Rows)||void 0===r||r.forEach((A=>{A.Tiles.forEach((A=>{A.Id===e&&Object.keys(t).forEach((e=>{if(e.includes(".")){const n=e.split(".");let r=A;for(let A=0;A<n.length-1;A++)r=r[n[A]];r[n[n.length-1]]=t[e]}else A[e]=t[e]}))}))}))}undoMoveTile(A,e){const{sourceRowId:t,targetRowId:n,originalIndex:r}=e.data,i=A.PageMenuStructure.Rows.find((A=>A.Id===n));let s=A.PageMenuStructure.Rows.find((A=>A.Id===t));if(i){const n=i.Tiles.findIndex((A=>A.Id===e.tileId));if(-1!==n){const[e]=i.Tiles.splice(n,1);s||(s={Id:t,Tiles:[]},A.PageMenuStructure.Rows.push(s)),s.Tiles.splice(r,0,e),3===s.Tiles.length&&s.Tiles.forEach((A=>{A.Align="center"})),0===i.Tiles.length&&(A.PageMenuStructure.Rows=A.PageMenuStructure.Rows.filter((A=>A.Id!==i.Id)))}}}redoMoveTile(A,e){const{sourceRowId:t,targetRowId:n,targetIndex:r}=e.data,i=A.PageMenuStructure.Rows.find((A=>A.Id===t));let s=A.PageMenuStructure.Rows.find((A=>A.Id===n));if(i){const t=i.Tiles.findIndex((A=>A.Id===e.tileId));if(-1!==t){const[e]=i.Tiles.splice(t,1);s||(s={Id:n,Tiles:[]},A.PageMenuStructure.Rows.push(s)),s.Tiles.splice(r,0,e),3===s.Tiles.length&&s.Tiles.forEach((A=>{A.Align="center"})),0===i.Tiles.length&&(A.PageMenuStructure.Rows=A.PageMenuStructure.Rows.filter((A=>A.Id!==i.Id)))}}}}class ZA{constructor(A){this.data=A,this.themeManager=new JA}generateCta(A){return"Image"===A.CtaButtonType?`<div id="${A.CtaId}" data-gjs-type="cta-buttons"\n                ${m} \n                  button-type="${A.CtaType}"\n                  class="img-button-container">\n                    <div ${p} class="img-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor(A.CtaBGColor)}">\n                        <span ${p} class="img-button-section">\n                            <img ${p} src="${A.CtaButtonImgUrl}" />\n                            <span ${p} class="edit-cta-image">\n                                ${A.CtaButtonImgUrl?`\n                                <svg ${p} xmlns="http://www.w3.org/2000/svg" id="Component_57_1" data-name="Component 57 – 1" width="22" height="22" viewBox="0 0 33 33">\n                                  <g ${p} id="Ellipse_532" data-name="Ellipse 532" fill="#fff" stroke="#5068a8" stroke-width="2">\n                                    <circle ${p} cx="16.5" cy="16.5" r="16.5" stroke="none"/>\n                                    <circle ${p} cx="16.5" cy="16.5" r="16" fill="none"/>\n                                  </g>\n                                  <path ${p} id="Icon_feather-edit-2" data-name="Icon feather-edit-2" d="M12.834,3.8a1.854,1.854,0,0,1,2.622,2.622L6.606,15.274,3,16.257l.983-3.606Z" transform="translate(7 6.742)" fill="#5068a8" stroke="#5068a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>\n                                </svg>\n                                `:`\n                                 <svg ${p} xmlns="http://www.w3.org/2000/svg" id="Component_53_4" data-name="Component 53 – 4" width="22" height="22" viewBox="0 0 22 22">\n                                    <g ${p} id="Group_2309" data-name="Group 2309">\n                                        <g ${p} id="Group_2307" data-name="Group 2307">\n                                        <g ${p} id="Ellipse_6" data-name="Ellipse 6" fill="#fdfdfd" stroke="#5068a8" stroke-width="1">\n                                            <circle ${p} cx="11" cy="11" r="11" stroke="none"/>\n                                            <circle ${p} cx="11" cy="11" r="10.5" fill="none"/>\n                                        </g>\n                                        </g>\n                                    </g>\n                                    <path ${p} id="Icon_ionic-ios-add" data-name="Icon ionic-ios-add" d="M18.342,13.342H14.587V9.587a.623.623,0,1,0-1.245,0v3.755H9.587a.623.623,0,0,0,0,1.245h3.755v3.755a.623.623,0,1,0,1.245,0V14.587h3.755a.623.623,0,1,0,0-1.245Z" transform="translate(-2.965 -2.965)" fill="#5068a8"/>\n                                </svg>\n                                `}\n                            </span>\n                        </span>\n                        <div${p} class="cta-badge">\n                            <i ${p} class="fa fa-minus"></i>\n                        </div>\n                        <span ${p} class="img-button-label">${this.getCtaLabel(A)}</span>\n                        <i ${p} class="fa fa-angle-right img-button-arrow"></i>\n                    </div>\n                </div>`:"FullWidth"===A.CtaButtonType?`\n            <div\n                id="${A.CtaId}"\n                ${m} \n                data-gjs-type="cta-buttons"\n                button-type="${A.CtaType}"\n                class="plain-button-container"\n            >\n                <button ${p} id="ibob6" data-gjs-type="default" class="plain-button cta-styled-btn"\n                  style="background-color: ${this.themeManager.getThemeCtaColor(A.CtaBGColor)}">\n                    <div ${p} id="iyocy" data-gjs-type="default" class="cta-badge">\n                        <i ${p} id="ifxn6" data-gjs-type="default" class="fa fa-minus"></i>\n                    </div>\n                    <span ${p} class"label">${this.getCtaLabel(A)}</span>\n                </button>\n            </div>\n            `:"Icon"===A.CtaButtonType?`\n          <div id="${A.CtaId}" data-gjs-type="cta-buttons"\n            ${m} \n              button-type="${A.CtaType}"\n              class="img-button-container">\n                <div ${p} class="img-button cta-styled-btn"\n                    style="background-color: ${this.themeManager.getThemeCtaColor(A.CtaBGColor)}">\n                    <span ${p} class="img-button-icon">\n                      ${this.ctaIcon(A)}\n                    </span>\n                    <div${p} class="cta-badge">\n                        <i ${p} class="fa fa-minus"></i>\n                    </div>\n                    <span ${p} class="img-button-label label">${this.getCtaLabel(A)}</span>\n                    <i ${p} class="fa fa-angle-right img-button-arrow"></i>\n                </div>\n            </div>\n      `:"Round"===A.CtaButtonType?`\n            <div ${m} \n              data-gjs-type="cta-buttons" \n              button-type="${A.CtaType}" \n              class="cta-container-child cta-child"\n              id="${A.CtaId}">              \n                <div class="cta-button cta-styled-btn" ${p}\n                  style="background-color: ${this.themeManager.getThemeCtaColor(A.CtaBGColor)}">\n                    ${this.ctaIcon(A)}\n                    <div class="cta-badge" ${p}><i ${p} data-gjs-type="default" class="fa fa-minus"></i></div>\n                </div>\n                <span class="cta-label label" ${p}>${this.getCtaLabel(A)}</span>\n            </div>\n            `:void 0}getCtaLabel(A){let e=A.CtaLabel;return e?(e="Round"===A.CtaButtonType?y(e,5):y(e,14),e):""}ctaIcon(A){let e;switch(A.CtaType){case"Phone":e=`\n        <svg ${p} id="ixdtl" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="32"\n                    viewBox="0 0 49.417 49.418">\n            <path ${p} id="call" data-gjs-type="svg-in"\n                d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z"\n                transform="translate(-4 -3)" fill="#fff"></path>\n        </svg>\n        `;break;case"Email":e=`\n        <svg ${p} id="inavf" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32"\n            height="28" viewBox="0 0 41 32.8">\n            <path ${p} id="Path_1218" data-gjs-type="svg-in" data-name="Path 1218"\n                d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z"\n                transform="translate(-2 -4)" fill="#fff"></path>\n        </svg>\n        `;break;case"SiteUrl":e=`\n        <svg ${p} xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16">\n          <path${p} id="Path_1213" data-name="Path 1213" d="M15.833,4a4.163,4.163,0,0,0-2.958,1.229l-.979.979a4.168,4.168,0,0,0-1.229,2.958,4.1,4.1,0,0,0,.292,1.521L12.042,9.6a2.857,2.857,0,0,1,.792-2.458l.979-.979a2.853,2.853,0,0,1,2.021-.833,2.805,2.805,0,0,1,2,.833,2.85,2.85,0,0,1,0,4.021l-.979.979A2.853,2.853,0,0,1,14.833,12a2.439,2.439,0,0,1-.437-.042l-1.083,1.083a4.1,4.1,0,0,0,1.521.292A4.163,4.163,0,0,0,17.792,12.1l.979-.979A4.168,4.168,0,0,0,20,8.167,4.2,4.2,0,0,0,15.833,4ZM14.188,8.854,8.854,14.188l.958.958,5.333-5.333ZM9.167,10.667A4.163,4.163,0,0,0,6.208,11.9l-.979.979A4.168,4.168,0,0,0,4,15.833,4.2,4.2,0,0,0,8.167,20a4.163,4.163,0,0,0,2.958-1.229l.979-.979a4.168,4.168,0,0,0,1.229-2.958,4.1,4.1,0,0,0-.292-1.521L11.958,14.4a2.857,2.857,0,0,1-.792,2.458l-.979.979a2.853,2.853,0,0,1-2.021.833,2.805,2.805,0,0,1-2-.833,2.85,2.85,0,0,1,0-4.021l.979-.979A2.853,2.853,0,0,1,9.167,12a2.44,2.44,0,0,1,.438.042l1.083-1.083A4.1,4.1,0,0,0,9.167,10.667Z" transform="translate(-4 -4)" fill="#fff"></path>\n        </svg>\n        `;break;case"Form":e=`\n        <svg ${p} id="igqdh" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="26" height="30"\n              viewBox="0 0 13 16">\n              <path ${p} id="Path_1209" data-gjs-type="svg-in" data-name="Path 1209"\n                  d="M9.828,4A1.823,1.823,0,0,0,8,5.8V18.2A1.823,1.823,0,0,0,9.828,20h9.344A1.823,1.823,0,0,0,21,18.2V9.8a.6.6,0,0,0-.179-.424l-.006-.006L15.54,4.176A.614.614,0,0,0,15.109,4Zm0,1.2H14.5V8.6a1.823,1.823,0,0,0,1.828,1.8h3.453v7.8a.6.6,0,0,1-.609.6H9.828a.6.6,0,0,1-.609-.6V5.8A.6.6,0,0,1,9.828,5.2Zm5.891.848L18.92,9.2H16.328a.6.6,0,0,1-.609-.6Z"\n                  transform="translate(-8 -4)" fill="#fff"></path>\n          </svg>\n        `}return e}generateContent(A){return"Image"===A.ContentType&&""!==A.ContentValue?this.contentImage(A):"Description"===A.ContentType&&""!==A.ContentValue?this.contentDescription(A):""}generateHTML(){var A,e,t,n;let r="",i="";return(null===(e=null===(A=this.data)||void 0===A?void 0:A.PageContentStructure)||void 0===e?void 0:e.Content)&&Array.isArray(this.data.PageContentStructure.Content)&&(r=this.data.PageContentStructure.Content.map((A=>this.generateContent(A))).join("")),(null===(n=null===(t=this.data)||void 0===t?void 0:t.PageContentStructure)||void 0===n?void 0:n.Cta)&&Array.isArray(this.data.PageContentStructure.Cta)&&(i=this.data.PageContentStructure.Cta.map((A=>this.generateCta(A))).join("")),`\n            <div ${p} id="frame-container" data-gjs-type="template-wrapper" class="content-frame-container">\n                <div ${p} class="container-column">\n                    <div ${p} class="container-row">\n                        <div ${p} data-gjs-type="default" class="template-wrapper">\n                            <div \n    data-gjs-type="template-wrapper"\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="true"\n    data-gjs-droppable="[data-gjs-type='product-service-description'], [data-gjs-type='product-service-image']"\n data-gjs-type="default" class="content-page-wrapper">\n                                ${r}\n                            </div>\n                        </div>\n                    </div> \n                    ${i?`\n                      <div ${w} class="cta-button-container" style="gap: 0.2rem;">\n                          ${i}\n                      </div>`:`\n                      <div ${w} class="cta-button-container" style="gap: 0.2rem;"></div>`}         \n                      <i class="fa fa-pencil></i>\n                </div>\n            </div>\n        `}addGrapesAttributes(A){const e=document.createElement("div");return"string"==typeof A&&(e.innerHTML=A),e.querySelectorAll("*").forEach((A=>{A.setAttribute("data-gjs-draggable","false"),A.setAttribute("data-gjs-selectable","false"),A.setAttribute("data-gjs-editable","false"),A.setAttribute("data-gjs-highlightable","false"),A.setAttribute("data-gjs-droppable","false"),A.setAttribute("data-gjs-resizable","false"),A.setAttribute("data-gjs-hoverable","false")})),e.innerHTML}contentImage(A){var e,t,n,r;return`\n    <div ${B} class="content-image" id="${(null==A?void 0:A.ContentId)?null==A?void 0:A.ContentId:v(15)}" data-gjs-type="product-service-image">\n        <button ${p} class="tb-edit-image-icon"\n        ${"Location"===(null===(e=this.data)||void 0===e?void 0:e.PageType)||"Reception"===(null===(t=this.data)||void 0===t?void 0:t.PageType)?'style="right: -20px"':""}>\n            <svg ${p} width="14px" height="14px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path ${p} fill-rule="evenodd" clip-rule="evenodd" d="M18.4324 4C18.2266 4 18.0227 4.04055 17.8325 4.11933C17.6423 4.19811 17.4695 4.31358 17.3239 4.45914L5.25659 16.5265L4.42524 19.5748L7.47353 18.7434L19.5409 6.67608C19.6864 6.53051 19.8019 6.3577 19.8807 6.16751C19.9595 5.97732 20 5.77348 20 5.56761C20 5.36175 19.9595 5.1579 19.8807 4.96771C19.8019 4.77752 19.6864 4.60471 19.5409 4.45914C19.3953 4.31358 19.2225 4.19811 19.0323 4.11933C18.8421 4.04055 18.6383 4 18.4324 4ZM17.0671 2.27157C17.5 2.09228 17.9639 2 18.4324 2C18.9009 2 19.3648 2.09228 19.7977 2.27157C20.2305 2.45086 20.6238 2.71365 20.9551 3.04493C21.2864 3.37621 21.5492 3.7695 21.7285 4.20235C21.9077 4.63519 22 5.09911 22 5.56761C22 6.03611 21.9077 6.50003 21.7285 6.93288C21.5492 7.36572 21.2864 7.75901 20.9551 8.09029L8.69996 20.3454C8.57691 20.4685 8.42387 20.5573 8.25597 20.6031L3.26314 21.9648C2.91693 22.0592 2.54667 21.9609 2.29292 21.7071C2.03917 21.4534 1.94084 21.0831 2.03526 20.7369L3.39694 15.7441C3.44273 15.5762 3.53154 15.4231 3.6546 15.3001L15.9097 3.04493C16.241 2.71365 16.6343 2.45086 17.0671 2.27157Z" fill="#5068a8"/>\n            </svg>\n          </button>\n          ${"Location"===(null===(n=this.data)||void 0===n?void 0:n.PageType)||"Reception"===(null===(r=this.data)||void 0===r?void 0:r.PageType)?"":`\n          <button ${p} class="tb-delete-image-icon">\n            <svg fill="#5068a8" ${p} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <title ${p}>delete</title>\n                <path fill="#5068a8" ${p} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                <rect fill="#5068a8" ${p} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                <rect fill="#5068a8" ${p} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                <path fill="#5068a8" ${p} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                <rect fill="#5068a8" ${p} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n            </svg>\n          </button>\n          `}\n        <img\n            id="product-service-image"\n            ${p}\n            src="${null==A?void 0:A.ContentValue}"\n            data-gjs-type="default"\n            alt="Full-width Image"\n        />\n      </div>\n    `}contentDescription(A){return`\n    <div\n        style="flex: 1; padding: 0; margin: 0; height: auto; white-space: normal;"\n        class="content-page-block"\n        ${B} \n        id="${(null==A?void 0:A.ContentId)?null==A?void 0:A.ContentId:v(15)}"\n        data-gjs-type="product-service-description"\n    >\n      <button ${p} class="tb-edit-content-icon">\n        <svg ${p} width="14px" height="14px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path ${p} fill-rule="evenodd" clip-rule="evenodd" d="M18.4324 4C18.2266 4 18.0227 4.04055 17.8325 4.11933C17.6423 4.19811 17.4695 4.31358 17.3239 4.45914L5.25659 16.5265L4.42524 19.5748L7.47353 18.7434L19.5409 6.67608C19.6864 6.53051 19.8019 6.3577 19.8807 6.16751C19.9595 5.97732 20 5.77348 20 5.56761C20 5.36175 19.9595 5.1579 19.8807 4.96771C19.8019 4.77752 19.6864 4.60471 19.5409 4.45914C19.3953 4.31358 19.2225 4.19811 19.0323 4.11933C18.8421 4.04055 18.6383 4 18.4324 4ZM17.0671 2.27157C17.5 2.09228 17.9639 2 18.4324 2C18.9009 2 19.3648 2.09228 19.7977 2.27157C20.2305 2.45086 20.6238 2.71365 20.9551 3.04493C21.2864 3.37621 21.5492 3.7695 21.7285 4.20235C21.9077 4.63519 22 5.09911 22 5.56761C22 6.03611 21.9077 6.50003 21.7285 6.93288C21.5492 7.36572 21.2864 7.75901 20.9551 8.09029L8.69996 20.3454C8.57691 20.4685 8.42387 20.5573 8.25597 20.6031L3.26314 21.9648C2.91693 22.0592 2.54667 21.9609 2.29292 21.7071C2.03917 21.4534 1.94084 21.0831 2.03526 20.7369L3.39694 15.7441C3.44273 15.5762 3.53154 15.4231 3.6546 15.3001L15.9097 3.04493C16.241 2.71365 16.6343 2.45086 17.0671 2.27157Z" fill="#5068a8"/>\n        </svg>\n      </button>\n      ${this.addGrapesAttributes(`<div ${p} id="contentDescription">${null==A?void 0:A.ContentValue}</div>`)}      \n    </div>\n    `}}class XA{constructor(A){this.data=A,this.themeManager=new JA}generateTile(A,e,t){return`\n      <div ${e?'\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n    data-gjs-type="tile-wrapper"\n':g} class="template-wrapper" id="${A.Id}">\n        <div ${h} class="template-block${e?" first-tile high-priority-template":""}" \n          style="color: ${A.Color}; text-align: ${A.Align};\n        ${t?"align-items: center; justify-content: center;":`align-items: ${"left"===A.Align?"start":A.Align}; justify-content: ${"left"===A.Align?"start":A.Align};`}; \n        ${A.BGImageUrl?`background-color: rgba(0,0,0, ${A.Opacity/100});\n               background-image: url('${A.BGImageUrl}');\n               background-size: cover;\n               background-position: center;\n               background-blend-mode: overlay;`:`\n            background-color: ${this.themeManager.getThemeColor(A.BGColor)}; \n            `}">\n        \n        <div ${p} class="tile-icon-section" ${A.Icon?'style="display: block;"':""}>\n          <span ${p} class="tile-close-icon top-right">×</span>\n          <span ${p} title="${A.Icon}" class="tile-icon">\n            ${this.getTileIcon(A)}\n          </span>\n        </div>\n                \n                <div ${p} class="tile-title-section" style="${t?"text-align: center;":"text-align: left"}">\n                  <span ${p} class="tile-close-title top-right">×</span>\n                  <span ${p} class="tile-title" title="${A.Text}" style="${t?"text-align: center;":`text-align: ${A.Align}`}">${this.truncateText(A,A.Text,t)}</span>\n        </div>\n      </div>\n      ${e?"":`\n        <button ${p} title="${PA.t("tile.delete_tile")}" class="action-button delete-button">−</button>`}\n      <button ${p} title="${PA.t("tile.add_template_right")}" class="action-button add-button-right">+</button>\n      <button ${p} title="${PA.t("tile.add_template_bottom")}" class="action-button add-button-bottom">+</button>\n      <svg ${p} class="tile-open-menu" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 27 27">\n        <g ${p} id="Group_2383" data-name="Group 2383" transform="translate(-921 -417.999)">\n          <g ${p} id="Group_2382" data-name="Group 2382" transform="translate(921 418)">\n            <circle ${p} id="Ellipse_534" data-name="Ellipse 534" cx="13.5" cy="13.5" r="13.5" transform="translate(0 -0.001)" fill="#6a747f"/>\n          </g>\n          <path ${p} id="Path_2320" data-name="Path 2320" d="M1.7,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,1.7,0ZM7.346,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,7.346,0ZM13,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,13,0Z" transform="translate(927 430)" fill="#fff"/>\n        </g>\n      </svg>\n    </div>\n  `}translateTileLabel(A,e){console.log("tile",A),console.log("tile",A.Action.ObjectType);const t=A.Action.ObjectType;return"Map"===t?PA.t("default.map"):"location"===t?PA.t("default.location"):"calendar"===t?PA.t("default.calendar"):"reception"===t?PA.t("default.reception"):"mycare"===t?PA.t("default.mycare"):"myliving"===t||"myliving"===t?PA.t("default.calendar"):"myservice"===t?PA.t("default.myservice"):"myactivity"===t?PA.t("default.myactivity"):e}truncateText(A,e,t){const n=window.innerWidth,r=3===length?11:2===length?15:20;return e.length>(n<=280?20:r+4)?e.substring(0,n<=280?r:r+4).trim()+"..":t?this.wrapTileTitle(e):e}wrapTileTitle(A){const e=A.split(" ");return e.length>1?e[0]+"<br>"+e[1]:A.replace("<br>","")}getTileIcon(A){const e=this.themeManager.getThemeIcon(A.Icon);let t;return e&&(t=e.replace('fill="#7c8791"',`fill="${A.Color}"`)),t}generateRow(A,e){const t=0===e&&1===A.Tiles.length,n=3===A.Tiles.length,r=A.Tiles.map(((A,e)=>this.generateTile(A,t&&0===e,n))).join("");return`<div id="${A.Id}" ${f} class="container-row">${r}</div>`}generateHTML(){const A=`\n    <div ${p} id="frame-container" data-gjs-type="template-wrapper" class="frame-container">\n      <div ${p} class="container-column">\n        ${this.data.PageMenuStructure.Rows.map(((A,e)=>this.generateRow(A,e))).join("")}\n      </div>\n    </div>\n  `;return this.filterHTML(A)}filterHTML(A){const e=document.createElement("div");return e.innerHTML=A,e.querySelectorAll(".container-row").forEach((A=>{3===A.querySelectorAll(".template-block").length&&A.querySelectorAll(".add-button-right").forEach((A=>{A.style.display="none"}))})),e.innerHTML}}class zA{constructor(A){this.editor=A,this.themeManager=new JA}load(){this.editor.setComponents(this.htmlData())}htmlData(){let A=`\n        <div class="tb-date-selector" \n          ${p}\n          style="background-color: ${this.themeManager.getThemeColor("backgroundColor")};">\n          <span class="tb-arrow" ${p}>❮</span>\n          <span class="tb-date-text" id="current-date" ${p}> ${this.formatDate()}</span>\n          <span class="tb-arrow" ${p}>❯</span>\n        </div>\n        <div class="tb-schedule" id="schedule-container" ${p}>\n      `;for(let e=0;e<24;e++){const t=e.toString().padStart(2,"0")+":00";A+=`\n            <div class="tb-time-slot" ${p}>\n              <div class="tb-time" ${p}>${t}</div>\n              <div class="tb-events" ${p}></div>\n              ${e===(new Date).getHours()?`\n                <div class="tb-current-time-indicator" ${p}></div>\n                <div class="tb-current-time-dot" ${p}></div>`:""}\n            </div>\n          `}return A+="</div>",A}formatDate(){return(new Date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/(\d{2} \w{3}) (\d{4})/,"$1, $2")}}class YA{constructor(A,e){this.toolboxService=new s,this.editor=A,this.pageData=e}setupEditor(){return A=this,e=void 0,n=function*(){try{if(this.locationData=yield this.toolboxService.getLocationData(),!this.locationData)return void console.warn("Location data could not be retrieved.");const A=this.updatePageData(),e=new ZA(A).generateHTML();this.editor.setComponents(e),localStorage.setItem(`data-${this.pageData.PageId}`,JSON.stringify(A))}catch(A){console.error("Error fetching location data:",A)}},new((t=void 0)||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}));var A,e,t,n}updatePageData(){var A,e,t;if(!(null===(e=null===(A=this.pageData)||void 0===A?void 0:A.PageContentStructure)||void 0===e?void 0:e.Content))return this.pageData;const n=(null===(t=this.locationData)||void 0===t?void 0:t.BC_Trn_Location)||{};return this.pageData.PageContentStructure.Content=this.pageData.PageContentStructure.Content.map((A=>"Image"===(null==A?void 0:A.ContentType)?Object.assign(Object.assign({},A),{ContentValue:n.LocationImage||A.ContentValue}):"Description"===(null==A?void 0:A.ContentType)?Object.assign(Object.assign({},A),{ContentValue:n.LocationDescription||A.ContentValue}):A)),this.pageData}}class Ae{constructor(A){this.editor=A,this.themeManager=new JA}load(){this.editor.setComponents(this.htmlData())}htmlData(){return`\n         <div class="tb-chat-container" ${p}>\n            <div class="tb-toggle-buttons"  ${p}>\n                <button style="background-color: ${this.themeManager.getThemeColor("backgroundColor")};border-radius: 6px;"  ${p}>${PA.t("Messages")}</button>\n                <button style="background-color: #e1e1e1;border-radius: 6px;color: #262626;"  ${p}>${PA.t("Requests")}</button>\n            </div>\n            <div class="tb-chat-body" ${p}>${PA.t("NoMessagesYet")}</div>\n         </div>\n         `}}class ee{constructor(A,e){this.toolboxService=new s,this.editor=A,this.pageData=e}setupEditor(){return A=this,e=void 0,n=function*(){try{if(this.locationData=yield this.toolboxService.getLocationData(),!this.locationData)return void console.warn("Location data could not be retrieved.");console.log("Location data retrieved:",this.locationData);const A=this.updatePageData(),e=new ZA(A).generateHTML();this.editor.setComponents(e),localStorage.setItem(`data-${this.pageData.PageId}`,JSON.stringify(A))}catch(A){console.error("Error fetching location data:",A)}},new((t=void 0)||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}));var A,e,t,n}updatePageData(){var A,e,t;if(!(null===(e=null===(A=this.pageData)||void 0===A?void 0:A.PageContentStructure)||void 0===e?void 0:e.Content))return this.pageData;const n=(null===(t=this.locationData)||void 0===t?void 0:t.BC_Trn_Location)||{};return this.pageData.PageContentStructure.Content=this.pageData.PageContentStructure.Content.map((A=>"Image"===(null==A?void 0:A.ContentType)?Object.assign(Object.assign({},A),{ContentValue:n.ReceptionImage?n.ReceptionImage:"https://staging.comforta.yukon.software/media/receptie-197@3x.png"}):"Description"===(null==A?void 0:A.ContentType)?Object.assign(Object.assign({},A),{ContentValue:n.ReceptionDescription?n.ReceptionDescription:"Welkom bij de receptie van onze app. Hier kunt u al uw vragen stellen en krijgt u direct hulp van ons team. Of het nu gaat om technische ondersteuning, informatie over diensten, of algemene vragen, wij zijn er om u te helpen."}):A)),this.pageData}}class te{constructor(A){this.editor=A}initialise(A){return e=this,t=void 0,r=function*(){try{this.editor.DomComponents.clear(),navigator.geolocation.getCurrentPosition((A=>{var e;const t=`https://www.google.com/maps/embed/v1/view?key=AIzaSyBBaQo7_sF2xk3uNIyKp_Z-4BbaTebGGa4&center=${A.coords.latitude},${A.coords.longitude}&zoom=18`,n=this.editor.addComponents(`\n            <div ${p} id="frame-container" style="position: relative; width: 100%; height: 100vh; overflow: hidden;">\n              <div ${p} id="map-preloader" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1000;">\n                <img ${p} src="/Resources/UCGrapes1/src/images/spinner.gif" width="32" height="32" alt="Loading...">\n              </div>\n              <iframe \n                id="map-frame"\n                src="${t}"\n                width="100%"\n                height="100%"\n                frameborder="0"\n                allowfullscreen="true"\n                loading="lazy"\n                ${p}\n                style="display: block; border: none; height: 100vh;">\n              </iframe>\n            </div>\n          `)[0],r=null===(e=n.find("#map-frame")[0])||void 0===e?void 0:e.getEl();r&&(r.onload=()=>{const A=n.find("#map-preloader")[0];A&&(A.getEl().style.display="none")}),setTimeout((()=>{const A=n.find("#map-preloader")[0];A&&(A.getEl().style.display="none")}),2e3)}),(A=>{console.error("Geolocation error:",A.message)}))}catch(A){console.error("Error setting up iframe component:",A.message)}},new((n=void 0)||(n=Promise))((function(A,i){function s(A){try{a(r.next(A))}catch(A){i(A)}}function o(A){try{a(r.throw(A))}catch(A){i(A)}}function a(e){var t;e.done?A(e.value):(t=e.value,t instanceof n?t:new n((function(A){A(t)}))).then(s,o)}a((r=r.apply(e,t||[])).next())}));var e,t,n,r}}class ne{constructor(A){this.editor=A}initialise(A){return e=this,t=void 0,r=function*(){const e=null==A?void 0:A.ObjectUrl;try{this.editor.DomComponents.clear(),this.editor.DomComponents.addType("object",{isComponent:A=>"OBJECT"===A.tagName,model:{defaults:{tagName:"object",draggable:!0,droppable:!1,attributes:{width:"100%",height:"300vh"},styles:"\n                  .form-frame-container {\n                    overflow-x: hidden;\n                    overflow-y: auto;\n                    position: relative;\n                    min-height: 300px;\n                  }\n      \n                  /* Preloader styles */\n                  .preloader-wrapper {\n                    position: absolute;\n                    top: 50%;\n                    left: 50%;\n                    transform: translate(-50%, -50%);\n                    z-index: 1000;\n                  }\n      \n                  .preloader {\n                    width: 32px;\n                    height: 32px;\n                    background-image: url('/Resources/UCGrapes1/src/images/spinner.gif');\n                    background-size: contain;\n                    background-repeat: no-repeat;\n                  }\n      \n                  /* Custom scrollbar styles */\n                  .form-frame-container::-webkit-scrollbar {\n                    width: 6px;\n                    height: 0;\n                  }\n      \n                  .form-frame-container::-webkit-scrollbar-track {\n                    background: #f1f1f1;\n                    border-radius: 3px;\n                  }\n      \n                  .form-frame-container::-webkit-scrollbar-thumb {\n                    background: #888;\n                    border-radius: 3px;\n                  }\n      \n                  .form-frame-container::-webkit-scrollbar-thumb:hover {\n                    background: #555;\n                  }\n      \n                  /* Firefox scrollbar styles */\n                  .form-frame-container {\n                    scrollbar-width: thin;\n                    scrollbar-color: #888 #f1f1f1;\n                  }\n                  .fallback-message {\n                    margin-bottom: 10px;\n                    color: #666;\n                  }\n                "}},view:{onRender({el:A,model:e}){const t=`\n                  <div class="fallback-content">\n                    <p class="fallback-message">${e.get("attributes").fallbackMessage||"Content cannot be displayed"}</p>\n                    <a href="${e.get("attributes").data}" \n                       target="_blank" \n                       class="fallback-link">\n                      Open in New Window\n                    </a>\n                  </div>\n                `;A.insertAdjacentHTML("beforeend",t),A.addEventListener("load",(()=>{const e=A.closest(".form-frame-container").querySelector(".preloader-wrapper");e&&(e.style.display="none"),A.querySelector(".fallback-content").style.display="none"})),A.addEventListener("error",(e=>{const t=A.closest(".form-frame-container").querySelector(".preloader-wrapper");t&&(t.style.display="none");const n=A.querySelector(".fallback-content");n&&(n.style.display="flex",n.style.flexDirection="column",n.style.justifyContent="start")}))}}}),this.editor.setComponents(`\n            <div class="form-frame-container" id="frame-container">\n              <div class="preloader-wrapper">\n                <div class="preloader"></div>\n              </div>\n              <object \n                data="${e}"\n                type="text/html"\n                width="100%"\n                height="800px"\n                fallbackMessage="Unable to load the content. Please try opening it in a new window.">\n              </object>\n            </div>\n          `)}catch(A){console.error("Error setting up object component:",A.message)}},new((n=void 0)||(n=Promise))((function(A,i){function s(A){try{a(r.next(A))}catch(A){i(A)}}function o(A){try{a(r.throw(A))}catch(A){i(A)}}function a(e){var t;e.done?A(e.value):(t=e.value,t instanceof n?t:new n((function(A){A(t)}))).then(s,o)}a((r=r.apply(e,t||[])).next())}));var e,t,n,r}}class re{constructor(A,e){this.pageId=A,this.pageData=e,this.themeManager=new JA,this.editorManager=new hl,this.editorEvents=new sl}init(A){var e,t,n,r,i,s,o,a,l,c,u,d;let h=`gjs-${this.getEditorId()}`;this.pageTitle=A.Text,this.createNewEditor(h);const g=this.editorManager.initializeGrapesEditor(h),p=A=>{if(A){const e=A.generateHTML();g.setComponents(e),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(this.pageData))}else console.error("Invalid PageType or pageData is undefined:",this.pageData)};let f;"Menu"===(null===(e=this.pageData)||void 0===e?void 0:e.PageType)||"MyLiving"===(null===(t=this.pageData)||void 0===t?void 0:t.PageType)||"MyCare"===(null===(n=this.pageData)||void 0===n?void 0:n.PageType)||"MyService"===(null===(r=this.pageData)||void 0===r?void 0:r.PageType)?(f=new XA(this.pageData),p(f)):"Location"===(null===(i=this.pageData)||void 0===i?void 0:i.PageType)?new YA(g,this.pageData).setupEditor():"Reception"===(null===(s=this.pageData)||void 0===s?void 0:s.PageType)?new ee(g,this.pageData).setupEditor():"Content"===(null===(o=this.pageData)||void 0===o?void 0:o.PageType)?(f=new ZA(this.pageData),p(f)):"WebLink"===(null===(a=this.pageData)||void 0===a?void 0:a.PageType)||"DynamicForm"===(null===(l=this.pageData)||void 0===l?void 0:l.PageType)?new ne(g).initialise(A.Action):"Maps"===(null===(c=this.pageData)||void 0===c?void 0:c.PageType)?new te(g).initialise(A.Action):"MyActivity"===(null===(u=this.pageData)||void 0===u?void 0:u.PageType)?new Ae(g).load():"Calendar"===(null===(d=this.pageData)||void 0===d?void 0:d.PageType)&&new zA(g).load(),this.editorEvents.init(g,this.pageData,h),this.editorManager.finalizeEditorSetup(g),new WA(this.pageData.PageId),this.themeManager.applyTheme(this.themeManager.currentTheme)}createNewEditor(A){const e=document.getElementById("child-container");new al(A,!1,this.pageData,this.pageTitle).render(e)}getEditorId(){let A=0;return document.querySelectorAll(".mobile-frame").forEach((e=>{A++})),A}addImageContent(A){const e=A.DomComponents.getWrapper().find(".content-page-wrapper");e.length>0&&e[0].append(`\n      <img ${B} id="${v(5)}" data-gjs-type="product-service-image" draggable="true" src="https://plus.unsplash.com/premium_photo-1686949554005-78d1370ab4f3?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxmZWF0dXJlZC1waG90b3MtZmVlZHw2fHx8ZW58MHx8fHx8" alt="Product Service Image" class="content-page-block">\n      `)}addDescriptionContent(A){const e=A.DomComponents.getWrapper().find(".content-page-wrapper");e.length>0&&e[0].append(`\n      <div ${B} id="${v(5)}" data-gjs-type="product-service-description" draggable="true" class="content-page-block">\n          lorem ipsum dolor sit amet consectetur adipiscing elit sed do eiusmod tempor incididunt ut labore et dolore magna aliqua\n      </div>\n      `)}updateFrame(){this.editorEvents.removeOtherEditors(),this.editorEvents.activateNavigators()}}class ie{constructor(A,e,t=5e3){this.closeTimeout=null,this.alertContainer=document.createElement("div"),this.alertContainer.className="tb-alerts-container",this.alertContainer.id="tb-alerts-container",this.alertElement=document.createElement("div"),this.alertElement.className=`tb-alert ${A}`,this.alertElement.style.display="flex",this.alertElement.style.opacity="0",this.alertElement.id=Math.random().toString(36);const n=document.createElement("div");n.className="tb-alert-header";const r=document.createElement("strong");r.textContent=A.charAt(0).toUpperCase()+A.slice(1);const i=document.createElement("span");i.className="tb-alert-close-btn",i.textContent="✖",i.addEventListener("click",(()=>this.close())),n.appendChild(r),n.appendChild(i);const s=document.createElement("p");s.textContent=e,this.alertElement.appendChild(n),this.alertElement.appendChild(s),this.alertContainer.appendChild(this.alertElement),document.body.appendChild(this.alertContainer),setTimeout((()=>this.alertElement.style.opacity="1"),50),this.closeTimeout=window.setTimeout((()=>this.close()),t)}close(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null),this.alertElement.style.opacity="0",setTimeout((()=>this.alertElement.remove()),500)}}var se=function(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))};class oe{constructor(){this.appVersionManager=new VA,this.toolboxService=new s}attachNewServiceToTile(A){return se(this,void 0,void 0,(function*(){const e=(yield this.toolboxService.getServices()).find((e=>e.ProductServiceId==A));if(e){const t={PageId:A,PageName:e.ProductServiceName,TileName:e.ProductServiceTileName,PageType:"Content"};this.attachToTile(t,"Content",PA.t("sidebar.action_list.services"));const n=document.getElementById("menu-page-section"),r=document.getElementById("content-page-section");n&&(n.style.display="block"),r&&r.remove(),(new Be).render(n)}}))}attachToTile(A,e,t){return se(this,void 0,void 0,(function*(){const t=globalThis.selectedComponent;if(!t)return;const n=t.find(".tile-title")[0];n&&n.components(A.PageName);const r=t.parent().getId(),i=t.parent().parent().getId();if(globalThis.currentPageId===A.PageId)return void new ie("error",PA.t("messages.error.page_linking"));const s=[["Text",A.PageName],["Name",A.PageName],["Action.ObjectType",`${e}`],["Action.ObjectId",A.PageId]];for(const[A,e]of s)globalThis.tileMapper.updateTile(r,A,e);const o=globalThis.tileMapper.getTile(i,r),a=yield this.appVersionManager.getActiveVersion();this.attachPage(A,a,o),t&&o&&new _A(t,o).setTileAttributes()}))}attachPage(A,e,t){const n=A.PageId,r=(null==e?void 0:e.Pages.find((A=>A.PageId===n)))||null;this.removeOtherEditors(),r?new re(A.PageId,r).init(t):this.toolboxService.createServicePage(e.AppVersionId,n).then((A=>{new re(A.ContentPage.PageId,A.ContentPage).init(t)}))}removeOtherEditors(){(new sl).removeOtherEditors(),(new sl).activateNavigators()}updateActionProperty(A,e){const t=document.querySelector("#sidebar_select_action_label");t&&(t.innerText=`${A}, ${e.length>10?e.substring(0,10)+"...":e}`)}}class ae{constructor(A){this.validateFn=A.validate,this.formField=document.createElement("div"),this.formField.className="form-field",this.formField.style.marginBottom="10px";const e=document.createElement("label");A.label&&(e.htmlFor=A.id,e.textContent=A.label);const t=document.createElement("input");t.type=A.type,t.id=A.id,t.className="tb-form-control",t.value=A.value||"",A.placeholder&&(t.placeholder=A.placeholder),A.required&&(t.required=!0);const n=document.createElement("span");n.className="error-message",n.style.cssText="\n            color: red;\n            font-size: 12px;\n            display: none;\n            margin-top: 5px;\n            font-weight: 300;\n        ",n.textContent=A.errorMessage||"Error message",A.label&&this.formField.appendChild(e),this.formField.appendChild(t),this.formField.appendChild(n)}getElement(){return this.formField}showError(A){const e=this.formField.querySelector(".error-message");e.style.display="block",A&&(e.textContent=A)}hideError(){this.formField.querySelector(".error-message").style.display="none"}validate(){const A=this.formField.querySelector("input"),e=!this.validateFn||this.validateFn(A.value);return e?this.hideError():this.showError(A.validationMessage||"Invalid input"),e}}class le{constructor(A){this.form=document.createElement("form"),this.form.id=A,this.fields=[]}addField(A){const e=new ae(A);return this.fields.push(e),this.form.appendChild(e.getElement()),e}render(A){A.appendChild(this.form)}getData(){const A={};return this.fields.forEach((e=>{const t=e.getElement().querySelector("input");A[t.id]=t.value})),A}}class ce{constructor(A){this.modalContainer=document.createElement("div"),this.modalContainer.className="popup-modal-link",this.modalContainer.style.display="flex";const e=document.createElement("div");e.className="popup",A.width&&(e.style.width=A.width);const t=document.createElement("div");t.className="popup-header";const n=document.createElement("span");n.textContent=A.title;const r=document.createElement("hr");this.popupBody=document.createElement("div"),this.popupBody.className="popup-body",A.body&&("string"==typeof A.body?this.popupBody.innerHTML=A.body:this.popupBody.appendChild(A.body));const i=this.createCloseButton();t.appendChild(n),t.appendChild(i),e.appendChild(t),e.appendChild(r),e.appendChild(this.popupBody),this.modalContainer.appendChild(e)}createCloseButton(){const A=document.createElement("button");return A.className="close",A.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 21 21">\n                <path id="Icon_material-close" data-name="Icon material-close" d="M28.5,9.615,26.385,7.5,18,15.885,9.615,7.5,7.5,9.615,15.885,18,7.5,26.385,9.615,28.5,18,20.115,26.385,28.5,28.5,26.385,20.115,18Z" transform="translate(-7.5 -7.5)" fill="#6a747f" opacity="0.54"></path>\n            </svg>\n        ',A.addEventListener("click",(()=>this.close())),A}open(A){(A||document.body).appendChild(this.modalContainer)}close(){this.modalContainer.remove()}}class ue{createForm(A,e){const t=new le(A);return e.forEach((A=>t.addField(A))),t}createModal({title:A,form:e,onSave:t}){const n=document.createElement("div");e.render(n);const r=document.createElement("div");r.classList.add("popup-footer"),r.style.marginBottom="-12px";const i=this.createButton("submit_form","tb-btn-primary","Save"),s=this.createButton("cancel_form","tb-btn-secondary","Cancel");r.appendChild(i),r.appendChild(s);const o=document.createElement("div");o.appendChild(n),o.appendChild(r);const a=new ce({title:A,width:"500px",body:o});a.open(),i.addEventListener("click",(A=>{A.preventDefault(),this.validateFields(e)&&(t(),a.close())})),s.addEventListener("click",(A=>{A.preventDefault(),a.close()}))}createButton(A,e,t){const n=document.createElement("button");return n.id=A,n.classList.add("tb-btn",e),n.innerText=t,n}validateFields(A){let e=!0;const t=A.fields;return t.forEach((A=>A.hideError())),t.forEach((A=>{const t=A.getElement().querySelector("input"),n=t.value.trim();t.required&&""===n?(A.showError(A.errorMessage),e=!1):A.minLength&&n.length<A.minLength?(A.showError(`Must be at least ${A.minLength} characters`),e=!1):A.maxLength&&n.length>A.maxLength?(A.showError(`Cannot exceed ${A.maxLength} characters`),e=!1):A.validate&&!A.validate(n)?(A.showError(A.errorMessage),e=!1):"home"!==n.toLowerCase()&&"my care"!==n.toLowerCase()&&"my living"!==n.toLowerCase()&&"my services"!==n.toLowerCase()&&"web link"!==n.toLowerCase()&&"dynamic form"!==n.toLowerCase()||(A.showError("Field name already exists"),e=!1)})),e}isValidUrl(A){console.log(A);try{const e=new URL(A);return"http:"===e.protocol||"https:"===e.protocol}catch(A){return!1}}isValidPhone(A){const e=A.replace(/(?!^\+)\D/g,"");return/^\+?[0-9]{10,15}$/.test(e)}isValidEmail(A){return/^[a-zA-Z0-9.!#$%&'*+/=?^_{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?$/.test(A)&&A.length<=254}}class de{constructor(){this.appVersionManager=new VA,this.toolBoxService=new s,this.formModalService=new ue}handlePhone(){const A=this.formModalService,e=this.formModalService.createForm("phone-form",[{label:"Phone Number",type:"tel",id:"field_value",placeholder:"123-456-7890",required:!0,errorMessage:"Please enter a valid phone number",validate:e=>A.isValidPhone(e)},{label:"Tile Label",type:"",id:"field_label",placeholder:"Call us now",required:!0,errorMessage:"Please enter a label for your phone tile",minLength:2}]);this.formModalService.createModal({title:"Add Phone Number",form:e,onSave:()=>this.processFormData(e.getData(),"Phone")})}handleEmail(){const A=this.formModalService,e=this.formModalService.createForm("email-form",[{label:"Email Address",type:"email",id:"field_value",placeholder:"example@example.com",required:!0,errorMessage:"Please enter a valid email address",validate:e=>A.isValidEmail(e)},{label:"Tile Label",type:"text",id:"field_label",placeholder:"Get in touch",required:!0,errorMessage:"Please enter a label for email tile",minLength:2}]);this.formModalService.createModal({title:"Add Email Address",form:e,onSave:()=>this.processFormData(e.getData(),"Email")})}handleWebLinks(){const A=this.formModalService,e=this.formModalService.createForm("web-link-form",[{label:"Link Url",type:"url",id:"field_value",placeholder:"https://example.com",required:!0,errorMessage:"Please enter a valid URL",validate:e=>A.isValidUrl(e)},{label:"Link Label",type:"text",id:"field_label",placeholder:"Example Link",required:!0,errorMessage:"Please enter a label for your link",minLength:5}]);this.formModalService.createModal({title:"Add Web Link",form:e,onSave:()=>this.processFormData(e.getData(),"WebLink")})}attachPage(A,e,t){(new oe).removeOtherEditors(),new re(A.PageId,A).init(t)}processFormData(A,e){return t=this,n=void 0,i=function*(){const t=globalThis.selectedComponent;if(!t)return;const n=t.find(".tile-title")[0];n&&n.components(A.field_label);const r=t.parent().getId(),i=t.parent().parent().getId(),s=globalThis.activeVersion;let o,a="";"WebLink"===e&&(o=null==s?void 0:s.Pages.find((A=>"Web Link"===A.PageName&&"WebLink"===A.PageType)),a=null==o?void 0:o.PageId),console.log("childPage",o);const l=[["Text",A.field_label],["Name",A.field_label],["Action.ObjectType",e],["Action.ObjectId",a],["Action.ObjectUrl",A.field_value]];for(const[A,e]of l)globalThis.tileMapper.updateTile(r,A,e);const c=globalThis.tileMapper.getTile(i,r);(new oe).removeOtherEditors(),o&&new re(null==o?void 0:o.PageId,o).init(c)},new((r=void 0)||(r=Promise))((function(A,e){function s(A){try{a(i.next(A))}catch(A){e(A)}}function o(A){try{a(i.throw(A))}catch(A){e(A)}}function a(e){var t;e.done?A(e.value):(t=e.value,t instanceof r?t:new r((function(A){A(t)}))).then(s,o)}a((i=i.apply(t,n||[])).next())}));var t,n,r,i}}class he{constructor(A){this.categoryData=A,this.pageAttacher=new oe,this.pageCreationService=new de,this.details=document.createElement("details"),this.init()}init(){this.details.className="category",this.details.setAttribute("data-category",this.categoryData.name),this.createCategoryElement()}createCategoryElement(){var A,t;const n=document.createElement("summary");n.innerText=`${this.categoryData.displayName}`;const r=document.createElement("i");r.className="fa fa-angle-right","Web Link"!==this.categoryData.name&&n.appendChild(r);const i=document.createElement("div");i.className="search-container",i.innerHTML='\n            <i class="fas fa-search search-icon"></i>\n            <input type="text" placeholder="Search" class="search-input" />\n        ',this.categoryData.canCreatePage&&setTimeout((()=>{const A=i.querySelector("#add-new-service");A&&A.addEventListener("click",(A=>{if(A.preventDefault(),globalThis.selectedComponent){if(this.categoryData.name,"Service/Product Page"==this.categoryData.name){const A=e.getInstance();console.log(A.addServiceButtonEvent)}}else new ie("error",PA.t("messages.error.select_tile"))}))}),0);const s=document.createElement("ul");s.className="category-content",null===(t=null===(A=this.categoryData)||void 0===A?void 0:A.options)||void 0===t||t.forEach((A=>{const e=document.createElement("li");e.innerText=A.PageName,e.setAttribute("data-page-name",A.PageName),e.setAttribute("data-page-id",A.PageId),e.addEventListener("click",(e=>{e.preventDefault(),globalThis.selectedComponent?"Dynamic Forms"===this.categoryData.name||("Modules"==this.categoryData.name?this.pageAttacher.attachToTile(A,A.PageType,this.categoryData.label):this.pageAttacher.attachToTile(A,this.categoryData.name,this.categoryData.label)):new ie("error",PA.t("messages.error.select_tile"))})),s.appendChild(e)}));const o=document.createElement("li");o.className="no-records-message",o.style.display="none",o.innerText="No records found",s.appendChild(o),this.details.addEventListener("toggle",(A=>{if("Web Link"!==this.categoryData.name){const A=n.querySelector("i");A&&(A.classList.toggle("fa-angle-right"),A.classList.toggle("fa-angle-down"))}else{if(!globalThis.selectedComponent)return void new ie("error",PA.t("messages.error.select_tile"));this.pageCreationService.handleWebLinks()}})),"Web Link"===this.categoryData.name?this.details.appendChild(n):(this.details.appendChild(n),this.details.appendChild(i),this.details.appendChild(s)),this.searchItemsEvent(i)}searchItemsEvent(A){const e=A.querySelector("input"),t=this.details.querySelector("ul");e.addEventListener("input",(A=>{const e=t.querySelector(".no-records-message");let n=!1;const r=A.target.value.toLowerCase().trim();Array.from(t.querySelectorAll("li:not(.no-records-message)")).forEach((A=>{var e,t;const i=(null!==(t=null===(e=A.textContent)||void 0===e?void 0:e.toLowerCase())&&void 0!==t?t:"").includes(r);A.style.display=i?"block":"none",i&&(n=!0)})),e&&(e.style.display=n?"none":"block")}))}render(A){A.appendChild(this.details)}}class ge{constructor(A){this.categoryView=new he(A)}render(A){this.categoryView.render(A)}}var pe=function(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))};class fe{constructor(){this.container=document.createElement("div"),this.toolBoxService=new s,this.appVersion=new VA,this.init()}init(){return pe(this,void 0,void 0,(function*(){this.container.className="tb-dropdown-menu",this.container.id="dropdownMenu",(yield this.getCategoryData()).forEach((A=>{new ge(A).render(this.container)}))}))}getCategoryData(){return pe(this,void 0,void 0,(function*(){const A=globalThis.pageData;return[{name:"Page",displayName:PA.t("sidebar.action_list.page"),label:PA.t("sidebar.action_list.page"),options:yield this.getPages(),canCreatePage:!0},!A||"MyCare"!==A.PageType&&"MyService"!==A.PageType&&"MyLiving"!==A.PageType?null:{name:"Services",displayName:PA.t("sidebar.action_list.services"),label:PA.t("sidebar.action_list.services"),options:this.getServices(A),canCreatePage:!0},{name:"Forms",displayName:PA.t("sidebar.action_list.forms"),label:PA.t("sidebar.action_list.forms"),options:this.getDynamicForms(),canCreatePage:!1},{name:"Modules",displayName:PA.t("sidebar.action_list.module"),label:PA.t("sidebar.action_list.module"),options:yield this.getPredefinedPages(),canCreatePage:!1},{name:"Web Link",displayName:PA.t("sidebar.action_list.weblink"),label:PA.t("sidebar.action_list.weblink"),options:[],canCreatePage:!1}].filter((A=>null!==A))}))}getDynamicForms(){return(this.toolBoxService.forms||[]).map((A=>({PageId:A.FormId,PageName:A.ReferenceName,TileName:A.ReferenceName})))}getServices(A){let e=this.toolBoxService.services||[];return e=e.filter((e=>e.ProductServiceClass.replace(/\s+/g,"")==A.PageType)).map((A=>({PageId:A.ProductServiceId,PageName:A.ProductServiceName,TileName:A.ProductServiceTileName||A.ProductServiceName,TileCategory:A.ProductServiceClass}))),e}getPages(){return pe(this,void 0,void 0,(function*(){try{return(this.appVersion.getPages()||[]).filter((A=>"Menu"==A.PageType&&"Home"!==A.PageName&&"My Care"!==A.PageName&&"My Living"!==A.PageName&&"My Services"!==A.PageName)).map((A=>({PageId:A.PageId,PageName:A.PageName,TileName:A.PageName})))}catch(A){throw console.error("Error fetching pages:",A),A}}))}getPredefinedPages(){return pe(this,void 0,void 0,(function*(){try{return((yield this.appVersion.preDefinedPages())||[]).map((A=>({PageId:A.PageId,PageName:A.PageName,TileName:A.PageName,PageType:A.PageType})))}catch(A){throw console.error("Error fetching pages:",A),A}}))}render(A){A.appendChild(this.container)}}class Be{constructor(){this.container=document.createElement("div"),this.init(),document.addEventListener("click",this.handleOutsideClick.bind(this))}init(){this.container.className="sidebar-section custom-select-container",this.container.id="select-container";const A=document.createElement("div");A.className="tb-dropdown",this.dropDownHeader=document.createElement("div"),this.dropDownHeader.className="tb-dropdown-header",this.dropDownHeader.innerHTML='\n            <span id="sidebar_select_action_label">Select Action</span>\n            <i class="fa fa-angle-down"></i>\n        ',this.actionListDropDown=new fe,this.dropDownHeader.addEventListener("click",(A=>{A.stopPropagation(),A.preventDefault(),this.toggleDropdown()})),A.appendChild(this.dropDownHeader),this.actionListDropDown.render(A),this.container.appendChild(A)}toggleDropdown(){const A=this.dropDownHeader.querySelector("i");A&&(A.classList.toggle("fa-angle-up"),A.classList.toggle("fa-angle-down"));const e=this.actionListDropDown.container;e.style.display="block"===e.style.display?"none":"block"}closeDropdown(){const A=this.dropDownHeader.querySelector("i");A&&(A.classList.remove("fa-angle-up"),A.classList.add("fa-angle-down")),this.actionListDropDown.container.style.display="none"}handleOutsideClick(A){"block"!==this.actionListDropDown.container.style.display||this.container.contains(A.target)||this.closeDropdown()}destroy(){document.removeEventListener("click",this.handleOutsideClick.bind(this))}render(A){const e=A.querySelector("#select-container");e?A.replaceChild(this.container,e):A.insertBefore(this.container,A.children[3])}}class me{constructor(){this.ctaManager=new I,this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("cta-button-layout-container"),this.container.style.display="none";const A=document.createElement("button");A.classList.add("cta-button-layout"),A.id="plain-button-layout",A.innerText="Button";const e=document.createElement("button");e.classList.add("cta-button-layout"),e.id="image-button-layout",e.innerHTML='\n            <span class="img-button-icon">\n                <img src="Resources/UCGrapes1/toolbox/public/images/food.png" alt="img-button-icon" width="35px" height="auto">  \n            </span>\n            <label>Button</label>\n            <i class="fa fa-angle-right img-button-arrow"></i>\n        ';const t=document.createElement("button");t.classList.add("cta-button-layout"),t.id="icon-button-layout",t.innerHTML='\n            <span>\n                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 35.401 42.251">\n                    <path id="calendar" d="M31.713,3.7H28.858V.849a1.713,1.713,0,0,0-3.425,0h0V3.7H15.157V.849a1.713,1.713,0,1,0-3.425,0h0V3.7H8.877A6.281,6.281,0,0,0,2.6,9.984h0V35.106a6.281,6.281,0,0,0,6.281,6.281H31.716A6.281,6.281,0,0,0,38,35.106h0V9.984A6.281,6.281,0,0,0,31.716,3.7h0ZM8.876,7.13H11.73V9.984a1.713,1.713,0,1,0,3.425,0h0V7.13H25.432V9.984a1.713,1.713,0,0,0,3.425,0h0V7.13h2.855a2.855,2.855,0,0,1,2.855,2.855h0v6.281H6.018V9.984A2.855,2.855,0,0,1,8.873,7.13h0ZM31.713,37.96H8.874A2.855,2.855,0,0,1,6.02,35.106h0V19.69H34.568V35.106a2.855,2.855,0,0,1-2.855,2.855Z" transform="translate(-2.596 0.864)" fill="#747474"/>\n                </svg>\n            </span>\n            <label>Button</label>\n            <i class="fa fa-angle-right img-button-arrow"></i>\n        ',A.addEventListener("click",(A=>{A.preventDefault(),this.ctaManager.changeToPlainButton()})),t.addEventListener("click",(A=>{A.preventDefault(),this.ctaManager.changeToIconButton()})),e.addEventListener("click",(A=>{A.preventDefault(),this.ctaManager.changeToImgButton()})),this.container.appendChild(A),this.container.appendChild(t),this.container.appendChild(e)}render(A){A.appendChild(this.container)}}class we{constructor(A){this.iconsList=A,this.ctaManager=new I,this.container=document.createElement("div"),this.init()}init(){var A;this.container.id="call-to-actions",null===(A=this.iconsList)||void 0===A||A.forEach((A=>{const e=document.createElement("div");e.className="call-to-action-item",e.title=A.CallToActionName,"Phone"===A.CallToActionType?e.innerHTML=ve.phone:"Email"===A.CallToActionType?e.innerHTML=ve.email:"SiteUrl"===A.CallToActionType?e.innerHTML=ve.website_url:"Map"===A.CallToActionType||"Form"===A.CallToActionType&&(e.innerHTML=ve.form),e.addEventListener("click",(()=>{this.ctaManager.addCtaButton(A)})),this.container.appendChild(e)}))}render(A){const e=A.querySelector("#call-to-actions");e&&e.remove(),A.appendChild(this.container)}}const ve={phone:'<svg data-gjs-draggable="false" data-gjs-selectable="false" data-gjs-editable="false" data-gjs-highlightable="false" data-gjs-droppable="false" data-gjs-resizable="false" data-gjs-hoverable="false" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 49.417 49.418">\n                <path data-gjs-draggable="false" data-gjs-selectable="false" data-gjs-editable="false" data-gjs-highlightable="false" data-gjs-droppable="false" data-gjs-resizable="false" data-gjs-hoverable="false" id="call" d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z" transform="translate(-4 -3)" fill="#fff"></path>\n            </svg>',email:'<svg data-gjs-draggable="false" data-gjs-selectable="false" data-gjs-editable="false" data-gjs-highlightable="false" data-gjs-droppable="false" data-gjs-resizable="false" data-gjs-hoverable="false" xmlns="http://www.w3.org/2000/svg" width="32" height="28" viewBox="0 0 41 32.8">\n                <path data-gjs-draggable="false" data-gjs-selectable="false" data-gjs-editable="false" data-gjs-highlightable="false" data-gjs-droppable="false" data-gjs-resizable="false" data-gjs-hoverable="false" id="Path_1218" data-name="Path 1218" d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z" transform="translate(-2 -4)" fill="#fff"></path>\n            </svg>',form:'<svg xmlns="http://www.w3.org/2000/svg" width="13" height="16" viewBox="0 0 13 16">\n            <path id="Path_1209" data-name="Path 1209" d="M9.828,4A1.823,1.823,0,0,0,8,5.8V18.2A1.823,1.823,0,0,0,9.828,20h9.344A1.823,1.823,0,0,0,21,18.2V9.8a.6.6,0,0,0-.179-.424l-.006-.006L15.54,4.176A.614.614,0,0,0,15.109,4Zm0,1.2H14.5V8.6a1.823,1.823,0,0,0,1.828,1.8h3.453v7.8a.6.6,0,0,1-.609.6H9.828a.6.6,0,0,1-.609-.6V5.8A.6.6,0,0,1,9.828,5.2Zm5.891.848L18.92,9.2H16.328a.6.6,0,0,1-.609-.6Z" transform="translate(-8 -4)" fill="#747474"/>\n          </svg>',website_url:'\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n                <path id="Path_1213" data-name="Path 1213" d="M15.833,4a4.163,4.163,0,0,0-2.958,1.229l-.979.979a4.168,4.168,0,0,0-1.229,2.958,4.1,4.1,0,0,0,.292,1.521L12.042,9.6a2.857,2.857,0,0,1,.792-2.458l.979-.979a2.853,2.853,0,0,1,2.021-.833,2.805,2.805,0,0,1,2,.833,2.85,2.85,0,0,1,0,4.021l-.979.979A2.853,2.853,0,0,1,14.833,12a2.439,2.439,0,0,1-.437-.042l-1.083,1.083a4.1,4.1,0,0,0,1.521.292A4.163,4.163,0,0,0,17.792,12.1l.979-.979A4.168,4.168,0,0,0,20,8.167,4.2,4.2,0,0,0,15.833,4ZM14.188,8.854,8.854,14.188l.958.958,5.333-5.333ZM9.167,10.667A4.163,4.163,0,0,0,6.208,11.9l-.979.979A4.168,4.168,0,0,0,4,15.833,4.2,4.2,0,0,0,8.167,20a4.163,4.163,0,0,0,2.958-1.229l.979-.979a4.168,4.168,0,0,0,1.229-2.958,4.1,4.1,0,0,0-.292-1.521L11.958,14.4a2.857,2.857,0,0,1-.792,2.458l-.979.979a2.853,2.853,0,0,1-2.021.833,2.805,2.805,0,0,1-2-.833,2.85,2.85,0,0,1,0-4.021l.979-.979A2.853,2.853,0,0,1,9.167,12a2.44,2.44,0,0,1,.438.042l1.083-1.083A4.1,4.1,0,0,0,9.167,10.667Z" transform="translate(-4 -4)" fill="#747474"/>\n            </svg>'};var Ce=function(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))};class ye{constructor(A){this.page=A,this.themeManager=new JA,this.container=document.createElement("div"),this.initializeContentSection()}initializeContentSection(){return Ce(this,void 0,void 0,(function*(){try{if(this.checkIfRendered())return;this.toggleSideBar(),yield this.prepareContentData(),this.setupContainerStyles(),this.renderComponents()}catch(A){console.error("Error initializing Content Section:",A)}}))}checkIfRendered(){const A=document.getElementById("pages-content");return!(!A||!A.querySelector("#content-page-section"))}prepareContentData(){return Ce(this,void 0,void 0,(function*(){var A;const e=new s;if("Location"===this.page.PageName||"Reception"===this.page.PageName){const A=yield e.getLocationData();if(!A)return;const t=null==A?void 0:A.BC_Trn_Location;this.iconsList=[{CallToActionName:"Phone",CallToActionPhone:null==t?void 0:t.LocationPhone,CallToActionType:"Phone"},{CallToActionName:"Email",CallToActionEmail:null==t?void 0:t.LocationEmail,CallToActionType:"Email"}]}else{const t=yield e.getContentPageData(null===(A=this.page)||void 0===A?void 0:A.PageId);t&&(this.iconsList=t.SDT_ProductService.CallToActions)}}))}setupContainerStyles(){this.container.classList.add("sidebar-section","content-page-section"),this.container.id="content-page-section",this.container.style.display="block"}renderComponents(){const A=new me,e=new we(this.iconsList),t=this.themeManager.currentTheme.ThemeCtaColors,n=new x(t);this.container.innerHTML="",A.render(this.container),e.render(this.container),n.render(this.container),this.render()}toggleSideBar(){const A=document.getElementById("menu-page-section");A&&(A.style.display="none")}render(){const A=document.getElementById("pages-content");if(A){const e=A.querySelector("#content-page-section");e&&A.removeChild(e),A.appendChild(this.container)}}}var be=function(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))};class Qe{constructor(){this.toolboxService=new s,this.appVersionManager=new VA,this.pageAttacher=new oe,this.actionList=new fe,this.pageCreationService=new de,this.selectedComponent=globalThis.selectedComponent}getMenuCategories(){return be(this,void 0,void 0,(function*(){const A=yield this.actionList.getCategoryData(),t=globalThis.pageData,n=[];return!t||"MyCare"!==t.PageType&&"MyService"!==t.PageType&&"MyLiving"!==t.PageType||n.push({id:"list-services",name:"Services",label:"Services",expandable:!0,action:()=>this.getSubMenuItems(A,"Services")}),n.push({id:"list-form",name:"Forms",label:"Forms",expandable:!0,action:()=>this.getSubMenuItems(A,"Forms")}),n.push({id:"list-module",name:"Modules",label:"Modules",expandable:!0,action:()=>this.getSubMenuItems(A,"Modules")}),[[{id:"add-menu-page",label:"Add menu page",name:"",action:()=>be(this,void 0,void 0,(function*(){this.createNewPage("Untitled")}))},{id:"add-content-page",label:"Add content page",name:"",action:()=>{e.getInstance().addServiceButtonEvent()}}],n,[{id:"add-email",label:"Email",name:"",action:()=>{this.pageCreationService.handleEmail()}},{id:"add-phone",label:"Phone",name:"",action:()=>{this.pageCreationService.handlePhone()}},{id:"add-web-link",label:"Web link",name:"",action:()=>{this.pageCreationService.handleWebLinks()}}]]}))}getSubMenuItems(A,e){return be(this,void 0,void 0,(function*(){const t=A.find((A=>A.name===e));return((null==t?void 0:t.options)||[]).map((A=>({id:A.PageId,label:A.PageName,action:()=>this.handleSubMenuItemSelection(A,e)})))}))}createNewPage(A){return be(this,void 0,void 0,(function*(){const e=yield this.appVersionManager.getActiveVersion(),t=yield this.toolboxService.createMenuPage(e.AppVersionId,A);if(t.error.message)console.error("error",t.error.message);else{const A={PageId:t.MenuPage.PageId,PageName:t.MenuPage.PageName,TileName:t.MenuPage.PageName,PageType:t.MenuPage.PageType};this.pageAttacher.attachToTile(A,"Menu","Menu")}}))}handleSubMenuItemSelection(A,e){this.pageAttacher.removeOtherEditors(),"Forms"===e?this.handleDynamicForms(A):"Modules"===e?this.pageAttacher.attachToTile(A,A.PageType,A.PageName):this.pageAttacher.attachToTile(A,e,A.PageName)}handleDynamicForms(A){return be(this,void 0,void 0,(function*(){const e=globalThis.selectedComponent;if(!e)return;const t=e.find(".tile-title")[0];t&&t.components(A.PageName);const n=e.parent().getId(),r=e.parent().parent().getId(),s=globalThis.activeVersion,o=null==s?void 0:s.Pages.find((A=>"Dynamic Form"===A.PageName&&"DynamicForm"===A.PageType)),a=`${i}/utoolboxdynamicform.aspx?WWPFormId=${A.PageId}&WWPDynamicFormMode=DSP&DefaultFormType=&WWPFormType=0`,l=[["Text",A.PageName],["Name",A.PageName],["Action.ObjectType","Web Link"],["Action.ObjectId",null==o?void 0:o.PageId],["Action.ObjectUrl",a]];for(const[A,e]of l)globalThis.tileMapper.updateTile(n,A,e);const c=globalThis.tileMapper.getTile(r,n);new re(null==o?void 0:o.PageId,o).init(c)}))}filterMenuItems(A,e){return A.filter((A=>{var t;return((null===(t=A.textContent)||void 0===t?void 0:t.toLowerCase())||"").includes(e.toLowerCase())}))}}class Ue{constructor(A,e){this.activeSubmenu=null,this.hoverTimeout=null,this.menuContainer=A,this.controller=e}createMenuItem(A,e){const t=document.createElement("li");if(t.classList.add("menu-item"),t.innerHTML=A.label.length>20?A.label.substring(0,20)+"...":A.label,t.setAttribute("data-name",A.name||""),A.expandable){const e=document.createElement("i");e.classList.add("fa","fa-chevron-right","expandable-icon"),t.appendChild(e),t.addEventListener("mouseenter",(e=>{e.stopPropagation(),null!==this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=null),this.menuContainer.querySelectorAll(".menu-item.expandable").forEach((A=>A.classList.remove("expandable"))),t.classList.add("expandable"),setTimeout((()=>{this.showSubMenu(A.name,t)}),50)}))}else t.addEventListener("click",(t=>{t.stopPropagation(),A.action&&(A.action(),e&&e()),this.menuContainer.remove()})),t.addEventListener("mouseenter",(A=>{A.stopPropagation(),t.classList.contains("sub-menu-item")||(this.menuContainer.querySelectorAll(".menu-item.expandable").forEach((A=>A.classList.remove("expandable"))),t.classList.add("expandable"))}));return t.id=A.id,t}showSubMenu(A,e){return t=this,n=void 0,i=function*(){const t=document.querySelector(".frame-list"),n=null==t?void 0:t.getBoundingClientRect();let r;const i=this.menuContainer.querySelector(".sub-menu-container");i?(r=i,r.innerHTML=""):(r=document.createElement("div"),r.classList.add("sub-menu-container"),this.activeSubmenu=r);const s=e.getBoundingClientRect(),o=this.menuContainer.getBoundingClientRect(),a=s.top-o.top;r.style.top=`${a}px`,n&&s.right+180>n.right?r.style.left="-178px":r.style.left="100%";const l=document.createElement("div");l.classList.add("sub-menu-header");const c=document.createElement("div");c.className="search-container",c.innerHTML='\n      <i class="fas fa-search search-icon"></i>\n      <input type="text" placeholder="Search" class="search-input" />\n    ',l.appendChild(c),r.appendChild(l);const u=document.createElement("ul");u.classList.add("menu-list");const d=yield this.controller.actionList.getCategoryData(),h=yield this.controller.getSubMenuItems(d,A);if(h&&h.length>0)h.forEach((A=>{const e=this.createMenuItem(A);e.classList.add("sub-menu-item"),u.appendChild(e)}));else{const e=document.createElement("li");e.classList.add("menu-item","no-items"),e.innerHTML=`No ${A.toLowerCase()} available`,e.style.pointerEvents="none",e.style.cursor="default",u.appendChild(e)}r.appendChild(u),r.addEventListener("mouseenter",(()=>{null!==this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=null)})),r.addEventListener("click",(A=>{const e=A.target;e.classList.contains("menu-item")||e.closest(".menu-item:not(.no-items)")||A.stopPropagation()})),this.menuContainer.appendChild(r);const g=c.querySelector(".search-input");null==g||g.addEventListener("input",(e=>{const t=e.target.value,n=Array.from(u.querySelectorAll(".menu-item:not(.no-items)")),r=u.querySelector(".no-items");r&&r.remove();const i=this.controller.filterMenuItems(n,t);if(n.forEach((A=>{A.style.display="flex"})),""!==t.trim()&&(n.forEach((A=>{A.style.display=i.includes(A)?"flex":"none"})),0===i.length)){const e=document.createElement("li");e.classList.add("menu-item","no-items"),e.innerHTML=`No ${A.toLowerCase()} available`,e.style.pointerEvents="none",e.style.cursor="default",u.appendChild(e)}})),null==g||g.addEventListener("click",(A=>{A.stopPropagation()})),null==g||g.addEventListener("focus",(A=>{A.stopPropagation()}))},new((r=void 0)||(r=Promise))((function(A,e){function s(A){try{a(i.next(A))}catch(A){e(A)}}function o(A){try{a(i.throw(A))}catch(A){e(A)}}function a(e){var t;e.done?A(e.value):(t=e.value,t instanceof r?t:new r((function(A){A(t)}))).then(s,o)}a((i=i.apply(t,n||[])).next())}));var t,n,r,i}}class Ee{constructor(A,e){this.controller=new Qe,this.templateContainer=A,this.parentContainer=e,this.menuContainer=document.createElement("div"),this.menuList=document.createElement("ul"),this.menuItemManager=new Ue(this.menuContainer,this.controller),this.init()}init(){return A=this,e=void 0,n=function*(){this.menuContainer.classList.add("menu-container"),this.menuList.innerHTML="";const A=yield this.controller.getMenuCategories();null==A||A.forEach((A=>{const e=document.createElement("div");e.classList.add("menu-category"),A.forEach((A=>{const t=this.menuItemManager.createMenuItem(A,(()=>{this.menuContainer.remove()}));e.appendChild(t)})),this.menuContainer.appendChild(e)}))},new((t=void 0)||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}));var A,e,t,n}render(A,e){if(!A){const e=this.templateContainer.querySelector(".tile-open-menu");if(!e)return;A=e.getBoundingClientRect()}this.displayMenu(A,e)}displayMenu(A,e){const t=this.parentContainer.getBoundingClientRect();if(!e)return;this.menuContainer.style.position="absolute",this.menuContainer.style.left="-9999px",this.menuContainer.style.top="-9999px",this.menuContainer.style.opacity="0",this.menuContainer.style.visibility="visible",this.parentContainer.appendChild(this.menuContainer),this.menuContainer.offsetHeight;const n=this.menuContainer.getBoundingClientRect(),r=e.left-t.left+A.left,i=e.top-t.top+A.top,s=(A.width,A.height,t.width),o=t.height;this.menuContainer.style.left="",this.menuContainer.style.top="",this.menuContainer.style.right="",this.menuContainer.style.bottom="";const a=i,l=n.height>0?n.height:200;if(a>=l+10?this.menuContainer.style.top=i-l-0+"px":(this.menuContainer.style.top="10px",l>o-20&&(this.menuContainer.style.maxHeight=o-20+"px",this.menuContainer.style.overflowY="auto")),r+n.width<=s-10)this.menuContainer.style.left=`${r+16}px`;else{const A=s-n.width-10;this.menuContainer.style.left=`${Math.max(10,A+16)}px`}this.menuContainer.style.visibility="visible",this.menuContainer.style.opacity="1"}}class Fe{constructor(){this.toolboxService=new s,this.toolBoxManager=new pt,this.appVersions=new VA}openModal(){const A=document.createElement("div"),e=document.createElement("p");e.innerText=PA.t("navbar.publish.modal_description");const t=document.createElement("label");t.className="notify_residents";const n=document.createElement("input");n.type="checkbox",n.id="notify_residents",n.name="notify_residents";const r=document.createElement("span");r.innerText=PA.t("navbar.publish.notify_residents"),t.appendChild(n),t.appendChild(r);const i=document.createElement("div");i.classList.add("popup-footer"),i.style.marginBottom="-12px";const s=this.createButton("submit_publish","tb-btn-primary",PA.t("navbar.publish.modal_confirm")),o=this.createButton("cancel_publish","tb-btn-outline",PA.t("navbar.publish.modal_cancel"));i.appendChild(s),i.appendChild(o),A.appendChild(e),A.appendChild(t),A.appendChild(i);const a=new ce({title:PA.t("navbar.publish.modal_title"),width:"500px",body:A});a.open(),s.addEventListener("click",(A=>{A.preventDefault(),console.log("Publishing...",n.checked),this.toolBoxManager.savePages(!1).then((A=>{this.appVersions.getActiveVersion().then((A=>{this.toolboxService.publishAppVersion(A.AppVersionId,n.checked).then((A=>{A.message||(a.close(),new ie("success",PA.t("messages.success.published")))}))}))}))})),o.addEventListener("click",(A=>{A.preventDefault(),a.close()}))}processData(){}publishAppVersion(){}createButton(A,e,t){const n=document.createElement("button");return n.id=A,n.classList.add("tb-btn",e),n.innerText=t,n}}class Ie{constructor(A,e,t={}){if(this.button=document.createElement("button"),this.button.id=A,this.button.className=`tb-btn tb-btn-${t.variant||"primary"}`,t.svg){const A=(new DOMParser).parseFromString(t.svg,"image/svg+xml").documentElement;this.button.appendChild(A)}const n=document.createElement("span");t.labelId&&(n.id=t.labelId),n.textContent=e,this.button.appendChild(n)}render(A){A.appendChild(this.button)}}class xe{constructor(){this.container=document.createElement("div"),this.undoButton=document.createElement("button"),this.redoButton=document.createElement("button"),this.init()}init(){this.container.classList.add("edit-actions"),this.undoButton.id="undo",this.undoButton.disabled=!0,this.undoButton.className="btn-transparent",this.undoButton.title=`${PA.t("undo")} (ctrl+z)`,this.undoButton.innerHTML="<span class='fa fa-undo'></span>",this.redoButton.id="redo",this.redoButton.disabled=!0,this.redoButton.className="btn-transparent",this.redoButton.title=`${PA.t("undo")} (ctrl+shift+z)`,this.redoButton.innerHTML="<span class='fa fa-redo'></span>",this.container.appendChild(this.undoButton),this.container.appendChild(this.redoButton)}handleUndo(){console.log("Undo action triggered")}handleRedo(){console.log("Redo action triggered")}render(A){A.appendChild(this.container)}}class Te extends JA{constructor(){super(),this.container=document.createElement("div"),this.selectionDiv=document.createElement("div"),this.themeOptions=document.createElement("div"),this.selectedTheme=document.createElement("span"),this.init(),document.addEventListener("click",this.handleOutsideClick.bind(this))}init(){this.container.classList.add("tb-custom-theme-selection");const A=document.createElement("button");A.classList.add("theme-select-button"),A.setAttribute("aria-haspopup","listbox"),this.selectedTheme.classList.add("selected-theme-value"),this.selectedTheme.textContent="Select Theme",A.appendChild(this.selectedTheme),this.container.appendChild(A),A.onclick=e=>{e.preventDefault(),A.classList.contains("open")?this.closeSelection():(this.themeOptions.classList.toggle("show"),A.classList.toggle("open"),A.setAttribute("aria-expanded","true"))},this.selectionDiv.appendChild(A),this.container.appendChild(this.selectionDiv),this.initializeCategoryOptions()}initializeCategoryOptions(){this.themeOptions.className="theme-options-list",this.themeOptions.setAttribute("role","listbox"),this.getThemes().forEach((A=>{const e=document.createElement("div");e.classList.add("theme-option"),e.classList.add("theme"),e.role="option",e.setAttribute("data-value",A.ThemeName),e.textContent=A.ThemeName;const t=this.currentTheme;t&&t.ThemeName===A.ThemeName&&(e.classList.add("selected"),this.selectedTheme.textContent=A.ThemeName),e.onclick=()=>{this.themeOptions.querySelectorAll(".theme-option").forEach((A=>A.classList.remove("selected"))),e.classList.add("selected"),this.selectedTheme.textContent=A.ThemeName,this.saveSelectedTheme(A),this.closeSelection()},this.themeOptions.appendChild(e)})),this.selectionDiv.appendChild(this.themeOptions)}saveSelectedTheme(A){(new s).updateLocationTheme(A.ThemeId).then((e=>{this.setTheme(A)}))}closeSelection(){if(this.themeOptions.classList.contains("show")){this.themeOptions.classList.remove("show");const A=this.container.querySelector(".theme-select-button");A.setAttribute("aria-expanded","false"),A.classList.toggle("open")}}handleOutsideClick(A){this.themeOptions.classList.contains("show")&&!this.container.contains(A.target)&&this.closeSelection()}render(A){A.appendChild(this.container)}}var Le=function(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))};class He{constructor(){this.toolboxService=new s,this.appVersion=new VA}generateShareLink(){return Le(this,void 0,void 0,(function*(){try{const A=yield this.appVersion.getActiveVersionId();if(!A)throw new Error("No active version found");return`${i}/wp_apppreview.aspx?AppVersionId=${A}`}catch(A){throw console.error("Error generating share link:",A),A}}))}copyToClipboard(A){return Le(this,void 0,void 0,(function*(){try{return yield navigator.clipboard.writeText(A),!0}catch(A){return console.error("Clipboard copy failed:",A),!1}}))}getVersions(){return Le(this,void 0,void 0,(function*(){try{return(yield this.toolboxService.getVersions()).AppVersions}catch(A){return console.error("Failed to fetch versions:",A),[]}}))}activateVersion(A){return Le(this,void 0,void 0,(function*(){try{return yield this.toolboxService.activateVersion(A)}catch(A){return console.error("Version activation failed:",A),!1}}))}createVersion(A){return Le(this,arguments,void 0,(function*(A,e=!1){try{let t;if(e){const e=yield this.appVersion.getActiveVersionId();t=yield this.toolboxService.duplicateVersion(e,A)}else t=yield this.toolboxService.createVersion(A);return t}catch(A){return console.error("Version creation failed:",A),null}}))}deleteVersion(A){return Le(this,void 0,void 0,(function*(){try{yield this.toolboxService.deleteVersion(A).then((A=>{"OK"==A.result&&new ie("success","Version deleted successfully")}))}catch(A){return console.error("Version deletion failed:",A),null}}))}getActiveVersion(){return Le(this,void 0,void 0,(function*(){return(yield this.getVersions()).find((A=>A.IsActive))||null}))}}class Se{constructor(A,e,t){this.container=document.createElement("div"),this.message=A,this.title=e,this.toolboxService=new s,this.onConfirmCallback=t||(()=>{}),this.init()}init(){this.container.classList.add("popup-modal"),this.container.style.display="flex";const A=document.createElement("div");A.classList.add("popup");const e=document.createElement("div");e.classList.add("popup-header");const t=document.createElement("span");t.innerText=this.title;const n=document.createElement("button");n.classList.add("close"),n.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 21 21">\n                <path id="Icon_material-close" data-name="Icon material-close" d="M28.5,9.615,26.385,7.5,18,15.885,9.615,7.5,7.5,9.615,15.885,18,7.5,26.385,9.615,28.5,18,20.115,26.385,28.5,28.5,26.385,20.115,18Z" transform="translate(-7.5 -7.5)" fill="#6a747f" opacity="0.54"></path>\n            </svg>\n        ',n.addEventListener("click",(()=>{this.close()})),e.appendChild(t),e.appendChild(n);const r=document.createElement("hr"),i=document.createElement("div");i.classList.add("popup-body"),i.id="confirmation_modal_message",i.innerText=this.message;const s=document.createElement("div");s.classList.add("popup-footer");const o=document.createElement("button");o.className="tb-btn tb-btn-outline",o.id="cancel_confirmation",o.innerText=PA.t("sidebar.confirmation_cancel"),o.addEventListener("click",(()=>{this.close()}));const a=document.createElement("button");a.className="tb-btn tb-btn-primary",a.id="confirm_action",a.innerText=PA.t("sidebar.confirmation_accept"),a.addEventListener("click",(A=>{A.preventDefault(),this.onConfirmCallback(),this.close()})),s.appendChild(a),s.appendChild(o),A.appendChild(e),A.appendChild(r),A.appendChild(i),A.appendChild(s),this.container.appendChild(A)}close(){this.container.remove()}render(A){A.appendChild(this.container)}}var Ne=function(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))};class Oe{constructor(){this.versionController=new He,this.container=document.createElement("div"),this.selectionDiv=document.createElement("div"),this.versionSelection=document.createElement("div"),this.activeVersion=document.createElement("span"),this.init(),document.addEventListener("click",this.handleOutsideClick.bind(this))}init(){this.container.classList.add("tb-custom-theme-selection");const A=this.createSelectionButton();this.selectionDiv.appendChild(A),this.container.appendChild(this.selectionDiv),this.initializeVersionOptions()}createSelectionButton(){const A=document.createElement("button");return A.classList.add("theme-select-button"),A.setAttribute("aria-haspopup","listbox"),this.activeVersion.classList.add("selected-theme-value"),this.activeVersion.textContent="Select Version",A.appendChild(this.activeVersion),A.onclick=e=>{e.preventDefault(),A.classList.contains("open")?this.closeSelection():this.toggleSelection(A)},A}toggleSelection(A){this.versionSelection.classList.toggle("show"),A.classList.toggle("open"),A.setAttribute("aria-expanded","true")}initializeVersionOptions(){return Ne(this,void 0,void 0,(function*(){this.versionSelection.className="theme-options-list",this.versionSelection.setAttribute("role","listbox"),this.versionSelection.innerHTML="",(yield this.versionController.getVersions()).forEach((A=>this.createVersionOption(A))),this.addNewVersionButton(),this.selectionDiv.appendChild(this.versionSelection)}))}addNewVersionButton(){const A=document.createElement("div");A.className="theme-option",A.style.justifyContent="start",A.innerHTML=`<i class="fa fa-plus"></i> &nbsp; ${PA.t("navbar.appversion.create_new")}`,A.onclick=()=>{this.createVersionModal()},this.versionSelection.appendChild(A)}selectFromTemplateButton(){const A=document.createElement("div");A.className="theme-option",A.innerHTML='<i class="fa fa-plus"></i> Select from template',this.versionSelection.appendChild(A)}createVersionOption(A){const e=document.createElement("div");e.className="theme-option",e.role="option",e.setAttribute("data-value",A.AppVersionName),e.textContent=A.AppVersionName;const t=document.createElement("div");t.className="option-buttons";const n=this.createDuplicateButton(A);if(t.append(n),!A.IsActive){const e=this.createDeleteButton(A);t.append(e)}e.append(t),A.IsActive&&(e.classList.add("selected"),this.activeVersion.textContent=y(A.AppVersionName,15)),e.addEventListener("click",(e=>this.handleVersionSelection(e,A))),this.versionSelection.appendChild(e)}createDuplicateButton(A){const e=document.createElement("span");return e.className="clone-version fa fa-clone",e.title=`${PA.t("navbar.appversion.duplicate")}`,e.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),this.createVersionModal(A.AppVersionName+" - Copy","Duplicate version","Duplicate")})),e}createDeleteButton(A){const e=document.createElement("span");return e.className="delete-version fa fa-trash",e.title=`${PA.t("navbar.appversion.delete")}`,e.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),new Se("Are you sure you want to delete this version?","Delete version",(()=>Ne(this,void 0,void 0,(function*(){this.versionController.deleteVersion(A.AppVersionId).then((A=>Ne(this,void 0,void 0,(function*(){yield this.refreshVersionList()}))))})))).render(document.body)})),e}handleVersionSelection(A,e){return Ne(this,void 0,void 0,(function*(){A.target.classList.contains("clone-version")||(this.versionSelection.querySelectorAll(".theme-option").forEach((A=>A.classList.remove("selected"))),A.currentTarget.classList.add("selected"),this.activeVersion.textContent=y(e.AppVersionName,15),(yield this.versionController.activateVersion(e.AppVersionId))&&this.clearActiveTheme(),this.closeSelection())}))}clearActiveTheme(){location.reload()}createVersionModal(A,e,t){const n=new le("page-form");n.addField({type:"text",id:"version_name",placeholder:"Version name",required:!0,value:A});const r=document.createElement("div");n.render(r);const i=this.createSubmitSection(t);r.appendChild(i);const s=new ce({title:e||"Create new version",width:"400px",body:r});s.open();let o=!1;e&&(o=!0),this.setupModalButtons(s,r,o)}createSubmitSection(A){const e=document.createElement("div");e.classList.add("popup-footer"),e.style.marginBottom="-12px";const t=this.createButton("submit_form","tb-btn-primary",`${A||"Save"}`),n=this.createButton("cancel_form","tb-btn-secondary","Cancel");return e.appendChild(t),e.appendChild(n),e}setupModalButtons(A,e,t){const n=e.querySelector("#submit_form"),r=e.querySelector("#cancel_form");null==n||n.addEventListener("click",(n=>Ne(this,void 0,void 0,(function*(){n.preventDefault();const r=e.querySelector("#version_name").value;r&&(yield this.versionController.createVersion(r,t).then((e=>Ne(this,void 0,void 0,(function*(){A.close(),yield this.refreshVersionList(),e&&this.clearActiveTheme()})))))})))),null==r||r.addEventListener("click",(e=>{e.preventDefault(),A.close()}))}createButton(A,e,t){const n=document.createElement("button");return n.id=A,n.classList.add("tb-btn",e),n.innerText=t,n}closeSelection(){if(this.versionSelection.classList.contains("show")){this.versionSelection.classList.remove("show");const A=this.container.querySelector(".theme-select-button");A.setAttribute("aria-expanded","false"),A.classList.toggle("open")}}handleOutsideClick(A){this.versionSelection.classList.contains("show")&&!this.container.contains(A.target)&&this.closeSelection()}refreshVersionList(){return Ne(this,void 0,void 0,(function*(){yield this.initializeVersionOptions(),this.versionSelection.classList.contains("show")||this.versionSelection.classList.add("show");const A=this.container.querySelector(".theme-select-button");A.classList.contains("open")||A.classList.add("open"),A.setAttribute("aria-expanded","true")}))}render(A){A.appendChild(this.container)}}class Me{constructor(A){this.appVersion=A,this.pages=this.appVersion.Pages,this.toolboxService=new s,this.showList()}showList(){const A=document.createElement("ul");A.classList.add("tb-custom-list"),this.pages.forEach((e=>{const t=this.buildListItem(e);A.appendChild(t)}));const e=document.getElementById("tree-container");e.innerHTML="",e.appendChild(A)}buildListItem(A){const e=document.createElement("li");e.classList.add("tb-custom-list-item");const t=document.createElement("div");t.classList.add("tb-custom-menu-item"),t.classList.add("page-list-items");const n=document.createElement("span");n.style.textTransform="capitalize",n.classList.add("tb-dropdown-toggle"),n.setAttribute("role","button"),n.setAttribute("aria-expanded","false"),n.innerHTML=`<i class="fa-regular fa-file tree-icon"></i><span>&nbsp; ${A.PageName}</span>`;const r=document.createElement("i");r.classList.add("fa-regular","fa-trash-can","tb-delete-icon");const i=document.createElement("i");i.classList.add("fa-regular","fa-edit","tb-update-icon"),"Home"!==A.PageName&&"Web Link"!==A.PageName||(r.style.display="none",i.style.display="none");const s=document.createElement("div");return s.classList.add("tb-menu-icons-container"),r.setAttribute("data-id",A.PageId),i.setAttribute("data-id",A.PageId),r.addEventListener("click",(A=>this.handleDelete(A))),t.appendChild(n),"Web Link"===A.PageName&&(t.style.display="none"),"Home"!==A.PageName&&(s.append(r),t.appendChild(s)),e.appendChild(t),e}handleDelete(A){const e=A.target.dataset.id,t=document.createElement("div"),n=document.createElement("div");n.classList.add("popup-body"),n.id="confirmation_modal_message",n.innerText="Are you sure you want to delete this page?";const r=document.createElement("div");r.classList.add("popup-footer");const i=document.createElement("button");i.id="yes_delete",i.classList.add("tb-btn","tb-btn-primary"),i.innerText="Delete";const s=document.createElement("button");s.id="close_popup",s.classList.add("tb-btn","tb-btn-outline"),s.innerText="Cancel",r.appendChild(i),r.appendChild(s),t.appendChild(n),t.appendChild(r);const o=new ce({title:"Delete Page",width:"100",body:t});o.open(),s.addEventListener("click",(A=>{o.close()})),i.addEventListener("click",(A=>{this.toolboxService.deletePage(this.appVersion.AppVersionId,e).then((A=>{console.log(A),A.error.message?new ie("error",A.error.message):(this.appVersion=A.AppVersion,this.pages=this.appVersion.Pages,this.showList(),o.close(),console.log(window.app.toolboxApp.editor.init()))}))}))}}class De{constructor(A){this.mainContainer=document.getElementById("mapping-section"),this.treeContainer=document.getElementById("tree-container"),this.renderTitle(),this.renderHideOrShowPages(),this.addPageCreationEvent(),this.appVersionManager=A,this.toolboxService=new s,this.appVersionManager.getActiveVersion().then((A=>{var e;this.version=A,this.pages=A.Pages,this.homePage=null===(e=A.Pages)||void 0===e?void 0:e.find((A=>"Home"==A.PageName)),this.homePage&&(this.clearMappings(),this.createPageTree(this.homePage.PageId,"tree-container"))}))}renderTitle(){document.getElementById("sidebar_mapping_title").textContent="MAPPING"}renderHideOrShowPages(){const A=document.getElementById("current-page-title");let e=A.nextSibling;for(;e;){let A=e;e=e.nextSibling,1===A.nodeType&&A.remove()}const t=document.createElement("span");t.id="list_all_pages",t.style.display="block",t.textContent="List all pages";const n=document.createElement("span");n.id="hide_pages",n.style.display="none",n.textContent="Hide pages",t.addEventListener("click",(A=>{n.style.display="block",t.style.display="none",this.clearMappings(),this.showAllPages()})),n.addEventListener("click",(A=>{n.style.display="none",t.style.display="block",this.homePage&&(this.clearMappings(),this.createPageTree(this.homePage.PageId,"tree-container"))})),A.insertAdjacentElement("afterend",n),A.insertAdjacentElement("afterend",t)}getPage(A){return this.pages.find((e=>e.PageId==A))}showAllPages(){new Me(this.version)}createPageTree(A,e){let t=this.getPage(A),n=[];if(t&&t.PageMenuStructure){t.PageMenuStructure.Rows.forEach((A=>{A.Tiles.forEach((A=>{t=this.getPage(A.Action.ObjectId),t&&n.push(t)}))}));const r=this.createTree(A,n),i=document.getElementById(e);i.innerHTML="",i.appendChild(r)}}createTree(A,e,t=!0){const n=document.createElement("ul");return n.classList.add("tb-custom-list"),e.forEach((e=>{const r=this.buildListItem(A,e,t);n.appendChild(r)})),n}buildListItem(A,e,t=!0){"Menu"!=e.PageType&&(t=!1);const n=document.createElement("li");n.classList.add("tb-custom-list-item"),n.dataset.parentPageId=A;const r=document.createElement("div");r.classList.add("child-div"),r.id=`child-div-${e.PageId}`,r.style.position="relative",r.style.paddingLeft="20px";const i=document.createElement("div");i.classList.add("tb-custom-menu-item");const s=document.createElement("span");s.classList.add("tb-dropdown-toggle"),s.setAttribute("role","button"),s.setAttribute("aria-expanded","false");let o="fa-regular fa-file tree-icon";return t&&(o="fa-caret-right tree-icon"),s.innerHTML=`<i class="fa ${o}"></i><span>${e.PageName}</span>`,i.appendChild(s),n.appendChild(i),n.appendChild(r),t&&n.addEventListener("click",(A=>{A.stopPropagation(),this.createPageTree(e.PageId,`child-div-${e.PageId}`)})),n}clearMappings(){var A;null===(A=this.treeContainer)||void 0===A||A.replaceChildren("")}addPageCreationEvent(){const A=document.getElementById("page-submit"),e=document.getElementById("page-title");A.addEventListener("click",(A=>{A.preventDefault();const t=e.value;t?this.createPage(t):new ie("error",PA.t("messages.error.empty_page_name"))}))}createPage(A){this.toolboxService.createMenuPage(this.version.AppVersionId,A).then((A=>{console.log(A)}))}}class ke{constructor(){this.appVersions=new VA,this.container=document.getElementById("navbar-buttons"),this.init()}init(){const A=new xe,e=new Te,t=new Oe;let n=new Ie("open-mapping",PA.t("navbar.tree"),{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="18.818" height="16" viewBox="0 0 18.818 18">\n        <path id="Path_993" data-name="Path 993" d="M19.545,5a3.283,3.283,0,0,0-3.273,3.273A3.228,3.228,0,0,0,16.784,10l-2.541,3.177H10.427a3.273,3.273,0,1,0,0,1.636h3.816L16.784,18a3.229,3.229,0,0,0-.511,1.732,3.273,3.273,0,1,0,3.273-3.273,3.207,3.207,0,0,0-1.563.419L15.685,14l2.3-2.873a3.207,3.207,0,0,0,1.563.419,3.273,3.273,0,0,0,0-6.545Zm0,1.636a1.636,1.636,0,1,1-1.636,1.636A1.623,1.623,0,0,1,19.545,6.636ZM7.273,12.364A1.636,1.636,0,1,1,5.636,14,1.623,1.623,0,0,1,7.273,12.364Zm12.273,5.727a1.636,1.636,0,1,1-1.636,1.636A1.623,1.623,0,0,1,19.545,18.091Z" transform="translate(-4 -5)"></path>\n        </svg>',variant:"outline",labelId:"navbar_tree_label"});n.button.addEventListener("click",(A=>{A.preventDefault();const e=document.getElementById("tools-section"),t=document.querySelector("#mapping-section");e.style.display="none",t.style.display="block",new De(this.appVersions)}));let r=new Ie("publish",PA.t("navbar.publish.label"),{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="13" height="16" viewBox="0 0 13 18">\n        <path id="Path_958" data-name="Path 958" d="M13.5,3.594l-.519.507L7.925,9.263l1.038,1.06,3.814-3.9V18.644h1.444V6.429l3.814,3.9,1.038-1.06L14.019,4.1ZM7,20.119v1.475H20V20.119Z" transform="translate(-7 -3.594)" fill="#fff"></path>\n      </svg>',labelId:"navbar_tree_label"});A.render(this.container),t.render(this.container),e.render(this.container),n.render(this.container),r.render(this.container),r.button.addEventListener("click",(A=>{A.preventDefault(),(new Fe).openModal()}))}render(A){A.appendChild(this.container)}}class Pe{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("tb-tabs");const A=document.createElement("button");A.id="pages-button",A.className="tb-tab-button active",A.setAttribute("data-tab","pages");const e=document.createElement("span");e.id="sidebar_tabs_pages_label",e.innerText=PA.t("sidebar.pages"),A.appendChild(e);const t=document.createElement("button");t.id="templates-button",t.className="tb-tab-button",t.setAttribute("data-tab","templates");const n=document.createElement("span");n.id="sidebar_tabs_templates_label",n.innerText=PA.t("sidebar.templates.label"),t.appendChild(n),A.addEventListener("click",(e=>{e.preventDefault(),null==A||A.classList.add("active"),null==t||t.classList.remove("active"),this.switchTabs("pages-content","templates-content")})),t.addEventListener("click",(e=>{e.preventDefault(),null==t||t.classList.add("active"),null==A||A.classList.remove("active"),this.switchTabs("templates-content","pages-content")})),this.container.appendChild(A),this.container.appendChild(t)}switchTabs(A,e){const t=document.getElementById(A),n=document.getElementById(e);console.log(t,n),t.style.display="block",n.style.display="none"}render(A){A.appendChild(this.container)}}class _e extends JA{constructor(){super(),this.container=document.createElement("div"),this.init()}init(){this.container.className="sidebar-section theme-section",this.container.style.paddingTop="0px";const A=this.getActiveThemeColors();new b(A,"theme-color-palette").render(this.container)}render(A){A.appendChild(this.container)}}var Ke=function(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))};class Re{constructor(A,e){this.editor=A,this.page=e,this.toolBoxService=new s,this.contentMapper=new Q(this.page.PageId)}saveContentDescription(A){"Location"===this.page.PageName?this.saveLocationContent(A):"Reception"===this.page.PageName?this.saveReceptionContent(A):this.saveContentPageInfo(A)}saveContentPageInfo(A){return Ke(this,void 0,void 0,(function*(){const e={ProductServiceId:this.page.PageId,ProductServiceDescription:A};if(yield this.toolBoxService.updateDescription(e)){const e=this.editor.Components.getWrapper().find("#contentDescription")[0];e&&this.updateMapper(e,A)}}))}saveLocationContent(A){return Ke(this,void 0,void 0,(function*(){const e={LocationDescription:A,LocationImageBase64:"",ReceptionDescription:"",ReceptionImageBase64:""};if(yield this.toolBoxService.updateLocationInfo(e)){const e=this.editor.Components.getWrapper().find("#contentDescription")[0];e&&this.updateMapper(e,A)}}))}saveReceptionContent(A){return Ke(this,void 0,void 0,(function*(){const e={LocationDescription:"",LocationImageBase64:"",ReceptionDescription:A,ReceptionImageBase64:""};if(yield this.toolBoxService.updateLocationInfo(e)){const e=this.editor.Components.getWrapper().find("#contentDescription")[0];e&&this.updateMapper(e,A)}}))}updateMapper(A,e){const t=A.parent();A.replaceWith(`<div ${p} id="contentDescription">${this.addGrapesAttributes(e)}</div>`),this.contentMapper.updateContentDescription(t.getId(),e)}updateContentImage(A){"Reception"===this.page.PageName||"Location"===this.page.PageName?this.updateLocationImage(A):this.updateServiceContentImage(A)}updateCtaButtonImage(A){const e=globalThis.ctaContainerId,t=this.editor.Components.getWrapper().find(`#${e}`)[0];if(t){const n=t.find("img")[0],r=t.find("svg")[0];if(n){n.setAttributes({src:A,alt:"cta Image"});const t=`\n                    <svg ${p} xmlns="http://www.w3.org/2000/svg" id="Component_57_1" data-name="Component 57 – 1" width="22" height="22" viewBox="0 0 33 33">\n                        <g ${p} id="Ellipse_532" data-name="Ellipse 532" fill="#fff" stroke="#5068a8" stroke-width="2">\n                        <circle ${p} cx="16.5" cy="16.5" r="16.5" stroke="none"/>\n                        <circle ${p} cx="16.5" cy="16.5" r="16" fill="none"/>\n                        </g>\n                        <path ${p} id="Icon_feather-edit-2" data-name="Icon feather-edit-2" d="M12.834,3.8a1.854,1.854,0,0,1,2.622,2.622L6.606,15.274,3,16.257l.983-3.606Z" transform="translate(7 6.742)" fill="#5068a8" stroke="#5068a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>\n                    </svg>\n                    `;r.replaceWith(t),this.contentMapper.updateContentButtonType(e,"Image",A)}}}updateServiceContentImage(A){return Ke(this,void 0,void 0,(function*(){try{const e=yield C(A),t={ProductServiceId:this.page.PageId,ProductServiceDescription:"",ProductServiceImageBase64:e};if(yield this.toolBoxService.updateContentImage(t)){const e=this.editor.Components.getWrapper().find("#product-service-image")[0];e&&(e.setAttributes({src:A,alt:`${this.page.PageName} Image`}),this.contentMapper.updateContentImage(e.parent().getId(),A))}}catch(A){console.error("Error:",A)}}))}updateLocationImage(A){return Ke(this,void 0,void 0,(function*(){try{const e=yield C(A);let t;if("Location"===this.page.PageName?t={LocationDescription:"",LocationImageBase64:e,ReceptionDescription:"",ReceptionImageBase64:""}:"Reception"===this.page.PageName&&(t={LocationDescription:"",LocationImageBase64:"",ReceptionDescription:"",ReceptionImageBase64:e}),yield this.toolBoxService.updateLocationInfo(t)){const e=this.editor.Components.getWrapper().find("#product-service-image")[0];e&&(e.setAttributes({src:A,alt:`${this.page.PageName} Image`}),this.contentMapper.updateContentImage(e.parent().getId(),A))}}catch(A){console.error("Error:",A)}}))}deleteContentImage(){return Ke(this,void 0,void 0,(function*(){try{const A={ProductServiceId:this.page.PageId};if(yield this.toolBoxService.deleteContentImage(A)){const A=this.editor.Components.getWrapper().find("#product-service-image")[0];if(A){const e=A.parent();e&&e.remove()}}}catch(A){console.error("Error deleting media:",A)}}))}addGrapesAttributes(A){const e=document.createElement("div");return"string"==typeof A&&(e.innerHTML=A),e.querySelectorAll("*").forEach((A=>{A.setAttribute("data-gjs-draggable","false"),A.setAttribute("data-gjs-selectable","false"),A.setAttribute("data-gjs-editable","false"),A.setAttribute("data-gjs-highlightable","false"),A.setAttribute("data-gjs-droppable","false"),A.setAttribute("data-gjs-resizable","false"),A.setAttribute("data-gjs-hoverable","false")})),e.innerHTML}}var je=function(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))};class Ve{constructor(A,e){this.mediaFile=A,this.type=e,this.toolboxService=new s,this.container=document.createElement("div"),this.init()}init(){this.container.className="file-item valid",this.container.id=this.mediaFile.MediaId;const A=document.createElement("img");A.src=this.mediaFile.MediaUrl,A.alt=this.mediaFile.MediaName,A.className="preview-image";const e=document.createElement("div");e.className="file-info";const t=document.createElement("div");t.className="file-name",t.innerText=this.mediaFile.MediaName;const n=document.createElement("div");n.className="file-size",n.innerText=this.formatBytes(this.mediaFile.MediaSize),e.appendChild(t),e.appendChild(n);const r=document.createElement("span");r.className="status-icon",r.style.color="green",this.setupItemClickEvent(r);const i=document.createElement("span");i.className="delete-media fa-regular fa-trash-can",i.title="Delete image",i.addEventListener("click",(A=>{A.stopPropagation(),this.deleteEvent()})),this.container.appendChild(A),this.container.appendChild(e),this.container.appendChild(r),this.container.appendChild(i)}formatBytes(A){const e=["Bytes","KB","MB","GB","TB"];if(0===A)return"0 Byte";const t=parseInt(Math.floor(Math.log(A)/Math.log(1024)).toString());return 0===t?A+" "+e[t]:(A/Math.pow(1024,t)).toFixed(1)+" "+e[t]}setupItemClickEvent(A){this.container.addEventListener("click",(()=>{document.querySelectorAll(".file-item").forEach((A=>{A.classList.remove("selected");const e=A.querySelector(".status-icon");e&&(e.innerHTML=A.classList.contains("invalid")?"⚠":"")})),this.container.classList.contains("selected")?A.innerHTML="":A.innerHTML='\n                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="13.423" viewBox="0 0 18 13.423">\n                        <path id="Icon_awesome-check" data-name="Icon awesome-check" d="M6.114,17.736l-5.85-5.85a.9.9,0,0,1,0-1.273L1.536,9.341a.9.9,0,0,1,1.273,0L6.75,13.282l8.441-8.441a.9.9,0,0,1,1.273,0l1.273,1.273a.9.9,0,0,1,0,1.273L7.386,17.736A.9.9,0,0,1,6.114,17.736Z" transform="translate(0 -4.577)" fill="#3a9341"></path>\n                    </svg>\n                ',this.container.classList.toggle("selected"),this.setupModalActions()}))}setupModalActions(){var A,e;const t=document.querySelector(".modal-actions");if(!t)return;t.style.display="flex";const n=t.querySelector("#cancel-modal"),r=t.querySelector("#save-modal");if(!n||!r)return;const i=n.cloneNode(!0),s=r.cloneNode(!0);null===(A=n.parentNode)||void 0===A||A.replaceChild(i,n),null===(e=r.parentNode)||void 0===e||e.replaceChild(s,r);const o=document.querySelector(".tb-modal");o&&(i.addEventListener("click",(()=>{o.style.display="none",o.remove()})),s.addEventListener("click",(()=>{"tile"===this.type?this.addImageToTile():"content"===this.type?this.addImageToContentPage():"cta"===this.type&&this.updateCtaButtonImage(),o.style.display="none",o.remove()})))}addImageToTile(){const A=globalThis.selectedComponent;if(A)try{const e=encodeURI(this.mediaFile.MediaUrl);A.addStyle({"background-image":`url(${e})`,"background-color":"transparent","background-size":"cover","background-position":"center","background-blend-mode":"overlay"}),A.getEl().style.backgroundColor="transparent",globalThis.tileMapper.updateTile(A.parent().getId(),"BGImageUrl",e),globalThis.tileMapper.updateTile(A.parent().getId(),"Opacity","0"),globalThis.tileMapper.updateTile(A.parent().getId(),"BGColor","transparent");const t=A.parent(),n=t.parent(),r=globalThis.tileMapper.getTile(n.getId(),t.getId());A&&r&&new _A(A,r).setTileAttributes()}catch(A){console.error("Error adding image to tile:",A)}}addImageToContentPage(){return je(this,void 0,void 0,(function*(){const A=encodeURI(this.mediaFile.MediaUrl),e=globalThis.activeEditor,t=globalThis.pageData;new Re(e,t).updateContentImage(A)}))}updateCtaButtonImage(){return je(this,void 0,void 0,(function*(){const A=encodeURI(this.mediaFile.MediaUrl),e=globalThis.activeEditor,t=globalThis.pageData;new Re(e,t).updateCtaButtonImage(A)}))}deleteEvent(){new Se("Are you sure you want to delete this media file?","Delete media",(()=>je(this,void 0,void 0,(function*(){try{yield this.toolboxService.deleteMedia(this.mediaFile.MediaId);let A=yield this.toolboxService.getMediaFiles();A=A.filter((A=>A.MediaId!==this.mediaFile.MediaId));const e=document.getElementById(this.mediaFile.MediaId);e&&e.remove(),0===A.length&&(document.querySelector(".modal-actions").style.display="none")}catch(A){console.error("Error deleting media:",A)}})))).render(document.body)}getElement(){return this.container}render(A){A.appendChild(this.container)}}var qe=function(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))};class Ge{constructor(A){this.fileListElement=null,this.progressIntervals={},this.type=A,this.modalContent=document.createElement("div"),this.toolboxService=new s,this.init()}init(){this.modalContent.className="tb-modal-content";const A=document.createElement("div");A.className="tb-modal-header";const e=document.createElement("h2");e.innerText=PA.t("sidebar.image_upload.modal_title");const t=document.createElement("span");t.className="close",t.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21">\n              <path id="Icon_material-close" data-name="Icon material-close" d="M28.5,9.615,26.385,7.5,18,15.885,9.615,7.5,7.5,9.615,15.885,18,7.5,26.385,9.615,28.5,18,20.115,26.385,28.5,28.5,26.385,20.115,18Z" transform="translate(-7.5 -7.5)" fill="#6a747f" opacity="0.54"></path>\n            </svg>\n        ',t.addEventListener("click",(A=>{A.preventDefault();const e=this.modalContent.parentElement;e.style.display="none",null==e||e.remove()})),A.appendChild(e),A.appendChild(t);const n=document.createElement("div");n.className="modal-actions";const r=document.createElement("button");r.className="tb-btn tb-btn-outline",r.id="cancel-modal",r.innerText=PA.t("sidebar.image_upload.cancel"),r.addEventListener("click",(A=>{A.preventDefault();const e=this.modalContent.parentElement;e.style.display="none",null==e||e.remove()}));const i=document.createElement("button");i.className="tb-btn tb-btn-primary",i.id="save-modal",i.innerText=PA.t("sidebar.image_upload.save"),n.appendChild(r),n.appendChild(i),this.modalContent.appendChild(A),this.uploadArea(),this.createFileListElement(),this.loadMediaFiles(),this.modalContent.appendChild(n)}uploadArea(){const A=document.createElement("div");A.className="upload-area",A.id="uploadArea",A.innerHTML=`\n        <svg xmlns="http://www.w3.org/2000/svg" width="40.999" height="28.865" viewBox="0 0 40.999 28.865">\n            <path id="Path_1040" data-name="Path 1040" d="M21.924,11.025a3.459,3.459,0,0,0-3.287,3.608,3.459,3.459,0,0,0,3.287,3.608,3.459,3.459,0,0,0,3.287-3.608A3.459,3.459,0,0,0,21.924,11.025ZM36.716,21.849l-11.5,14.432-8.218-9.02L8.044,39.89h41Z" transform="translate(-8.044 -11.025)" fill="#afadad"></path>\n          </svg>\n          <div class="upload-text">\n            ${PA.t("sidebar.image_upload.upload_message")}\n        </div>\n        `,this.setupDragAndDrop(A),this.modalContent.appendChild(A)}createFileListElement(){this.fileListElement=document.createElement("div"),this.fileListElement.className="file-list",this.fileListElement.id="fileList";const A=document.createElement("div");A.className="loading-media",A.textContent="Loading media files...",this.fileListElement.appendChild(A),this.modalContent.appendChild(this.fileListElement)}loadMediaFiles(){return qe(this,void 0,void 0,(function*(){try{const A=yield this.toolboxService.getMediaFiles();this.fileListElement&&(this.fileListElement.innerHTML="",A&&A.length>0&&A.forEach((A=>{new Ve(A,this.type).render(this.fileListElement)})))}catch(A){console.error("Error loading media files:",A),this.fileListElement&&(this.fileListElement.innerHTML='<div class="error-message">Error loading media files. Please try again.</div>')}}))}setupDragAndDrop(A){return qe(this,void 0,void 0,(function*(){const e=document.createElement("input");e.type="file",e.id="fileInput",e.multiple=!0,e.accept="image/jpeg, image/jpg, image/png",e.style.display="none",A.appendChild(e),A.querySelector("#browseLink"),A.addEventListener("click",(A=>{e.click()})),e.addEventListener("change",(()=>{e.files&&e.files.length>0&&this.handleFiles(e.files)})),A.addEventListener("dragover",(e=>{e.preventDefault(),A.classList.add("drag-over")})),A.addEventListener("dragleave",(e=>{e.preventDefault(),A.classList.remove("drag-over")})),A.addEventListener("drop",(e=>qe(this,void 0,void 0,(function*(){var t;e.preventDefault(),A.classList.remove("drag-over"),(null===(t=e.dataTransfer)||void 0===t?void 0:t.files)&&e.dataTransfer.files.length>0&&(yield this.handleFiles(e.dataTransfer.files))}))))}))}handleFiles(A){return qe(this,void 0,void 0,(function*(){const e=Array.from(A);for(const A of e)if(A.type.startsWith("image/"))try{const e=yield this.readFileAsDataURL(A),t=A.name.replace(/\s+/g,"-").replace(/[()]/g,""),n={MediaId:Date.now().toString(),MediaName:t,MediaUrl:e,MediaType:A.type,MediaSize:A.size};if(console.log(n),this.fileListElement&&this.displayMediaFileProgress(this.fileListElement,n),!this.validateFile(n))return;(yield this.toolboxService.uploadFile(n.MediaUrl,n.MediaName,n.MediaSize,n.MediaType)).BC_Trn_Media}catch(e){if(console.error("Error processing file:",e),this.fileListElement){const t=document.createElement("div");t.className="upload-error",t.textContent=`Error uploading ${A.name}: ${e}`,this.fileListElement.insertBefore(t,this.fileListElement.firstChild),setTimeout((()=>{t.remove()}),5e3)}}}))}displayMediaFileProgress(A,e){const t=document.createElement("div");t.className="file-item "+(this.validateFile(e)?"valid":"invalid"),t.setAttribute("data-mediaid",e.MediaId);const n=this.validateFile(e);var r;t.innerHTML=`\n              <img src="${e.MediaUrl}" alt="File thumbnail" class="preview-image">\n              <div class="file-info">\n                <div class="file-info-details">\n                  <div>\n                    <div class="file-name">${r=e.MediaName,r.split("-").slice(1).join("-")}</div>\n                    <div class="file-size">${this.formatFileSize(e.MediaSize.toString())}</div>\n                  </div>\n                  <div class="progress-text">0%</div>\n                </div>\n                <div class="progress-bar">\n                    <div class="progress" style="width: 0%"></div>\n                </div>\n                ${n?"":"<small>File is invalid. Please upload a valid file (jpg, png, jpeg and less than 2MB).</small>"}\n              </div>\n              <span class="status-icon" style="color: ${n?"green":"red"}">\n                ${n?"":"⚠"}\n              </span>\n              ${n?"":'<span style="margin-left: 10px" id="delete-invalid" class="fa-regular fa-trash-can"></span>'}\n            `,A.insertBefore(t,A.firstChild);const i=t.querySelector("#delete-invalid");i&&(i.style.cursor="pointer",i.addEventListener("click",(e=>{e.preventDefault(),A.removeChild(t)})));let s=0;const o=t.querySelector(".progress"),a=t.querySelector(".progress-text"),l=setInterval((()=>{s+=Math.floor(15*Math.random())+5,o&&(o.style.width=`${s>100?100:s}%`),a&&(a.textContent=`${s>100?100:s}%`),s>=100&&(clearInterval(l),n&&(A.removeChild(t),this.displayMediaFile(A,e)))}),300);this.progressIntervals=this.progressIntervals||{},this.progressIntervals[e.MediaId]=l}validateFile(A){const e=A.MediaSize<=2097152,t=["image/jpeg","image/jpg","image/png"].includes(A.MediaType);return e&&t}formatFileSize(A){const e=parseInt(A,10);return e<1024?e+" B":e<1048576?Math.round(e/1024)+" KB":(e/1048576).toFixed(2)+" MB"}displayMediaFile(A,e){const t=new Ve(e,this.type);t.render(A),A.insertBefore(t.getElement(),A.firstChild)}destroy(){Object.values(this.progressIntervals).forEach((A=>{clearInterval(A)})),this.progressIntervals={}}readFileAsDataURL(A){return new Promise(((e,t)=>{const n=new FileReader;n.onload=()=>{n.result?e(n.result):t(new Error("FileReader did not produce a result"))},n.onerror=()=>{t(n.error)},n.readAsDataURL(A)}))}render(A){A.appendChild(this.modalContent)}}class $e{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="bg-section";const A=document.createElement("button");A.className="add-image",A.id="image-bg",A.innerHTML='\n            <span class="plus">\n               <i class="fa fa-plus"></i>\n            </span>\n            <span class="image-icon">\n                <i class="fa fa-image"></i>\n            </span>\n        ';const e=document.createElement("div");e.className="slider-wrapper",e.id="slider-wrapper",e.style.display="none";const t=document.createElement("input");t.type="range",t.id="bg-opacity",t.min="0",t.max="100",t.value="0",t.addEventListener("input",(A=>{const e=A.target.value,t=document.getElementById("valueDisplay");t&&(t.innerHTML=`${e}%`),this.updateImageOpacity(e)}));const n=document.createElement("span");n.id="valueDisplay",n.innerHTML="0%",e.appendChild(t),e.appendChild(n),A.addEventListener("click",(A=>{if(A.preventDefault(),!globalThis.selectedComponent)return;const e=document.createElement("div");e.classList.add("tb-modal"),e.style.display="flex",new Ge("tile").render(e);const t=document.createElement("input");t.type="file",t.multiple=!0,t.accept="image/jpeg, image/jpg, image/png",t.id="fileInput",t.style.display="none",document.body.appendChild(e),document.body.appendChild(t)})),this.container.appendChild(A),this.container.appendChild(e)}updateImageOpacity(A){const e=globalThis.selectedComponent;if(!e)return;const t=A/100;e.getEl().style.backgroundColor=`rgba(0, 0, 0, ${t})`,globalThis.tileMapper.updateTile(e.parent().getId(),"Opacity",A)}render(A){A.appendChild(this.container)}}class Je{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("tile-img-container"),this.container.id="tile-img-container";const A=document.createElement("img");A.alt="Tile Image",A.src="https://staging.comforta.yukon.software/media/receptie-197@3x.png",A.className="tile-img-thumbnail";const e=document.createElement("button");let t;e.className="tile-img-delete-button",e.id="tile-img-delete-button",e.innerHTML='<i class="fa fa-xmark"></i>',e.addEventListener("click",(A=>{A.preventDefault();const e=globalThis.selectedComponent;if(!e)return;const n=e.parent(),r=n.parent();t=globalThis.tileMapper.getTile(r.getId(),n.getId());const i=e.getStyle();delete i["background-image"],i["background-color"]=t.BGColor,e.setStyle(i),globalThis.tileMapper.updateTile(e.parent().getId(),"BGImageUrl",""),globalThis.tileMapper.updateTile(e.parent().getId(),"Opacity","0"),this.container.style.display="none",document.getElementById("slider-wrapper").style.display="none"})),this.container.appendChild(A),this.container.appendChild(e)}render(A){A.appendChild(this.container)}}class We{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("tile-img-section");const A=new Je;(new $e).render(this.container),A.render(this.container)}render(A){A.appendChild(this.container)}}class Ze{constructor(){this.input=document.createElement("input"),this.init()}init(){this.input.type="text",this.input.placeholder="Enter a title",this.input.classList.add("tb-form-control"),this.input.id="tile-title",this.input.addEventListener("input",(A=>{const e=globalThis.selectedComponent;let t=e.getClasses().includes("first-tile")&&e.getClasses().includes("high-priority-template");if(!e)return;const n=e.closest(".container-row").components().length,r=e.find(".tile-title")[0];if(r){const A=3===n?this.truncate(11):2===n?this.truncate(14):this.truncate(25);r.components(A),r.addAttributes({title:this.input.value})}t&&(this.input.value=this.input.value.toUpperCase()),globalThis.tileMapper.updateTile(e.parent().getId(),"Text",this.input.value.trim());const i=r.parent();i&&"none"===i.getStyle().display&&i.addStyle({display:"block"})}))}truncate(A){return this.input.value.length>A?this.input.value.substring(0,A)+"..":this.input.value}render(A){A.appendChild(this.input)}}class Xe{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="text-color-palette text-colors",this.container.id="text-color-palette",Object.entries({color1:"#ffffff",color2:"#333333"}).forEach((([A,e])=>{const t=document.createElement("div");t.className="color-item";const n=document.createElement("input");n.type="radio",n.id=`text-color-${A}`,n.name="text-color",n.value=e;const r=document.createElement("label");r.className="color-box",r.setAttribute("for",`text-color-${A}`),r.style.backgroundColor=e,r.setAttribute("data-tile-color",e),t.appendChild(n),t.appendChild(r),this.container.appendChild(t),t.onclick=A=>{A.preventDefault();const t=globalThis.selectedComponent;if(!t)return;const r=t.find("path")[0];r&&r.addAttributes({fill:e}),t.addStyle({color:e}),globalThis.tileMapper.updateTile(t.parent().getId(),"Color",e),n.checked=!0}}))}render(A){A.appendChild(this.container)}}class ze{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("text-alignment");const A=document.createElement("div");A.classList.add("align-item"),A.innerHTML='\n            <input type="radio" id="tile-left"\n                name="alignment" value="left" />\n            <label for="tile-left" class="fas fa-align-left">\n            </label>\n        ';const e=document.createElement("div");e.classList.add("align-item"),e.innerHTML='\n            <input type="radio" id="tile-center"\n                     name="alignment" value="center" />\n            <label for="tile-center">\n                <svg xmlns="http://www.w3.org/2000/svg"\n                width="12.7" height="14.626"\n                viewBox="0 0 12.7 14.626">\n                <path id="Group_2344-converted"\n                    data-name="Group 2344-converted"\n                    d="M5.863,1.868V3.736L5.031,2.9,4.2,2.073l-.336.341-.336.342,1.411,1.41L6.35,5.577,7.758,4.17,9.165,2.762l-.333-.333L8.5,2.1l-.831.817-.83.817V0H5.863V1.868M0,7.313v.794H12.7V6.519H0v.794m4.937,3.149-1.4,1.4.333.333.334.333.83-.816.831-.817v3.729h.974V10.89l.832.832.831.832.336-.342.336-.341L7.766,10.465c-.773-.773-1.41-1.406-1.416-1.406s-.642.631-1.413,1.4"\n                    fill-rule="evenodd" fill="#696969" />\n                </svg>\n            </label>\n        ',A.onclick=A=>{A.preventDefault();const e=document.getElementById("tile-left"),t=globalThis.selectedComponent;if(!t)return;t.addStyle({"justify-content":"start","align-items":"start"});const n=t.find(".tile-title")[0];n&&n.addStyle({"text-align":"left"}),globalThis.tileMapper.updateTile(t.parent().getId(),"Align","left"),e.checked=!0},e.onclick=A=>{A.preventDefault();const e=document.getElementById("tile-center"),t=globalThis.selectedComponent;if(!t)return;t.addStyle({"justify-content":"center","align-items":"center"});const n=t.find(".tile-title")[0];n&&n.addStyle({"text-align":"center"}),globalThis.tileMapper.updateTile(t.parent().getId(),"Align","center"),e.checked=!0},this.container.appendChild(A),this.container.appendChild(e)}render(A){A.appendChild(this.container)}}class Ye{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("title-style");const A=new Xe,e=new ze;A.render(this.container),e.render(this.container)}render(A){A.appendChild(this.container)}}class At{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="sidebar-section title-section";const A=new Ze,e=new Ye;A.render(this.container),e.render(this.container)}render(A){A.appendChild(this.container)}}class et{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.id="menu-page-section";const A=new _e,e=new We,t=new At,n=new RA;A.render(this.container),e.render(this.container),t.render(this.container),n.render(this.container)}render(A){A.appendChild(this.container)}}class tt{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="tb-tab-content active-tab",this.container.id="pages-content",(new et).render(this.container)}render(A){A.appendChild(this.container)}}const nt={Templates:[{Id:"template-one",Rows:[{Id:"8024f98a-fef5-410c-8350-916b7394862e",Tiles:[{Id:"MQhNnVTdyWtKhTq",Name:"Title",Text:"Title",Color:"#000000",Align:"center",Icon:"",BGColor:"",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}}]},{Id:"ZngzLIvl20250326202112011",Tiles:[{Id:"cBggkiXC20250326202112011",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"FjjiLxOp20250326202113039",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"qnDgmZMJ20250326202115737",Tiles:[{Id:"vWMSlmsk20250326202115736",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"hGqxooDx20250326202118005",Tiles:[{Id:"jHltKWiP20250326202118005",Name:"Title",Text:"Title",Color:"#333333",Align:"center",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"MyHZFUgV20250326202119203",Name:"Title",Text:"Title",Color:"#333333",Align:"center",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"ilvtXnXw20250326202119576",Name:"Title",Text:"Title",Color:"#333333",Align:"center",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]}]},{Id:"template-two",Rows:[{Id:"8024f98a-fef5-410c-8350-916b7394862e",Tiles:[{Id:"MQhNnVTdyWtKhTq",Name:"Title",Text:"Title",Color:"#000000",Align:"center",Icon:"",BGColor:"",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}}]},{Id:"hGqxooDx20250326202118005",Tiles:[{Id:"jHltKWiP20250326202118005",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"ZvCzVboB20250326202531961",Tiles:[{Id:"ipSbryyM20250326202531961",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]}]},{Id:"template-three",Rows:[{Id:"8024f98a-fef5-410c-8350-916b7394862e",Tiles:[{Id:"MQhNnVTdyWtKhTq",Name:"Title",Text:"Title",Color:"#000000",Align:"left",Icon:"",BGColor:"",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}},{Id:"ntcFxRKO20250326202614640",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"hGqxooDx20250326202118005",Tiles:[{Id:"jHltKWiP20250326202118005",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"ZvCzVboB20250326202531961",Tiles:[{Id:"ipSbryyM20250326202531961",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"pbaPLIje20250326202617562",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"yCtmNReZ20250326202618523",Tiles:[{Id:"dgXzpgXE20250326202618523",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"omnlZjhw20250326202619269",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]}]},{Id:"template-four",Rows:[{Id:"8024f98a-fef5-410c-8350-916b7394862e",Tiles:[{Id:"MQhNnVTdyWtKhTq",Name:"Title",Text:"Title",Color:"#000000",Align:"left",Icon:"",BGColor:"",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}}]},{Id:"ZvCzVboB20250326202531961",Tiles:[{Id:"ipSbryyM20250326202531961",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"pbaPLIje20250326202617562",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"yCtmNReZ20250326202618523",Tiles:[{Id:"dgXzpgXE20250326202618523",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"omnlZjhw20250326202619269",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]}]}]};class rt{constructor(A,e,t){this.pageId=A,this.editor=e,this.templateId=t,this.init()}init(){return A=this,e=void 0,n=function*(){var A;const e=null===(A=nt.Templates.find((A=>A.Id===this.templateId)))||void 0===A?void 0:A.Rows,t=(new VA).getPages().find((A=>A.PageId===this.pageId));if(t){const A=this.getUpdatedPageData(e,t);this.editor.DomComponents.clear(),this.applyTemplate(A)}},new((t=void 0)||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}));var A,e,t,n}getUpdatedPageData(A,e){const t=JSON.parse(JSON.stringify(A));let n=JSON.parse(JSON.stringify(e));return n.PageMenuStructure.Rows=t,n=JSON.parse(JSON.stringify(n)),n}applyTemplate(A){const e=new XA(A).generateHTML();this.editor.setComponents(e),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(A))}}class it{constructor(A){this.templateList=document.createElement("div"),this.templateList.id="page-templates",A.forEach(((A,e)=>{const t=document.createElement("div");t.className="page-template-wrapper",t.id=A.id;const n=document.createElement("div");n.className="page-template-block-number";const r=document.createElement("div");r.className="page-template-block",r.title=PA.t("sidebar.templates.click_to_add_template");const i=document.createElement("div"),s=document.createElement("img");s.style.width="100%",s.style.height="100%",s.src=A.image,i.appendChild(s),r.appendChild(i),n.innerHTML=`${e+1}`,t.appendChild(n),t.appendChild(r),t.addEventListener("click",(A=>{A.preventDefault();const e=globalThis.activeEditor,n=globalThis.pageData;if(!e&&!(null==n?void 0:n.PageId))return void new ie("error",PA.t("messages.error.no_active_page"));if(!n||"Menu"!==n.PageType)return void new ie("error",PA.t("messages.error.templates_on_menu_pages"));const r=PA.t("sidebar.templates.confirmation_title"),i=PA.t("sidebar.templates.confirmation_message");new Se(i,r,(()=>{return A=this,r=void 0,s=function*(){new rt(n.PageId,e,t.id)},new((i=void 0)||(i=Promise))((function(e,t){function n(A){try{a(s.next(A))}catch(A){t(A)}}function o(A){try{a(s.throw(A))}catch(A){t(A)}}function a(A){var t;A.done?e(A.value):(t=A.value,t instanceof i?t:new i((function(A){A(t)}))).then(n,o)}a((s=s.apply(A,r||[])).next())}));var A,r,i,s})).render(document.body)})),this.templateList.appendChild(t)}))}render(A){A.appendChild(this.templateList)}}class st{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="tb-tab-content active-tab",this.container.id="templates-content",this.container.style.display="none";const A=document.createElement("div");A.className="sidebar-section",A.id="page-templates",new it([{id:"template-one",image:"/Resources/UCGrapes1/src/images/template-1.png"},{id:"template-two",image:"/Resources/UCGrapes1/src/images/template-2.png"},{id:"template-three",image:"/Resources/UCGrapes1/src/images/template-3.png"},{id:"template-four",image:"/Resources/UCGrapes1/src/images/template-4.png"}]).render(A),this.container.appendChild(A)}render(A){A.appendChild(this.container)}}class ot{constructor(){this.container=document.getElementById("tools-section"),this.init()}init(){const A=new Pe,e=new tt,t=new st;A.render(this.container),e.render(this.container),t.render(this.container)}render(A){A.appendChild(this.container)}}class at{constructor(A){this.activeFilter=null,this.debugResults=A,this.container=document.createElement("div"),this.container.classList.add("tb_debug_dashboard")}debugSummary(){const A=document.createElement("div");A.classList.add("tb_debug_summary");const e=this.createSummaryItem(this.debugResults.Summary.TotalUrls,`${PA.t("navbar.debug.total_urls")}`,!0),t=this.createSummaryItem(this.debugResults.Summary.SuccessCount,`${PA.t("navbar.debug.total_successful")}`),n=this.createSummaryItem(this.debugResults.Summary.FailureCount,`${PA.t("navbar.debug.total_failed")}`);return A.appendChild(e),A.appendChild(t),A.appendChild(n),A}createSummaryItem(A,e,t=!1){const n=document.createElement("div");return n.classList.add("tb_debug_summary_item"),t&&n.classList.add("active"),n.innerHTML=`\n            <h3>${parseFloat(A).toString()}</h3>\n            <p>${e}</p>\n        `,n.addEventListener("click",(()=>{this.container.querySelectorAll(".tb_debug_summary_item").forEach((A=>A.classList.remove("active"))),n.classList.add("active"),this.activeFilter=e===`${PA.t("navbar.debug.total_urls")}`?null:e,this.filterPageSections()})),n}filterPageSections(){this.container.querySelectorAll(".tb_debug_page-section").forEach((A=>{const e=A.querySelector(".tb_debug_url-list");if(!e)return;const t=e.querySelectorAll(".tb_debug_url-item");let n=!1;t.forEach((A=>{const e=A.querySelector(".tb_debug_url-status"),t=this.shouldShowUrlItem(e);A.classList.toggle("hidden",!t),t&&(n=!0)})),A.classList.toggle("hidden",!n)}))}shouldShowUrlItem(A){var e,t;return!A||null===this.activeFilter||(this.activeFilter===`${PA.t("navbar.debug.total_successful")}`?A.classList.contains("tb_debug_status-200"):this.activeFilter!==`${PA.t("navbar.debug.total_failed")}`||Number(null===(e=A.textContent)||void 0===e?void 0:e.split(" ")[0])>=400||0==Number(null===(t=A.textContent)||void 0===t?void 0:t.split(" ")[0]))}debugPageSections(){const A=document.createElement("div");return A.classList.add("tb_debug_page-sections"),this.debugResults.Pages.forEach((e=>{const t=this.debugPageSection(e);A.appendChild(t)})),A}debugPageSection(A){const e=document.createElement("div");e.classList.add("tb_debug_page-section");const t=document.createElement("div");t.classList.add("tb_debug_page-title"),t.innerText=A.Page,e.appendChild(t);const n=this.createUrlList(A.UrlList);return e.appendChild(n),e}createUrlList(A){const e=document.createElement("div");return e.classList.add("tb_debug_url-list"),A.forEach(((A,t)=>{const n=this.createUrlItem(A);e.appendChild(n)})),e}createUrlItem(A){const e=document.createElement("div");return e.classList.add("tb_debug_url-item"),e.innerHTML=`\n            <details>\n                <summary class="tb_debug_url-header">\n                    <div class="tb_debug_url-text">${y(A.Url,70)}</div>\n                    <div class="tb_debug_url-status tb_debug_status-${A.StatusCode}">${A.StatusCode} ${y(A.StatusMessage,10)}</div>\n                </summary>\n                <div class="tb_debug_details-content">\n                    <strong>${PA.t("navbar.debug.full_url")}:</strong> ${A.Url}\n                    <br><strong>${PA.t("navbar.debug.status_code")}:</strong> ${A.StatusCode}\n                    <br><strong>${PA.t("navbar.debug.status_message")}:</strong> ${A.StatusMessage}\n                    ${A.StatusCode>=400||0==A.StatusCode?`${this.getAffectedTiles(A)}`:""}\n                </div>\n            </details>\n        `,e}getAffectedTiles(A){return"Tile"===A.AffectedType?`<br><strong>${PA.t("navbar.debug.affected_tile")}:</strong> <div class="tb_debug-badge">${A.AffectedName}</div>`:"Cta"===A.AffectedType?`<br><strong>${PA.t("navbar.debug.affected_cta")}: </strong><div class="tb_debug-badge">${A.AffectedName}</div>`:"Content"===A.AffectedType?`<br><strong>${PA.t("navbar.debug.affected_content")}: </strong><div class="tb_debug-badge">${A.AffectedName}</div>`:""}buildDebugUI(){return this.container.appendChild(this.debugSummary()),this.container.appendChild(this.debugPageSections()),this.filterPageSections(),this.container}}var lt=function(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))};class ct{constructor(){this.appVersions=new VA}init(){return lt(this,void 0,void 0,(function*(){const A=yield this.getUrls();this.debugProcess(A)}))}debugProcess(A){return lt(this,void 0,void 0,(function*(){let e;try{const t=new s,n=yield t.debugApp(A);n&&(e=n.DebugResults)}catch(A){console.error(A)}finally{this.displayResults(e)}}))}getUrls(){return lt(this,void 0,void 0,(function*(){var A,e,t,n;let r=[];const i=yield this.appVersions.getActiveVersion(),s=null==i?void 0:i.Pages;for(const i of s){let o=[];const a=null===(A=i.PageMenuStructure)||void 0===A?void 0:A.Rows;if(a)for(const A of a){const t=A.Tiles;if(t)for(const A of t)(null===(e=A.Action)||void 0===e?void 0:e.ObjectUrl)&&o.push({url:A.Action.ObjectUrl,affectedType:"Tile",affectedName:A.Name||"Unnamed Tile"}),A.BGImageUrl&&o.push({url:A.BGImageUrl,affectedType:"Tile",affectedName:A.Name||"Unnamed Tile"})}const l=null===(t=i.PageContentStructure)||void 0===t?void 0:t.Content;if(l)for(const A of l)"Image"===A.ContentType&&A.ContentValue&&o.push({url:A.ContentValue,affectedType:"Content",affectedName:A.ContentType||"Unnamed Content"});const c=null===(n=i.PageContentStructure)||void 0===n?void 0:n.Cta;if(c)for(const A of c)A.CtaButtonImgUrl&&o.push({url:A.CtaButtonImgUrl,affectedType:"Cta",affectedName:A.CtaLabel||"Unnamed CTA"}),"SiteUrl"==A.CtaType&&A.CtaAction&&o.push({url:A.CtaAction,affectedType:"Cta",affectedName:A.CtaLabel||"Unnamed CTA"}),"Form"==A.CtaType&&A.CtaAction&&o.push({url:A.CtaAction,affectedType:"Cta",affectedName:A.CtaLabel||"Unnamed CTA"});o.length>0&&r.push({page:i.PageName||`Page-${s.indexOf(i)+1}`,urls:o})}return r}))}displayResults(A){const e=new at(A),t=document.getElementById("tb-debugging");t&&(t.innerHTML="",t.appendChild(e.buildDebugUI()))}}var ut=function(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))};class dt{constructor(){this.appVersionController=new He,this.toolboxManager=new pt}createButton(A,e,t){const n=document.createElement("button");return n.id=A,n.classList.add("tb-btn",e),n.innerText=t,n}openShareLinkModal(){return ut(this,void 0,void 0,(function*(){try{const A=this.createModalContent(),e=new ce({title:PA.t("navbar.share.modal_title"),width:"500px",body:A});e.open(),this.setupModalEventListeners(A,e)}catch(A){console.error("Error opening share link modal:",A)}}))}createModalContent(){const A=document.createElement("div"),e=document.createElement("p");e.innerText=PA.t("navbar.share.modal_description");const t=this.createLinkSection(),n=this.createSubmitSection(t);return A.appendChild(e),A.appendChild(t),A.appendChild(n),A}createLinkSection(){const A=document.createElement("div");A.classList.add("share-link-body"),A.style.display="flex",A.style.flexDirection="column",A.style.padding="10px";const e=document.createElement("a");return e.target="_blank",e.style.overflowWrap="break-word",e.style.maxWidth="100%",this.populateLinkAsync(e),A.appendChild(e),A}populateLinkAsync(A){return ut(this,void 0,void 0,(function*(){try{const e=yield this.appVersionController.generateShareLink();A.href=e,A.innerText=e}catch(e){A.innerText="Failed to generate link",A.href="#"}}))}createSubmitSection(A){const e=document.createElement("div");e.classList.add("popup-footer"),e.style.marginBottom="-12px";const t=this.createButton("copy-link","tb-btn-primary",PA.t("navbar.share.copy")),n=this.createButton("cancel","tb-btn-outline",PA.t("navbar.share.close"));return e.appendChild(t),e.appendChild(n),e}setupModalEventListeners(A,e){const t=A.querySelector("a"),n=A.querySelector("#copy-link"),r=A.querySelector("#cancel");n&&t&&n.addEventListener("click",(A=>ut(this,void 0,void 0,(function*(){A.preventDefault(),t.href&&((yield this.appVersionController.copyToClipboard(t.href))?setTimeout((()=>{e.close(),this.toolboxManager.openToastMessage(PA.t("navbar.share.copied"))}),500):(e.close(),console.error("Failed to copy link")))})))),r&&r.addEventListener("click",(A=>{A.preventDefault(),e.close()}))}}class ht{constructor(){this.appVersions=new VA,this.debugController=new ct,this.container=document.getElementById("navbar-buttons-left"),this.init()}init(){let A=new Ie("debug-button",PA.t("navbar.debug.label"),{labelId:"debug_button_label"});A.button.style.marginRight="10px",A.button.addEventListener("click",(A=>{A.preventDefault(),this.initialiseDebug(),this.debugController.init()}));let e=new Ie("open-mapping",PA.t("navbar.share.label"),{svg:'\n        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.293 2.293a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.414L13 5.414V15a1 1 0 1 1-2 0V5.414L9.707 6.707a1 1 0 0 1-1.414-1.414l3-3zM4 11a2 2 0 0 1 2-2h2a1 1 0 0 1 0 2H6v9h12v-9h-2a1 1 0 1 1 0-2h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-9z" fill="#0D0D0D"/>\n        </svg>\n    ',variant:"outline",labelId:"navbar_tree_label"});A.render(this.container),e.render(this.container),e.button.addEventListener("click",(A=>{A.preventDefault(),(new dt).openShareLinkModal()}))}initialiseDebug(){const A=document.createElement("div");A.id="tb-debugging",A.innerHTML='\n      <div class="tb_debug-spinner-container">\n          <div class="tb_debug-spinner"></div>\n      </div>\n      <p style="text-align: center; font-size: 14px; margin-top: 10px">Please wait while we are checking the urls...</p>\n    ',new ce({title:PA.t("navbar.debug.modal_title"),width:"800px",body:A}).open()}render(A){A.appendChild(this.container)}}var gt=function(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))};class pt{constructor(){this.appVersions=new VA,this.toolboxService=new s,this.pageAttacher=new oe}setUpNavBar(){this.autoSave();const A=document.getElementById("tb-navbar"),e=new ke;(new ht).render(A),e.render(A)}setUpSideBar(){const A=document.getElementById("tb-sidebar");(new ot).render(A)}setUpScrollButtons(){const A=document.getElementById("child-container"),e=document.querySelector(".navigator .page-navigator-left"),t=document.querySelector(".navigator .page-navigator-right"),n=()=>{e.style.display=A.scrollLeft>0?"none":"block";const n=A.scrollWidth-A.clientWidth;t.style.display=A.scrollLeft<n-5?"none":"block"};e.onclick=()=>{A.scrollLeft-=300},t.onclick=()=>{A.scrollLeft+=300},A.addEventListener("scroll",n),window.addEventListener("resize",n),n()}autoSave(){setInterval((()=>gt(this,void 0,void 0,(function*(){this.savePages()}))),1e4)}savePages(){return gt(this,arguments,void 0,(function*(A=!1){try{const A=new Map,e=yield this.appVersions.getActiveVersion(),t=e.Pages;return yield Promise.all(t.map((t=>gt(this,void 0,void 0,(function*(){const n=t.PageId,r=`data-${n}`,i=JSON.parse(localStorage.getItem(r)||"{}");let s=null;if("Menu"===t.PageType||"MyCare"===t.PageType||"MyLiving"===t.PageType||"MyService"===t.PageType?s="PageMenuStructure":"Content"!==t.PageType&&"Location"!==t.PageType&&"Reception"!==t.PageType||(s="PageContentStructure"),!s||!i[s])return;const o=JSON.stringify(i[s]);if(o!==("string"==typeof t.PageStructure?t.PageStructure:JSON.stringify(t.PageStructure))){const r={AppVersionId:e.AppVersionId,PageId:n,PageName:t.PageName,PageType:t.PageType,PageStructure:o};try{yield this.toolboxService.autoSavePage(r),A.set(n,o)}catch(A){throw console.error(`Failed to save page ${t.PageName}:`,A),A}}}))))),A}catch(A){throw console.error("Error saving pages:",A),A}}))}openToastMessage(A){const e=document.createElement("div");e.id="toast",e.textContent=A||"Your changes are saved",document.body.appendChild(e),setTimeout((()=>{e.style.opacity="1",e.style.transform="translateX(-50%) translateY(0)"}),100),setTimeout((()=>{e.style.opacity="0",setTimeout((()=>{document.body.removeChild(e)}),500)}),3e3)}unDoReDo(){const A=document.getElementById("undo"),e=document.getElementById("redo"),t=globalThis.activeEditor;if(!t)return void console.log("No editor found");const n=t.UndoManager;A.disabled=n.hasUndo(),A&&(A.onclick=A=>{A.preventDefault(),n.undo()}),e.disabled=n.hasRedo(),e&&(e.onclick=A=>{A.preventDefault(),n.redo()})}}const ft=function(A,e){return A===e||A!=A&&e!=e},Bt=function(A,e){for(var t=A.length;t--;)if(ft(A[t][0],e))return t;return-1};var mt=Array.prototype.splice;function wt(A){var e=-1,t=null==A?0:A.length;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}wt.prototype.clear=function(){this.__data__=[],this.size=0},wt.prototype.delete=function(A){var e=this.__data__,t=Bt(e,A);return!(t<0||(t==e.length-1?e.pop():mt.call(e,t,1),--this.size,0))},wt.prototype.get=function(A){var e=this.__data__,t=Bt(e,A);return t<0?void 0:e[t][1]},wt.prototype.has=function(A){return Bt(this.__data__,A)>-1},wt.prototype.set=function(A,e){var t=this.__data__,n=Bt(t,A);return n<0?(++this.size,t.push([A,e])):t[n][1]=e,this};const vt=wt,Ct="object"==typeof global&&global&&global.Object===Object&&global;var yt="object"==typeof self&&self&&self.Object===Object&&self;const bt=Ct||yt||Function("return this")(),Qt=bt.Symbol;var Ut=Object.prototype,Et=Ut.hasOwnProperty,Ft=Ut.toString,It=Qt?Qt.toStringTag:void 0;var xt=Object.prototype.toString;var Tt=Qt?Qt.toStringTag:void 0;const Lt=function(A){return null==A?void 0===A?"[object Undefined]":"[object Null]":Tt&&Tt in Object(A)?function(A){var e=Et.call(A,It),t=A[It];try{A[It]=void 0;var n=!0}catch(A){}var r=Ft.call(A);return n&&(e?A[It]=t:delete A[It]),r}(A):function(A){return xt.call(A)}(A)},Ht=function(A){var e=typeof A;return null!=A&&("object"==e||"function"==e)},St=function(A){if(!Ht(A))return!1;var e=Lt(A);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Nt=bt["__core-js_shared__"];var Ot,Mt=(Ot=/[^.]+$/.exec(Nt&&Nt.keys&&Nt.keys.IE_PROTO||""))?"Symbol(src)_1."+Ot:"";var Dt=Function.prototype.toString;const kt=function(A){if(null!=A){try{return Dt.call(A)}catch(A){}try{return A+""}catch(A){}}return""};var Pt=/^\[object .+?Constructor\]$/,_t=Function.prototype,Kt=Object.prototype,Rt=_t.toString,jt=Kt.hasOwnProperty,Vt=RegExp("^"+Rt.call(jt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const qt=function(A){return!(!Ht(A)||(e=A,Mt&&Mt in e))&&(St(A)?Vt:Pt).test(kt(A));var e},Gt=function(A,e){var t=function(A,e){return null==A?void 0:A[e]}(A,e);return qt(t)?t:void 0},$t=Gt(bt,"Map"),Jt=Gt(Object,"create");var Wt=Object.prototype.hasOwnProperty;var Zt=Object.prototype.hasOwnProperty;function Xt(A){var e=-1,t=null==A?0:A.length;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}Xt.prototype.clear=function(){this.__data__=Jt?Jt(null):{},this.size=0},Xt.prototype.delete=function(A){var e=this.has(A)&&delete this.__data__[A];return this.size-=e?1:0,e},Xt.prototype.get=function(A){var e=this.__data__;if(Jt){var t=e[A];return"__lodash_hash_undefined__"===t?void 0:t}return Wt.call(e,A)?e[A]:void 0},Xt.prototype.has=function(A){var e=this.__data__;return Jt?void 0!==e[A]:Zt.call(e,A)},Xt.prototype.set=function(A,e){var t=this.__data__;return this.size+=this.has(A)?0:1,t[A]=Jt&&void 0===e?"__lodash_hash_undefined__":e,this};const zt=Xt,Yt=function(A,e){var t,n,r=A.__data__;return("string"==(n=typeof(t=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?r["string"==typeof e?"string":"hash"]:r.map};function An(A){var e=-1,t=null==A?0:A.length;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}An.prototype.clear=function(){this.size=0,this.__data__={hash:new zt,map:new($t||vt),string:new zt}},An.prototype.delete=function(A){var e=Yt(this,A).delete(A);return this.size-=e?1:0,e},An.prototype.get=function(A){return Yt(this,A).get(A)},An.prototype.has=function(A){return Yt(this,A).has(A)},An.prototype.set=function(A,e){var t=Yt(this,A),n=t.size;return t.set(A,e),this.size+=t.size==n?0:1,this};const en=An;function tn(A){var e=this.__data__=new vt(A);this.size=e.size}tn.prototype.clear=function(){this.__data__=new vt,this.size=0},tn.prototype.delete=function(A){var e=this.__data__,t=e.delete(A);return this.size=e.size,t},tn.prototype.get=function(A){return this.__data__.get(A)},tn.prototype.has=function(A){return this.__data__.has(A)},tn.prototype.set=function(A,e){var t=this.__data__;if(t instanceof vt){var n=t.__data__;if(!$t||n.length<199)return n.push([A,e]),this.size=++t.size,this;t=this.__data__=new en(n)}return t.set(A,e),this.size=t.size,this};const nn=tn,rn=function(){try{var A=Gt(Object,"defineProperty");return A({},"",{}),A}catch(A){}}(),sn=function(A,e,t){"__proto__"==e&&rn?rn(A,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):A[e]=t},on=function(A,e,t){(void 0!==t&&!ft(A[e],t)||void 0===t&&!(e in A))&&sn(A,e,t)},an=function(A,e,t){for(var n=-1,r=Object(A),i=t(A),s=i.length;s--;){var o=i[++n];if(!1===e(r[o],o,r))break}return A};var ln="object"==typeof exports&&exports&&!exports.nodeType&&exports,cn=ln&&"object"==typeof module&&module&&!module.nodeType&&module,un=cn&&cn.exports===ln?bt.Buffer:void 0,dn=un?un.allocUnsafe:void 0;const hn=function(A,e){if(e)return A.slice();var t=A.length,n=dn?dn(t):new A.constructor(t);return A.copy(n),n},gn=bt.Uint8Array,pn=function(A){var e=new A.constructor(A.byteLength);return new gn(e).set(new gn(A)),e},fn=function(A,e){var t=e?pn(A.buffer):A.buffer;return new A.constructor(t,A.byteOffset,A.length)},Bn=function(A,e){var t=-1,n=A.length;for(e||(e=Array(n));++t<n;)e[t]=A[t];return e};var mn=Object.create;const wn=function(){function A(){}return function(e){if(!Ht(e))return{};if(mn)return mn(e);A.prototype=e;var t=new A;return A.prototype=void 0,t}}(),vn=function(A,e){return function(t){return A(e(t))}},Cn=vn(Object.getPrototypeOf,Object);var yn=Object.prototype;const bn=function(A){var e=A&&A.constructor;return A===("function"==typeof e&&e.prototype||yn)},Qn=function(A){return"function"!=typeof A.constructor||bn(A)?{}:wn(Cn(A))},Un=function(A){return null!=A&&"object"==typeof A},En=function(A){return Un(A)&&"[object Arguments]"==Lt(A)};var Fn=Object.prototype,In=Fn.hasOwnProperty,xn=Fn.propertyIsEnumerable;const Tn=En(function(){return arguments}())?En:function(A){return Un(A)&&In.call(A,"callee")&&!xn.call(A,"callee")},Ln=Array.isArray,Hn=function(A){return"number"==typeof A&&A>-1&&A%1==0&&A<=9007199254740991},Sn=function(A){return null!=A&&Hn(A.length)&&!St(A)};var Nn="object"==typeof exports&&exports&&!exports.nodeType&&exports,On=Nn&&"object"==typeof module&&module&&!module.nodeType&&module,Mn=On&&On.exports===Nn?bt.Buffer:void 0;const Dn=(Mn?Mn.isBuffer:void 0)||function(){return!1};var kn=Function.prototype,Pn=Object.prototype,_n=kn.toString,Kn=Pn.hasOwnProperty,Rn=_n.call(Object);var jn={};jn["[object Float32Array]"]=jn["[object Float64Array]"]=jn["[object Int8Array]"]=jn["[object Int16Array]"]=jn["[object Int32Array]"]=jn["[object Uint8Array]"]=jn["[object Uint8ClampedArray]"]=jn["[object Uint16Array]"]=jn["[object Uint32Array]"]=!0,jn["[object Arguments]"]=jn["[object Array]"]=jn["[object ArrayBuffer]"]=jn["[object Boolean]"]=jn["[object DataView]"]=jn["[object Date]"]=jn["[object Error]"]=jn["[object Function]"]=jn["[object Map]"]=jn["[object Number]"]=jn["[object Object]"]=jn["[object RegExp]"]=jn["[object Set]"]=jn["[object String]"]=jn["[object WeakMap]"]=!1;const Vn=function(A){return function(e){return A(e)}};var qn="object"==typeof exports&&exports&&!exports.nodeType&&exports,Gn=qn&&"object"==typeof module&&module&&!module.nodeType&&module,$n=Gn&&Gn.exports===qn&&Ct.process;const Jn=function(){try{return Gn&&Gn.require&&Gn.require("util").types||$n&&$n.binding&&$n.binding("util")}catch(A){}}();var Wn=Jn&&Jn.isTypedArray;const Zn=Wn?Vn(Wn):function(A){return Un(A)&&Hn(A.length)&&!!jn[Lt(A)]},Xn=function(A,e){if(("constructor"!==e||"function"!=typeof A[e])&&"__proto__"!=e)return A[e]};var zn=Object.prototype.hasOwnProperty;const Yn=function(A,e,t){var n=A[e];zn.call(A,e)&&ft(n,t)&&(void 0!==t||e in A)||sn(A,e,t)},Ar=function(A,e,t,n){var r=!t;t||(t={});for(var i=-1,s=e.length;++i<s;){var o=e[i],a=n?n(t[o],A[o],o,t,A):void 0;void 0===a&&(a=A[o]),r?sn(t,o,a):Yn(t,o,a)}return t};var er=/^(?:0|[1-9]\d*)$/;const tr=function(A,e){var t=typeof A;return!!(e=null==e?9007199254740991:e)&&("number"==t||"symbol"!=t&&er.test(A))&&A>-1&&A%1==0&&A<e};var nr=Object.prototype.hasOwnProperty;const rr=function(A,e){var t=Ln(A),n=!t&&Tn(A),r=!t&&!n&&Dn(A),i=!t&&!n&&!r&&Zn(A),s=t||n||r||i,o=s?function(A,e){for(var t=-1,n=Array(A);++t<A;)n[t]=e(t);return n}(A.length,String):[],a=o.length;for(var l in A)!e&&!nr.call(A,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||tr(l,a))||o.push(l);return o};var ir=Object.prototype.hasOwnProperty;const sr=function(A){if(!Ht(A))return function(A){var e=[];if(null!=A)for(var t in Object(A))e.push(t);return e}(A);var e=bn(A),t=[];for(var n in A)("constructor"!=n||!e&&ir.call(A,n))&&t.push(n);return t},or=function(A){return Sn(A)?rr(A,!0):sr(A)},ar=function(A,e,t,n,r,i,s){var o,a=Xn(A,t),l=Xn(e,t),c=s.get(l);if(c)on(A,t,c);else{var u=i?i(a,l,t+"",A,e,s):void 0,d=void 0===u;if(d){var h=Ln(l),g=!h&&Dn(l),p=!h&&!g&&Zn(l);u=l,h||g||p?Ln(a)?u=a:Un(o=a)&&Sn(o)?u=Bn(a):g?(d=!1,u=hn(l,!0)):p?(d=!1,u=fn(l,!0)):u=[]:function(A){if(!Un(A)||"[object Object]"!=Lt(A))return!1;var e=Cn(A);if(null===e)return!0;var t=Kn.call(e,"constructor")&&e.constructor;return"function"==typeof t&&t instanceof t&&_n.call(t)==Rn}(l)||Tn(l)?(u=a,Tn(a)?u=function(A){return Ar(A,or(A))}(a):Ht(a)&&!St(a)||(u=Qn(l))):d=!1}d&&(s.set(l,u),r(u,l,n,i,s),s.delete(l)),on(A,t,u)}},lr=function A(e,t,n,r,i){e!==t&&an(t,(function(s,o){if(i||(i=new nn),Ht(s))ar(e,t,o,n,A,r,i);else{var a=r?r(Xn(e,o),s,o+"",e,t,i):void 0;void 0===a&&(a=s),on(e,o,a)}}),or)},cr=function(A){return A};var ur=Math.max;const dr=rn?function(A,e){return rn(A,"toString",{configurable:!0,enumerable:!1,value:(t=e,function(){return t}),writable:!0});var t}:cr;var hr=Date.now;const gr=(pr=dr,fr=0,Br=0,function(){var A=hr(),e=16-(A-Br);if(Br=A,e>0){if(++fr>=800)return arguments[0]}else fr=0;return pr.apply(void 0,arguments)});var pr,fr,Br;const mr=function(A,e){return gr(function(A,e,t){return e=ur(void 0===e?A.length-1:e,0),function(){for(var n=arguments,r=-1,i=ur(n.length-e,0),s=Array(i);++r<i;)s[r]=n[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=n[r];return o[e]=t(s),function(A,e,t){switch(t.length){case 0:return A.call(e);case 1:return A.call(e,t[0]);case 2:return A.call(e,t[0],t[1]);case 3:return A.call(e,t[0],t[1],t[2])}return A.apply(e,t)}(A,this,o)}}(A,e,cr),A+"")},wr=(vr=function(A,e,t){lr(A,e,t)},mr((function(A,e){var t=-1,n=e.length,r=n>1?e[n-1]:void 0,i=n>2?e[2]:void 0;for(r=vr.length>3&&"function"==typeof r?(n--,r):void 0,i&&function(A,e,t){if(!Ht(t))return!1;var n=typeof e;return!!("number"==n?Sn(t)&&tr(e,t.length):"string"==n&&e in t)&&ft(t[e],A)}(e[0],e[1],i)&&(r=n<3?void 0:r,n=1),A=Object(A);++t<n;){var s=e[t];s&&vr(A,s,t)}return A})));var vr,Cr=(A=>(A[A.TYPE=3]="TYPE",A[A.LEVEL=12]="LEVEL",A[A.ATTRIBUTE=13]="ATTRIBUTE",A[A.BLOT=14]="BLOT",A[A.INLINE=7]="INLINE",A[A.BLOCK=11]="BLOCK",A[A.BLOCK_BLOT=10]="BLOCK_BLOT",A[A.INLINE_BLOT=6]="INLINE_BLOT",A[A.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",A[A.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",A[A.ANY=15]="ANY",A))(Cr||{});class yr{constructor(A,e,t={}){this.attrName=A,this.keyName=e;const n=Cr.TYPE&Cr.ATTRIBUTE;this.scope=null!=t.scope?t.scope&Cr.LEVEL|n:Cr.ATTRIBUTE,null!=t.whitelist&&(this.whitelist=t.whitelist)}static keys(A){return Array.from(A.attributes).map((A=>A.name))}add(A,e){return!!this.canAdd(A,e)&&(A.setAttribute(this.keyName,e),!0)}canAdd(A,e){return null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1)}remove(A){A.removeAttribute(this.keyName)}value(A){const e=A.getAttribute(this.keyName);return this.canAdd(A,e)&&e?e:""}}class br extends Error{constructor(A){super(A="[Parchment] "+A),this.message=A,this.name=this.constructor.name}}const Qr=class A{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(A,e=!1){if(null==A)return null;if(this.blots.has(A))return this.blots.get(A)||null;if(e){let t=null;try{t=A.parentNode}catch{return null}return this.find(t,e)}return null}create(e,t,n){const r=this.query(t);if(null==r)throw new br(`Unable to create ${t} blot`);const i=r,s=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:i.create(n),o=new i(e,s,n);return A.blots.set(o.domNode,o),o}find(e,t=!1){return A.find(e,t)}query(A,e=Cr.ANY){let t;return"string"==typeof A?t=this.types[A]||this.attributes[A]:A instanceof Text||A.nodeType===Node.TEXT_NODE?t=this.types.text:"number"==typeof A?A&Cr.LEVEL&Cr.BLOCK?t=this.types.block:A&Cr.LEVEL&Cr.INLINE&&(t=this.types.inline):A instanceof Element&&((A.getAttribute("class")||"").split(/\s+/).some((A=>(t=this.classes[A],!!t))),t=t||this.tags[A.tagName]),null==t?null:"scope"in t&&e&Cr.LEVEL&t.scope&&e&Cr.TYPE&t.scope?t:null}register(...A){return A.map((A=>{const e="blotName"in A,t="attrName"in A;if(!e&&!t)throw new br("Invalid definition");if(e&&"abstract"===A.blotName)throw new br("Cannot register abstract class");const n=e?A.blotName:t?A.attrName:void 0;return this.types[n]=A,t?"string"==typeof A.keyName&&(this.attributes[A.keyName]=A):e&&(A.className&&(this.classes[A.className]=A),A.tagName&&(Array.isArray(A.tagName)?A.tagName=A.tagName.map((A=>A.toUpperCase())):A.tagName=A.tagName.toUpperCase(),(Array.isArray(A.tagName)?A.tagName:[A.tagName]).forEach((e=>{(null==this.tags[e]||null==A.className)&&(this.tags[e]=A)})))),A}))}};Qr.blots=new WeakMap;let Ur=Qr;function Er(A,e){return(A.getAttribute("class")||"").split(/\s+/).filter((A=>0===A.indexOf(`${e}-`)))}const Fr=class extends yr{static keys(A){return(A.getAttribute("class")||"").split(/\s+/).map((A=>A.split("-").slice(0,-1).join("-")))}add(A,e){return!!this.canAdd(A,e)&&(this.remove(A),A.classList.add(`${this.keyName}-${e}`),!0)}remove(A){Er(A,this.keyName).forEach((e=>{A.classList.remove(e)})),0===A.classList.length&&A.removeAttribute("class")}value(A){const e=(Er(A,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(A,e)?e:""}};function Ir(A){const e=A.split("-"),t=e.slice(1).map((A=>A[0].toUpperCase()+A.slice(1))).join("");return e[0]+t}const xr=class extends yr{static keys(A){return(A.getAttribute("style")||"").split(";").map((A=>A.split(":")[0].trim()))}add(A,e){return!!this.canAdd(A,e)&&(A.style[Ir(this.keyName)]=e,!0)}remove(A){A.style[Ir(this.keyName)]="",A.getAttribute("style")||A.removeAttribute("style")}value(A){const e=A.style[Ir(this.keyName)];return this.canAdd(A,e)?e:""}},Tr=class{constructor(A){this.attributes={},this.domNode=A,this.build()}attribute(A,e){e?A.add(this.domNode,e)&&(null!=A.value(this.domNode)?this.attributes[A.attrName]=A:delete this.attributes[A.attrName]):(A.remove(this.domNode),delete this.attributes[A.attrName])}build(){this.attributes={};const A=Ur.find(this.domNode);if(null==A)return;const e=yr.keys(this.domNode),t=Fr.keys(this.domNode),n=xr.keys(this.domNode);e.concat(t).concat(n).forEach((e=>{const t=A.scroll.query(e,Cr.ATTRIBUTE);t instanceof yr&&(this.attributes[t.attrName]=t)}))}copy(A){Object.keys(this.attributes).forEach((e=>{const t=this.attributes[e].value(this.domNode);A.format(e,t)}))}move(A){this.copy(A),Object.keys(this.attributes).forEach((A=>{this.attributes[A].remove(this.domNode)})),this.attributes={}}values(){return Object.keys(this.attributes).reduce(((A,e)=>(A[e]=this.attributes[e].value(this.domNode),A)),{})}},Lr=class{constructor(A,e){this.scroll=A,this.domNode=e,Ur.blots.set(e,this),this.prev=null,this.next=null}static create(A){if(null==this.tagName)throw new br("Blot definition missing tagName");let e,t;return Array.isArray(this.tagName)?("string"==typeof A?(t=A.toUpperCase(),parseInt(t,10).toString()===t&&(t=parseInt(t,10))):"number"==typeof A&&(t=A),e="number"==typeof t?document.createElement(this.tagName[t-1]):t&&this.tagName.indexOf(t)>-1?document.createElement(t):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const A=this.domNode.cloneNode(!1);return this.scroll.create(A)}detach(){null!=this.parent&&this.parent.removeChild(this),Ur.blots.delete(this.domNode)}deleteAt(A,e){this.isolate(A,e).remove()}formatAt(A,e,t,n){const r=this.isolate(A,e);if(null!=this.scroll.query(t,Cr.BLOT)&&n)r.wrap(t,n);else if(null!=this.scroll.query(t,Cr.ATTRIBUTE)){const A=this.scroll.create(this.statics.scope);r.wrap(A),A.format(t,n)}}insertAt(A,e,t){const n=null==t?this.scroll.create("text",e):this.scroll.create(e,t),r=this.split(A);this.parent.insertBefore(n,r||void 0)}isolate(A,e){const t=this.split(A);if(null==t)throw new Error("Attempt to isolate at end");return t.split(e),t}length(){return 1}offset(A=this.parent){return null==this.parent||this===A?0:this.parent.children.offset(this)+this.parent.offset(A)}optimize(A){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(A,e){const t="string"==typeof A?this.scroll.create(A,e):A;return null!=this.parent&&(this.parent.insertBefore(t,this.next||void 0),this.remove()),t}split(A,e){return 0===A?this:this.next}update(A,e){}wrap(A,e){const t="string"==typeof A?this.scroll.create(A,e):A;if(null!=this.parent&&this.parent.insertBefore(t,this.next||void 0),"function"!=typeof t.appendChild)throw new br(`Cannot wrap ${A}`);return t.appendChild(this),t}};Lr.blotName="abstract";let Hr=Lr;const Sr=class extends Hr{static value(A){return!0}index(A,e){return this.domNode===A||this.domNode.compareDocumentPosition(A)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(A,e){let t=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return A>0&&(t+=1),[this.parent.domNode,t]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Sr.scope=Cr.INLINE_BLOT;const Nr=Sr;class Or{constructor(){this.head=null,this.tail=null,this.length=0}append(...A){if(this.insertBefore(A[0],null),A.length>1){const e=A.slice(1);this.append(...e)}}at(A){const e=this.iterator();let t=e();for(;t&&A>0;)A-=1,t=e();return t}contains(A){const e=this.iterator();let t=e();for(;t;){if(t===A)return!0;t=e()}return!1}indexOf(A){const e=this.iterator();let t=e(),n=0;for(;t;){if(t===A)return n;n+=1,t=e()}return-1}insertBefore(A,e){null!=A&&(this.remove(A),A.next=e,null!=e?(A.prev=e.prev,null!=e.prev&&(e.prev.next=A),e.prev=A,e===this.head&&(this.head=A)):null!=this.tail?(this.tail.next=A,A.prev=this.tail,this.tail=A):(A.prev=null,this.head=this.tail=A),this.length+=1)}offset(A){let e=0,t=this.head;for(;null!=t;){if(t===A)return e;e+=t.length(),t=t.next}return-1}remove(A){this.contains(A)&&(null!=A.prev&&(A.prev.next=A.next),null!=A.next&&(A.next.prev=A.prev),A===this.head&&(this.head=A.next),A===this.tail&&(this.tail=A.prev),this.length-=1)}iterator(A=this.head){return()=>{const e=A;return null!=A&&(A=A.next),e}}find(A,e=!1){const t=this.iterator();let n=t();for(;n;){const r=n.length();if(A<r||e&&A===r&&(null==n.next||0!==n.next.length()))return[n,A];A-=r,n=t()}return[null,0]}forEach(A){const e=this.iterator();let t=e();for(;t;)A(t),t=e()}forEachAt(A,e,t){if(e<=0)return;const[n,r]=this.find(A);let i=A-r;const s=this.iterator(n);let o=s();for(;o&&i<A+e;){const n=o.length();A>i?t(o,A-i,Math.min(e,i+n-A)):t(o,0,Math.min(n,A+e-i)),i+=n,o=s()}}map(A){return this.reduce(((e,t)=>(e.push(A(t)),e)),[])}reduce(A,e){const t=this.iterator();let n=t();for(;n;)e=A(e,n),n=t();return e}}function Mr(A,e){const t=e.find(A);if(t)return t;try{return e.create(A)}catch{const t=e.create(Cr.INLINE);return Array.from(A.childNodes).forEach((A=>{t.domNode.appendChild(A)})),A.parentNode&&A.parentNode.replaceChild(t.domNode,A),t.attach(),t}}const Dr=class A extends Hr{constructor(A,e){super(A,e),this.uiNode=null,this.build()}appendChild(A){this.insertBefore(A)}attach(){super.attach(),this.children.forEach((A=>{A.attach()}))}attachUI(e){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=e,A.uiClass&&this.uiNode.classList.add(A.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Or,Array.from(this.domNode.childNodes).filter((A=>A!==this.uiNode)).reverse().forEach((A=>{try{const e=Mr(A,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(A){if(A instanceof br)return;throw A}}))}deleteAt(A,e){if(0===A&&e===this.length())return this.remove();this.children.forEachAt(A,e,((A,e,t)=>{A.deleteAt(e,t)}))}descendant(e,t=0){const[n,r]=this.children.find(t);return null==e.blotName&&e(n)||null!=e.blotName&&n instanceof e?[n,r]:n instanceof A?n.descendant(e,r):[null,-1]}descendants(e,t=0,n=Number.MAX_VALUE){let r=[],i=n;return this.children.forEachAt(t,n,((t,n,s)=>{(null==e.blotName&&e(t)||null!=e.blotName&&t instanceof e)&&r.push(t),t instanceof A&&(r=r.concat(t.descendants(e,n,i))),i-=s})),r}detach(){this.children.forEach((A=>{A.detach()})),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach((t=>{e||this.statics.allowedChildren.some((A=>t instanceof A))||(t.statics.scope===Cr.BLOCK_BLOT?(null!=t.next&&this.splitAfter(t),null!=t.prev&&this.splitAfter(t.prev),t.parent.unwrap(),e=!0):t instanceof A?t.unwrap():t.remove())}))}formatAt(A,e,t,n){this.children.forEachAt(A,e,((A,e,r)=>{A.formatAt(e,r,t,n)}))}insertAt(A,e,t){const[n,r]=this.children.find(A);if(n)n.insertAt(r,e,t);else{const A=null==t?this.scroll.create("text",e):this.scroll.create(e,t);this.appendChild(A)}}insertBefore(A,e){null!=A.parent&&A.parent.children.remove(A);let t=null;this.children.insertBefore(A,e||null),A.parent=this,null!=e&&(t=e.domNode),(this.domNode.parentNode!==A.domNode||this.domNode.nextSibling!==t)&&this.domNode.insertBefore(A.domNode,t),A.attach()}length(){return this.children.reduce(((A,e)=>A+e.length()),0)}moveChildren(A,e){this.children.forEach((t=>{A.insertBefore(t,e)}))}optimize(A){if(super.optimize(A),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){const A=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(A)}else this.remove()}path(e,t=!1){const[n,r]=this.children.find(e,t),i=[[this,e]];return n instanceof A?i.concat(n.path(r,t)):(null!=n&&i.push([n,r]),i)}removeChild(A){this.children.remove(A)}replaceWith(e,t){const n="string"==typeof e?this.scroll.create(e,t):e;return n instanceof A&&this.moveChildren(n),super.replaceWith(n)}split(A,e=!1){if(!e){if(0===A)return this;if(A===this.length())return this.next}const t=this.clone();return this.parent&&this.parent.insertBefore(t,this.next||void 0),this.children.forEachAt(A,this.length(),((A,n,r)=>{const i=A.split(n,e);null!=i&&t.appendChild(i)})),t}splitAfter(A){const e=this.clone();for(;null!=A.next;)e.appendChild(A.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(A,e){const t=[],n=[];A.forEach((A=>{A.target===this.domNode&&"childList"===A.type&&(t.push(...A.addedNodes),n.push(...A.removedNodes))})),n.forEach((A=>{if(null!=A.parentNode&&"IFRAME"!==A.tagName&&document.body.compareDocumentPosition(A)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const e=this.scroll.find(A);null!=e&&(null==e.domNode.parentNode||e.domNode.parentNode===this.domNode)&&e.detach()})),t.filter((A=>A.parentNode===this.domNode&&A!==this.uiNode)).sort(((A,e)=>A===e?0:A.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1)).forEach((A=>{let e=null;null!=A.nextSibling&&(e=this.scroll.find(A.nextSibling));const t=Mr(A,this.scroll);(t.next!==e||null==t.next)&&(null!=t.parent&&t.parent.removeChild(this),this.insertBefore(t,e||void 0))})),this.enforceAllowedChildren()}};Dr.uiClass="";const kr=Dr,Pr=class A extends kr{static create(A){return super.create(A)}static formats(e,t){const n=t.query(A.blotName);if(null==n||e.tagName!==n.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(A,e){super(A,e),this.attributes=new Tr(this.domNode)}format(e,t){if(e!==this.statics.blotName||t){const A=this.scroll.query(e,Cr.INLINE);if(null==A)return;A instanceof yr?this.attributes.attribute(A,t):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t)}else this.children.forEach((e=>{e instanceof A||(e=e.wrap(A.blotName,!0)),this.attributes.copy(e)})),this.unwrap()}formats(){const A=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(A[this.statics.blotName]=e),A}formatAt(A,e,t,n){null!=this.formats()[t]||this.scroll.query(t,Cr.ATTRIBUTE)?this.isolate(A,e).format(t,n):super.formatAt(A,e,t,n)}optimize(e){super.optimize(e);const t=this.formats();if(0===Object.keys(t).length)return this.unwrap();const n=this.next;n instanceof A&&n.prev===this&&function(A,e){if(Object.keys(A).length!==Object.keys(e).length)return!1;for(const t in A)if(A[t]!==e[t])return!1;return!0}(t,n.formats())&&(n.moveChildren(this),n.remove())}replaceWith(A,e){const t=super.replaceWith(A,e);return this.attributes.copy(t),t}update(A,e){super.update(A,e),A.some((A=>A.target===this.domNode&&"attributes"===A.type))&&this.attributes.build()}wrap(e,t){const n=super.wrap(e,t);return n instanceof A&&this.attributes.move(n),n}};Pr.allowedChildren=[Pr,Nr],Pr.blotName="inline",Pr.scope=Cr.INLINE_BLOT,Pr.tagName="SPAN";const _r=Pr,Kr=class A extends kr{static create(A){return super.create(A)}static formats(e,t){const n=t.query(A.blotName);if(null==n||e.tagName!==n.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(A,e){super(A,e),this.attributes=new Tr(this.domNode)}format(e,t){const n=this.scroll.query(e,Cr.BLOCK);null!=n&&(n instanceof yr?this.attributes.attribute(n,t):e!==this.statics.blotName||t?t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t):this.replaceWith(A.blotName))}formats(){const A=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(A[this.statics.blotName]=e),A}formatAt(A,e,t,n){null!=this.scroll.query(t,Cr.BLOCK)?this.format(t,n):super.formatAt(A,e,t,n)}insertAt(A,e,t){if(null==t||null!=this.scroll.query(e,Cr.INLINE))super.insertAt(A,e,t);else{const n=this.split(A);if(null==n)throw new Error("Attempt to insertAt after block boundaries");{const A=this.scroll.create(e,t);n.parent.insertBefore(A,n)}}}replaceWith(A,e){const t=super.replaceWith(A,e);return this.attributes.copy(t),t}update(A,e){super.update(A,e),A.some((A=>A.target===this.domNode&&"attributes"===A.type))&&this.attributes.build()}};Kr.blotName="block",Kr.scope=Cr.BLOCK_BLOT,Kr.tagName="P",Kr.allowedChildren=[_r,Kr,Nr];const Rr=Kr,jr=class extends kr{checkMerge(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}deleteAt(A,e){super.deleteAt(A,e),this.enforceAllowedChildren()}formatAt(A,e,t,n){super.formatAt(A,e,t,n),this.enforceAllowedChildren()}insertAt(A,e,t){super.insertAt(A,e,t),this.enforceAllowedChildren()}optimize(A){super.optimize(A),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};jr.blotName="container",jr.scope=Cr.BLOCK_BLOT;const Vr=jr,qr=class extends Nr{static formats(A,e){}format(A,e){super.formatAt(0,this.length(),A,e)}formatAt(A,e,t,n){0===A&&e===this.length()?this.format(t,n):super.formatAt(A,e,t,n)}formats(){return this.statics.formats(this.domNode,this.scroll)}},Gr={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},$r=class extends kr{constructor(A,e){super(null,e),this.registry=A,this.scroll=this,this.build(),this.observer=new MutationObserver((A=>{this.update(A)})),this.observer.observe(this.domNode,Gr),this.attach()}create(A,e){return this.registry.create(this,A,e)}find(A,e=!1){const t=this.registry.find(A,e);return t?t.scroll===this?t:e?this.find(t.scroll.domNode.parentNode,!0):null:null}query(A,e=Cr.ANY){return this.registry.query(A,e)}register(...A){return this.registry.register(...A)}build(){null!=this.scroll&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(A,e){this.update(),0===A&&e===this.length()?this.children.forEach((A=>{A.remove()})):super.deleteAt(A,e)}formatAt(A,e,t,n){this.update(),super.formatAt(A,e,t,n)}insertAt(A,e,t){this.update(),super.insertAt(A,e,t)}optimize(A=[],e={}){super.optimize(e);const t=e.mutationsMap||new WeakMap;let n=Array.from(this.observer.takeRecords());for(;n.length>0;)A.push(n.pop());const r=(A,e=!0)=>{null==A||A===this||null!=A.domNode.parentNode&&(t.has(A.domNode)||t.set(A.domNode,[]),e&&r(A.parent))},i=A=>{t.has(A.domNode)&&(A instanceof kr&&A.children.forEach(i),t.delete(A.domNode),A.optimize(e))};let s=A;for(let e=0;s.length>0;e+=1){if(e>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(s.forEach((A=>{const e=this.find(A.target,!0);null!=e&&(e.domNode===A.target&&("childList"===A.type?(r(this.find(A.previousSibling,!1)),Array.from(A.addedNodes).forEach((A=>{const e=this.find(A,!1);r(e,!1),e instanceof kr&&e.children.forEach((A=>{r(A,!1)}))}))):"attributes"===A.type&&r(e.prev)),r(e))})),this.children.forEach(i),s=Array.from(this.observer.takeRecords()),n=s.slice();n.length>0;)A.push(n.pop())}}update(A,e={}){A=A||this.observer.takeRecords();const t=new WeakMap;A.map((A=>{const e=this.find(A.target,!0);return null==e?null:t.has(e.domNode)?(t.get(e.domNode).push(A),null):(t.set(e.domNode,[A]),e)})).forEach((A=>{null!=A&&A!==this&&t.has(A.domNode)&&A.update(t.get(A.domNode)||[],e)})),e.mutationsMap=t,t.has(this.domNode)&&super.update(t.get(this.domNode),e),this.optimize(A,e)}};$r.blotName="scroll",$r.defaultChild=Rr,$r.allowedChildren=[Rr,Vr],$r.scope=Cr.BLOCK_BLOT,$r.tagName="DIV";const Jr=$r,Wr=class A extends Nr{static create(A){return document.createTextNode(A)}static value(A){return A.data}constructor(A,e){super(A,e),this.text=this.statics.value(this.domNode)}deleteAt(A,e){this.domNode.data=this.text=this.text.slice(0,A)+this.text.slice(A+e)}index(A,e){return this.domNode===A?e:-1}insertAt(A,e,t){null==t?(this.text=this.text.slice(0,A)+e+this.text.slice(A),this.domNode.data=this.text):super.insertAt(A,e,t)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof A&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(A,e=!1){return[this.domNode,A]}split(A,e=!1){if(!e){if(0===A)return this;if(A===this.length())return this.next}const t=this.scroll.create(this.domNode.splitText(A));return this.parent.insertBefore(t,this.next||void 0),this.text=this.statics.value(this.domNode),t}update(A,e){A.some((A=>"characterData"===A.type&&A.target===this.domNode))&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Wr.blotName="text",Wr.scope=Cr.INLINE_BLOT;const Zr=Wr;var Xr=t(2660);const zr=vn(Object.keys,Object);var Yr=Object.prototype.hasOwnProperty;const Ai=function(A){return Sn(A)?rr(A):function(A){if(!bn(A))return zr(A);var e=[];for(var t in Object(A))Yr.call(A,t)&&"constructor"!=t&&e.push(t);return e}(A)},ei=function(){return[]};var ti=Object.prototype.propertyIsEnumerable,ni=Object.getOwnPropertySymbols;const ri=ni?function(A){return null==A?[]:(A=Object(A),function(A,e){for(var t=-1,n=null==A?0:A.length,r=0,i=[];++t<n;){var s=A[t];e(s,t,A)&&(i[r++]=s)}return i}(ni(A),(function(e){return ti.call(A,e)})))}:ei,ii=function(A,e){for(var t=-1,n=e.length,r=A.length;++t<n;)A[r+t]=e[t];return A},si=Object.getOwnPropertySymbols?function(A){for(var e=[];A;)ii(e,ri(A)),A=Cn(A);return e}:ei,oi=function(A,e,t){var n=e(A);return Ln(A)?n:ii(n,t(A))},ai=function(A){return oi(A,Ai,ri)},li=function(A){return oi(A,or,si)},ci=Gt(bt,"DataView"),ui=Gt(bt,"Promise"),di=Gt(bt,"Set"),hi=Gt(bt,"WeakMap");var gi="[object Map]",pi="[object Promise]",fi="[object Set]",Bi="[object WeakMap]",mi="[object DataView]",wi=kt(ci),vi=kt($t),Ci=kt(ui),yi=kt(di),bi=kt(hi),Qi=Lt;(ci&&Qi(new ci(new ArrayBuffer(1)))!=mi||$t&&Qi(new $t)!=gi||ui&&Qi(ui.resolve())!=pi||di&&Qi(new di)!=fi||hi&&Qi(new hi)!=Bi)&&(Qi=function(A){var e=Lt(A),t="[object Object]"==e?A.constructor:void 0,n=t?kt(t):"";if(n)switch(n){case wi:return mi;case vi:return gi;case Ci:return pi;case yi:return fi;case bi:return Bi}return e});const Ui=Qi;var Ei=Object.prototype.hasOwnProperty;var Fi=/\w*$/;var Ii=Qt?Qt.prototype:void 0,xi=Ii?Ii.valueOf:void 0;const Ti=function(A,e,t){var n,r,i,s=A.constructor;switch(e){case"[object ArrayBuffer]":return pn(A);case"[object Boolean]":case"[object Date]":return new s(+A);case"[object DataView]":return function(A,e){var t=e?pn(A.buffer):A.buffer;return new A.constructor(t,A.byteOffset,A.byteLength)}(A,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return fn(A,t);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(A);case"[object RegExp]":return(i=new(r=A).constructor(r.source,Fi.exec(r))).lastIndex=r.lastIndex,i;case"[object Symbol]":return n=A,xi?Object(xi.call(n)):{}}};var Li=Jn&&Jn.isMap;const Hi=Li?Vn(Li):function(A){return Un(A)&&"[object Map]"==Ui(A)};var Si=Jn&&Jn.isSet;const Ni=Si?Vn(Si):function(A){return Un(A)&&"[object Set]"==Ui(A)};var Oi="[object Arguments]",Mi="[object Function]",Di="[object Object]",ki={};ki[Oi]=ki["[object Array]"]=ki["[object ArrayBuffer]"]=ki["[object DataView]"]=ki["[object Boolean]"]=ki["[object Date]"]=ki["[object Float32Array]"]=ki["[object Float64Array]"]=ki["[object Int8Array]"]=ki["[object Int16Array]"]=ki["[object Int32Array]"]=ki["[object Map]"]=ki["[object Number]"]=ki[Di]=ki["[object RegExp]"]=ki["[object Set]"]=ki["[object String]"]=ki["[object Symbol]"]=ki["[object Uint8Array]"]=ki["[object Uint8ClampedArray]"]=ki["[object Uint16Array]"]=ki["[object Uint32Array]"]=!0,ki["[object Error]"]=ki[Mi]=ki["[object WeakMap]"]=!1;const Pi=function A(e,t,n,r,i,s){var o,a=1&t,l=2&t,c=4&t;if(n&&(o=i?n(e,r,i,s):n(e)),void 0!==o)return o;if(!Ht(e))return e;var u=Ln(e);if(u){if(o=function(A){var e=A.length,t=new A.constructor(e);return e&&"string"==typeof A[0]&&Ei.call(A,"index")&&(t.index=A.index,t.input=A.input),t}(e),!a)return Bn(e,o)}else{var d=Ui(e),h=d==Mi||"[object GeneratorFunction]"==d;if(Dn(e))return hn(e,a);if(d==Di||d==Oi||h&&!i){if(o=l||h?{}:Qn(e),!a)return l?function(A,e){return Ar(A,si(A),e)}(e,function(A,e){return A&&Ar(e,or(e),A)}(o,e)):function(A,e){return Ar(A,ri(A),e)}(e,function(A,e){return A&&Ar(e,Ai(e),A)}(o,e))}else{if(!ki[d])return i?e:{};o=Ti(e,d,a)}}s||(s=new nn);var g=s.get(e);if(g)return g;s.set(e,o),Ni(e)?e.forEach((function(r){o.add(A(r,t,n,r,e,s))})):Hi(e)&&e.forEach((function(r,i){o.set(i,A(r,t,n,i,e,s))}));var p=u?void 0:(c?l?li:ai:l?or:Ai)(e);return function(A,e){for(var t=-1,n=null==A?0:A.length;++t<n&&!1!==e(A[t],t,A););}(p||e,(function(r,i){p&&(r=e[i=r]),Yn(o,i,A(r,t,n,i,e,s))})),o},_i=function(A){return Pi(A,5)};function Ki(A){var e=-1,t=null==A?0:A.length;for(this.__data__=new en;++e<t;)this.add(A[e])}Ki.prototype.add=Ki.prototype.push=function(A){return this.__data__.set(A,"__lodash_hash_undefined__"),this},Ki.prototype.has=function(A){return this.__data__.has(A)};const Ri=Ki,ji=function(A,e){for(var t=-1,n=null==A?0:A.length;++t<n;)if(e(A[t],t,A))return!0;return!1},Vi=function(A,e,t,n,r,i){var s=1&t,o=A.length,a=e.length;if(o!=a&&!(s&&a>o))return!1;var l=i.get(A),c=i.get(e);if(l&&c)return l==e&&c==A;var u=-1,d=!0,h=2&t?new Ri:void 0;for(i.set(A,e),i.set(e,A);++u<o;){var g=A[u],p=e[u];if(n)var f=s?n(p,g,u,e,A,i):n(g,p,u,A,e,i);if(void 0!==f){if(f)continue;d=!1;break}if(h){if(!ji(e,(function(A,e){if(s=e,!h.has(s)&&(g===A||r(g,A,t,n,i)))return h.push(e);var s}))){d=!1;break}}else if(g!==p&&!r(g,p,t,n,i)){d=!1;break}}return i.delete(A),i.delete(e),d},qi=function(A){var e=-1,t=Array(A.size);return A.forEach((function(A,n){t[++e]=[n,A]})),t},Gi=function(A){var e=-1,t=Array(A.size);return A.forEach((function(A){t[++e]=A})),t};var $i=Qt?Qt.prototype:void 0,Ji=$i?$i.valueOf:void 0;var Wi=Object.prototype.hasOwnProperty;var Zi="[object Arguments]",Xi="[object Array]",zi="[object Object]",Yi=Object.prototype.hasOwnProperty;const As=function(A,e,t,n,r,i){var s=Ln(A),o=Ln(e),a=s?Xi:Ui(A),l=o?Xi:Ui(e),c=(a=a==Zi?zi:a)==zi,u=(l=l==Zi?zi:l)==zi,d=a==l;if(d&&Dn(A)){if(!Dn(e))return!1;s=!0,c=!1}if(d&&!c)return i||(i=new nn),s||Zn(A)?Vi(A,e,t,n,r,i):function(A,e,t,n,r,i,s){switch(t){case"[object DataView]":if(A.byteLength!=e.byteLength||A.byteOffset!=e.byteOffset)return!1;A=A.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(A.byteLength!=e.byteLength||!i(new gn(A),new gn(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ft(+A,+e);case"[object Error]":return A.name==e.name&&A.message==e.message;case"[object RegExp]":case"[object String]":return A==e+"";case"[object Map]":var o=qi;case"[object Set]":var a=1&n;if(o||(o=Gi),A.size!=e.size&&!a)return!1;var l=s.get(A);if(l)return l==e;n|=2,s.set(A,e);var c=Vi(o(A),o(e),n,r,i,s);return s.delete(A),c;case"[object Symbol]":if(Ji)return Ji.call(A)==Ji.call(e)}return!1}(A,e,a,t,n,r,i);if(!(1&t)){var h=c&&Yi.call(A,"__wrapped__"),g=u&&Yi.call(e,"__wrapped__");if(h||g){var p=h?A.value():A,f=g?e.value():e;return i||(i=new nn),r(p,f,t,n,i)}}return!!d&&(i||(i=new nn),function(A,e,t,n,r,i){var s=1&t,o=ai(A),a=o.length;if(a!=ai(e).length&&!s)return!1;for(var l=a;l--;){var c=o[l];if(!(s?c in e:Wi.call(e,c)))return!1}var u=i.get(A),d=i.get(e);if(u&&d)return u==e&&d==A;var h=!0;i.set(A,e),i.set(e,A);for(var g=s;++l<a;){var p=A[c=o[l]],f=e[c];if(n)var B=s?n(f,p,c,e,A,i):n(p,f,c,A,e,i);if(!(void 0===B?p===f||r(p,f,t,n,i):B)){h=!1;break}g||(g="constructor"==c)}if(h&&!g){var m=A.constructor,w=e.constructor;m==w||!("constructor"in A)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof w&&w instanceof w||(h=!1)}return i.delete(A),i.delete(e),h}(A,e,t,n,r,i))},es=function A(e,t,n,r,i){return e===t||(null==e||null==t||!Un(e)&&!Un(t)?e!=e&&t!=t:As(e,t,n,r,A,i))},ts=function(A,e){return es(A,e)};class ns extends qr{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}ns.blotName="break",ns.tagName="BR";const rs=ns;class is extends Zr{}const ss={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function os(A){return A.replace(/[&<>"']/g,(A=>ss[A]))}class as extends _r{static allowedChildren=[as,rs,qr,is];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(A,e){const t=as.order.indexOf(A),n=as.order.indexOf(e);return t>=0||n>=0?t-n:A===e?0:A<e?-1:1}formatAt(A,e,t,n){if(as.compare(this.statics.blotName,t)<0&&this.scroll.query(t,Cr.BLOT)){const r=this.isolate(A,e);n&&r.wrap(t,n)}else super.formatAt(A,e,t,n)}optimize(A){if(super.optimize(A),this.parent instanceof as&&as.compare(this.statics.blotName,this.parent.statics.blotName)>0){const A=this.parent.isolate(this.offset(),this.length());this.moveChildren(A),A.wrap(this)}}}const ls=as;class cs extends Rr{cache={};delta(){return null==this.cache.delta&&(this.cache.delta=ds(this)),this.cache.delta}deleteAt(A,e){super.deleteAt(A,e),this.cache={}}formatAt(A,e,t,n){e<=0||(this.scroll.query(t,Cr.BLOCK)?A+e===this.length()&&this.format(t,n):super.formatAt(A,Math.min(e,this.length()-A-1),t,n),this.cache={})}insertAt(A,e,t){if(null!=t)return super.insertAt(A,e,t),void(this.cache={});if(0===e.length)return;const n=e.split("\n"),r=n.shift();r.length>0&&(A<this.length()-1||null==this.children.tail?super.insertAt(Math.min(A,this.length()-1),r):this.children.tail.insertAt(this.children.tail.length(),r),this.cache={});let i=this;n.reduce(((A,e)=>(i=i.split(A,!0),i.insertAt(0,e),e.length)),A+r.length)}insertBefore(A,e){const{head:t}=this.children;super.insertBefore(A,e),t instanceof rs&&t.remove(),this.cache={}}length(){return null==this.cache.length&&(this.cache.length=super.length()+1),this.cache.length}moveChildren(A,e){super.moveChildren(A,e),this.cache={}}optimize(A){super.optimize(A),this.cache={}}path(A){return super.path(A,!0)}removeChild(A){super.removeChild(A),this.cache={}}split(A){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&(0===A||A>=this.length()-1)){const e=this.clone();return 0===A?(this.parent.insertBefore(e,this),this):(this.parent.insertBefore(e,this.next),e)}const t=super.split(A,e);return this.cache={},t}}cs.blotName="block",cs.tagName="P",cs.defaultChild=rs,cs.allowedChildren=[rs,ls,qr,is];class us extends qr{attach(){super.attach(),this.attributes=new Tr(this.domNode)}delta(){return(new Xr).insert(this.value(),{...this.formats(),...this.attributes.values()})}format(A,e){const t=this.scroll.query(A,Cr.BLOCK_ATTRIBUTE);null!=t&&this.attributes.attribute(t,e)}formatAt(A,e,t,n){this.format(t,n)}insertAt(A,e,t){if(null!=t)return void super.insertAt(A,e,t);const n=e.split("\n"),r=n.pop(),i=n.map((A=>{const e=this.scroll.create(cs.blotName);return e.insertAt(0,A),e})),s=this.split(A);i.forEach((A=>{this.parent.insertBefore(A,s)})),r&&this.parent.insertBefore(this.scroll.create("text",r),s)}}function ds(A){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return A.descendants(Nr).reduce(((A,t)=>0===t.length()?A:A.insert(t.value(),hs(t,{},e))),new Xr).insert("\n",hs(A))}function hs(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==A?e:("formats"in A&&"function"==typeof A.formats&&(e={...e,...A.formats()},t&&delete e["code-token"]),null==A.parent||"scroll"===A.parent.statics.blotName||A.parent.statics.scope!==A.statics.scope?e:hs(A.parent,e,t))}us.scope=Cr.BLOCK_BLOT;class gs extends qr{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\ufeff";static value(){}constructor(A,e,t){super(A,e),this.selection=t,this.textNode=document.createTextNode(gs.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){null!=this.parent&&this.parent.removeChild(this)}format(A,e){if(0!==this.savedLength)return void super.format(A,e);let t=this,n=0;for(;null!=t&&t.statics.scope!==Cr.BLOCK_BLOT;)n+=t.offset(t.parent),t=t.parent;null!=t&&(this.savedLength=gs.CONTENTS.length,t.optimize(),t.formatAt(n,gs.CONTENTS.length,A,e),this.savedLength=0)}index(A,e){return A===this.textNode?0:super.index(A,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||null==this.parent)return null;const A=this.selection.getNativeRange();for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof is?this.prev:null,t=e?e.length():0,n=this.next instanceof is?this.next:null,r=n?n.text:"",{textNode:i}=this,s=i.data.split(gs.CONTENTS).join("");let o;if(i.data=gs.CONTENTS,e)o=e,(s||n)&&(e.insertAt(e.length(),s+r),n&&n.remove());else if(n)o=n,n.insertAt(0,s);else{const A=document.createTextNode(s);o=this.scroll.create(A),this.parent.insertBefore(o,this)}if(this.remove(),A){const r=(A,r)=>e&&A===e.domNode?r:A===i?t+r-1:n&&A===n.domNode?t+s.length+r:null,a=r(A.start.node,A.start.offset),l=r(A.end.node,A.end.offset);if(null!==a&&null!==l)return{startNode:o.domNode,startOffset:a,endNode:o.domNode,endOffset:l}}return null}update(A,e){if(A.some((A=>"characterData"===A.type&&A.target===this.textNode))){const A=this.restore();A&&(e.range=A)}}optimize(A){super.optimize(A);let{parent:e}=this;for(;e;){if("A"===e.domNode.tagName){this.savedLength=gs.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}}const ps=gs;var fs=t(3697);const Bs=new WeakMap,ms=["error","warn","log","info"];let ws="warn";function vs(A){if(ws&&ms.indexOf(A)<=ms.indexOf(ws)){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];console[A](...t)}}function Cs(A){return ms.reduce(((e,t)=>(e[t]=vs.bind(console,t,A),e)),{})}Cs.level=A=>{ws=A},vs.level=Cs.level;const ys=Cs,bs=ys("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((A=>{document.addEventListener(A,(function(){for(var A=arguments.length,e=new Array(A),t=0;t<A;t++)e[t]=arguments[t];Array.from(document.querySelectorAll(".ql-container")).forEach((A=>{const t=Bs.get(A);t&&t.emitter&&t.emitter.handleDOM(...e)}))}))}));const Qs=class extends fs{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",bs.error)}emit(){for(var A=arguments.length,e=new Array(A),t=0;t<A;t++)e[t]=arguments[t];return bs.log.call(bs,...e),super.emit(...e)}handleDOM(A){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];(this.domListeners[A.type]||[]).forEach((e=>{let{node:n,handler:r}=e;(A.target===n||n.contains(A.target))&&r(A,...t)}))}listenDOM(A,e,t){this.domListeners[A]||(this.domListeners[A]=[]),this.domListeners[A].push({node:e,handler:t})}},Us=ys("quill:selection");class Es{constructor(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.index=A,this.length=e}}function Fs(A,e){try{e.parentNode}catch(A){return!1}return A.contains(e)}const Is=class{constructor(A,e){this.emitter=e,this.scroll=A,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Es(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(()=>{this.mouseDown||this.composing||setTimeout(this.update.bind(this,Qs.sources.USER),1)})),this.emitter.on(Qs.events.SCROLL_BEFORE_UPDATE,(()=>{if(!this.hasFocus())return;const A=this.getNativeRange();null!=A&&A.start.node!==this.cursor.textNode&&this.emitter.once(Qs.events.SCROLL_UPDATE,((e,t)=>{try{this.root.contains(A.start.node)&&this.root.contains(A.end.node)&&this.setNativeRange(A.start.node,A.start.offset,A.end.node,A.end.offset);const n=t.some((A=>"characterData"===A.type||"childList"===A.type||"attributes"===A.type&&A.target===this.root));this.update(n?Qs.sources.SILENT:e)}catch(A){}}))})),this.emitter.on(Qs.events.SCROLL_OPTIMIZE,((A,e)=>{if(e.range){const{startNode:A,startOffset:t,endNode:n,endOffset:r}=e.range;this.setNativeRange(A,t,n,r),this.update(Qs.sources.SILENT)}})),this.update(Qs.sources.SILENT)}handleComposition(){this.emitter.on(Qs.events.COMPOSITION_BEFORE_START,(()=>{this.composing=!0})),this.emitter.on(Qs.events.COMPOSITION_END,(()=>{if(this.composing=!1,this.cursor.parent){const A=this.cursor.restore();if(!A)return;setTimeout((()=>{this.setNativeRange(A.startNode,A.startOffset,A.endNode,A.endOffset)}),1)}}))}handleDragging(){this.emitter.listenDOM("mousedown",document.body,(()=>{this.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(()=>{this.mouseDown=!1,this.update(Qs.sources.USER)}))}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(A,e){this.scroll.update();const t=this.getNativeRange();if(null!=t&&t.native.collapsed&&!this.scroll.query(A,Cr.BLOCK)){if(t.start.node!==this.cursor.textNode){const A=this.scroll.find(t.start.node,!1);if(null==A)return;if(A instanceof Nr){const e=A.split(t.start.offset);A.parent.insertBefore(this.cursor,e)}else A.insertBefore(this.cursor,t.start.node);this.cursor.attach()}this.cursor.format(A,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const t=this.scroll.length();let n;A=Math.min(A,t-1),e=Math.min(A+e,t-1)-A;let[r,i]=this.scroll.leaf(A);if(null==r)return null;if(e>0&&i===r.length()){const[e]=this.scroll.leaf(A+1);if(e){const[t]=this.scroll.line(A),[n]=this.scroll.line(A+1);t===n&&(r=e,i=0)}}[n,i]=r.position(i,!0);const s=document.createRange();if(e>0)return s.setStart(n,i),[r,i]=this.scroll.leaf(A+e),null==r?null:([n,i]=r.position(i,!0),s.setEnd(n,i),s.getBoundingClientRect());let o,a="left";if(n instanceof Text){if(!n.data.length)return null;i<n.data.length?(s.setStart(n,i),s.setEnd(n,i+1)):(s.setStart(n,i-1),s.setEnd(n,i),a="right"),o=s.getBoundingClientRect()}else{if(!(r.domNode instanceof Element))return null;o=r.domNode.getBoundingClientRect(),i>0&&(a="right")}return{bottom:o.top+o.height,height:o.height,left:o[a],right:o[a],top:o.top,width:0}}getNativeRange(){const A=document.getSelection();if(null==A||A.rangeCount<=0)return null;const e=A.getRangeAt(0);if(null==e)return null;const t=this.normalizeNative(e);return Us.info("getNativeRange",t),t}getRange(){const A=this.scroll.domNode;if("isConnected"in A&&!A.isConnected)return[null,null];const e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||null!=document.activeElement&&Fs(this.root,document.activeElement)}normalizedToRange(A){const e=[[A.start.node,A.start.offset]];A.native.collapsed||e.push([A.end.node,A.end.offset]);const t=e.map((A=>{const[e,t]=A,n=this.scroll.find(e,!0),r=n.offset(this.scroll);return 0===t?r:n instanceof Nr?r+n.index(e,t):r+n.length()})),n=Math.min(Math.max(...t),this.scroll.length()-1),r=Math.min(n,...t);return new Es(r,n-r)}normalizeNative(A){if(!Fs(this.root,A.startContainer)||!A.collapsed&&!Fs(this.root,A.endContainer))return null;const e={start:{node:A.startContainer,offset:A.startOffset},end:{node:A.endContainer,offset:A.endOffset},native:A};return[e.start,e.end].forEach((A=>{let{node:e,offset:t}=A;for(;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>t)e=e.childNodes[t],t=0;else{if(e.childNodes.length!==t)break;e=e.lastChild,t=e instanceof Text?e.data.length:e.childNodes.length>0?e.childNodes.length:e.childNodes.length+1}A.node=e,A.offset=t})),e}rangeToNative(A){const e=this.scroll.length(),t=(A,t)=>{A=Math.min(e-1,A);const[n,r]=this.scroll.leaf(A);return n?n.position(r,t):[null,-1]};return[...t(A.index,!1),...t(A.index+A.length,!0)]}setNativeRange(A,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Us.info("setNativeRange",A,e,t,n),null!=A&&(null==this.root.parentNode||null==A.parentNode||null==t.parentNode))return;const i=document.getSelection();if(null!=i)if(null!=A){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:s}=this.getNativeRange()||{};if(null==s||r||A!==s.startContainer||e!==s.startOffset||t!==s.endContainer||n!==s.endOffset){A instanceof Element&&"BR"===A.tagName&&(e=Array.from(A.parentNode.childNodes).indexOf(A),A=A.parentNode),t instanceof Element&&"BR"===t.tagName&&(n=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode);const r=document.createRange();r.setStart(A,e),r.setEnd(t,n),i.removeAllRanges(),i.addRange(r)}}else i.removeAllRanges(),this.root.blur()}setRange(A){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qs.sources.API;if("string"==typeof e&&(t=e,e=!1),Us.info("setRange",A),null!=A){const t=this.rangeToNative(A);this.setNativeRange(...t,e)}else this.setNativeRange(null);this.update(t)}update(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qs.sources.USER;const e=this.lastRange,[t,n]=this.getRange();if(this.lastRange=t,this.lastNative=n,null!=this.lastRange&&(this.savedRange=this.lastRange),!ts(e,this.lastRange)){if(!this.composing&&null!=n&&n.native.collapsed&&n.start.node!==this.cursor.textNode){const A=this.cursor.restore();A&&this.setNativeRange(A.startNode,A.startOffset,A.endNode,A.endOffset)}const t=[Qs.events.SELECTION_CHANGE,_i(this.lastRange),_i(e),A];this.emitter.emit(Qs.events.EDITOR_CHANGE,...t),A!==Qs.sources.SILENT&&this.emitter.emit(...t)}}},xs=/^[ -~]*$/;function Ts(A,e,t){if(0===A.length){const[A]=Ss(t.pop());return e<=0?`</li></${A}>`:`</li></${A}>${Ts([],e-1,t)}`}const[{child:n,offset:r,length:i,indent:s,type:o},...a]=A,[l,c]=Ss(o);if(s>e)return t.push(o),s===e+1?`<${l}><li${c}>${Ls(n,r,i)}${Ts(a,s,t)}`:`<${l}><li>${Ts(A,e+1,t)}`;const u=t[t.length-1];if(s===e&&o===u)return`</li><li${c}>${Ls(n,r,i)}${Ts(a,s,t)}`;const[d]=Ss(t.pop());return`</li></${d}>${Ts(A,e-1,t)}`}function Ls(A,e,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("html"in A&&"function"==typeof A.html)return A.html(e,t);if(A instanceof is)return os(A.value().slice(e,e+t)).replaceAll(" ","&nbsp;");if(A instanceof kr){if("list-container"===A.statics.blotName){const n=[];return A.children.forEachAt(e,t,((A,e,t)=>{const r="formats"in A&&"function"==typeof A.formats?A.formats():{};n.push({child:A,offset:e,length:t,indent:r.indent||0,type:r.list})})),Ts(n,-1,[])}const r=[];if(A.children.forEachAt(e,t,((A,e,t)=>{r.push(Ls(A,e,t))})),n||"list"===A.statics.blotName)return r.join("");const{outerHTML:i,innerHTML:s}=A.domNode,[o,a]=i.split(`>${s}<`);return"<table"===o?`<table style="border: 1px solid #000;">${r.join("")}<${a}`:`${o}>${r.join("")}<${a}`}return A.domNode instanceof Element?A.domNode.outerHTML:""}function Hs(A,e){return Object.keys(e).reduce(((t,n)=>{if(null==A[n])return t;const r=e[n];return r===A[n]?t[n]=r:Array.isArray(r)?r.indexOf(A[n])<0?t[n]=r.concat([A[n]]):t[n]=r:t[n]=[r,A[n]],t}),{})}function Ss(A){const e="ordered"===A?"ol":"ul";switch(A){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function Ns(A){return A.reduce(((A,e)=>{if("string"==typeof e.insert){const t=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return A.insert(t,e.attributes)}return A.push(e)}),new Xr)}function Os(A,e){let{index:t,length:n}=A;return new Es(t+e,n)}const Ms=class{constructor(A){this.scroll=A,this.delta=this.getDelta()}applyDelta(A){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const t=Ns(A),n=new Xr;return function(A){const e=[];return A.forEach((A=>{"string"==typeof A.insert?A.insert.split("\n").forEach(((t,n)=>{n&&e.push({insert:"\n",attributes:A.attributes}),t&&e.push({insert:t,attributes:A.attributes})})):e.push(A)})),e}(t.ops.slice()).reduce(((A,t)=>{const r=Xr.Op.length(t);let i=t.attributes||{},s=!1,o=!1;if(null!=t.insert){if(n.retain(r),"string"==typeof t.insert){const n=t.insert;o=!n.endsWith("\n")&&(e<=A||!!this.scroll.descendant(us,A)[0]),this.scroll.insertAt(A,n);const[r,s]=this.scroll.line(A);let a=wr({},hs(r));if(r instanceof cs){const[A]=r.descendant(Nr,s);A&&(a=wr(a,hs(A)))}i=Xr.AttributeMap.diff(a,i)||{}}else if("object"==typeof t.insert){const n=Object.keys(t.insert)[0];if(null==n)return A;const r=null!=this.scroll.query(n,Cr.INLINE);if(r)(e<=A||this.scroll.descendant(us,A)[0])&&(o=!0);else if(A>0){const[e,t]=this.scroll.descendant(Nr,A-1);e instanceof is?"\n"!==e.value()[t]&&(s=!0):e instanceof qr&&e.statics.scope===Cr.INLINE_BLOT&&(s=!0)}if(this.scroll.insertAt(A,n,t.insert[n]),r){const[e]=this.scroll.descendant(Nr,A);if(e){const A=wr({},hs(e));i=Xr.AttributeMap.diff(A,i)||{}}}}e+=r}else if(n.push(t),null!==t.retain&&"object"==typeof t.retain){const e=Object.keys(t.retain)[0];if(null==e)return A;this.scroll.updateEmbedAt(A,e,t.retain[e])}Object.keys(i).forEach((e=>{this.scroll.formatAt(A,r,e,i[e])}));const a=s?1:0,l=o?1:0;return e+=a+l,n.retain(a),n.delete(l),A+r+a+l}),0),n.reduce(((A,e)=>"number"==typeof e.delete?(this.scroll.deleteAt(A,e.delete),A):A+Xr.Op.length(e)),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(t)}deleteText(A,e){return this.scroll.deleteAt(A,e),this.update((new Xr).retain(A).delete(e))}formatLine(A,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scroll.update(),Object.keys(t).forEach((n=>{this.scroll.lines(A,Math.max(e,1)).forEach((A=>{A.format(n,t[n])}))})),this.scroll.optimize();const n=(new Xr).retain(A).retain(e,_i(t));return this.update(n)}formatText(A,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(t).forEach((n=>{this.scroll.formatAt(A,e,n,t[n])}));const n=(new Xr).retain(A).retain(e,_i(t));return this.update(n)}getContents(A,e){return this.delta.slice(A,A+e)}getDelta(){return this.scroll.lines().reduce(((A,e)=>A.concat(e.delta())),new Xr)}getFormat(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=[],n=[];0===e?this.scroll.path(A).forEach((A=>{const[e]=A;e instanceof cs?t.push(e):e instanceof Nr&&n.push(e)})):(t=this.scroll.lines(A,e),n=this.scroll.descendants(Nr,A,e));const[r,i]=[t,n].map((A=>{const e=A.shift();if(null==e)return{};let t=hs(e);for(;Object.keys(t).length>0;){const e=A.shift();if(null==e)return t;t=Hs(hs(e),t)}return t}));return{...r,...i}}getHTML(A,e){const[t,n]=this.scroll.line(A);if(t){const r=t.length();return t.length()>=n+e&&(0!==n||e!==r)?Ls(t,n,e,!0):Ls(this.scroll,A,e,!0)}return""}getText(A,e){return this.getContents(A,e).filter((A=>"string"==typeof A.insert)).map((A=>A.insert)).join("")}insertContents(A,e){const t=Ns(e),n=(new Xr).retain(A).concat(t);return this.scroll.insertContents(A,t),this.update(n)}insertEmbed(A,e,t){return this.scroll.insertAt(A,e,t),this.update((new Xr).retain(A).insert({[e]:t}))}insertText(A,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(A,e),Object.keys(t).forEach((n=>{this.scroll.formatAt(A,e.length,n,t[n])})),this.update((new Xr).retain(A).insert(e,_i(t)))}isBlank(){if(0===this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;const A=this.scroll.children.head;if(A?.statics.blotName!==cs.blotName)return!1;const e=A;return!(e.children.length>1)&&e.children.head instanceof rs}removeFormat(A,e){const t=this.getText(A,e),[n,r]=this.scroll.line(A+e);let i=0,s=new Xr;null!=n&&(i=n.length()-r,s=n.delta().slice(r,r+i-1).insert("\n"));const o=this.getContents(A,e+i).diff((new Xr).insert(t).concat(s)),a=(new Xr).retain(A).concat(o);return this.applyDelta(a)}update(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const n=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(xs)&&this.scroll.find(e[0].target)){const r=this.scroll.find(e[0].target),i=hs(r),s=r.offset(this.scroll),o=e[0].oldValue.replace(ps.CONTENTS,""),a=(new Xr).insert(o),l=(new Xr).insert(r.value()),c=t&&{oldRange:Os(t.oldRange,-s),newRange:Os(t.newRange,-s)};A=(new Xr).retain(s).concat(a.diff(l,c)).reduce(((A,e)=>e.insert?A.insert(e.insert,i):A.push(e)),new Xr),this.delta=n.compose(A)}else this.delta=this.getDelta(),A&&ts(n.compose(A),this.delta)||(A=n.diff(this.delta,t));return A}},Ds=class{static DEFAULTS={};constructor(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.quill=A,this.options=e}},ks="\ufeff",Ps=class extends qr{constructor(A,e){super(A,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach((A=>{this.contentNode.appendChild(A)})),this.leftGuard=document.createTextNode(ks),this.rightGuard=document.createTextNode(ks),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(A,e){return A===this.leftGuard?0:A===this.rightGuard?1:super.index(A,e)}restore(A){let e,t=null;const n=A.data.split(ks).join("");if(A===this.leftGuard)if(this.prev instanceof is){const A=this.prev.length();this.prev.insertAt(A,n),t={startNode:this.prev.domNode,startOffset:A+n.length}}else e=document.createTextNode(n),this.parent.insertBefore(this.scroll.create(e),this),t={startNode:e,startOffset:n.length};else A===this.rightGuard&&(this.next instanceof is?(this.next.insertAt(0,n),t={startNode:this.next.domNode,startOffset:n.length}):(e=document.createTextNode(n),this.parent.insertBefore(this.scroll.create(e),this.next),t={startNode:e,startOffset:n.length}));return A.data=ks,t}update(A,e){A.forEach((A=>{if("characterData"===A.type&&(A.target===this.leftGuard||A.target===this.rightGuard)){const t=this.restore(A.target);t&&(e.range=t)}}))}},_s=class{isComposing=!1;constructor(A,e){this.scroll=A,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",(A=>{this.isComposing||this.handleCompositionStart(A)})),this.scroll.domNode.addEventListener("compositionend",(A=>{this.isComposing&&queueMicrotask((()=>{this.handleCompositionEnd(A)}))}))}handleCompositionStart(A){const e=A.target instanceof Node?this.scroll.find(A.target,!0):null;!e||e instanceof Ps||(this.emitter.emit(Qs.events.COMPOSITION_BEFORE_START,A),this.scroll.batchStart(),this.emitter.emit(Qs.events.COMPOSITION_START,A),this.isComposing=!0)}handleCompositionEnd(A){this.emitter.emit(Qs.events.COMPOSITION_BEFORE_END,A),this.scroll.batchEnd(),this.emitter.emit(Qs.events.COMPOSITION_END,A),this.isComposing=!1}};class Ks{static DEFAULTS={modules:{}};static themes={default:Ks};modules={};constructor(A,e){this.quill=A,this.options=e}init(){Object.keys(this.options.modules).forEach((A=>{null==this.modules[A]&&this.addModule(A)}))}addModule(A){const e=this.quill.constructor.import(`modules/${A}`);return this.modules[A]=new e(this.quill,this.options.modules[A]||{}),this.modules[A]}}const Rs=Ks,js=A=>{const e=A.getBoundingClientRect(),t="offsetWidth"in A&&Math.abs(e.width)/A.offsetWidth||1,n="offsetHeight"in A&&Math.abs(e.height)/A.offsetHeight||1;return{top:e.top,right:e.left+A.clientWidth*t,bottom:e.top+A.clientHeight*n,left:e.left}},Vs=A=>{const e=parseInt(A,10);return Number.isNaN(e)?0:e},qs=(A,e,t,n,r,i)=>A<t&&e>n?0:A<t?-(t-A+r):e>n?e-A>n-t?A+r-t:e-n+i:0,Gs=["block","break","cursor","inline","scroll","text"],$s=ys("quill"),Js=new Ur;kr.uiClass="ql-ui";class Ws{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Js,theme:"default"};static events=Qs.events;static sources=Qs.sources;static version="2.0.3";static imports={delta:Xr,parchment:A,"core/module":Ds,"core/theme":Rs};static debug(A){!0===A&&(A="log"),ys.level(A)}static find(A){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Bs.get(A)||Js.find(A,e)}static import(A){return null==this.imports[A]&&$s.error(`Cannot import ${A}. Are you sure it was registered?`),this.imports[A]}static register(){if("string"!=typeof(arguments.length<=0?void 0:arguments[0])){const A=arguments.length<=0?void 0:arguments[0],e=!!(arguments.length<=1?void 0:arguments[1]),t="attrName"in A?A.attrName:A.blotName;"string"==typeof t?this.register(`formats/${t}`,A,e):Object.keys(A).forEach((t=>{this.register(t,A[t],e)}))}else{const A=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],t=!!(arguments.length<=2?void 0:arguments[2]);null==this.imports[A]||t||$s.warn(`Overwriting ${A} with`,e),this.imports[A]=e,(A.startsWith("blots/")||A.startsWith("formats/"))&&e&&"boolean"!=typeof e&&"abstract"!==e.blotName&&Js.register(e),"function"==typeof e.register&&e.register(Js)}}constructor(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options=function(A,e){const t=Zs(A);if(!t)throw new Error("Invalid Quill container");const n=!e.theme||e.theme===Ws.DEFAULTS.theme?Rs:Ws.import(`themes/${e.theme}`);if(!n)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:r,...i}=Ws.DEFAULTS,{modules:s,...o}=n.DEFAULTS;let a=Xs(e.modules);null!=a&&a.toolbar&&a.toolbar.constructor!==Object&&(a={...a,toolbar:{container:a.toolbar}});const l=wr({},Xs(r),Xs(s),a),c={...i,...zs(o),...zs(e)};let u=e.registry;return u?e.formats&&$s.warn('Ignoring "formats" option because "registry" is specified'):u=e.formats?((A,e,t)=>{const n=new Ur;return Gs.forEach((A=>{const t=e.query(A);t&&n.register(t)})),A.forEach((A=>{let r=e.query(A);r||t.error(`Cannot register "${A}" specified in "formats" config. Are you sure it was registered?`);let i=0;for(;r;)if(n.register(r),r="blotName"in r?r.requiredContainer??null:null,i+=1,i>100){t.error(`Cycle detected in registering blot requiredContainer: "${A}"`);break}})),n})(e.formats,c.registry,$s):c.registry,{...c,registry:u,container:t,theme:n,modules:Object.entries(l).reduce(((A,e)=>{let[t,n]=e;if(!n)return A;const r=Ws.import(`modules/${t}`);return null==r?($s.error(`Cannot load ${t} module. Are you sure you registered it?`),A):{...A,[t]:wr({},r.DEFAULTS||{},n)}}),{}),bounds:Zs(c.bounds)}}(A,e),this.container=this.options.container,null==this.container)return void $s.error("Invalid Quill container",A);this.options.debug&&Ws.debug(this.options.debug);const t=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Bs.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Qs;const n=Jr.blotName,r=this.options.registry.query(n);if(!r||!("blotName"in r))throw new Error(`Cannot initialize Quill without "${n}" blot`);if(this.scroll=new r(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Ms(this.scroll),this.selection=new Is(this.scroll,this.emitter),this.composition=new _s(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Qs.events.EDITOR_CHANGE,(A=>{A===Qs.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())})),this.emitter.on(Qs.events.SCROLL_UPDATE,((A,e)=>{const t=this.selection.lastRange,[n]=this.selection.getRange(),r=t&&n?{oldRange:t,newRange:n}:void 0;Ys.call(this,(()=>this.editor.update(null,e,r)),A)})),this.emitter.on(Qs.events.SCROLL_EMBED_UPDATE,((A,e)=>{const t=this.selection.lastRange,[n]=this.selection.getRange(),r=t&&n?{oldRange:t,newRange:n}:void 0;Ys.call(this,(()=>{const t=(new Xr).retain(A.offset(this)).retain({[A.statics.blotName]:e});return this.editor.update(t,[],r)}),Ws.sources.USER)})),t){const A=this.clipboard.convert({html:`${t}<p><br></p>`,text:"\n"});this.setContents(A)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof A){const e=A;(A=document.createElement("div")).classList.add(e)}return this.container.insertBefore(A,e),A}blur(){this.selection.setRange(null)}deleteText(A,e,t){return[A,e,,t]=Ao(A,e,t),Ys.call(this,(()=>this.editor.deleteText(A,e)),t,A,-1*e)}disable(){this.enable(!1)}editReadOnly(A){this.allowReadOnlyEdits=!0;const e=A();return this.allowReadOnlyEdits=!1,e}enable(){let A=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(A),this.container.classList.toggle("ql-disabled",!A)}focus(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selection.focus(),A.preventScroll||this.scrollSelectionIntoView()}format(A,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qs.sources.API;return Ys.call(this,(()=>{const t=this.getSelection(!0);let n=new Xr;if(null==t)return n;if(this.scroll.query(A,Cr.BLOCK))n=this.editor.formatLine(t.index,t.length,{[A]:e});else{if(0===t.length)return this.selection.format(A,e),n;n=this.editor.formatText(t.index,t.length,{[A]:e})}return this.setSelection(t,Qs.sources.SILENT),n}),t)}formatLine(A,e,t,n,r){let i;return[A,e,i,r]=Ao(A,e,t,n,r),Ys.call(this,(()=>this.editor.formatLine(A,e,i)),r,A,0)}formatText(A,e,t,n,r){let i;return[A,e,i,r]=Ao(A,e,t,n,r),Ys.call(this,(()=>this.editor.formatText(A,e,i)),r,A,0)}getBounds(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=null;if(t="number"==typeof A?this.selection.getBounds(A,e):this.selection.getBounds(A.index,A.length),!t)return null;const n=this.container.getBoundingClientRect();return{bottom:t.bottom-n.top,height:t.height,left:t.left-n.left,right:t.right-n.left,top:t.top-n.top,width:t.width}}getContents(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-A;return[A,e]=Ao(A,e),this.editor.getContents(A,e)}getFormat(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof A?this.editor.getFormat(A,e):this.editor.getFormat(A.index,A.length)}getIndex(A){return A.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(A){return this.scroll.leaf(A)}getLine(A){return this.scroll.line(A)}getLines(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof A?this.scroll.lines(A.index,A.length):this.scroll.lines(A,e)}getModule(A){return this.theme.modules[A]}getSelection(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof A&&(e=e??this.getLength()-A),[A,e]=Ao(A,e),this.editor.getHTML(A,e)}getText(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof A&&(e=e??this.getLength()-A),[A,e]=Ao(A,e),this.editor.getText(A,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(A,e,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ws.sources.API;return Ys.call(this,(()=>this.editor.insertEmbed(A,e,t)),n,A)}insertText(A,e,t,n,r){let i;return[A,,i,r]=Ao(A,0,t,n,r),Ys.call(this,(()=>this.editor.insertText(A,e,i)),r,A,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(A,e,t){return[A,e,,t]=Ao(A,e,t),Ys.call(this,(()=>this.editor.removeFormat(A,e)),t,A)}scrollRectIntoView(A){((A,e)=>{const t=A.ownerDocument;let n=e,r=A;for(;r;){const A=r===t.body,e=A?{top:0,right:window.visualViewport?.width??t.documentElement.clientWidth,bottom:window.visualViewport?.height??t.documentElement.clientHeight,left:0}:js(r),s=getComputedStyle(r),o=qs(n.left,n.right,e.left,e.right,Vs(s.scrollPaddingLeft),Vs(s.scrollPaddingRight)),a=qs(n.top,n.bottom,e.top,e.bottom,Vs(s.scrollPaddingTop),Vs(s.scrollPaddingBottom));if(o||a)if(A)t.defaultView?.scrollBy(o,a);else{const{scrollLeft:A,scrollTop:e}=r;a&&(r.scrollTop+=a),o&&(r.scrollLeft+=o);const t=r.scrollLeft-A,i=r.scrollTop-e;n={left:n.left-t,top:n.top-i,right:n.right-t,bottom:n.bottom-i}}r=A||"fixed"===s.position?null:(i=r).parentElement||i.getRootNode().host||null}var i})(this.root,A)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const A=this.selection.lastRange,e=A&&this.selection.getBounds(A.index,A.length);e&&this.scrollRectIntoView(e)}setContents(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qs.sources.API;return Ys.call(this,(()=>{A=new Xr(A);const e=this.getLength(),t=this.editor.deleteText(0,e),n=this.editor.insertContents(0,A),r=this.editor.deleteText(this.getLength()-1,1);return t.compose(n).compose(r)}),e)}setSelection(A,e,t){null==A?this.selection.setRange(null,e||Ws.sources.API):([A,e,,t]=Ao(A,e,t),this.selection.setRange(new Es(Math.max(0,A),e),t),t!==Qs.sources.SILENT&&this.scrollSelectionIntoView())}setText(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qs.sources.API;const t=(new Xr).insert(A);return this.setContents(t,e)}update(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qs.sources.USER;const e=this.scroll.update(A);return this.selection.update(A),e}updateContents(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qs.sources.API;return Ys.call(this,(()=>(A=new Xr(A),this.editor.applyDelta(A))),e,!0)}}function Zs(A){return"string"==typeof A?document.querySelector(A):A}function Xs(A){return Object.entries(A??{}).reduce(((A,e)=>{let[t,n]=e;return{...A,[t]:!0===n?{}:n}}),{})}function zs(A){return Object.fromEntries(Object.entries(A).filter((A=>void 0!==A[1])))}function Ys(A,e,t,n){if(!this.isEnabled()&&e===Qs.sources.USER&&!this.allowReadOnlyEdits)return new Xr;let r=null==t?null:this.getSelection();const i=this.editor.delta,s=A();if(null!=r&&(!0===t&&(t=r.index),null==n?r=eo(r,s,e):0!==n&&(r=eo(r,t,n,e)),this.setSelection(r,Qs.sources.SILENT)),s.length()>0){const A=[Qs.events.TEXT_CHANGE,s,i,e];this.emitter.emit(Qs.events.EDITOR_CHANGE,...A),e!==Qs.sources.SILENT&&this.emitter.emit(...A)}return s}function Ao(A,e,t,n,r){let i={};return"number"==typeof A.index&&"number"==typeof A.length?"number"!=typeof e?(r=n,n=t,t=e,e=A.length,A=A.index):(e=A.length,A=A.index):"number"!=typeof e&&(r=n,n=t,t=e,e=0),"object"==typeof t?(i=t,r=n):"string"==typeof t&&(null!=n?i[t]=n:r=t),[A,e,i,r=r||Qs.sources.API]}function eo(A,e,t,n){const r="number"==typeof t?t:0;if(null==A)return null;let i,s;return e&&"function"==typeof e.transformPosition?[i,s]=[A.index,A.index+A.length].map((A=>e.transformPosition(A,n!==Qs.sources.USER))):[i,s]=[A.index,A.index+A.length].map((A=>A<e||A===e&&n===Qs.sources.USER?A:r>=0?A+r:Math.max(e,A+r))),new Es(i,s-i)}const to=class extends Vr{};function no(A){return A instanceof cs||A instanceof us}function ro(A){return"function"==typeof A.updateContent}function io(A,e,t){t.reduce(((e,t)=>{const n=Xr.Op.length(t);let r=t.attributes||{};if(null!=t.insert)if("string"==typeof t.insert){const n=t.insert;A.insertAt(e,n);const[i]=A.descendant(Nr,e),s=hs(i);r=Xr.AttributeMap.diff(s,r)||{}}else if("object"==typeof t.insert){const n=Object.keys(t.insert)[0];if(null==n)return e;if(A.insertAt(e,n,t.insert[n]),null!=A.scroll.query(n,Cr.INLINE)){const[t]=A.descendant(Nr,e),n=hs(t);r=Xr.AttributeMap.diff(n,r)||{}}}return Object.keys(r).forEach((t=>{A.formatAt(e,n,t,r[t])})),e+n}),e)}const so={scope:Cr.BLOCK,whitelist:["right","center","justify"]},oo=new yr("align","align",so),ao=new Fr("align","ql-align",so),lo=new xr("align","text-align",so);class co extends xr{value(A){let e=super.value(A);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map((A=>`00${parseInt(A,10).toString(16)}`.slice(-2))).join("")}`):e}}const uo=new Fr("color","ql-color",{scope:Cr.INLINE}),ho=new co("color","color",{scope:Cr.INLINE}),go=new Fr("background","ql-bg",{scope:Cr.INLINE}),po=new co("background","background-color",{scope:Cr.INLINE});class fo extends to{static create(A){const e=super.create(A);return e.setAttribute("spellcheck","false"),e}code(A,e){return this.children.map((A=>A.length()<=1?"":A.domNode.innerText)).join("\n").slice(A,A+e)}html(A,e){return`<pre>\n${os(this.code(A,e))}\n</pre>`}}class Bo extends cs{static TAB="  ";static register(){Ws.register(fo)}}class mo extends ls{}mo.blotName="code",mo.tagName="CODE",Bo.blotName="code-block",Bo.className="ql-code-block",Bo.tagName="DIV",fo.blotName="code-block-container",fo.className="ql-code-block-container",fo.tagName="DIV",fo.allowedChildren=[Bo],Bo.allowedChildren=[is,rs,ps],Bo.requiredContainer=fo;const wo={scope:Cr.BLOCK,whitelist:["rtl"]},vo=new yr("direction","dir",wo),Co=new Fr("direction","ql-direction",wo),yo=new xr("direction","direction",wo),bo={scope:Cr.INLINE,whitelist:["serif","monospace"]},Qo=new Fr("font","ql-font",bo),Uo=new class extends xr{value(A){return super.value(A).replace(/["']/g,"")}}("font","font-family",bo),Eo=new Fr("size","ql-size",{scope:Cr.INLINE,whitelist:["small","large","huge"]}),Fo=new xr("size","font-size",{scope:Cr.INLINE,whitelist:["10px","18px","32px"]}),Io=ys("quill:keyboard"),xo=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class To extends Ds{static match(A,e){return!["altKey","ctrlKey","metaKey","shiftKey"].some((t=>!!e[t]!==A[t]&&null!==e[t]))&&(e.key===A.key||e.key===A.which)}constructor(A,e){super(A,e),this.bindings={},Object.keys(this.options.bindings).forEach((A=>{this.options.bindings[A]&&this.addBinding(this.options.bindings[A])})),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},(()=>{})),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=function(A){if("string"==typeof A||"number"==typeof A)A={key:A};else{if("object"!=typeof A)return null;A=_i(A)}return A.shortKey&&(A[xo]=A.shortKey,delete A.shortKey),A}(A);null!=n?("function"==typeof e&&(e={handler:e}),"function"==typeof t&&(t={handler:t}),(Array.isArray(n.key)?n.key:[n.key]).forEach((A=>{const r={...n,key:A,...e,...t};this.bindings[r.key]=this.bindings[r.key]||[],this.bindings[r.key].push(r)}))):Io.warn("Attempted to add invalid keyboard binding",n)}listen(){this.quill.root.addEventListener("keydown",(A=>{if(A.defaultPrevented||A.isComposing)return;if(229===A.keyCode&&("Enter"===A.key||"Backspace"===A.key))return;const e=(this.bindings[A.key]||[]).concat(this.bindings[A.which]||[]).filter((e=>To.match(A,e)));if(0===e.length)return;const t=Ws.find(A.target,!0);if(t&&t.scroll!==this.quill.scroll)return;const n=this.quill.getSelection();if(null==n||!this.quill.hasFocus())return;const[r,i]=this.quill.getLine(n.index),[s,o]=this.quill.getLeaf(n.index),[a,l]=0===n.length?[s,o]:this.quill.getLeaf(n.index+n.length),c=s instanceof Zr?s.value().slice(0,o):"",u=a instanceof Zr?a.value().slice(l):"",d={collapsed:0===n.length,empty:0===n.length&&r.length()<=1,format:this.quill.getFormat(n),line:r,offset:i,prefix:c,suffix:u,event:A};e.some((A=>{if(null!=A.collapsed&&A.collapsed!==d.collapsed)return!1;if(null!=A.empty&&A.empty!==d.empty)return!1;if(null!=A.offset&&A.offset!==d.offset)return!1;if(Array.isArray(A.format)){if(A.format.every((A=>null==d.format[A])))return!1}else if("object"==typeof A.format&&!Object.keys(A.format).every((e=>!0===A.format[e]?null!=d.format[e]:!1===A.format[e]?null==d.format[e]:ts(A.format[e],d.format[e]))))return!1;return!(null!=A.prefix&&!A.prefix.test(d.prefix)||null!=A.suffix&&!A.suffix.test(d.suffix)||!0===A.handler.call(this,n,d,A))}))&&A.preventDefault()}))}handleBackspace(A,e){const t=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(0===A.index||this.quill.getLength()<=1)return;let n={};const[r]=this.quill.getLine(A.index);let i=(new Xr).retain(A.index-t).delete(t);if(0===e.offset){const[e]=this.quill.getLine(A.index-1);if(e&&!("block"===e.statics.blotName&&e.length()<=1)){const e=r.formats(),t=this.quill.getFormat(A.index-1,1);if(n=Xr.AttributeMap.diff(e,t)||{},Object.keys(n).length>0){const e=(new Xr).retain(A.index+r.length()-2).retain(1,n);i=i.compose(e)}}}this.quill.updateContents(i,Ws.sources.USER),this.quill.focus()}handleDelete(A,e){const t=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(A.index>=this.quill.getLength()-t)return;let n={};const[r]=this.quill.getLine(A.index);let i=(new Xr).retain(A.index).delete(t);if(e.offset>=r.length()-1){const[e]=this.quill.getLine(A.index+1);if(e){const t=r.formats(),s=this.quill.getFormat(A.index,1);n=Xr.AttributeMap.diff(t,s)||{},Object.keys(n).length>0&&(i=i.retain(e.length()-1).retain(1,n))}}this.quill.updateContents(i,Ws.sources.USER),this.quill.focus()}handleDeleteRange(A){Mo({range:A,quill:this.quill}),this.quill.focus()}handleEnter(A,e){const t=Object.keys(e.format).reduce(((A,t)=>(this.quill.scroll.query(t,Cr.BLOCK)&&!Array.isArray(e.format[t])&&(A[t]=e.format[t]),A)),{}),n=(new Xr).retain(A.index).delete(A.length).insert("\n",t);this.quill.updateContents(n,Ws.sources.USER),this.quill.setSelection(A.index+1,Ws.sources.SILENT),this.quill.focus()}}const Lo={bindings:{bold:No("bold"),italic:No("italic"),underline:No("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(A,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","+1",Ws.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(A,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","-1",Ws.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(A,e){null!=e.format.indent?this.quill.format("indent","-1",Ws.sources.USER):null!=e.format.list&&this.quill.format("list",!1,Ws.sources.USER)}},"indent code-block":Ho(!0),"outdent code-block":Ho(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(A){this.quill.deleteText(A.index-1,1,Ws.sources.USER)}},tab:{key:"Tab",handler(A,e){if(e.format.table)return!0;this.quill.history.cutoff();const t=(new Xr).retain(A.index).delete(A.length).insert("\t");return this.quill.updateContents(t,Ws.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(A.index+1,Ws.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,Ws.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(A,e){const t={list:!1};e.format.indent&&(t.indent=!1),this.quill.formatLine(A.index,A.length,t,Ws.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(A){const[e,t]=this.quill.getLine(A.index),n={...e.formats(),list:"checked"},r=(new Xr).retain(A.index).insert("\n",n).retain(e.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(r,Ws.sources.USER),this.quill.setSelection(A.index+1,Ws.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(A,e){const[t,n]=this.quill.getLine(A.index),r=(new Xr).retain(A.index).insert("\n",e.format).retain(t.length()-n-1).retain(1,{header:null});this.quill.updateContents(r,Ws.sources.USER),this.quill.setSelection(A.index+1,Ws.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(A){const e=this.quill.getModule("table");if(e){const[t,n,r,i]=e.getTable(A),s=function(A,e,t,n){return null==e.prev&&null==e.next?null==t.prev&&null==t.next?0===n?-1:1:null==t.prev?-1:1:null==e.prev?-1:null==e.next?1:null}(0,n,r,i);if(null==s)return;let o=t.offset();if(s<0){const e=(new Xr).retain(o).insert("\n");this.quill.updateContents(e,Ws.sources.USER),this.quill.setSelection(A.index+1,A.length,Ws.sources.SILENT)}else if(s>0){o+=t.length();const A=(new Xr).retain(o).insert("\n");this.quill.updateContents(A,Ws.sources.USER),this.quill.setSelection(o,Ws.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(A,e){const{event:t,line:n}=e,r=n.offset(this.quill.scroll);t.shiftKey?this.quill.setSelection(r-1,Ws.sources.USER):this.quill.setSelection(r+n.length(),Ws.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(A,e){if(null==this.quill.scroll.query("list"))return!0;const{length:t}=e.prefix,[n,r]=this.quill.getLine(A.index);if(r>t)return!0;let i;switch(e.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i="ordered"}this.quill.insertText(A.index," ",Ws.sources.USER),this.quill.history.cutoff();const s=(new Xr).retain(A.index-r).delete(t+1).retain(n.length()-2-r).retain(1,{list:i});return this.quill.updateContents(s,Ws.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(A.index-t,Ws.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(A){const[e,t]=this.quill.getLine(A.index);let n=2,r=e;for(;null!=r&&r.length()<=1&&r.formats()["code-block"];)if(r=r.prev,n-=1,n<=0){const n=(new Xr).retain(A.index+e.length()-t-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(n,Ws.sources.USER),this.quill.setSelection(A.index-1,Ws.sources.SILENT),!1}return!0}},"embed left":So("ArrowLeft",!1),"embed left shift":So("ArrowLeft",!0),"embed right":So("ArrowRight",!1),"embed right shift":So("ArrowRight",!0),"table down":Oo(!1),"table up":Oo(!0)}};function Ho(A){return{key:"Tab",shiftKey:!A,format:{"code-block":!0},handler(e,t){let{event:n}=t;const r=this.quill.scroll.query("code-block"),{TAB:i}=r;if(0===e.length&&!n.shiftKey)return this.quill.insertText(e.index,i,Ws.sources.USER),void this.quill.setSelection(e.index+i.length,Ws.sources.SILENT);const s=0===e.length?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:o,length:a}=e;s.forEach(((e,t)=>{A?(e.insertAt(0,i),0===t?o+=i.length:a+=i.length):e.domNode.textContent.startsWith(i)&&(e.deleteAt(0,i.length),0===t?o-=i.length:a-=i.length)})),this.quill.update(Ws.sources.USER),this.quill.setSelection(o,a,Ws.sources.SILENT)}}}function So(A,e){const t="ArrowLeft"===A?"prefix":"suffix";return{key:A,shiftKey:e,altKey:null,[t]:/^$/,handler(t){let{index:n}=t;"ArrowRight"===A&&(n+=t.length+1);const[r]=this.quill.getLeaf(n);return!(r instanceof qr&&("ArrowLeft"===A?e?this.quill.setSelection(t.index-1,t.length+1,Ws.sources.USER):this.quill.setSelection(t.index-1,Ws.sources.USER):e?this.quill.setSelection(t.index,t.length+1,Ws.sources.USER):this.quill.setSelection(t.index+t.length+1,Ws.sources.USER),1))}}}function No(A){return{key:A[0],shortKey:!0,handler(e,t){this.quill.format(A,!t.format[A],Ws.sources.USER)}}}function Oo(A){return{key:A?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,t){const n=A?"prev":"next",r=t.line,i=r.parent[n];if(null!=i){if("table-row"===i.statics.blotName){let A=i.children.head,e=r;for(;null!=e.prev;)e=e.prev,A=A.next;const n=A.offset(this.quill.scroll)+Math.min(t.offset,A.length()-1);this.quill.setSelection(n,0,Ws.sources.USER)}}else{const e=r.table()[n];null!=e&&(A?this.quill.setSelection(e.offset(this.quill.scroll)+e.length()-1,0,Ws.sources.USER):this.quill.setSelection(e.offset(this.quill.scroll),0,Ws.sources.USER))}return!1}}}function Mo(A){let{quill:e,range:t}=A;const n=e.getLines(t);let r={};if(n.length>1){const A=n[0].formats(),e=n[n.length-1].formats();r=Xr.AttributeMap.diff(e,A)||{}}e.deleteText(t,Ws.sources.USER),Object.keys(r).length>0&&e.formatLine(t.index,1,r,Ws.sources.USER),e.setSelection(t.index,Ws.sources.SILENT)}To.DEFAULTS=Lo;const Do=/font-weight:\s*normal/,ko=["P","OL","UL"],Po=A=>A&&ko.includes(A.tagName),_o=/\bmso-list:[^;]*ignore/i,Ko=/\bmso-list:[^;]*\bl(\d+)/i,Ro=/\bmso-list:[^;]*\blevel(\d+)/i,jo=[function(A){"urn:schemas-microsoft-com:office:word"===A.documentElement.getAttribute("xmlns:w")&&(A=>{const e=Array.from(A.querySelectorAll("[style*=mso-list]")),t=[],n=[];e.forEach((A=>{(A.getAttribute("style")||"").match(_o)?t.push(A):n.push(A)})),t.forEach((A=>A.parentNode?.removeChild(A)));const r=A.documentElement.innerHTML,i=n.map((A=>((A,e)=>{const t=A.getAttribute("style"),n=t?.match(Ko);if(!n)return null;const r=Number(n[1]),i=t?.match(Ro),s=i?Number(i[1]):1,o=new RegExp(`@list l${r}:level${s}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),a=e.match(o);return{id:r,indent:s,type:a&&"bullet"===a[1]?"bullet":"ordered",element:A}})(A,r))).filter((A=>A));for(;i.length;){const A=[];let e=i.shift();for(;e;)A.push(e),e=i.length&&i[0]?.element===e.element.nextElementSibling&&i[0].id===e.id?i.shift():null;const t=document.createElement("ul");A.forEach((A=>{const e=document.createElement("li");e.setAttribute("data-list",A.type),A.indent>1&&e.setAttribute("class","ql-indent-"+(A.indent-1)),e.innerHTML=A.element.innerHTML,t.appendChild(e)}));const n=A[0]?.element,{parentNode:r}=n??{};n&&r?.replaceChild(t,n),A.slice(1).forEach((A=>{let{element:e}=A;r?.removeChild(e)}))}})(A)},function(A){A.querySelector('[id^="docs-internal-guid-"]')&&((A=>{Array.from(A.querySelectorAll('b[style*="font-weight"]')).filter((A=>A.getAttribute("style")?.match(Do))).forEach((e=>{const t=A.createDocumentFragment();t.append(...e.childNodes),e.parentNode?.replaceChild(t,e)}))})(A),(A=>{Array.from(A.querySelectorAll("br")).filter((A=>Po(A.previousElementSibling)&&Po(A.nextElementSibling))).forEach((A=>{A.parentNode?.removeChild(A)}))})(A))}],Vo=ys("quill:clipboard"),qo=[[Node.TEXT_NODE,function(A,e,t){let n=A.data;if("O:P"===A.parentElement?.tagName)return e.insert(n.trim());if(!zo(A)){if(0===n.trim().length&&n.includes("\n")&&!function(A,e){return A.previousElementSibling&&A.nextElementSibling&&!Zo(A.previousElementSibling,e)&&!Zo(A.nextElementSibling,e)}(A,t))return e;n=n.replace(/[^\S\u00a0]/g," "),n=n.replace(/ {2,}/g," "),(null==A.previousSibling&&null!=A.parentElement&&Zo(A.parentElement,t)||A.previousSibling instanceof Element&&Zo(A.previousSibling,t))&&(n=n.replace(/^ /,"")),(null==A.nextSibling&&null!=A.parentElement&&Zo(A.parentElement,t)||A.nextSibling instanceof Element&&Zo(A.nextSibling,t))&&(n=n.replace(/ $/,"")),n=n.replaceAll(" "," ")}return e.insert(n)}],[Node.TEXT_NODE,ea],["br",function(A,e){return Wo(e,"\n")||e.insert("\n"),e}],[Node.ELEMENT_NODE,ea],[Node.ELEMENT_NODE,function(A,e,t){const n=t.query(A);if(null==n)return e;if(n.prototype instanceof qr){const e={},r=n.value(A);if(null!=r)return e[n.blotName]=r,(new Xr).insert(e,n.formats(A,t))}else if(n.prototype instanceof Rr&&!Wo(e,"\n")&&e.insert("\n"),"blotName"in n&&"formats"in n&&"function"==typeof n.formats)return Jo(e,n.blotName,n.formats(A,t),t);return e}],[Node.ELEMENT_NODE,function(A,e,t){const n=yr.keys(A),r=Fr.keys(A),i=xr.keys(A),s={};return n.concat(r).concat(i).forEach((e=>{let n=t.query(e,Cr.ATTRIBUTE);null!=n&&(s[n.attrName]=n.value(A),s[n.attrName])||(n=Go[e],null==n||n.attrName!==e&&n.keyName!==e||(s[n.attrName]=n.value(A)||void 0),n=$o[e],null==n||n.attrName!==e&&n.keyName!==e||(n=$o[e],s[n.attrName]=n.value(A)||void 0))})),Object.entries(s).reduce(((A,e)=>{let[n,r]=e;return Jo(A,n,r,t)}),e)}],[Node.ELEMENT_NODE,function(A,e,t){const n={},r=A.style||{};return"italic"===r.fontStyle&&(n.italic=!0),"underline"===r.textDecoration&&(n.underline=!0),"line-through"===r.textDecoration&&(n.strike=!0),(r.fontWeight?.startsWith("bold")||parseInt(r.fontWeight,10)>=700)&&(n.bold=!0),e=Object.entries(n).reduce(((A,e)=>{let[n,r]=e;return Jo(A,n,r,t)}),e),parseFloat(r.textIndent||0)>0?(new Xr).insert("\t").concat(e):e}],["li",function(A,e,t){const n=t.query(A);if(null==n||"list"!==n.blotName||!Wo(e,"\n"))return e;let r=-1,i=A.parentNode;for(;null!=i;)["OL","UL"].includes(i.tagName)&&(r+=1),i=i.parentNode;return r<=0?e:e.reduce(((A,e)=>e.insert?e.attributes&&"number"==typeof e.attributes.indent?A.push(e):A.insert(e.insert,{indent:r,...e.attributes||{}}):A),new Xr)}],["ol, ul",function(A,e,t){const n=A;let r="OL"===n.tagName?"ordered":"bullet";const i=n.getAttribute("data-checked");return i&&(r="true"===i?"checked":"unchecked"),Jo(e,"list",r,t)}],["pre",function(A,e,t){const n=t.query("code-block");return Jo(e,"code-block",!n||!("formats"in n)||"function"!=typeof n.formats||n.formats(A,t),t)}],["tr",function(A,e,t){const n="TABLE"===A.parentElement?.tagName?A.parentElement:A.parentElement?.parentElement;return null!=n?Jo(e,"table",Array.from(n.querySelectorAll("tr")).indexOf(A)+1,t):e}],["b",Aa("bold")],["i",Aa("italic")],["strike",Aa("strike")],["style",function(){return new Xr}]],Go=[oo,vo].reduce(((A,e)=>(A[e.keyName]=e,A)),{}),$o=[lo,po,ho,yo,Uo,Fo].reduce(((A,e)=>(A[e.keyName]=e,A)),{});function Jo(A,e,t,n){return n.query(e)?A.reduce(((A,n)=>{if(!n.insert)return A;if(n.attributes&&n.attributes[e])return A.push(n);const r=t?{[e]:t}:{};return A.insert(n.insert,{...r,...n.attributes})}),new Xr):A}function Wo(A,e){let t="";for(let n=A.ops.length-1;n>=0&&t.length<e.length;--n){const e=A.ops[n];if("string"!=typeof e.insert)break;t=e.insert+t}return t.slice(-1*e.length)===e}function Zo(A,e){if(!(A instanceof Element))return!1;const t=e.query(A);return!(t&&t.prototype instanceof qr)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(A.tagName.toLowerCase())}const Xo=new WeakMap;function zo(A){return null!=A&&(Xo.has(A)||("PRE"===A.tagName?Xo.set(A,!0):Xo.set(A,zo(A.parentNode))),Xo.get(A))}function Yo(A,e,t,n,r){return e.nodeType===e.TEXT_NODE?n.reduce(((t,n)=>n(e,t,A)),new Xr):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce(((i,s)=>{let o=Yo(A,s,t,n,r);return s.nodeType===e.ELEMENT_NODE&&(o=t.reduce(((e,t)=>t(s,e,A)),o),o=(r.get(s)||[]).reduce(((e,t)=>t(s,e,A)),o)),i.concat(o)}),new Xr):new Xr}function Aa(A){return(e,t,n)=>Jo(t,A,!0,n)}function ea(A,e,t){if(!Wo(e,"\n")){if(Zo(A,t)&&(A.childNodes.length>0||A instanceof HTMLParagraphElement))return e.insert("\n");if(e.length()>0&&A.nextSibling){let n=A.nextSibling;for(;null!=n;){if(Zo(n,t))return e.insert("\n");const A=t.query(n);if(A&&A.prototype instanceof us)return e.insert("\n");n=n.firstChild}}}return e}function ta(A,e){let t=e;for(let e=A.length-1;e>=0;e-=1){const n=A[e];A[e]={delta:t.transform(n.delta,!0),range:n.range&&na(n.range,t)},t=n.delta.transform(t),0===A[e].delta.length()&&A.splice(e,1)}}function na(A,e){if(!A)return A;const t=e.transformPosition(A.index);return{index:t,length:e.transformPosition(A.index+A.length)-t}}class ra extends Ds{constructor(A,e){super(A,e),A.root.addEventListener("drop",(e=>{e.preventDefault();let t=null;if(document.caretRangeFromPoint)t=document.caretRangeFromPoint(e.clientX,e.clientY);else if(document.caretPositionFromPoint){const A=document.caretPositionFromPoint(e.clientX,e.clientY);t=document.createRange(),t.setStart(A.offsetNode,A.offset),t.setEnd(A.offsetNode,A.offset)}const n=t&&A.selection.normalizeNative(t);if(n){const t=A.selection.normalizedToRange(n);e.dataTransfer?.files&&this.upload(t,e.dataTransfer.files)}}))}upload(A,e){const t=[];Array.from(e).forEach((A=>{A&&this.options.mimetypes?.includes(A.type)&&t.push(A)})),t.length>0&&this.options.handler.call(this,A,t)}}ra.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(A,e){if(!this.quill.scroll.query("image"))return;const t=e.map((A=>new Promise((e=>{const t=new FileReader;t.onload=()=>{e(t.result)},t.readAsDataURL(A)}))));Promise.all(t).then((e=>{const t=e.reduce(((A,e)=>A.insert({image:e})),(new Xr).retain(A.index).delete(A.length));this.quill.updateContents(t,Qs.sources.USER),this.quill.setSelection(A.index+e.length,Qs.sources.SILENT)}))}};const ia=ra,sa=["insertText","insertReplacementText"],oa=/Mac/i.test(navigator.platform);Ws.register({"blots/block":cs,"blots/block/embed":us,"blots/break":rs,"blots/container":to,"blots/cursor":ps,"blots/embed":Ps,"blots/inline":ls,"blots/scroll":class extends Jr{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=cs;static allowedChildren=[cs,us,to];constructor(A,e,t){let{emitter:n}=t;super(A,e),this.emitter=n,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",(A=>this.handleDragStart(A)))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const A=this.batch;this.batch=!1,this.update(A)}emitMount(A){this.emitter.emit(Qs.events.SCROLL_BLOT_MOUNT,A)}emitUnmount(A){this.emitter.emit(Qs.events.SCROLL_BLOT_UNMOUNT,A)}emitEmbedUpdate(A,e){this.emitter.emit(Qs.events.SCROLL_EMBED_UPDATE,A,e)}deleteAt(A,e){const[t,n]=this.line(A),[r]=this.line(A+e);if(super.deleteAt(A,e),null!=r&&t!==r&&n>0){if(t instanceof us||r instanceof us)return void this.optimize();const A=r.children.head instanceof rs?null:r.children.head;t.moveChildren(r,A),t.remove()}this.optimize()}enable(){let A=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",A?"true":"false")}formatAt(A,e,t,n){super.formatAt(A,e,t,n),this.optimize()}insertAt(A,e,t){if(A>=this.length())if(null==t||null==this.scroll.query(e,Cr.BLOCK)){const A=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(A),null==t&&e.endsWith("\n")?A.insertAt(0,e.slice(0,-1),t):A.insertAt(0,e,t)}else{const A=this.scroll.create(e,t);this.appendChild(A)}else super.insertAt(A,e,t);this.optimize()}insertBefore(A,e){if(A.statics.scope===Cr.INLINE_BLOT){const t=this.scroll.create(this.statics.defaultChild.blotName);t.appendChild(A),super.insertBefore(t,e)}else super.insertBefore(A,e)}insertContents(A,e){const t=this.deltaToRenderBlocks(e.concat((new Xr).insert("\n"))),n=t.pop();if(null==n)return;this.batchStart();const r=t.shift();if(r){const e="block"===r.type&&(0===r.delta.length()||!this.descendant(us,A)[0]&&A<this.length()),t="block"===r.type?r.delta:(new Xr).insert({[r.key]:r.value});io(this,A,t);const n="block"===r.type?1:0,i=A+t.length()+n;e&&this.insertAt(i-1,"\n");const s=hs(this.line(A)[0]),o=Xr.AttributeMap.diff(s,r.attributes)||{};Object.keys(o).forEach((A=>{this.formatAt(i-1,1,A,o[A])})),A=i}let[i,s]=this.children.find(A);t.length&&(i&&(i=i.split(s),s=0),t.forEach((A=>{if("block"===A.type)io(this.createBlock(A.attributes,i||void 0),0,A.delta);else{const e=this.create(A.key,A.value);this.insertBefore(e,i||void 0),Object.keys(A.attributes).forEach((t=>{e.format(t,A.attributes[t])}))}}))),"block"===n.type&&n.delta.length()&&io(this,i?i.offset(i.scroll)+s:this.length(),n.delta),this.batchEnd(),this.optimize()}isEnabled(){return"true"===this.domNode.getAttribute("contenteditable")}leaf(A){const e=this.path(A).pop();if(!e)return[null,-1];const[t,n]=e;return t instanceof Nr?[t,n]:[null,-1]}line(A){return A===this.length()?this.line(A-1):this.descendant(no,A)}lines(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;const t=(A,e,n)=>{let r=[],i=n;return A.children.forEachAt(e,n,((A,e,n)=>{no(A)?r.push(A):A instanceof Vr&&(r=r.concat(t(A,e,i))),i-=n})),r};return t(this,A,e)}optimize(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch||(super.optimize(A,e),A.length>0&&this.emitter.emit(Qs.events.SCROLL_OPTIMIZE,A,e))}path(A){return super.path(A).slice(1)}remove(){}update(A){if(this.batch)return void(Array.isArray(A)&&(this.batch=this.batch.concat(A)));let e=Qs.sources.USER;"string"==typeof A&&(e=A),Array.isArray(A)||(A=this.observer.takeRecords()),(A=A.filter((A=>{let{target:e}=A;const t=this.find(e,!0);return t&&!ro(t)}))).length>0&&this.emitter.emit(Qs.events.SCROLL_BEFORE_UPDATE,e,A),super.update(A.concat([])),A.length>0&&this.emitter.emit(Qs.events.SCROLL_UPDATE,e,A)}updateEmbedAt(A,e,t){const[n]=this.descendant((A=>A instanceof us),A);n&&n.statics.blotName===e&&ro(n)&&n.updateContent(t)}handleDragStart(A){A.preventDefault()}deltaToRenderBlocks(A){const e=[];let t=new Xr;return A.forEach((A=>{const n=A?.insert;if(n)if("string"==typeof n){const r=n.split("\n");r.slice(0,-1).forEach((n=>{t.insert(n,A.attributes),e.push({type:"block",delta:t,attributes:A.attributes??{}}),t=new Xr}));const i=r[r.length-1];i&&t.insert(i,A.attributes)}else{const r=Object.keys(n)[0];if(!r)return;this.query(r,Cr.INLINE)?t.push(A):(t.length()&&e.push({type:"block",delta:t,attributes:{}}),t=new Xr,e.push({type:"blockEmbed",key:r,value:n[r],attributes:A.attributes??{}}))}})),t.length()&&e.push({type:"block",delta:t,attributes:{}}),e}createBlock(A,e){let t;const n={};Object.entries(A).forEach((A=>{let[e,r]=A;null!=this.query(e,Cr.BLOCK&Cr.BLOT)?t=e:n[e]=r}));const r=this.create(t||this.statics.defaultChild.blotName,t?A[t]:void 0);this.insertBefore(r,e||void 0);const i=r.length();return Object.entries(n).forEach((A=>{let[e,t]=A;r.formatAt(0,i,e,t)})),r}},"blots/text":is,"modules/clipboard":class extends Ds{static DEFAULTS={matchers:[]};constructor(A,e){super(A,e),this.quill.root.addEventListener("copy",(A=>this.onCaptureCopy(A,!1))),this.quill.root.addEventListener("cut",(A=>this.onCaptureCopy(A,!0))),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],qo.concat(this.options.matchers??[]).forEach((A=>{let[e,t]=A;this.addMatcher(e,t)}))}addMatcher(A,e){this.matchers.push([A,e])}convert(A){let{html:e,text:t}=A,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n[Bo.blotName])return(new Xr).insert(t||"",{[Bo.blotName]:n[Bo.blotName]});if(!e)return(new Xr).insert(t||"",n);const r=this.convertHTML(e);return Wo(r,"\n")&&(null==r.ops[r.ops.length-1].attributes||n.table)?r.compose((new Xr).retain(r.length()-1).delete(1)):r}normalizeHTML(A){(A=>{A.documentElement&&jo.forEach((e=>{e(A)}))})(A)}convertHTML(A){const e=(new DOMParser).parseFromString(A,"text/html");this.normalizeHTML(e);const t=e.body,n=new WeakMap,[r,i]=this.prepareMatching(t,n);return Yo(this.quill.scroll,t,r,i,n)}dangerouslyPasteHTML(A,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ws.sources.API;if("string"==typeof A){const t=this.convert({html:A,text:""});this.quill.setContents(t,e),this.quill.setSelection(0,Ws.sources.SILENT)}else{const n=this.convert({html:e,text:""});this.quill.updateContents((new Xr).retain(A).concat(n),t),this.quill.setSelection(A+n.length(),Ws.sources.SILENT)}}onCaptureCopy(A){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(A.defaultPrevented)return;A.preventDefault();const[t]=this.quill.selection.getRange();if(null==t)return;const{html:n,text:r}=this.onCopy(t,e);A.clipboardData?.setData("text/plain",r),A.clipboardData?.setData("text/html",n),e&&Mo({range:t,quill:this.quill})}normalizeURIList(A){return A.split(/\r?\n/).filter((A=>"#"!==A[0])).join("\n")}onCapturePaste(A){if(A.defaultPrevented||!this.quill.isEnabled())return;A.preventDefault();const e=this.quill.getSelection(!0);if(null==e)return;const t=A.clipboardData?.getData("text/html");let n=A.clipboardData?.getData("text/plain");if(!t&&!n){const e=A.clipboardData?.getData("text/uri-list");e&&(n=this.normalizeURIList(e))}const r=Array.from(A.clipboardData?.files||[]);if(!t&&r.length>0)this.quill.uploader.upload(e,r);else{if(t&&r.length>0){const A=(new DOMParser).parseFromString(t,"text/html");if(1===A.body.childElementCount&&"IMG"===A.body.firstElementChild?.tagName)return void this.quill.uploader.upload(e,r)}this.onPaste(e,{html:t,text:n})}}onCopy(A){const e=this.quill.getText(A);return{html:this.quill.getSemanticHTML(A),text:e}}onPaste(A,e){let{text:t,html:n}=e;const r=this.quill.getFormat(A.index),i=this.convert({text:t,html:n},r);Vo.log("onPaste",i,{text:t,html:n});const s=(new Xr).retain(A.index).delete(A.length).concat(i);this.quill.updateContents(s,Ws.sources.USER),this.quill.setSelection(s.length()-A.length,Ws.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(A,e){const t=[],n=[];return this.matchers.forEach((r=>{const[i,s]=r;switch(i){case Node.TEXT_NODE:n.push(s);break;case Node.ELEMENT_NODE:t.push(s);break;default:Array.from(A.querySelectorAll(i)).forEach((A=>{if(e.has(A)){const t=e.get(A);t?.push(s)}else e.set(A,[s])}))}})),[t,n]}},"modules/history":class extends Ds{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(A,e){super(A,e),this.quill.on(Ws.events.EDITOR_CHANGE,((A,e,t,n)=>{A===Ws.events.SELECTION_CHANGE?e&&n!==Ws.sources.SILENT&&(this.currentRange=e):A===Ws.events.TEXT_CHANGE&&(this.ignoreChange||(this.options.userOnly&&n!==Ws.sources.USER?this.transform(e):this.record(e,t)),this.currentRange=na(this.currentRange,e))})),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",(A=>{"historyUndo"===A.inputType?(this.undo(),A.preventDefault()):"historyRedo"===A.inputType&&(this.redo(),A.preventDefault())}))}change(A,e){if(0===this.stack[A].length)return;const t=this.stack[A].pop();if(!t)return;const n=this.quill.getContents(),r=t.delta.invert(n);this.stack[e].push({delta:r,range:na(t.range,r)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(t.delta,Ws.sources.USER),this.ignoreChange=!1,this.restoreSelection(t)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(A,e){if(0===A.ops.length)return;this.stack.redo=[];let t=A.invert(e),n=this.currentRange;const r=Date.now();if(this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0){const A=this.stack.undo.pop();A&&(t=t.compose(A.delta),n=A.range)}else this.lastRecorded=r;0!==t.length()&&(this.stack.undo.push({delta:t,range:n}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(A){ta(this.stack.undo,A),ta(this.stack.redo,A)}undo(){this.change("undo","redo")}restoreSelection(A){if(A.range)this.quill.setSelection(A.range,Ws.sources.USER);else{const e=function(A,e){const t=e.reduce(((A,e)=>A+(e.delete||0)),0);let n=e.length()-t;return function(A,e){const t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"==typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some((e=>null!=A.query(e,Cr.BLOCK))))}(A,e)&&(n-=1),n}(this.quill.scroll,A.delta);this.quill.setSelection(e,Ws.sources.USER)}}},"modules/keyboard":To,"modules/uploader":ia,"modules/input":class extends Ds{constructor(A,e){super(A,e),A.root.addEventListener("beforeinput",(A=>{this.handleBeforeInput(A)})),/Android/i.test(navigator.userAgent)||A.on(Ws.events.COMPOSITION_BEFORE_START,(()=>{this.handleCompositionStart()}))}deleteRange(A){Mo({range:A,quill:this.quill})}replaceText(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===A.length)return!1;if(e){const t=this.quill.getFormat(A.index,1);this.deleteRange(A),this.quill.updateContents((new Xr).retain(A.index).insert(e,t),Ws.sources.USER)}else this.deleteRange(A);return this.quill.setSelection(A.index+e.length,0,Ws.sources.SILENT),!0}handleBeforeInput(A){if(this.quill.composition.isComposing||A.defaultPrevented||!sa.includes(A.inputType))return;const e=A.getTargetRanges?A.getTargetRanges()[0]:null;if(!e||!0===e.collapsed)return;const t=function(A){return"string"==typeof A.data?A.data:A.dataTransfer?.types.includes("text/plain")?A.dataTransfer.getData("text/plain"):null}(A);if(null==t)return;const n=this.quill.selection.normalizeNative(e),r=n?this.quill.selection.normalizedToRange(n):null;r&&this.replaceText(r,t)&&A.preventDefault()}handleCompositionStart(){const A=this.quill.getSelection();A&&this.replaceText(A)}},"modules/uiNode":class extends Ds{isListening=!1;selectionChangeDeadline=0;constructor(A,e){super(A,e),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(A,e){let{line:t,event:n}=e;if(!(t instanceof kr&&t.uiNode))return!0;const r="rtl"===getComputedStyle(t.domNode).direction;return!!(r&&"ArrowRight"!==n.key||!r&&"ArrowLeft"!==n.key)||(this.quill.setSelection(A.index-1,A.length+(n.shiftKey?1:0),Ws.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",(A=>{!A.defaultPrevented&&(A=>"ArrowLeft"===A.key||"ArrowRight"===A.key||"ArrowUp"===A.key||"ArrowDown"===A.key||"Home"===A.key||!(!oa||"a"!==A.key||!0!==A.ctrlKey))(A)&&this.ensureListeningToSelectionChange()}))}ensureListeningToSelectionChange(){this.selectionChangeDeadline=Date.now()+100,this.isListening||(this.isListening=!0,document.addEventListener("selectionchange",(()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()}),{once:!0}))}handleSelectionChange(){const A=document.getSelection();if(!A)return;const e=A.getRangeAt(0);if(!0!==e.collapsed||0!==e.startOffset)return;const t=this.quill.scroll.find(e.startContainer);if(!(t instanceof kr&&t.uiNode))return;const n=document.createRange();n.setStartAfter(t.uiNode),n.setEndAfter(t.uiNode),A.removeAllRanges(),A.addRange(n)}}});const aa=Ws,la=new class extends Fr{add(A,e){let t=0;if("+1"===e||"-1"===e){const n=this.value(A)||0;t="+1"===e?n+1:n-1}else"number"==typeof e&&(t=e);return 0===t?(this.remove(A),!0):super.add(A,t.toString())}canAdd(A,e){return super.canAdd(A,e)||super.canAdd(A,parseInt(e,10))}value(A){return parseInt(super.value(A),10)||void 0}}("indent","ql-indent",{scope:Cr.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class ca extends to{}ca.blotName="list-container",ca.tagName="OL";class ua extends cs{static create(A){const e=super.create();return e.setAttribute("data-list",A),e}static formats(A){return A.getAttribute("data-list")||void 0}static register(){Ws.register(ca)}constructor(A,e){super(A,e);const t=e.ownerDocument.createElement("span"),n=t=>{if(!A.isEnabled())return;const n=this.statics.formats(e,A);"checked"===n?(this.format("list","unchecked"),t.preventDefault()):"unchecked"===n&&(this.format("list","checked"),t.preventDefault())};t.addEventListener("mousedown",n),t.addEventListener("touchstart",n),this.attachUI(t)}format(A,e){A===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(A,e)}}ua.blotName="list",ua.tagName="LI",ca.allowedChildren=[ua],ua.requiredContainer=ca;const da=class extends ls{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(A){super.optimize(A),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}};class ha extends ls{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(A){const e=super.create(A);return e.setAttribute("href",this.sanitize(A)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(A){return A.getAttribute("href")}static sanitize(A){return ga(A,this.PROTOCOL_WHITELIST)?A:this.SANITIZED_URL}format(A,e){A===this.statics.blotName&&e?this.domNode.setAttribute("href",this.constructor.sanitize(e)):super.format(A,e)}}function ga(A,e){const t=document.createElement("a");t.href=A;const n=t.href.slice(0,t.href.indexOf(":"));return e.indexOf(n)>-1}const pa=["alt","height","width"],fa=["height","width"],Ba=new Fr("code-token","hljs",{scope:Cr.INLINE});class ma extends ls{static formats(A,e){for(;null!=A&&A!==e.domNode;){if(A.classList&&A.classList.contains(Bo.className))return super.formats(A,e);A=A.parentNode}}constructor(A,e,t){super(A,e,t),Ba.add(this.domNode,t)}format(A,e){A!==ma.blotName?super.format(A,e):e?Ba.add(this.domNode,e):(Ba.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Ba.value(this.domNode)||this.unwrap()}}ma.blotName="code-token",ma.className="ql-token";class wa extends Bo{static create(A){const e=super.create(A);return"string"==typeof A&&e.setAttribute("data-language",A),e}static formats(A){return A.getAttribute("data-language")||"plain"}static register(){}format(A,e){A===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(A,e)}replaceWith(A,e){return this.formatAt(0,this.length(),ma.blotName,!1),super.replaceWith(A,e)}}class va extends fo{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(A,e){A===wa.blotName&&(this.forceNext=!0,this.children.forEach((t=>{t.format(A,e)})))}formatAt(A,e,t,n){t===wa.blotName&&(this.forceNext=!0),super.formatAt(A,e,t,n)}highlight(A){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==this.children.head)return;const t=`${Array.from(this.domNode.childNodes).filter((A=>A!==this.uiNode)).map((A=>A.textContent)).join("\n")}\n`,n=wa.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==t){if(t.trim().length>0||null==this.cachedText){const e=this.children.reduce(((A,e)=>A.concat(ds(e,!1))),new Xr),r=A(t,n);e.diff(r).reduce(((A,e)=>{let{retain:t,attributes:n}=e;return t?(n&&Object.keys(n).forEach((e=>{[wa.blotName,ma.blotName].includes(e)&&this.formatAt(A,t,e,n[e])})),A+t):A}),0)}this.cachedText=t,this.forceNext=!1}}html(A,e){const[t]=this.children.find(A);return`<pre data-language="${t?wa.formats(t.domNode):"plain"}">\n${os(this.code(A,e))}\n</pre>`}optimize(A){if(super.optimize(A),null!=this.parent&&null!=this.children.head&&null!=this.uiNode){const A=wa.formats(this.children.head.domNode);A!==this.uiNode.value&&(this.uiNode.value=A)}}}va.allowedChildren=[wa],wa.requiredContainer=va,wa.allowedChildren=[ma,ps,is,rs];class Ca extends Ds{static register(){Ws.register(ma,!0),Ws.register(wa,!0),Ws.register(va,!0)}constructor(A,e){if(super(A,e),null==this.options.hljs)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce(((A,e)=>{let{key:t}=e;return A[t]=!0,A}),{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(Ws.events.SCROLL_BLOT_MOUNT,(A=>{if(!(A instanceof va))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach((A=>{let{key:t,label:n}=A;const r=e.ownerDocument.createElement("option");r.textContent=n,r.setAttribute("value",t),e.appendChild(r)})),e.addEventListener("change",(()=>{A.format(wa.blotName,e.value),this.quill.root.focus(),this.highlight(A,!0)})),null==A.uiNode&&(A.attachUI(e),A.children.head&&(e.value=wa.formats(A.children.head.domNode)))}))}initTimer(){let A=null;this.quill.on(Ws.events.SCROLL_OPTIMIZE,(()=>{A&&clearTimeout(A),A=setTimeout((()=>{this.highlight(),A=null}),this.options.interval)}))}highlight(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.quill.selection.composing)return;this.quill.update(Ws.sources.USER);const t=this.quill.getSelection();(null==A?this.quill.scroll.descendants(va):[A]).forEach((A=>{A.highlight(this.highlightBlot,e)})),this.quill.update(Ws.sources.SILENT),null!=t&&this.quill.setSelection(t,Ws.sources.SILENT)}highlightBlot(A){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain";if(e=this.languages[e]?e:"plain","plain"===e)return os(A).split("\n").reduce(((A,t,n)=>(0!==n&&A.insert("\n",{[Bo.blotName]:e}),A.insert(t))),new Xr);const t=this.quill.root.ownerDocument.createElement("div");return t.classList.add(Bo.className),t.innerHTML=((A,e,t)=>{if("string"==typeof A.versionString){const n=A.versionString.split(".")[0];if(parseInt(n,10)>=11)return A.highlight(t,{language:e}).value}return A.highlight(e,t).value})(this.options.hljs,e,A),Yo(this.quill.scroll,t,[(A,e)=>{const t=Ba.value(A);return t?e.compose((new Xr).retain(e.length(),{[ma.blotName]:t})):e}],[(A,t)=>A.data.split("\n").reduce(((A,t,n)=>(0!==n&&A.insert("\n",{[Bo.blotName]:e}),A.insert(t))),t)],new WeakMap)}}Ca.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class ya extends cs{static blotName="table";static tagName="TD";static create(A){const e=super.create();return A?e.setAttribute("data-row",A):e.setAttribute("data-row",Ea()),e}static formats(A){if(A.hasAttribute("data-row"))return A.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(A,e){A===ya.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(A,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class ba extends to{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&null!=this.next.children.head){const A=this.children.head.formats(),e=this.children.tail.formats(),t=this.next.children.head.formats(),n=this.next.children.tail.formats();return A.table===e.table&&A.table===t.table&&A.table===n.table}return!1}optimize(A){super.optimize(A),this.children.forEach((A=>{if(null==A.next)return;const e=A.formats(),t=A.next.formats();if(e.table!==t.table){const e=this.splitAfter(A);e&&e.optimize(),this.prev&&this.prev.optimize()}}))}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class Qa extends to{static blotName="table-body";static tagName="TBODY"}class Ua extends to{static blotName="table-container";static tagName="TABLE";balanceCells(){const A=this.descendants(ba),e=A.reduce(((A,e)=>Math.max(e.children.length,A)),0);A.forEach((A=>{new Array(e-A.children.length).fill(0).forEach((()=>{let e;null!=A.children.head&&(e=ya.formats(A.children.head.domNode));const t=this.scroll.create(ya.blotName,e);A.appendChild(t),t.optimize()}))}))}cells(A){return this.rows().map((e=>e.children.at(A)))}deleteColumn(A){const[e]=this.descendant(Qa);null!=e&&null!=e.children.head&&e.children.forEach((e=>{const t=e.children.at(A);null!=t&&t.remove()}))}insertColumn(A){const[e]=this.descendant(Qa);null!=e&&null!=e.children.head&&e.children.forEach((e=>{const t=e.children.at(A),n=ya.formats(e.children.head.domNode),r=this.scroll.create(ya.blotName,n);e.insertBefore(r,t)}))}insertRow(A){const[e]=this.descendant(Qa);if(null==e||null==e.children.head)return;const t=Ea(),n=this.scroll.create(ba.blotName);e.children.head.children.forEach((()=>{const A=this.scroll.create(ya.blotName,t);n.appendChild(A)}));const r=e.children.at(A);e.insertBefore(n,r)}rows(){const A=this.children.head;return null==A?[]:A.children.map((A=>A))}}function Ea(){return`row-${Math.random().toString(36).slice(2,6)}`}Ua.allowedChildren=[Qa],Qa.requiredContainer=Ua,Qa.allowedChildren=[ba],ba.requiredContainer=Qa,ba.allowedChildren=[ya],ya.requiredContainer=ba;const Fa=ys("quill:toolbar");class Ia extends Ds{constructor(A,e){if(super(A,e),Array.isArray(this.options.container)){const e=document.createElement("div");e.setAttribute("role","toolbar"),function(A,e){Array.isArray(e[0])||(e=[e]),e.forEach((e=>{const t=document.createElement("span");t.classList.add("ql-formats"),e.forEach((A=>{if("string"==typeof A)xa(t,A);else{const e=Object.keys(A)[0],n=A[e];Array.isArray(n)?function(A,e,t){const n=document.createElement("select");n.classList.add(`ql-${e}`),t.forEach((A=>{const e=document.createElement("option");!1!==A?e.setAttribute("value",String(A)):e.setAttribute("selected","selected"),n.appendChild(e)})),A.appendChild(n)}(t,e,n):xa(t,e,n)}})),A.appendChild(t)}))}(e,this.options.container),A.container?.parentNode?.insertBefore(e,A.container),this.container=e}else"string"==typeof this.options.container?this.container=document.querySelector(this.options.container):this.container=this.options.container;this.container instanceof HTMLElement?(this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach((A=>{const e=this.options.handlers?.[A];e&&this.addHandler(A,e)})),Array.from(this.container.querySelectorAll("button, select")).forEach((A=>{this.attach(A)})),this.quill.on(Ws.events.EDITOR_CHANGE,(()=>{const[A]=this.quill.selection.getRange();this.update(A)}))):Fa.error("Container required for toolbar",this.options)}addHandler(A,e){this.handlers[A]=e}attach(A){let e=Array.from(A.classList).find((A=>0===A.indexOf("ql-")));if(!e)return;if(e=e.slice(3),"BUTTON"===A.tagName&&A.setAttribute("type","button"),null==this.handlers[e]&&null==this.quill.scroll.query(e))return void Fa.warn("ignoring attaching to nonexistent format",e,A);const t="SELECT"===A.tagName?"change":"click";A.addEventListener(t,(t=>{let n;if("SELECT"===A.tagName){if(A.selectedIndex<0)return;const e=A.options[A.selectedIndex];n=!e.hasAttribute("selected")&&(e.value||!1)}else n=!A.classList.contains("ql-active")&&(A.value||!A.hasAttribute("value")),t.preventDefault();this.quill.focus();const[r]=this.quill.selection.getRange();if(null!=this.handlers[e])this.handlers[e].call(this,n);else if(this.quill.scroll.query(e).prototype instanceof qr){if(n=prompt(`Enter ${e}`),!n)return;this.quill.updateContents((new Xr).retain(r.index).delete(r.length).insert({[e]:n}),Ws.sources.USER)}else this.quill.format(e,n,Ws.sources.USER);this.update(r)})),this.controls.push([e,A])}update(A){const e=null==A?{}:this.quill.getFormat(A);this.controls.forEach((t=>{const[n,r]=t;if("SELECT"===r.tagName){let t=null;if(null==A)t=null;else if(null==e[n])t=r.querySelector("option[selected]");else if(!Array.isArray(e[n])){let A=e[n];"string"==typeof A&&(A=A.replace(/"/g,'\\"')),t=r.querySelector(`option[value="${A}"]`)}null==t?(r.value="",r.selectedIndex=-1):t.selected=!0}else if(null==A)r.classList.remove("ql-active"),r.setAttribute("aria-pressed","false");else if(r.hasAttribute("value")){const A=e[n],t=A===r.getAttribute("value")||null!=A&&A.toString()===r.getAttribute("value")||null==A&&!r.getAttribute("value");r.classList.toggle("ql-active",t),r.setAttribute("aria-pressed",t.toString())}else{const A=null!=e[n];r.classList.toggle("ql-active",A),r.setAttribute("aria-pressed",A.toString())}}))}}function xa(A,e,t){const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add(`ql-${e}`),n.setAttribute("aria-pressed","false"),null!=t?(n.value=t,n.setAttribute("aria-label",`${e}: ${t}`)):n.setAttribute("aria-label",e),A.appendChild(n)}Ia.DEFAULTS={},Ia.DEFAULTS={container:null,handlers:{clean(){const A=this.quill.getSelection();if(null!=A)if(0===A.length){const A=this.quill.getFormat();Object.keys(A).forEach((A=>{null!=this.quill.scroll.query(A,Cr.INLINE)&&this.quill.format(A,!1,Ws.sources.USER)}))}else this.quill.removeFormat(A.index,A.length,Ws.sources.USER)},direction(A){const{align:e}=this.quill.getFormat();"rtl"===A&&null==e?this.quill.format("align","right",Ws.sources.USER):A||"right"!==e||this.quill.format("align",!1,Ws.sources.USER),this.quill.format("direction",A,Ws.sources.USER)},indent(A){const e=this.quill.getSelection(),t=this.quill.getFormat(e),n=parseInt(t.indent||0,10);if("+1"===A||"-1"===A){let e="+1"===A?1:-1;"rtl"===t.direction&&(e*=-1),this.quill.format("indent",n+e,Ws.sources.USER)}},link(A){!0===A&&(A=prompt("Enter link URL:")),this.quill.format("link",A,Ws.sources.USER)},list(A){const e=this.quill.getSelection(),t=this.quill.getFormat(e);"check"===A?"checked"===t.list||"unchecked"===t.list?this.quill.format("list",!1,Ws.sources.USER):this.quill.format("list","unchecked",Ws.sources.USER):this.quill.format("list",A,Ws.sources.USER)}}};const Ta='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',La={align:{"":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',center:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',right:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',justify:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>'},background:'<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquote:'<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',bold:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',clean:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',code:Ta,"code-block":Ta,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',3:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',4:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',5:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',6:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'};let Ha=0;function Sa(A,e){A.setAttribute(e,`${!("true"===A.getAttribute(e))}`)}const Na=class{constructor(A){this.select=A,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(()=>{this.togglePicker()})),this.label.addEventListener("keydown",(A=>{switch(A.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),A.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Sa(this.label,"aria-expanded"),Sa(this.options,"aria-hidden")}buildItem(A){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const t=A.getAttribute("value");return t&&e.setAttribute("data-value",t),A.textContent&&e.setAttribute("data-label",A.textContent),e.addEventListener("click",(()=>{this.selectItem(e,!0)})),e.addEventListener("keydown",(A=>{switch(A.key){case"Enter":this.selectItem(e,!0),A.preventDefault();break;case"Escape":this.escape(),A.preventDefault()}})),e}buildLabel(){const A=document.createElement("span");return A.classList.add("ql-picker-label"),A.innerHTML='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',A.tabIndex="0",A.setAttribute("role","button"),A.setAttribute("aria-expanded","false"),this.container.appendChild(A),A}buildOptions(){const A=document.createElement("span");A.classList.add("ql-picker-options"),A.setAttribute("aria-hidden","true"),A.tabIndex="-1",A.id=`ql-picker-options-${Ha}`,Ha+=1,this.label.setAttribute("aria-controls",A.id),this.options=A,Array.from(this.select.options).forEach((e=>{const t=this.buildItem(e);A.appendChild(t),!0===e.selected&&this.selectItem(t)})),this.container.appendChild(A)}buildPicker(){Array.from(this.select.attributes).forEach((A=>{this.container.setAttribute(A.name,A.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout((()=>this.label.focus()),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(A){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=this.container.querySelector(".ql-selected");A!==t&&(null!=t&&t.classList.remove("ql-selected"),null!=A&&(A.classList.add("ql-selected"),this.select.selectedIndex=Array.from(A.parentNode.children).indexOf(A),A.hasAttribute("data-value")?this.label.setAttribute("data-value",A.getAttribute("data-value")):this.label.removeAttribute("data-value"),A.hasAttribute("data-label")?this.label.setAttribute("data-label",A.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let A;if(this.select.selectedIndex>-1){const e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];A=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);const e=null!=A&&A!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}},Oa=class extends Na{constructor(A,e){super(A),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach((A=>{A.classList.add("ql-primary")}))}buildItem(A){const e=super.buildItem(A);return e.style.backgroundColor=A.getAttribute("value")||"",e}selectItem(A,e){super.selectItem(A,e);const t=this.label.querySelector(".ql-color-label"),n=A&&A.getAttribute("data-value")||"";t&&("line"===t.tagName?t.style.stroke=n:t.style.fill=n)}},Ma=class extends Na{constructor(A,e){super(A),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach((A=>{A.innerHTML=e[A.getAttribute("data-value")||""]})),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(A,e){super.selectItem(A,e);const t=A||this.defaultItem;if(null!=t){if(this.label.innerHTML===t.innerHTML)return;this.label.innerHTML=t.innerHTML}}},Da=class{constructor(A,e){this.quill=A,this.boundsContainer=e||document.body,this.root=A.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,(A=>{const{overflowY:e}=getComputedStyle(A,null);return"visible"!==e&&"clip"!==e})(this.quill.root)&&this.quill.root.addEventListener("scroll",(()=>{this.root.style.marginTop=-1*this.quill.root.scrollTop+"px"})),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(A){const e=A.left+A.width/2-this.root.offsetWidth/2,t=A.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${t}px`,this.root.classList.remove("ql-flip");const n=this.boundsContainer.getBoundingClientRect(),r=this.root.getBoundingClientRect();let i=0;if(r.right>n.right&&(i=n.right-r.right,this.root.style.left=`${e+i}px`),r.left<n.left&&(i=n.left-r.left,this.root.style.left=`${e+i}px`),r.bottom>n.bottom){const e=r.bottom-r.top,n=A.bottom-A.top+e;this.root.style.top=t-n+"px",this.root.classList.add("ql-flip")}return i}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},ka=[!1,"center","right","justify"],Pa=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],_a=[!1,"serif","monospace"],Ka=["1","2","3",!1],Ra=["small",!1,"large","huge"];class ja extends Rs{constructor(A,e){super(A,e);const t=e=>{document.body.contains(A.root)?(null==this.tooltip||this.tooltip.root.contains(e.target)||document.activeElement===this.tooltip.textbox||this.quill.hasFocus()||this.tooltip.hide(),null!=this.pickers&&this.pickers.forEach((A=>{A.container.contains(e.target)||A.close()}))):document.body.removeEventListener("click",t)};A.emitter.listenDOM("click",document.body,t)}addModule(A){const e=super.addModule(A);return"toolbar"===A&&this.extendToolbar(e),e}buildButtons(A,e){Array.from(A).forEach((A=>{(A.getAttribute("class")||"").split(/\s+/).forEach((t=>{if(t.startsWith("ql-")&&(t=t.slice(3),null!=e[t]))if("direction"===t)A.innerHTML=e[t][""]+e[t].rtl;else if("string"==typeof e[t])A.innerHTML=e[t];else{const n=A.value||"";null!=n&&e[t][n]&&(A.innerHTML=e[t][n])}}))}))}buildPickers(A,e){this.pickers=Array.from(A).map((A=>{if(A.classList.contains("ql-align")&&(null==A.querySelector("option")&&qa(A,ka),"object"==typeof e.align))return new Ma(A,e.align);if(A.classList.contains("ql-background")||A.classList.contains("ql-color")){const t=A.classList.contains("ql-background")?"background":"color";return null==A.querySelector("option")&&qa(A,Pa,"background"===t?"#ffffff":"#000000"),new Oa(A,e[t])}return null==A.querySelector("option")&&(A.classList.contains("ql-font")?qa(A,_a):A.classList.contains("ql-header")?qa(A,Ka):A.classList.contains("ql-size")&&qa(A,Ra)),new Na(A)})),this.quill.on(Qs.events.EDITOR_CHANGE,(()=>{this.pickers.forEach((A=>{A.update()}))}))}}ja.DEFAULTS=wr({},Rs.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let A=this.container.querySelector("input.ql-image[type=file]");null==A&&(A=document.createElement("input"),A.setAttribute("type","file"),A.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),A.classList.add("ql-image"),A.addEventListener("change",(()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,A.files),A.value=""})),this.container.appendChild(A)),A.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class Va extends Da{constructor(A,e){super(A,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",(A=>{"Enter"===A.key?(this.save(),A.preventDefault()):"Escape"===A.key&&(this.cancel(),A.preventDefault())}))}cancel(){this.hide(),this.restoreFocus()}edit(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null==this.textbox)return;null!=e?this.textbox.value=e:A!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const t=this.quill.getBounds(this.quill.selection.savedRange);null!=t&&this.position(t),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${A}`)||""),this.root.setAttribute("data-mode",A)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:A}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",A,Qs.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",A,Qs.sources.USER)),this.quill.root.scrollTop=e;break}case"video":A=function(A){let e=A.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||A.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=A.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:A}(A);case"formula":{if(!A)break;const e=this.quill.getSelection(!0);if(null!=e){const t=e.index+e.length;this.quill.insertEmbed(t,this.root.getAttribute("data-mode"),A,Qs.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(t+1," ",Qs.sources.USER),this.quill.setSelection(t+2,Qs.sources.USER)}break}}this.textbox.value="",this.hide()}}function qa(A,e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach((e=>{const n=document.createElement("option");e===t?n.setAttribute("selected","selected"):n.setAttribute("value",String(e)),A.appendChild(n)}))}const Ga=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class $a extends Va{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(A,e){super(A,e),this.quill.on(Qs.events.EDITOR_CHANGE,((A,e,t,n)=>{if(A===Qs.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&n===Qs.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const A=this.quill.getLines(e.index,e.length);if(1===A.length){const A=this.quill.getBounds(e);null!=A&&this.position(A)}else{const t=A[A.length-1],n=this.quill.getIndex(t),r=Math.min(t.length()-1,e.index+e.length-n),i=this.quill.getBounds(new Es(n,r));null!=i&&this.position(i)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()}))}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",(()=>{this.root.classList.remove("ql-editing")})),this.quill.on(Qs.events.SCROLL_OPTIMIZE,(()=>{setTimeout((()=>{if(this.root.classList.contains("ql-hidden"))return;const A=this.quill.getSelection();if(null!=A){const e=this.quill.getBounds(A);null!=e&&this.position(e)}}),1)}))}cancel(){this.show()}position(A){const e=super.position(A),t=this.root.querySelector(".ql-tooltip-arrow");return t.style.marginLeft="",0!==e&&(t.style.marginLeft=-1*e-t.offsetWidth/2+"px"),e}}class Ja extends ja{constructor(A,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=Ga),super(A,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(A){this.tooltip=new $a(this.quill,this.options.bounds),null!=A.container&&(this.tooltip.root.appendChild(A.container),this.buildButtons(A.container.querySelectorAll("button"),La),this.buildPickers(A.container.querySelectorAll("select"),La))}}Ja.DEFAULTS=wr({},ja.DEFAULTS,{modules:{toolbar:{handlers:{link(A){A?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Ws.sources.USER)}}}}});const Wa=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Za extends Va{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",(A=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),A.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(A=>{if(null!=this.linkRange){const A=this.linkRange;this.restoreFocus(),this.quill.formatText(A,"link",!1,Qs.sources.USER),delete this.linkRange}A.preventDefault(),this.hide()})),this.quill.on(Qs.events.SELECTION_CHANGE,((A,e,t)=>{if(null!=A){if(0===A.length&&t===Qs.sources.USER){const[e,t]=this.quill.scroll.descendant(ha,A.index);if(null!=e){this.linkRange=new Es(A.index-t,e.length());const n=ha.formats(e.domNode);this.preview.textContent=n,this.preview.setAttribute("href",n),this.show();const r=this.quill.getBounds(this.linkRange);return void(null!=r&&this.position(r))}}else delete this.linkRange;this.hide()}}))}show(){super.show(),this.root.removeAttribute("data-mode")}}class Xa extends ja{constructor(A,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=Wa),super(A,e),this.quill.container.classList.add("ql-snow")}extendToolbar(A){null!=A.container&&(A.container.classList.add("ql-snow"),this.buildButtons(A.container.querySelectorAll("button"),La),this.buildPickers(A.container.querySelectorAll("select"),La),this.tooltip=new Za(this.quill,this.options.bounds),A.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},((e,t)=>{A.handlers.link.call(A,!t.format.link)})))}}Xa.DEFAULTS=wr({},ja.DEFAULTS,{modules:{toolbar:{handlers:{link(A){if(A){const A=this.quill.getSelection();if(null==A||0===A.length)return;let e=this.quill.getText(A);/^\S+@\S+\.\S+$/.test(e)&&0!==e.indexOf("mailto:")&&(e=`mailto:${e}`);const{tooltip:t}=this.quill.theme;t.edit("link",e)}else this.quill.format("link",!1,Ws.sources.USER)}}}}});const za=Xa;aa.register({"attributors/attribute/direction":vo,"attributors/class/align":ao,"attributors/class/background":go,"attributors/class/color":uo,"attributors/class/direction":Co,"attributors/class/font":Qo,"attributors/class/size":Eo,"attributors/style/align":lo,"attributors/style/background":po,"attributors/style/color":ho,"attributors/style/direction":yo,"attributors/style/font":Uo,"attributors/style/size":Fo},!0),aa.register({"formats/align":ao,"formats/direction":Co,"formats/indent":la,"formats/background":po,"formats/color":ho,"formats/font":Qo,"formats/size":Eo,"formats/blockquote":class extends cs{static blotName="blockquote";static tagName="blockquote"},"formats/code-block":Bo,"formats/header":class extends cs{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(A){return this.tagName.indexOf(A.tagName)+1}},"formats/list":ua,"formats/bold":da,"formats/code":mo,"formats/italic":class extends da{static blotName="italic";static tagName=["EM","I"]},"formats/link":ha,"formats/script":class extends ls{static blotName="script";static tagName=["SUB","SUP"];static create(A){return"super"===A?document.createElement("sup"):"sub"===A?document.createElement("sub"):super.create(A)}static formats(A){return"SUB"===A.tagName?"sub":"SUP"===A.tagName?"super":void 0}},"formats/strike":class extends da{static blotName="strike";static tagName=["S","STRIKE"]},"formats/underline":class extends ls{static blotName="underline";static tagName="U"},"formats/formula":class extends Ps{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(A){if(null==window.katex)throw new Error("Formula module requires KaTeX.");const e=super.create(A);return"string"==typeof A&&(window.katex.render(A,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",A)),e}static value(A){return A.getAttribute("data-value")}html(){const{formula:A}=this.value();return`<span>${A}</span>`}},"formats/image":class extends qr{static blotName="image";static tagName="IMG";static create(A){const e=super.create(A);return"string"==typeof A&&e.setAttribute("src",this.sanitize(A)),e}static formats(A){return pa.reduce(((e,t)=>(A.hasAttribute(t)&&(e[t]=A.getAttribute(t)),e)),{})}static match(A){return/\.(jpe?g|gif|png)$/.test(A)||/^data:image\/.+;base64/.test(A)}static sanitize(A){return ga(A,["http","https","data"])?A:"//:0"}static value(A){return A.getAttribute("src")}format(A,e){pa.indexOf(A)>-1?e?this.domNode.setAttribute(A,e):this.domNode.removeAttribute(A):super.format(A,e)}},"formats/video":class extends us{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(A){const e=super.create(A);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(A)),e}static formats(A){return fa.reduce(((e,t)=>(A.hasAttribute(t)&&(e[t]=A.getAttribute(t)),e)),{})}static sanitize(A){return ha.sanitize(A)}static value(A){return A.getAttribute("src")}format(A,e){fa.indexOf(A)>-1?e?this.domNode.setAttribute(A,e):this.domNode.removeAttribute(A):super.format(A,e)}html(){const{video:A}=this.value();return`<a href="${A}">${A}</a>`}},"modules/syntax":Ca,"modules/table":class extends Ds{static register(){Ws.register(ya),Ws.register(ba),Ws.register(Qa),Ws.register(Ua)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Ua).forEach((A=>{A.balanceCells()}))}deleteColumn(){const[A,,e]=this.getTable();null!=e&&(A.deleteColumn(e.cellOffset()),this.quill.update(Ws.sources.USER))}deleteRow(){const[,A]=this.getTable();null!=A&&(A.remove(),this.quill.update(Ws.sources.USER))}deleteTable(){const[A]=this.getTable();if(null==A)return;const e=A.offset();A.remove(),this.quill.update(Ws.sources.USER),this.quill.setSelection(e,Ws.sources.SILENT)}getTable(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(null==A)return[null,null,null,-1];const[e,t]=this.quill.getLine(A.index);if(null==e||e.statics.blotName!==ya.blotName)return[null,null,null,-1];const n=e.parent;return[n.parent.parent,n,e,t]}insertColumn(A){const e=this.quill.getSelection();if(!e)return;const[t,n,r]=this.getTable(e);if(null==r)return;const i=r.cellOffset();t.insertColumn(i+A),this.quill.update(Ws.sources.USER);let s=n.rowOffset();0===A&&(s+=1),this.quill.setSelection(e.index+s,e.length,Ws.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(A){const e=this.quill.getSelection();if(!e)return;const[t,n,r]=this.getTable(e);if(null==r)return;const i=n.rowOffset();t.insertRow(i+A),this.quill.update(Ws.sources.USER),A>0?this.quill.setSelection(e,Ws.sources.SILENT):this.quill.setSelection(e.index+n.children.length,e.length,Ws.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(A,e){const t=this.quill.getSelection();if(null==t)return;const n=new Array(A).fill(0).reduce((A=>{const t=new Array(e).fill("\n").join("");return A.insert(t,{table:Ea()})}),(new Xr).retain(t.index));this.quill.updateContents(n,Ws.sources.USER),this.quill.setSelection(t.index,Ws.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(Ws.events.SCROLL_OPTIMIZE,(A=>{A.some((A=>!!["TD","TR","TBODY","TABLE"].includes(A.target.tagName)&&(this.quill.once(Ws.events.TEXT_CHANGE,((A,e,t)=>{t===Ws.sources.USER&&this.balanceTables()})),!0)))}))}},"modules/toolbar":Ia,"themes/bubble":Ja,"themes/snow":za,"ui/icons":La,"ui/picker":Na,"ui/icon-picker":Ma,"ui/color-picker":Oa,"ui/tooltip":Da},!0);const Ya=aa;class Al{constructor(A,e,t){this.e=A,this.editor=e,this.page=t,this.contentDataManager=new Re(this.editor,this.page),this.init()}init(){this.openContentEditModal(),this.openImageEditModal(),this.openDeleteImageModal(),this.updateCtaButtonImage()}openContentEditModal(){if(this.e.target.closest(".tb-edit-content-icon")){const A=document.createElement("div"),e=document.createElement("div");e.id="editor",e.innerHTML=`${this.getDescription()}`;const t=document.createElement("div");t.classList.add("popup-footer"),t.style.marginBottom="-12px";const n=this.createButton("submit_form","tb-btn-primary","Save"),r=this.createButton("cancel_form","tb-btn-secondary","Cancel");t.appendChild(n),t.appendChild(r),A.appendChild(e),A.appendChild(t);const i=new ce({title:"Edit Content",width:"500px",body:A});i.open(),new Ya("#editor",{modules:{toolbar:[["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}]]},theme:"snow"}),n.addEventListener("click",(()=>{const A=document.querySelector("#editor .ql-editor");this.contentDataManager.saveContentDescription(A.innerHTML),i.close()})),r.addEventListener("click",(()=>{i.close()}))}}openImageEditModal(){if(this.e.target.closest(".tb-edit-image-icon")){const A=document.createElement("div");A.classList.add("tb-modal"),A.style.display="flex",new Ge("content").render(A);const e=document.createElement("input");e.type="file",e.multiple=!0,e.accept="image/jpeg, image/jpg, image/png",e.id="fileInput",e.style.display="none",document.body.appendChild(A),document.body.appendChild(e)}}openDeleteImageModal(){if(this.e.target.closest(".tb-delete-image-icon")){if("Location"===this.page.PageName||"Reception"===this.page.PageName)return;new Se("Are you sure you want to delete this media file?","Delete media",(()=>{return A=this,e=void 0,n=function*(){this.contentDataManager.deleteContentImage()},new((t=void 0)||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}));var A,e,t,n})).render(document.body)}}updateCtaButtonImage(){const A=this.e.target.closest(".edit-cta-image");if(A){const e=A.closest(".img-button-container");globalThis.ctaContainerId=e?e.id:"";const t=document.createElement("div");t.classList.add("tb-modal"),t.style.display="flex",new Ge("cta").render(t);const n=document.createElement("input");n.type="file",n.multiple=!0,n.accept="image/jpeg, image/jpg, image/png",n.id="fileInput",n.style.display="none",document.body.appendChild(t),document.body.appendChild(n)}}getDescription(){if(this.e.target.closest(".content-page-block")){const A=this.editor.Components.getWrapper().find("#contentDescription")[0];if(A)return A.getEl().innerHTML}}createButton(A,e,t){const n=document.createElement("button");return n.id=A,n.classList.add("tb-btn",e),n.innerText=t,n}}class el{constructor(A){this.frameId=A}init(){const A=document.getElementById(this.frameId);A&&(console.log("frameClickListener",A),A.addEventListener("click",(A=>{console.log("frameClickListener",this.frameId)})))}activateEditor(){document.querySelectorAll(".mobile-frame").forEach((A=>{A.classList.remove("active-editor"),A.id.includes(this.frameId)&&A.classList.add("active-editor")}))}}class tl{constructor(A){this.history=[],this.future=[],this.maxHistory=20,this.pageId=A;const e=localStorage.getItem(`data-${this.pageId}`);if(e)try{const A=JSON.parse(e);this.history.push(A),console.log(`Initial state saved. History length: ${this.history.length}`)}catch(A){console.error("Failed to parse initial data:",A)}}saveState(){try{const A=localStorage.getItem(`data-${this.pageId}`);if(A){const e=JSON.parse(A),t=this.history.length?this.history[this.history.length-1]:null;return!(t&&JSON.stringify(t)===JSON.stringify(e)||(this.history.push(e),this.history.length>this.maxHistory&&this.history.shift(),this.future=[],console.log(`State saved. History: ${this.history.length}, Future: ${this.future.length}`),0))}return!1}catch(A){return console.error("Error saving state:",A),!1}}undo(){if(0===this.history.length)return null;const A=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");this.future.push(A);const e=this.history.pop();return localStorage.setItem(`data-${this.pageId}`,JSON.stringify(e)),this.findChanges(A,e)}redo(){if(0===this.future.length)return null;const A=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");this.history.push(A);const e=this.future.pop();return localStorage.setItem(`data-${this.pageId}`,JSON.stringify(e)),this.findChanges(A,e)}findChanges(A,e){var t,n;const r=new Set,i=new Set,s=(null===(t=A.PageMenuStructure)||void 0===t?void 0:t.Rows)||[],o=(null===(n=e.PageMenuStructure)||void 0===n?void 0:n.Rows)||[],a=new Set(s.map((A=>A.Id)));return new Set(o.map((A=>A.Id))),s.forEach((A=>{const e=o.find((e=>e.Id===A.Id));e?JSON.stringify(A)!==JSON.stringify(e)&&i.add(A.Id):i.add(A.Id)})),o.forEach((A=>{a.has(A.Id)||i.add(A.Id)})),s.forEach((A=>{var e,t,n,i;const s=o.find((e=>e.Id===A.Id));if(s){const o=new Set((null===(e=A.Tiles)||void 0===e?void 0:e.map((A=>A.Id)))||[]),a=new Set((null===(t=s.Tiles)||void 0===t?void 0:t.map((A=>A.Id)))||[]);null===(n=A.Tiles)||void 0===n||n.forEach((A=>{a.has(A.Id)||r.add(A.Id)})),null===(i=s.Tiles)||void 0===i||i.forEach((e=>{if(o.has(e.Id)){const t=A.Tiles.find((A=>A.Id===e.Id));JSON.stringify(t)!==JSON.stringify(e)&&r.add(e.Id)}else r.add(e.Id)}))}})),{affectedTiles:Array.from(r),affectedRows:Array.from(i)}}addFreshRow(A,e){var t,n;this.saveState();const r=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),i={Id:A,Tiles:[{Id:e,Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}}]};null===(n=null===(t=r.PageMenuStructure)||void 0===t?void 0:t.Rows)||void 0===n||n.push(i),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(r))}addTile(A,e){var t,n;this.saveState();const r={Id:e,Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}},i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),s=null===(n=null===(t=i.PageMenuStructure)||void 0===t?void 0:t.Rows)||void 0===n?void 0:n.find((e=>e.Id===A));s&&(s.Tiles.push(r),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i)))}removeTile(A,e){var t,n;this.saveState();const r=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),i=r.PageMenuStructure.Rows.find((A=>String(A.Id)===String(e)));i&&(i.Tiles=i.Tiles.filter((e=>e.Id!==A)),0===i.Tiles.length&&(r.PageMenuStructure.Rows=null===(n=null===(t=r.PageMenuStructure)||void 0===t?void 0:t.Rows)||void 0===n?void 0:n.filter((A=>A.Id!==i.Id))),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(r)))}updateTile(A,e,t){var n,r;this.saveState();const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");null===(r=null===(n=null==i?void 0:i.PageMenuStructure)||void 0===n?void 0:n.Rows)||void 0===r||r.forEach((n=>{n.Tiles.forEach((n=>{if(n.Id===A)if(e.includes(".")){const A=e.split(".");let r=n;for(let e=0;e<A.length-1;e++)r=r[A[e]];r[A[A.length-1]]=t}else n[e]=t}))})),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i))}getTile(A,e){var t,n;const r=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(A){const i=null===(n=null===(t=null==r?void 0:r.PageMenuStructure)||void 0===t?void 0:t.Rows)||void 0===n?void 0:n.find((e=>e.Id===A));if(i)return i.Tiles.find((A=>A.Id===e))||null}return null}moveTile(A,e,t,n){var r,i,s,o,a,l,c,u;this.saveState();const d=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),h=null===(r=null==d?void 0:d.PageMenuStructure)||void 0===r?void 0:r.Rows.find((A=>A.Id===e));if(!h)return;const g=null===(i=null==h?void 0:h.Tiles)||void 0===i?void 0:i.findIndex((e=>e.Id===A));if(-1===g)return;const[p]=null===(s=null==h?void 0:h.Tiles)||void 0===s?void 0:s.splice(g,1),f=null===(a=null===(o=d.PageMenuStructure)||void 0===o?void 0:o.Rows)||void 0===a?void 0:a.find((A=>A.Id===t));f?(f.Tiles.splice(n,0,p),3===(null===(l=null==f?void 0:f.Tiles)||void 0===l?void 0:l.length)&&(null==f||f.Tiles.forEach((A=>{A.Align="center"}))),0===(null===(c=null==h?void 0:h.Tiles)||void 0===c?void 0:c.length)&&(d.PageMenuStructure.Rows=null===(u=null==d?void 0:d.PageMenuStructure)||void 0===u?void 0:u.Rows.filter((A=>A.Id!==h.Id))),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(d))):h.Tiles.splice(g,0,p)}}class nl{constructor(A){this.pageId=A||null}updateTile(A,e=!1){console.log("updateTile"),this.rowComponent=A;const t=A.components(),n=t.length;t.forEach((A=>{const t=A.find(".add-button-right")[0];t&&t.addStyle({display:n>=3?"none":"flex"});const r={"justify-content":3===n?"center":"start","align-items":3===n?"center":"start"},i={"text-align":3===n?"center":"left"};this.updateTileHeight(A,n),this.updateAlignment(A,r,i),this.updateTileTitleLength(A,n),e||this.updateTileAttributes(A.getId(),"Align",r["justify-content"])}))}updateTileHeight(A,e){const t=A.find(".template-block")[0];1===e?t.getClasses().includes("first-tile")&&t.addClass("high-priority-template"):t.removeClass("high-priority-template")}updateAlignment(A,e,t){const n=A.find(".template-block")[0],r=A.find(".tile-title-section")[0];n.addStyle(e),r.addStyle(t)}updateTileTitleLength(A,e){var t;const n=A.find(".tile-title")[0];if(n){const A=3===e?11:2===e?15:20,r=this.truncateText(A,(null===(t=n.getAttributes())||void 0===t?void 0:t.title)||n.getEl().innerText);3===e?n.components(this.wrapTileTitle(r)):n.components(r)}}truncateText(A,e){const t=window.innerWidth;return e.length>(t<=280?A:A+4)?e.substring(0,t<=280?A:A+4).trim()+"..":e}wrapTileTitle(A){const e=A.split(" ");return e.length>1?e[0]+"<br>"+e[1]:A.replace("<br>","")}updateTileAttributes(A,e,t){let n=t;"start"===t&&(n="left"),new tl(this.pageId).updateTile(A,e,n)}}class rl{constructor(A,e,t,n){this.event=A,this.editor=e,this.pageId=t,this.frameId=n,this.tileUpdate=new nl(t),globalThis.tileMapper=new tl(this.pageId),this.init()}init(){this.addTileBottom(),this.addTileRight(),this.deleteTile(),this.removeTileIcon(),this.removeTileTile(),this.removeCTa()}addTileBottom(){var A;const e=this.event.target.closest(".action-button.add-button-bottom");if(e){const t=e.closest(".template-wrapper");if(!t)return;let n=t.parentElement,r=null==n?void 0:n.parentElement;if(!n||!r)return;const i=Array.from(r.children).indexOf(n),s=this.editor.Components.getWrapper().find("#"+r.id)[0];if(!s)return;const o=this.editor.Components.addComponent(this.getTileRow());s.append(o,{at:i+1});const a=null===(A=o.find(".template-wrapper")[0])||void 0===A?void 0:A.getId();globalThis.tileMapper.addFreshRow(o.getId(),a)}}addTileRight(){var A;const e=this.event.target.closest(".action-button.add-button-right");if(e){const t=e.closest(".template-wrapper"),n=this.editor.Components.getWrapper().find("#"+(null==t?void 0:t.id))[0];if(!n)return;const r=n.parent();if(r.components().filter((A=>"tile-wrapper"===A.get("type"))).length>=3)return;const i=this.editor.Components.addComponent(this.getTile()),s=n.index();r.append(i,{at:s+1}),globalThis.tileMapper.addTile(null===(A=null==t?void 0:t.parentElement)||void 0===A?void 0:A.id,i.getId()),this.tileUpdate.updateTile(r)}}deleteTile(){const A=this.event.target.closest(".action-button.delete-button");if(A){const e=A.closest(".template-wrapper");if(e){const A=this.editor.Components.getWrapper().find("#"+(null==e?void 0:e.id))[0],t=A.parent();A.remove(),this.tileUpdate.updateTile(t),globalThis.tileMapper.removeTile(A.getId(),t.getId()),this.removeEditor(A.getId())}}}removeTileIcon(){const A=this.event.target.closest(".tile-close-icon");if(A){const e=A.closest(".template-wrapper");if(e){const A=this.editor.Components.getWrapper().find("#"+(null==e?void 0:e.id))[0];if(this.checkTileHasIconOrTitle(A)){globalThis.tileMapper.updateTile(A.getId(),"Icon","");const e=A.find(".tile-icon-section")[0];e&&e.addStyle({display:"none"})}else console.warn("Tile has no icon or title")}}}removeTileTile(){const A=this.event.target.closest(".tile-close-title");if(A){const e=A.closest(".template-wrapper");if(e){const A=this.editor.Components.getWrapper().find("#"+(null==e?void 0:e.id))[0];if(this.checkTileHasIconOrTitle(A)){globalThis.tileMapper.updateTile(A.getId(),"Text","");const e=A.find(".tile-title-section")[0];e&&e.addStyle({display:"none"})}else console.warn("Tile has no icon or title")}}}checkTileHasIconOrTitle(A){const e=A.parent();if(!e)return!1;const t=globalThis.tileMapper.getTile(e.getId(),A.getId());return!!(t&&t.Icon&&t.Text)}removeCTa(){const A=this.event.target.closest(".cta-badge");A&&(new I).removeCta(A)}removeEditor(A){document.querySelectorAll(".mobile-frame").forEach((e=>{var t,n,r;const i=e.querySelector(`#${A}`);if(i&&console.log(i),e.id.includes(this.frameId)){let A=e.nextElementSibling;for(;A;){const e=A;if(A=A.nextElementSibling,e){const A=document.querySelector(".editor-thumbs-list").querySelector(`div[id="${e.id}"]`);A&&(null===(r=null===(n=null===(t=A.parentElement)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.parentElement)||void 0===r||r.remove()),e.remove(),(new sl).activateNavigators()}}}}))}getTileRow(){const A=this.getTile();return`<div class="container-row" ${f} id="${v(8)}">${A}</div>`}getTile(){return`\n      <div ${g} class="template-wrapper" id="${v(8)}">\n        <div ${h} class="template-block" style="background-color: transparent; color: #333333; justify-content: left">\n            <div ${p} id="igtdq" data-gjs-type="default" class="tile-icon-section">\n              <span ${p} id="is1dw" data-gjs-type="text" class="tile-close-icon top-right selected-tile-title">×</span>\n              <span ${p} id="ic26t" data-gjs-type="text" class="tile-icon">Title</span>\n            </div>\n            <div ${p} id="igtdq" data-gjs-type="default" class="tile-title-section">\n              <span ${p} id="is1dw" data-gjs-type="text" class="tile-close-icon top-right selected-tile-title">×</span>\n              <span ${p} style="display: block" id="ic26t" data-gjs-type="text" is-hidden="false" title="Title" class="tile-title">Title</span>\n            </div>\n        </div>\n        <button ${p} id="i9sxl" data-gjs-type="default" title="Delete template" class="action-button delete-button">&minus;</button>\n        <button ${p} id="ifvvi" data-gjs-type="default" title="Add template right" class="action-button add-button-right">+</button>\n        <button ${p} id="i4ubt" data-gjs-type="default" title="Delete template" class="action-button add-button-bottom">&plus;</button>\n        <svg ${p} class="tile-open-menu" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 27 27">\n          <g ${p} id="Group_2383" data-name="Group 2383" transform="translate(-921 -417.999)">\n            <g ${p} id="Group_2382" data-name="Group 2382" transform="translate(921 418)">\n              <circle ${p} id="Ellipse_534" data-name="Ellipse 534" cx="13.5" cy="13.5" r="13.5" transform="translate(0 -0.001)" fill="#6a747f"/>\n            </g>\n            <path ${p} id="Path_2320" data-name="Path 2320" d="M1.7,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,1.7,0ZM7.346,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,7.346,0ZM13,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,13,0Z" transform="translate(927 430)" fill="#fff"/>\n          </g>\n        </svg>\n      </div>\n    `}}var il=function(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))};class sl{constructor(){this.handleComponentAdd=A=>{var e;const t=A.parent();t&&(null===(e=t.getEl())||void 0===e?void 0:e.classList.contains("container-row"))&&3===t.components().filter((A=>"tile-wrapper"===A.get("type"))).length&&console.log("more than 3")},this.appVersionManager=new VA,this.toolboxService=new s,this.themeManager=new JA}init(A,e,t,n){this.editor=A,this.pageData=e,this.pageId=e.PageId,this.frameId=t,this.isHome=n,new el(this.frameId),this.onDragAndDrop(),this.onSelected(),this.onComponentUpdate(),this.onLoad()}onLoad(){void 0!==this.editor&&this.editor.on("load",(()=>{const A=this.editor.getWrapper();A?(A.view.el.addEventListener("click",(A=>{const e=A.target;e.closest(".menu-container")||e.closest(".menu-category")||e.closest(".sub-menu-header")?A.stopPropagation():(this.clearAllMenuContainers(),this.tileManager=new rl(A,this.editor,this.pageId,this.frameId),globalThis.activeEditor=this.editor,globalThis.currentPageId=this.pageId,globalThis.pageData=this.pageData,(new pt).unDoReDo(),new Al(A,this.editor,this.pageData),this.activateEditor(this.frameId))})),A.view.el.addEventListener("mouseover",(A=>{const e=A.target;if(e.closest(".tile-open-menu")){const A=e.closest(".tile-open-menu"),t=A.closest(".template-wrapper");this.clearAllMenuContainers();const n=document.getElementById(`${this.frameId}-frame`),r=null==n?void 0:n.querySelector("iframe"),i=null==r?void 0:r.getBoundingClientRect(),s=new Ee(t,n),o=A.getBoundingClientRect();s.render(o,i)}}))):console.error("Wrapper not found!"),new d(this.frameId,this.pageId,this.editor,this.pageData,this.isHome),this.frameEventListener(),this.activateNavigators()}))}clearAllMenuContainers(){document.querySelectorAll(".menu-container").forEach((A=>{A.remove()}))}onComponentUpdate(){this.editor.on("component:update",(A=>{window.dispatchEvent(new CustomEvent("pageChanged",{detail:{pageId:this.pageId}}))}))}onDragAndDrop(){let A,e;const t=new tl(this.pageId),n=new Q(this.pageId);this.editor.on("component:drag:start",(e=>{A=e.parent})),this.editor.on("component:drag:end",(r=>{e=r.parent;const i=e.getEl();if(i&&i.classList.contains("container-row")){r.parent.components().filter((A=>"tile-wrapper"===A.get("type"))).length>3&&(r.target.remove(),this.editor.UndoManager.undo());const n=!0,i=new nl;i.updateTile(e,n),i.updateTile(A,n),t.moveTile(r.target.getId(),A.getId(),e.getId(),r.index),this.onTileUpdate(e)}else i&&i.classList.contains("content-page-wrapper")?n.moveContentRow(r.target.getId(),r.index):i&&i.classList.contains("cta-button-container")&&n.moveCta(r.target.getId(),r.index)}))}onSelected(){this.editor.on("component:selected",(A=>{globalThis.selectedComponent=A,globalThis.tileMapper=new tl(this.pageId),globalThis.frameId=this.frameId,this.setTileProperties(),this.setCtaProperties(),this.createChildEditor()})),this.editor.on("component:deselected",(()=>{globalThis.selectedComponent=null}))}onTileUpdate(A){var e;A&&(null===(e=A.getEl())||void 0===e?void 0:e.classList.contains("container-row"))&&(this.editor.off("component:add",this.handleComponentAdd),this.editor.on("component:add",this.handleComponentAdd))}frameEventListener(){document.querySelectorAll(".mobile-frame").forEach((A=>{A.id.includes(this.frameId)&&A.addEventListener("click",(A=>{globalThis.activeEditor=this.editor,globalThis.currentPageId=this.pageId,globalThis.pageData=this.pageData,globalThis.frameId=this.frameId,this.activateEditor(this.frameId),this.clearAllMenuContainers()}))}))}setPageFocus(A,e,t,n){document.querySelectorAll(".mobile-frame").forEach((r=>{r.id.includes(e)&&(globalThis.activeEditor=A,globalThis.currentPageId=t,globalThis.pageData=n,globalThis.frameId=e,this.activateEditor(e),this.clearAllMenuContainers())}))}activateEditor(A){document.querySelectorAll(".mobile-frame").forEach((e=>{e.classList.remove("active-editor"),e.id.includes(A)&&(e.classList.add("active-editor"),this.activateMiniatureFrame(e.id),this.toggleSidebar())}))}activateMiniatureFrame(A){var e,t;const n=document.querySelector(".editor-thumbs-list");n.querySelectorAll(".tb-highlighter").forEach((A=>{A.style.display="none"}));const r=n.querySelector(`div[id="${A}"]`);if(r){const A=null===(t=null===(e=r.parentElement)||void 0===e?void 0:e.parentElement)||void 0===t?void 0:t.querySelector(".tb-highlighter");A&&(A.style.display="block")}}toggleSidebar(){return il(this,void 0,void 0,(function*(){var A,e,t;const n=document.getElementById("tools-section"),r=document.querySelector("#mapping-section");if(n.style.display="block",r.style.display="none","Content"===(null===(A=this.pageData)||void 0===A?void 0:A.PageType)||"Location"===(null===(e=this.pageData)||void 0===e?void 0:e.PageType)||"Reception"===(null===(t=this.pageData)||void 0===t?void 0:t.PageType))new ye(this.pageData);else{const A=document.getElementById("menu-page-section"),e=document.getElementById("content-page-section");A&&(A.style.display="block"),e&&e.remove(),(new Be).render(A)}}))}setTileProperties(){const A=globalThis.selectedComponent,e=A.parent(),t=e.parent(),n=globalThis.tileMapper.getTile(t.getId(),e.getId());A&&n&&(this.tileProperties=new _A(A,n),this.tileProperties.setTileAttributes())}setCtaProperties(){const A=globalThis.selectedComponent,e=new Q(this.pageId).getContentCta(A.getId());e&&new E(A,e).setctaAttributes()}createChildEditor(){return il(this,void 0,void 0,(function*(){var A,e,t,n;console.log("createChildEditor");const r=globalThis.selectedComponent.parent(),i=r.parent(),s=globalThis.tileMapper.getTile(i.getId(),r.getId());if(this.removeOtherEditors(),null===(A=null==s?void 0:s.Action)||void 0===A?void 0:A.ObjectId){if("Phone"===(null===(e=null==s?void 0:s.Action)||void 0===e?void 0:e.ObjectType)||"Email"===(null===(t=null==s?void 0:s.Action)||void 0===t?void 0:t.ObjectType))return;const A=s.Action.ObjectId,r=JSON.parse(localStorage.getItem(`data-${A}`)||"{}");let i;i=Object.keys(r).length>0?r:null===(n=this.appVersionManager.getPages())||void 0===n?void 0:n.find((e=>e.PageId===A)),i&&new re(A,i).init(s)}this.activateNavigators()}))}removeOtherEditors(){document.querySelectorAll(".mobile-frame").forEach((A=>{var e,t,n;if(A.id.includes(globalThis.frameId)){let r=A.nextElementSibling;for(;r;){const A=r;if(r=r.nextElementSibling,A){const r=document.querySelector(".editor-thumbs-list").querySelector(`div[id="${A.id}"]`);r&&(null===(n=null===(t=null===(e=r.parentElement)||void 0===e?void 0:e.parentElement)||void 0===t?void 0:t.parentElement)||void 0===n||n.remove()),A.remove()}}}}))}activateNavigators(){const A=document.querySelector(".page-navigator-left"),e=document.querySelector(".page-navigator-right"),t=document.getElementById("child-container"),n=document.getElementById("scroll-left"),r=document.getElementById("scroll-right"),i=document.querySelectorAll("#child-container .mobile-frame"),s=document.querySelector(".menu-container"),o=s?s.clientWidth:0;Array.from(i).reduce(((A,e)=>A+e.clientWidth),0)+o>t.clientWidth?(A.style.display="flex",e.style.display="flex"):(A.style.display="none",e.style.display="none");const a=(window.innerWidth,i.length,"center");t.style.setProperty("justify-content",a);const l=A=>{const e=A+o;t.scrollTo({left:t.scrollLeft+e,behavior:"smooth"})};n.addEventListener("click",(()=>l(-200))),r.addEventListener("click",(()=>{l(200)}));const c=()=>{const{scrollLeft:A,scrollWidth:e,clientWidth:i}=t;n.style.display=A>0?"flex":"none",r.style.display=A+i<e?"flex":"none"};return c(),t.addEventListener("scroll",c),{updateButtonVisibility:c,scrollBy:l}}}class ol{constructor(A,e){this.title=e||"Page Name",this.id=A,this.container=document.createElement("div"),this.editor=new hl,this.editorWidth=globalThis.deviceWidth,this.init()}init(){this.container.classList.add("app-bar");const A=document.createElement("div");A.innerHTML='\n        <svg class="content-back-button" xmlns="http://www.w3.org/2000/svg" data-name="Group 14" width="47" height="47" viewBox="0 0 47 47">\n            <g id="Ellipse_6" data-name="Ellipse 6" fill="none" stroke="#262626" stroke-width="1">\n            <circle cx="23.5" cy="23.5" r="23.5" stroke="none"></circle>\n            <circle cx="23.5" cy="23.5" r="23" fill="none"></circle>\n            </g>\n            <path id="Icon_ionic-ios-arrow-round-up" data-name="Icon ionic-ios-arrow-round-up" d="M13.242,7.334a.919.919,0,0,1-1.294.007L7.667,3.073V19.336a.914.914,0,0,1-1.828,0V3.073L1.557,7.348A.925.925,0,0,1,.263,7.341.91.91,0,0,1,.27,6.054L6.106.26h0A1.026,1.026,0,0,1,6.394.07.872.872,0,0,1,6.746,0a.916.916,0,0,1,.64.26l5.836,5.794A.9.9,0,0,1,13.242,7.334Z" transform="translate(13 30.501) rotate(-90)" fill="#262626"></path>\n        </svg>\n        ';const e=A.firstElementChild,t=document.querySelector(".editor-thumbs-list");null==e||e.addEventListener("click",(A=>{var e,n,r,i,s,o;A.preventDefault();const a=document.querySelector(`#${this.id}-frame`);if(a){let A=a.nextElementSibling;for(;A;){const i=A;A=A.nextElementSibling;const s=t.querySelector(`div[id="${i.id}"]`);s&&(null===(r=null===(n=null===(e=s.parentElement)||void 0===e?void 0:e.parentElement)||void 0===n?void 0:n.parentElement)||void 0===r||r.remove()),i.remove()}const l=t.querySelector(`div[id="${a.id}"]`);l&&(null===(o=null===(s=null===(i=l.parentElement)||void 0===i?void 0:i.parentElement)||void 0===s?void 0:s.parentElement)||void 0===o||o.remove()),a.remove(),(new sl).activateNavigators()}}));const n=document.createElement("div");n.classList.add("appbar-title-container");const r=document.createElement("h1");r.className="title";const i=this.editorWidth?this.editorWidth<=350?16:24:16,s=this.title.length>i?this.title.substring(0,i)+"...":this.title;r.setAttribute("title",this.title||"Page Name"),r.textContent=s||"Page Name";const o=document.createElement("div");o.classList.add("icon-container");const a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.id="edit_page_title",a.setAttribute("width","14px"),a.setAttribute("height","14px"),a.setAttribute("viewBox","0 0 24 24"),a.setAttribute("fill","none"),a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a.innerHTML='\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M18.4324 4C18.2266 4 18.0227 4.04055 17.8325 4.11933C17.6423 4.19811 17.4695 4.31358 17.3239 4.45914L5.25659 16.5265L4.42524 19.5748L7.47353 18.7434L19.5409 6.67608C19.6864 6.53051 19.8019 6.3577 19.8807 6.16751C19.9595 5.97732 20 5.77348 20 5.56761C20 5.36175 19.9595 5.1579 19.8807 4.96771C19.8019 4.77752 19.6864 4.60471 19.5409 4.45914C19.3953 4.31358 19.2225 4.19811 19.0323 4.11933C18.8421 4.04055 18.6383 4 18.4324 4ZM17.0671 2.27157C17.5 2.09228 17.9639 2 18.4324 2C18.9009 2 19.3648 2.09228 19.7977 2.27157C20.2305 2.45086 20.6238 2.71365 20.9551 3.04493C21.2864 3.37621 21.5492 3.7695 21.7285 4.20235C21.9077 4.63519 22 5.09911 22 5.56761C22 6.03611 21.9077 6.50003 21.7285 6.93288C21.5492 7.36572 21.2864 7.75901 20.9551 8.09029L8.69996 20.3454C8.57691 20.4685 8.42387 20.5573 8.25597 20.6031L3.26314 21.9648C2.91693 22.0592 2.54667 21.9609 2.29292 21.7071C2.03917 21.4534 1.94084 21.0831 2.03526 20.7369L3.39694 15.7441C3.44273 15.5762 3.53154 15.4231 3.6546 15.3001L15.9097 3.04493C16.241 2.71365 16.6343 2.45086 17.0671 2.27157Z" fill="#5068a8"></path>\n        ';const l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.id="save_page_title",l.style.display="none",l.setAttribute("width","24px"),l.setAttribute("height","24px"),l.setAttribute("viewBox","0 0 48 48"),l.setAttribute("fill","none"),l.innerHTML='\n            <rect width="48" height="48" fill="white" fill-opacity="0.01"/>\n            <path d="M43 11L16.875 37L5 25.1818" stroke="#5068a8" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>\n        ',o.appendChild(a),o.appendChild(l),a.addEventListener("click",(()=>{r.contentEditable="true",r.textContent=r.title,r.focus();const A=document.createRange();A.selectNodeContents(r),A.collapse(!1);const e=window.getSelection();null==e||e.removeAllRanges(),null==e||e.addRange(A),r.style.outline="none",r.style.whiteSpace="nowrap",r.style.overflow="hidden",r.style.textOverflow="clip",a.style.display="none",l.style.display="block",n.style.borderWidth="1px"})),r.addEventListener("input",(A=>{r.title=r.textContent||""})),l.addEventListener("click",(A=>{A.preventDefault(),(new VA).updatePageTitle(r.title),this.resetTitle(r,a,l,n)})),e&&this.container.appendChild(e),n.appendChild(r),n.appendChild(a),n.appendChild(l),this.container.appendChild(n)}resetTitle(A,e,t,n){A.contentEditable="false",e.style.display="block",t.style.display="none",n.style.removeProperty("border-width"),A.style.whiteSpace="",A.style.overflow="",A.style.textOverflow="";const r=this.editorWidth?this.editorWidth<=350?16:24:16;A.textContent&&A.textContent.length>r&&(A.textContent=A.textContent.substring(0,r)+"...")}render(A){A.appendChild(this.container)}}class al{constructor(A,e=!1,t,n){this.container=document.createElement("div"),this.id=A,this.isHome=e,this.pageName=n,this.pageData=t,this.init()}init(){this.container.className="mobile-frame",this.container.id=`${this.id}-frame`,this.container.setAttribute("data-pageid","1");const A=new a,e=new l,t=new ol(this.id,this.pageName);A.render(this.container),this.isHome?e.render(this.container):t.render(this.container);const n=document.createElement("div");n.id=this.id,this.container.appendChild(n)}render(A){A.appendChild(this.container)}}class ll{constructor(A){this.pageId=A,this.container=document.createElement("div"),this.init()}init(){this.container.style.justifyContent="center",this.container.className="frame-list",this.container.id="child-container",new al(`${this.pageId}`,!0).render(this.container)}render(A){A.appendChild(this.container)}}class cl{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.style.display="none",this.container.className="navigator page-navigator-left",this.container.innerHTML='<span id="scroll-left"><i class="fa fa-arrow-left-long"></i></span>',this.container.addEventListener("click",(A=>{}))}render(A){A.appendChild(this.container)}}class ul{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.style.display="none",this.container.className="navigator page-navigator-right",this.container.innerHTML='<span id="scroll-right"><i class="fa fa-arrow-right-long"></i></span>',this.container.addEventListener("click",(A=>{}))}render(A){A.appendChild(this.container)}}var dl=function(A,e,t,n){return new(t||(t=Promise))((function(r,i){function s(A){try{a(n.next(A))}catch(A){i(A)}}function o(A){try{a(n.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(s,o)}a((n=n.apply(A,e||[])).next())}))};class hl{constructor(){this.editors=[],this.config=e.getInstance(),this.organisationLogo=this.config.organisationLogo,this.appVersion=new VA,this.themeManager=new JA,this.toolboxService=new s,this.editorEvents=new sl,this.jsonToGrapes=new XA(this)}init(){return dl(this,void 0,void 0,(function*(){const A=yield this.appVersion.getActiveVersion();this.homepage=null==A?void 0:A.Pages.find((A=>"Home"===A.PageName)),document.getElementById("main-content").innerHTML="",this.setUpEditorFrame(),this.setUpEditor()}))}setUpEditorFrame(){const A=new cl,e=new ul,t=new ll("gjs-0"),n=document.createElement("div");n.style.justifyContent="center",n.style.display="flex",n.style.flexDirection="row",n.style.alignItems="center",n.style.gap="0.4rem",n.className="editor-thumbs-list",n.id="editor-thumbs-list";const r=document.getElementById("main-content"),i=document.createElement("div");i.className="editor-main-section",i.style.display="flex",i.style.justifyContent="center",i.style.alignItems="center",i.style.flexDirection="column",t.render(i),i.appendChild(n),A.render(r),r.appendChild(i),e.render(r),this.setClientWidth(t.container)}setClientWidth(A){const e=A.querySelector(".mobile-frame");e&&(globalThis.deviceWidth=e.clientWidth,globalThis.deviceHeight=e.clientHeight)}setUpEditor(){return dl(this,void 0,void 0,(function*(){const A=this.initializeGrapesEditor("gjs-0");this.finalizeEditorSetup(A),yield this.loadHomePage(A),this.activateHomeEditor("gjs-0"),this.themeManager.applyTheme(this.themeManager.currentTheme)}))}loadHomePage(A){return dl(this,void 0,void 0,(function*(){var e;const t=new XA(this.homepage).generateHTML();A.setComponents(t),this.editorEvents.init(A,this.homepage,"gjs-0",!0),localStorage.setItem(`data-${null===(e=this.homepage)||void 0===e?void 0:e.PageId}`,JSON.stringify(this.homepage)),new WA(this.homepage.PageId)}))}initializeGrapesEditor(A){return grapesjs.init({container:`#${A}`,fromElement:!0,height:"100%",width:"auto",canvas:{styles:["/Resources/UCGrapes1/src/css/toolbox.css","/DVelop/Bootstrap/Shared/fontawesome_vlatest/css/all.min.css?202521714271081","https://fonts.googleapis.com/css2?family=Inter:opsz@14..32&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"]},baseCss:" ",dragMode:"normal",panels:{defaults:[]},sidebarManager:!1,storageManager:!1,modal:!1,commands:!1,hoverable:!1,highlightable:!1,selectable:!1,richTextEditor:{}})}finalizeEditorSetup(A){A.getWrapper().set({selectable:!1,droppable:!1,draggable:!1,hoverable:!1});const e=A.Canvas.getElement();e&&e.style.setProperty("height","calc(100% - 100px)","important");const t=A.Canvas.getBody();t&&t.style.setProperty("background-color","#EFEEEC","important")}activateHomeEditor(A){document.getElementById(`${A}-frame`).classList.add("active-editor")}}const gl=class{constructor(){this.config=e.getInstance(),this.toolboxManager=new pt,this.editor=new hl,this.config.isInitialized||console.error("ToolboxApp created before AppConfig was initialized!"),this.initialiseLocalisation(),this.initialise()}initialise(){this.toolboxManager.setUpNavBar(),this.toolboxManager.setUpSideBar(),this.toolboxManager.unDoReDo(),this.editor.init()}initialiseLocalisation(){"Dutch"==this.config.currentLanguage?PA.locale="nl":PA.locale="en"}};window.App=class{constructor(A,t,n,r,i,s,o,a,l){e.getInstance().init(A,t,n,r,i,s,o,a,l),this.toolboxApp=new gl}}})()})();
>>>>>>> e5a9cf0627c1a1b8dcf04d5d28d071916cce1a77
